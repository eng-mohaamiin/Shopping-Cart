(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function gj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var g0={exports:{}},Ad={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function yj(){if(h2)return Ad;h2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Ad.Fragment=e,Ad.jsx=t,Ad.jsxs=t,Ad}var f2;function vj(){return f2||(f2=1,g0.exports=yj()),g0.exports}var m=vj(),y0={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2;function xj(){if(m2)return Oe;m2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function D(q,ce,ge){this.props=q,this.context=ce,this.refs=C,this.updater=ge||_}D.prototype.isReactComponent={},D.prototype.setState=function(q,ce){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ce,"setState")},D.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function P(){}P.prototype=D.prototype;function I(q,ce,ge){this.props=q,this.context=ce,this.refs=C,this.updater=ge||_}var N=I.prototype=new P;N.constructor=I,T(N,D.prototype),N.isPureReactComponent=!0;var z=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function j(q,ce,ge,pe,Ce,Le){return ge=Le.ref,{$$typeof:n,type:q,key:ce,ref:ge!==void 0?ge:null,props:Le}}function S(q,ce){return j(q.type,ce,void 0,void 0,void 0,q.props)}function R(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function V(q){var ce={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ge){return ce[ge]})}var L=/\/+/g;function B(q,ce){return typeof q=="object"&&q!==null&&q.key!=null?V(""+q.key):ce.toString(36)}function O(){}function me(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(O,O):(q.status="pending",q.then(function(ce){q.status==="pending"&&(q.status="fulfilled",q.value=ce)},function(ce){q.status==="pending"&&(q.status="rejected",q.reason=ce)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ve(q,ce,ge,pe,Ce){var Le=typeof q;(Le==="undefined"||Le==="boolean")&&(q=null);var _e=!1;if(q===null)_e=!0;else switch(Le){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(q.$$typeof){case n:case e:_e=!0;break;case p:return _e=q._init,ve(_e(q._payload),ce,ge,pe,Ce)}}if(_e)return Ce=Ce(q),_e=pe===""?"."+B(q,0):pe,z(Ce)?(ge="",_e!=null&&(ge=_e.replace(L,"$&/")+"/"),ve(Ce,ce,ge,"",function(Tt){return Tt})):Ce!=null&&(R(Ce)&&(Ce=S(Ce,ge+(Ce.key==null||q&&q.key===Ce.key?"":(""+Ce.key).replace(L,"$&/")+"/")+_e)),ce.push(Ce)),1;_e=0;var Ge=pe===""?".":pe+":";if(z(q))for(var Be=0;Be<q.length;Be++)pe=q[Be],Le=Ge+B(pe,Be),_e+=ve(pe,ce,ge,Le,Ce);else if(Be=x(q),typeof Be=="function")for(q=Be.call(q),Be=0;!(pe=q.next()).done;)pe=pe.value,Le=Ge+B(pe,Be++),_e+=ve(pe,ce,ge,Le,Ce);else if(Le==="object"){if(typeof q.then=="function")return ve(me(q),ce,ge,pe,Ce);throw ce=String(q),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return _e}function $(q,ce,ge){if(q==null)return q;var pe=[],Ce=0;return ve(q,pe,"","",function(Le){return ce.call(ge,Le,Ce++)}),pe}function se(q){if(q._status===-1){var ce=q._result;ce=ce(),ce.then(function(ge){(q._status===0||q._status===-1)&&(q._status=1,q._result=ge)},function(ge){(q._status===0||q._status===-1)&&(q._status=2,q._result=ge)}),q._status===-1&&(q._status=0,q._result=ce)}if(q._status===1)return q._result.default;throw q._result}var ae=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function xe(){}return Oe.Children={map:$,forEach:function(q,ce,ge){$(q,function(){ce.apply(this,arguments)},ge)},count:function(q){var ce=0;return $(q,function(){ce++}),ce},toArray:function(q){return $(q,function(ce){return ce})||[]},only:function(q){if(!R(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Oe.Component=D,Oe.Fragment=t,Oe.Profiler=r,Oe.PureComponent=I,Oe.StrictMode=i,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return F.H.useMemoCache(q)}},Oe.cache=function(q){return function(){return q.apply(null,arguments)}},Oe.cloneElement=function(q,ce,ge){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var pe=T({},q.props),Ce=q.key,Le=void 0;if(ce!=null)for(_e in ce.ref!==void 0&&(Le=void 0),ce.key!==void 0&&(Ce=""+ce.key),ce)!H.call(ce,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&ce.ref===void 0||(pe[_e]=ce[_e]);var _e=arguments.length-2;if(_e===1)pe.children=ge;else if(1<_e){for(var Ge=Array(_e),Be=0;Be<_e;Be++)Ge[Be]=arguments[Be+2];pe.children=Ge}return j(q.type,Ce,void 0,void 0,Le,pe)},Oe.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Oe.createElement=function(q,ce,ge){var pe,Ce={},Le=null;if(ce!=null)for(pe in ce.key!==void 0&&(Le=""+ce.key),ce)H.call(ce,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ce[pe]=ce[pe]);var _e=arguments.length-2;if(_e===1)Ce.children=ge;else if(1<_e){for(var Ge=Array(_e),Be=0;Be<_e;Be++)Ge[Be]=arguments[Be+2];Ce.children=Ge}if(q&&q.defaultProps)for(pe in _e=q.defaultProps,_e)Ce[pe]===void 0&&(Ce[pe]=_e[pe]);return j(q,Le,void 0,void 0,null,Ce)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(q){return{$$typeof:u,render:q}},Oe.isValidElement=R,Oe.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:se}},Oe.memo=function(q,ce){return{$$typeof:f,type:q,compare:ce===void 0?null:ce}},Oe.startTransition=function(q){var ce=F.T,ge={};F.T=ge;try{var pe=q(),Ce=F.S;Ce!==null&&Ce(ge,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(xe,ae)}catch(Le){ae(Le)}finally{F.T=ce}},Oe.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Oe.use=function(q){return F.H.use(q)},Oe.useActionState=function(q,ce,ge){return F.H.useActionState(q,ce,ge)},Oe.useCallback=function(q,ce){return F.H.useCallback(q,ce)},Oe.useContext=function(q){return F.H.useContext(q)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(q,ce){return F.H.useDeferredValue(q,ce)},Oe.useEffect=function(q,ce,ge){var pe=F.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pe.useEffect(q,ce)},Oe.useId=function(){return F.H.useId()},Oe.useImperativeHandle=function(q,ce,ge){return F.H.useImperativeHandle(q,ce,ge)},Oe.useInsertionEffect=function(q,ce){return F.H.useInsertionEffect(q,ce)},Oe.useLayoutEffect=function(q,ce){return F.H.useLayoutEffect(q,ce)},Oe.useMemo=function(q,ce){return F.H.useMemo(q,ce)},Oe.useOptimistic=function(q,ce){return F.H.useOptimistic(q,ce)},Oe.useReducer=function(q,ce,ge){return F.H.useReducer(q,ce,ge)},Oe.useRef=function(q){return F.H.useRef(q)},Oe.useState=function(q){return F.H.useState(q)},Oe.useSyncExternalStore=function(q,ce,ge){return F.H.useSyncExternalStore(q,ce,ge)},Oe.useTransition=function(){return F.H.useTransition()},Oe.version="19.1.0",Oe}var p2;function Ew(){return p2||(p2=1,y0.exports=xj()),y0.exports}var k=Ew();const ft=gj(k);var v0={exports:{}},Id={},x0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function wj(){return g2||(g2=1,function(n){function e($,se){var ae=$.length;$.push(se);e:for(;0<ae;){var xe=ae-1>>>1,q=$[xe];if(0<r(q,se))$[xe]=se,$[ae]=q,ae=xe;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var se=$[0],ae=$.pop();if(ae!==se){$[0]=ae;e:for(var xe=0,q=$.length,ce=q>>>1;xe<ce;){var ge=2*(xe+1)-1,pe=$[ge],Ce=ge+1,Le=$[Ce];if(0>r(pe,ae))Ce<q&&0>r(Le,pe)?($[xe]=Le,$[Ce]=ae,xe=Ce):($[xe]=pe,$[ge]=ae,xe=ge);else if(Ce<q&&0>r(Le,ae))$[xe]=Le,$[Ce]=ae,xe=Ce;else break e}}return se}function r($,se){var ae=$.sortIndex-se.sortIndex;return ae!==0?ae:$.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,v=null,x=3,_=!1,T=!1,C=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function z($){for(var se=t(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=$)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(f)}}function F($){if(C=!1,z($),!T)if(t(d)!==null)T=!0,H||(H=!0,B());else{var se=t(f);se!==null&&ve(F,se.startTime-$)}}var H=!1,j=-1,S=5,R=-1;function V(){return D?!0:!(n.unstable_now()-R<S)}function L(){if(D=!1,H){var $=n.unstable_now();R=$;var se=!0;try{e:{T=!1,C&&(C=!1,I(j),j=-1),_=!0;var ae=x;try{t:{for(z($),v=t(d);v!==null&&!(v.expirationTime>$&&V());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,x=v.priorityLevel;var q=xe(v.expirationTime<=$);if($=n.unstable_now(),typeof q=="function"){v.callback=q,z($),se=!0;break t}v===t(d)&&i(d),z($)}else i(d);v=t(d)}if(v!==null)se=!0;else{var ce=t(f);ce!==null&&ve(F,ce.startTime-$),se=!1}}break e}finally{v=null,x=ae,_=!1}se=void 0}}finally{se?B():H=!1}}}var B;if(typeof N=="function")B=function(){N(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,me=O.port2;O.port1.onmessage=L,B=function(){me.postMessage(null)}}else B=function(){P(L,0)};function ve($,se){j=P(function(){$(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function($){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var ae=x;x=se;try{return $()}finally{x=ae}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=x;x=$;try{return se()}finally{x=ae}},n.unstable_scheduleCallback=function($,se,ae){var xe=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?xe+ae:xe):ae=xe,$){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ae+q,$={id:p++,callback:se,priorityLevel:$,startTime:ae,expirationTime:q,sortIndex:-1},ae>xe?($.sortIndex=ae,e(f,$),t(d)===null&&$===t(f)&&(C?(I(j),j=-1):C=!0,ve(F,ae-xe))):($.sortIndex=q,e(d,$),T||_||(T=!0,H||(H=!0,B()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var se=x;return function(){var ae=x;x=se;try{return $.apply(this,arguments)}finally{x=ae}}}}(w0)),w0}var y2;function bj(){return y2||(y2=1,x0.exports=wj()),x0.exports}var b0={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function _j(){if(v2)return Cn;v2=1;var n=Ew();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Cn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,p)},Cn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},Cn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Cn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Cn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:_}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:x,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Cn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Cn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Cn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Cn.requestFormReset=function(d){i.d.r(d)},Cn.unstable_batchedUpdates=function(d,f){return d(f)},Cn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Cn.version="19.1.0",Cn}var x2;function d4(){if(x2)return b0.exports;x2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),b0.exports=_j(),b0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2;function Tj(){if(w2)return Id;w2=1;var n=bj(),e=Ew(),t=d4();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var c=s,h=o;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){c=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return u(y),s;if(w===h)return u(y),o;w=w.sibling}throw Error(i(188))}if(c.return!==h.return)c=y,h=w;else{for(var A=!1,M=y.child;M;){if(M===c){A=!0,c=y,h=w;break}if(M===h){A=!0,h=y,c=w;break}M=M.sibling}if(!A){for(M=w.child;M;){if(M===c){A=!0,c=w,h=y;break}if(M===h){A=!0,h=w,c=y;break}M=M.sibling}if(!A)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:o}function f(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=f(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function me(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case D:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case N:return(s.displayName||"Context")+".Provider";case I:return(s._context.displayName||"Context")+".Consumer";case z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return o=s.displayName||null,o!==null?o:me(s.type)||"Memo";case S:o=s._payload,s=s._init;try{return me(s(o))}catch{}}return null}var ve=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},xe=[],q=-1;function ce(s){return{current:s}}function ge(s){0>q||(s.current=xe[q],xe[q]=null,q--)}function pe(s,o){q++,xe[q]=s.current,s.current=o}var Ce=ce(null),Le=ce(null),_e=ce(null),Ge=ce(null);function Be(s,o){switch(pe(_e,o),pe(Le,s),pe(Ce,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?BE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=BE(o),s=FE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ge(Ce),pe(Ce,s)}function Tt(){ge(Ce),ge(Le),ge(_e)}function Sn(s){s.memoizedState!==null&&pe(Ge,s);var o=Ce.current,c=FE(o,s.type);o!==c&&(pe(Le,s),pe(Ce,c))}function $n(s){Le.current===s&&(ge(Ce),ge(Le)),Ge.current===s&&(ge(Ge),bd._currentValue=ae)}var kr=Object.prototype.hasOwnProperty,Ua=n.unstable_scheduleCallback,Ba=n.unstable_cancelCallback,vu=n.unstable_shouldYield,If=n.unstable_requestPaint,yi=n.unstable_now,gy=n.unstable_getCurrentPriorityLevel,xu=n.unstable_ImmediatePriority,dl=n.unstable_UserBlockingPriority,Fa=n.unstable_NormalPriority,yy=n.unstable_LowPriority,hl=n.unstable_IdlePriority,wu=n.log,Cf=n.unstable_setDisableYieldValue,Dt=null,nt=null;function ni(s){if(typeof wu=="function"&&Cf(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(Dt,s)}catch{}}var An=Math.clz32?Math.clz32:za,Nf=Math.log,vy=Math.LN2;function za(s){return s>>>=0,s===0?32:31-(Nf(s)/vy|0)|0}var qa=256,Ha=4194304;function Vi(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function fl(s,o,c){var h=s.pendingLanes;if(h===0)return 0;var y=0,w=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~w,h!==0?y=Vi(h):(A&=M,A!==0?y=Vi(A):c||(c=M&~s,c!==0&&(y=Vi(c))))):(M=h&~w,M!==0?y=Vi(M):A!==0?y=Vi(A):c||(c=h&~s,c!==0&&(y=Vi(c)))),y===0?0:o!==0&&o!==y&&(o&w)===0&&(w=y&-y,c=o&-o,w>=c||w===32&&(c&4194048)!==0)?o:y}function Ga(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function bu(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _u(){var s=qa;return qa<<=1,(qa&4194048)===0&&(qa=256),s}function Tu(){var s=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),s}function Mr(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Vr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Eu(s,o,c,h,y,w){var A=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var M=s.entanglements,G=s.expirationTimes,Z=s.hiddenUpdates;for(c=A&~c;0<c;){var oe=31-An(c),ue=1<<oe;M[oe]=0,G[oe]=-1;var J=Z[oe];if(J!==null)for(Z[oe]=null,oe=0;oe<J.length;oe++){var ee=J[oe];ee!==null&&(ee.lane&=-536870913)}c&=~ue}h!==0&&Ki(s,h,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(A&~o))}function Ki(s,o,c){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-An(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function Su(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var h=31-An(c),y=1<<h;y&o|s[h]&o&&(s[h]|=o),c&=~y}}function As(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ml(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Is(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:a2(s.type))}function Rf(s,o){var c=se.p;try{return se.p=s,o()}finally{se.p=c}}var gt=Math.random().toString(36).slice(2),Jt="__reactFiber$"+gt,$t="__reactProps$"+gt,vi="__reactContainer$"+gt,Au="__reactEvents$"+gt,xy="__reactListeners$"+gt,Cs="__reactHandles$"+gt,Pf="__reactResources$"+gt,$a="__reactMarker$"+gt;function Ns(s){delete s[Jt],delete s[$t],delete s[Au],delete s[xy],delete s[Cs]}function Or(s){var o=s[Jt];if(o)return o;for(var c=s.parentNode;c;){if(o=c[vi]||c[Jt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=GE(s);s!==null;){if(c=s[Jt])return c;s=GE(s)}return o}s=c,c=s.parentNode}return null}function Wi(s){if(s=s[Jt]||s[vi]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Yi(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Mn(s){var o=s[Pf];return o||(o=s[Pf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ut(s){s[$a]=!0}var Iu=new Set,pl={};function Oi(s,o){Lr(s,o),Lr(s+"Capture",o)}function Lr(s,o){for(pl[s]=o,s=0;s<o.length;s++)Iu.add(o[s])}var Df=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jf={},Ka={};function kf(s){return kr.call(Ka,s)?!0:kr.call(jf,s)?!1:Df.test(s)?Ka[s]=!0:(jf[s]=!0,!1)}function Rs(s,o,c){if(kf(o))if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+c)}}function Qi(s,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+c)}}function pn(s,o,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(o,c,""+h)}}var Wa,Mf;function Ur(s){if(Wa===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Wa=o&&o[1]||"",Mf=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wa+s+Mf}var gl=!1;function yl(s,o){if(!s||gl)return"";gl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var J=ee}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(ee){J=ee}s.call(ue.prototype)}}else{try{throw Error()}catch(ee){J=ee}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),A=w[0],M=w[1];if(A&&M){var G=A.split(`
`),Z=M.split(`
`);for(y=h=0;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(h===G.length||y===Z.length)for(h=G.length-1,y=Z.length-1;1<=h&&0<=y&&G[h]!==Z[y];)y--;for(;1<=h&&0<=y;h--,y--)if(G[h]!==Z[y]){if(h!==1||y!==1)do if(h--,y--,0>y||G[h]!==Z[y]){var oe=`
`+G[h].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=h&&0<=y);break}}}finally{gl=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ur(c):""}function Cu(s){switch(s.tag){case 26:case 27:case 5:return Ur(s.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 15:return yl(s.type,!1);case 11:return yl(s.type.render,!1);case 1:return yl(s.type,!0);case 31:return Ur("Activity");default:return""}}function vl(s){try{var o="";do o+=Cu(s),s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Nu(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wy(s){var o=Nu(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){h=""+A,w.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(A){h=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function xl(s){s._valueTracker||(s._valueTracker=wy(s))}function Ru(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return s&&(h=Nu(s)?s.checked?"true":"false":s.value),s=h,s!==c?(o.setValue(s),!0):!1}function Ya(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var by=/[\n"\\]/g;function Kt(s){return s.replace(by,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ii(s,o,c,h,y,w,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Vn(o)):s.value!==""+Vn(o)&&(s.value=""+Vn(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?Ps(s,A,Vn(o)):c!=null?Ps(s,A,Vn(c)):h!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Vn(M):s.removeAttribute("name")}function Qa(s,o,c,h,y,w,A,M){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),o!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||o!=null))return;c=c!=null?""+Vn(c):"",o=o!=null?""+Vn(o):c,M||o===s.value||(s.value=o),s.defaultValue=o}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function Ps(s,o,c){o==="number"&&Ya(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Br(s,o,c,h){if(s=s.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=o.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&h&&(s[c].defaultSelected=!0)}else{for(c=""+Vn(c),o=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function ot(s,o,c){if(o!=null&&(o=""+Vn(o),o!==s.value&&(s.value=o),c==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=c!=null?""+Vn(c):""}function Xa(s,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(i(92));if(ve(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=Vn(o),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function xi(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var Za=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vf(s,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,c):typeof c!="number"||c===0||Za.has(o)?o==="float"?s.cssFloat=c:s[o]=(""+c).trim():s[o]=c+"px"}function Pu(s,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in o)h=o[y],o.hasOwnProperty(y)&&c[y]!==h&&Vf(s,y,h)}else for(var w in o)o.hasOwnProperty(w)&&Vf(s,w,o[w])}function Du(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _y=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(s){return Ty.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fr=null;function wi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zr=null,qr=null;function ju(s){var o=Wi(s);if(o&&(s=o.stateNode)){var c=s[$t]||null;e:switch(s=o.stateNode,o.type){case"input":if(ii(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Kt(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==s&&h.form===s.form){var y=h[$t]||null;if(!y)throw Error(i(90));ii(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===s.form&&Ru(h)}break e;case"textarea":ot(s,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Br(s,!!c.multiple,o,!1)}}}var Xi=!1;function Of(s,o,c){if(Xi)return s(o,c);Xi=!0;try{var h=s(o);return h}finally{if(Xi=!1,(zr!==null||qr!==null)&&(Rm(),zr&&(o=zr,s=qr,qr=zr=null,ju(o),s)))for(o=0;o<s.length;o++)ju(s[o])}}function Ja(s,o){var c=s.stateNode;if(c===null)return null;var h=c[$t]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bi=!1;if(Li)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){bi=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{bi=!1}var Zi=null,Ds=null,Hr=null;function ku(){if(Hr)return Hr;var s,o=Ds,c=o.length,h,y="value"in Zi?Zi.value:Zi.textContent,w=y.length;for(s=0;s<c&&o[s]===y[s];s++);var A=c-s;for(h=1;h<=A&&o[c-h]===y[w-h];h++);return Hr=y.slice(s,1<h?1-h:void 0)}function Ji(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function er(){return!0}function Mu(){return!1}function on(s){function o(c,h,y,w,A){this._reactName=c,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(c=s[M],this[M]=c?c(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?er:Mu,this.isPropagationStopped=Mu,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),o}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=on(tt),to=p({},tt,{view:0,detail:0}),Lf=on(to),_l,Tl,tr,no=p({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==tr&&(tr&&s.type==="mousemove"?(_l=s.screenX-tr.screenX,Tl=s.screenY-tr.screenY):Tl=_l=0,tr=s),_l)},movementY:function(s){return"movementY"in s?s.movementY:Tl}}),_i=on(no),Uf=p({},no,{dataTransfer:0}),Ey=on(Uf),io=p({},to,{relatedTarget:0}),El=on(io),Vu=p({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Sl=on(Vu),Bf=p({},tt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Al=on(Bf),Sy=p({},tt,{data:0}),Ou=on(Sy),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ff={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=zf[s])?!!o[s]:!1}function so(){return Lu}var qf=p({},to,{key:function(s){if(s.key){var o=ro[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Ji(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ff[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(s){return s.type==="keypress"?Ji(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ji(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Il=on(qf),Hf=p({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=on(Hf),Gr=p({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),Gf=on(Gr),$f=p({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kf=on($f),Wf=p({},no,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Cl=on(Wf),On=p({},tt,{newState:0,oldState:0}),Yf=on(On),Qf=[9,13,27,32],nr=Li&&"CompositionEvent"in window,g=null;Li&&"documentMode"in document&&(g=document.documentMode);var b=Li&&"TextEvent"in window&&!g,E=Li&&(!nr||g&&8<g&&11>=g),U=" ",Y=!1;function ie(s,o){switch(s){case"keyup":return Qf.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var We=!1;function en(s,o){switch(s){case"compositionend":return ye(o);case"keypress":return o.which!==32?null:(Y=!0,U);case"textInput":return s=o.data,s===U&&Y?null:s;default:return null}}function Ye(s,o){if(We)return s==="compositionend"||!nr&&ie(s,o)?(s=ku(),Hr=Ds=Zi=null,We=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return E&&o.locale!=="ko"?null:o.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ln[s.type]:o==="textarea"}function $r(s,o,c,h){zr?qr?qr.push(h):qr=[h]:zr=h,o=Vm(o,"onChange"),0<o.length&&(c=new bl("onChange","change",null,c,h),s.push({event:c,listeners:o}))}var gn=null,ir=null;function Bu(s){ME(s,0)}function Xf(s){var o=Yi(s);if(Ru(o))return s}function n1(s,o){if(s==="change")return o}var i1=!1;if(Li){var Ay;if(Li){var Iy="oninput"in document;if(!Iy){var r1=document.createElement("div");r1.setAttribute("oninput","return;"),Iy=typeof r1.oninput=="function"}Ay=Iy}else Ay=!1;i1=Ay&&(!document.documentMode||9<document.documentMode)}function s1(){gn&&(gn.detachEvent("onpropertychange",a1),ir=gn=null)}function a1(s){if(s.propertyName==="value"&&Xf(ir)){var o=[];$r(o,ir,s,wi(s)),Of(Bu,o)}}function $6(s,o,c){s==="focusin"?(s1(),gn=o,ir=c,gn.attachEvent("onpropertychange",a1)):s==="focusout"&&s1()}function K6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xf(ir)}function W6(s,o){if(s==="click")return Xf(o)}function Y6(s,o){if(s==="input"||s==="change")return Xf(o)}function Q6(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var ri=typeof Object.is=="function"?Object.is:Q6;function Fu(s,o){if(ri(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var y=c[h];if(!kr.call(o,y)||!ri(s[y],o[y]))return!1}return!0}function o1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function l1(s,o){var c=o1(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=o&&h>=o)return{node:c,offset:o-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=o1(c)}}function c1(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?c1(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function u1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ya(s.document);o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=Ya(s.document)}return o}function Cy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var X6=Li&&"documentMode"in document&&11>=document.documentMode,Nl=null,Ny=null,zu=null,Ry=!1;function d1(s,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ry||Nl==null||Nl!==Ya(h)||(h=Nl,"selectionStart"in h&&Cy(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),zu&&Fu(zu,h)||(zu=h,h=Vm(Ny,"onSelect"),0<h.length&&(o=new bl("onSelect","select",null,o,c),s.push({event:o,listeners:h}),o.target=Nl)))}function ao(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Rl={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},Py={},h1={};Li&&(h1=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function oo(s){if(Py[s])return Py[s];if(!Rl[s])return s;var o=Rl[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in h1)return Py[s]=o[c];return s}var f1=oo("animationend"),m1=oo("animationiteration"),p1=oo("animationstart"),Z6=oo("transitionrun"),J6=oo("transitionstart"),eD=oo("transitioncancel"),g1=oo("transitionend"),y1=new Map,Dy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dy.push("scrollEnd");function Ui(s,o){y1.set(s,o),Oi(o,[s])}var v1=new WeakMap;function Ti(s,o){if(typeof s=="object"&&s!==null){var c=v1.get(s);return c!==void 0?c:(o={value:s,source:o,stack:vl(o)},v1.set(s,o),o)}return{value:s,source:o,stack:vl(o)}}var Ei=[],Pl=0,jy=0;function Zf(){for(var s=Pl,o=jy=Pl=0;o<s;){var c=Ei[o];Ei[o++]=null;var h=Ei[o];Ei[o++]=null;var y=Ei[o];Ei[o++]=null;var w=Ei[o];if(Ei[o++]=null,h!==null&&y!==null){var A=h.pending;A===null?y.next=y:(y.next=A.next,A.next=y),h.pending=y}w!==0&&x1(c,y,w)}}function Jf(s,o,c,h){Ei[Pl++]=s,Ei[Pl++]=o,Ei[Pl++]=c,Ei[Pl++]=h,jy|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function ky(s,o,c,h){return Jf(s,o,c,h),em(s)}function Dl(s,o){return Jf(s,null,null,o),em(s)}function x1(s,o,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var y=!1,w=s.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&o!==null&&(y=31-An(c),s=w.hiddenUpdates,h=s[y],h===null?s[y]=[o]:h.push(o),o.lane=c|536870912),w):null}function em(s){if(50<fd)throw fd=0,Bv=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var jl={};function tD(s,o,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,o,c,h){return new tD(s,o,c,h)}function My(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Kr(s,o){var c=s.alternate;return c===null?(c=si(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function w1(s,o){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,o=c.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function tm(s,o,c,h,y,w){var A=0;if(h=s,typeof s=="function")My(s)&&(A=1);else if(typeof s=="string")A=ij(s,c,Ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=si(31,c,o,y),s.elementType=R,s.lanes=w,s;case T:return lo(c.children,y,w,o);case C:A=8,y|=24;break;case D:return s=si(12,c,o,y|2),s.elementType=D,s.lanes=w,s;case F:return s=si(13,c,o,y),s.elementType=F,s.lanes=w,s;case H:return s=si(19,c,o,y),s.elementType=H,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:case N:A=10;break e;case I:A=9;break e;case z:A=11;break e;case j:A=14;break e;case S:A=16,h=null;break e}A=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return o=si(A,c,o,y),o.elementType=s,o.type=h,o.lanes=w,o}function lo(s,o,c,h){return s=si(7,s,h,o),s.lanes=c,s}function Vy(s,o,c){return s=si(6,s,null,o),s.lanes=c,s}function Oy(s,o,c){return o=si(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var kl=[],Ml=0,nm=null,im=0,Si=[],Ai=0,co=null,Wr=1,Yr="";function uo(s,o){kl[Ml++]=im,kl[Ml++]=nm,nm=s,im=o}function b1(s,o,c){Si[Ai++]=Wr,Si[Ai++]=Yr,Si[Ai++]=co,co=s;var h=Wr;s=Yr;var y=32-An(h)-1;h&=~(1<<y),c+=1;var w=32-An(o)+y;if(30<w){var A=y-y%5;w=(h&(1<<A)-1).toString(32),h>>=A,y-=A,Wr=1<<32-An(o)+y|c<<y|h,Yr=w+s}else Wr=1<<w|c<<y|h,Yr=s}function Ly(s){s.return!==null&&(uo(s,1),b1(s,1,0))}function Uy(s){for(;s===nm;)nm=kl[--Ml],kl[Ml]=null,im=kl[--Ml],kl[Ml]=null;for(;s===co;)co=Si[--Ai],Si[Ai]=null,Yr=Si[--Ai],Si[Ai]=null,Wr=Si[--Ai],Si[Ai]=null}var Ln=null,jt=null,et=!1,ho=null,rr=!1,By=Error(i(519));function fo(s){var o=Error(i(418,""));throw Gu(Ti(o,s)),By}function _1(s){var o=s.stateNode,c=s.type,h=s.memoizedProps;switch(o[Jt]=s,o[$t]=h,c){case"dialog":qe("cancel",o),qe("close",o);break;case"iframe":case"object":case"embed":qe("load",o);break;case"video":case"audio":for(c=0;c<pd.length;c++)qe(pd[c],o);break;case"source":qe("error",o);break;case"img":case"image":case"link":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"input":qe("invalid",o),Qa(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),xl(o);break;case"select":qe("invalid",o);break;case"textarea":qe("invalid",o),Xa(o,h.value,h.defaultValue,h.children),xl(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||UE(o.textContent,c)?(h.popover!=null&&(qe("beforetoggle",o),qe("toggle",o)),h.onScroll!=null&&qe("scroll",o),h.onScrollEnd!=null&&qe("scrollend",o),h.onClick!=null&&(o.onclick=Om),o=!0):o=!1,o||fo(s)}function T1(s){for(Ln=s.return;Ln;)switch(Ln.tag){case 5:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:Ln=Ln.return}}function qu(s){if(s!==Ln)return!1;if(!et)return T1(s),et=!0,!1;var o=s.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||n0(s.type,s.memoizedProps)),c=!c),c&&jt&&fo(s),T1(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(o===0){jt=Fi(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;s=s.nextSibling}jt=null}}else o===27?(o=jt,Ws(s.type)?(s=a0,a0=null,jt=s):jt=o):jt=Ln?Fi(s.stateNode.nextSibling):null;return!0}function Hu(){jt=Ln=null,et=!1}function E1(){var s=ho;return s!==null&&(Yn===null?Yn=s:Yn.push.apply(Yn,s),ho=null),s}function Gu(s){ho===null?ho=[s]:ho.push(s)}var Fy=ce(null),mo=null,Qr=null;function js(s,o,c){pe(Fy,o._currentValue),o._currentValue=c}function Xr(s){s._currentValue=Fy.current,ge(Fy)}function zy(s,o,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===c)break;s=s.return}}function qy(s,o,c,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var A=y.child;w=w.firstContext;e:for(;w!==null;){var M=w;w=y;for(var G=0;G<o.length;G++)if(M.context===o[G]){w.lanes|=c,M=w.alternate,M!==null&&(M.lanes|=c),zy(w.return,c,s),h||(A=null);break e}w=M.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=c,w=A.alternate,w!==null&&(w.lanes|=c),zy(A,c,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function $u(s,o,c,h){s=null;for(var y=o,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=y.type;ri(y.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(bd):s=[bd])}y=y.return}s!==null&&qy(o,s,c,h),o.flags|=262144}function rm(s){for(s=s.firstContext;s!==null;){if(!ri(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function po(s){mo=s,Qr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return S1(mo,s)}function sm(s,o){return mo===null&&po(s),S1(s,o)}function S1(s,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Qr===null){if(s===null)throw Error(i(308));Qr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Qr=Qr.next=o;return c}var nD=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(c){return c()})}},iD=n.unstable_scheduleCallback,rD=n.unstable_NormalPriority,nn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hy(){return{controller:new nD,data:new Map,refCount:0}}function Ku(s){s.refCount--,s.refCount===0&&iD(rD,function(){s.controller.abort()})}var Wu=null,Gy=0,Vl=0,Ol=null;function sD(s,o){if(Wu===null){var c=Wu=[];Gy=0,Vl=Kv(),Ol={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Gy++,o.then(A1,A1),o}function A1(){if(--Gy===0&&Wu!==null){Ol!==null&&(Ol.status="fulfilled");var s=Wu;Wu=null,Vl=0,Ol=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function aD(s,o){var c=[],h={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(h.status="rejected",h.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),h}var I1=$.S;$.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&sD(s,o),I1!==null&&I1(s,o)};var go=ce(null);function $y(){var s=go.current;return s!==null?s:ht.pooledCache}function am(s,o){o===null?pe(go,go.current):pe(go,o.pool)}function C1(){var s=$y();return s===null?null:{parent:nn._currentValue,pool:s}}var Yu=Error(i(460)),N1=Error(i(474)),om=Error(i(542)),Ky={then:function(){}};function R1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function lm(){}function P1(s,o,c){switch(c=s[c],c===void 0?s.push(o):c!==o&&(o.then(lm,lm),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,j1(s),s;default:if(typeof o.status=="string")o.then(lm,lm);else{if(s=ht,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=h}},function(h){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,j1(s),s}throw Qu=o,Yu}}var Qu=null;function D1(){if(Qu===null)throw Error(i(459));var s=Qu;return Qu=null,s}function j1(s){if(s===Yu||s===om)throw Error(i(483))}var ks=!1;function Wy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yy(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Vs(s,o,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(it&2)!==0){var y=h.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),h.pending=o,o=em(s),x1(s,null,c),o}return Jf(s,h,o,c),em(s)}function Xu(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,Su(s,c)}}function Qy(s,o){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?y=w=A:w=w.next=A,c=c.next}while(c!==null);w===null?y=w=o:w=w.next=o}else y=w=o;c={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}var Xy=!1;function Zu(){if(Xy){var s=Ol;if(s!==null)throw s}}function Ju(s,o,c,h){Xy=!1;var y=s.updateQueue;ks=!1;var w=y.firstBaseUpdate,A=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var G=M,Z=G.next;G.next=null,A===null?w=Z:A.next=Z,A=G;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==A&&(M===null?oe.firstBaseUpdate=Z:M.next=Z,oe.lastBaseUpdate=G))}if(w!==null){var ue=y.baseState;A=0,oe=Z=G=null,M=w;do{var J=M.lane&-536870913,ee=J!==M.lane;if(ee?(Qe&J)===J:(h&J)===J){J!==0&&J===Vl&&(Xy=!0),oe!==null&&(oe=oe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var je=s,Re=M;J=o;var ut=c;switch(Re.tag){case 1:if(je=Re.payload,typeof je=="function"){ue=je.call(ut,ue,J);break e}ue=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Re.payload,J=typeof je=="function"?je.call(ut,ue,J):je,J==null)break e;ue=p({},ue,J);break e;case 2:ks=!0}}J=M.callback,J!==null&&(s.flags|=64,ee&&(s.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(Z=oe=ee,G=ue):oe=oe.next=ee,A|=J;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ee=M,M=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);oe===null&&(G=ue),y.baseState=G,y.firstBaseUpdate=Z,y.lastBaseUpdate=oe,w===null&&(y.shared.lanes=0),Hs|=A,s.lanes=A,s.memoizedState=ue}}function k1(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function M1(s,o){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)k1(c[s],o)}var Ll=ce(null),cm=ce(0);function V1(s,o){s=rs,pe(cm,s),pe(Ll,o),rs=s|o.baseLanes}function Zy(){pe(cm,rs),pe(Ll,Ll.current)}function Jy(){rs=cm.current,ge(Ll),ge(cm)}var Os=0,Ue=null,lt=null,Wt=null,um=!1,Ul=!1,yo=!1,dm=0,ed=0,Bl=null,oD=0;function Bt(){throw Error(i(321))}function ev(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!ri(s[c],o[c]))return!1;return!0}function tv(s,o,c,h,y,w){return Os=w,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=s===null||s.memoizedState===null?xT:wT,yo=!1,w=c(h,y),yo=!1,Ul&&(w=L1(o,c,h,y)),O1(s),w}function O1(s){$.H=ym;var o=lt!==null&&lt.next!==null;if(Os=0,Wt=lt=Ue=null,um=!1,ed=0,Bl=null,o)throw Error(i(300));s===null||cn||(s=s.dependencies,s!==null&&rm(s)&&(cn=!0))}function L1(s,o,c,h){Ue=s;var y=0;do{if(Ul&&(Bl=null),ed=0,Ul=!1,25<=y)throw Error(i(301));if(y+=1,Wt=lt=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=mD,w=o(c,h)}while(Ul);return w}function lD(){var s=$.H,o=s.useState()[0];return o=typeof o.then=="function"?td(o):o,s=s.useState()[0],(lt!==null?lt.memoizedState:null)!==s&&(Ue.flags|=1024),o}function nv(){var s=dm!==0;return dm=0,s}function iv(s,o,c){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~c}function rv(s){if(um){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}um=!1}Os=0,Wt=lt=Ue=null,Ul=!1,ed=dm=0,Bl=null}function Kn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Ue.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function Yt(){if(lt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var o=Wt===null?Ue.memoizedState:Wt.next;if(o!==null)Wt=o,lt=s;else{if(s===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Wt===null?Ue.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function sv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function td(s){var o=ed;return ed+=1,Bl===null&&(Bl=[]),s=P1(Bl,s,o),o=Ue,(Wt===null?o.memoizedState:Wt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?xT:wT),s}function hm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return td(s);if(s.$$typeof===N)return In(s)}throw Error(i(438,String(s)))}function av(s){var o=null,c=Ue.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=sv(),Ue.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(s),h=0;h<s;h++)c[h]=V;return o.index++,c}function Zr(s,o){return typeof o=="function"?o(s):o}function fm(s){var o=Yt();return ov(o,lt,s)}function ov(s,o,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var y=s.baseQueue,w=h.pending;if(w!==null){if(y!==null){var A=y.next;y.next=w.next,w.next=A}o.baseQueue=y=w,h.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{o=y.next;var M=A=null,G=null,Z=o,oe=!1;do{var ue=Z.lane&-536870913;if(ue!==Z.lane?(Qe&ue)===ue:(Os&ue)===ue){var J=Z.revertLane;if(J===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ue===Vl&&(oe=!0);else if((Os&J)===J){Z=Z.next,J===Vl&&(oe=!0);continue}else ue={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(M=G=ue,A=w):G=G.next=ue,Ue.lanes|=J,Hs|=J;ue=Z.action,yo&&c(w,ue),w=Z.hasEagerState?Z.eagerState:c(w,ue)}else J={lane:ue,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(M=G=J,A=w):G=G.next=J,Ue.lanes|=ue,Hs|=ue;Z=Z.next}while(Z!==null&&Z!==o);if(G===null?A=w:G.next=M,!ri(w,s.memoizedState)&&(cn=!0,oe&&(c=Ol,c!==null)))throw c;s.memoizedState=w,s.baseState=A,s.baseQueue=G,h.lastRenderedState=w}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function lv(s){var o=Yt(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,y=c.pending,w=o.memoizedState;if(y!==null){c.pending=null;var A=y=y.next;do w=s(w,A.action),A=A.next;while(A!==y);ri(w,o.memoizedState)||(cn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,h]}function U1(s,o,c){var h=Ue,y=Yt(),w=et;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=o();var A=!ri((lt||y).memoizedState,c);A&&(y.memoizedState=c,cn=!0),y=y.queue;var M=z1.bind(null,h,y,s);if(nd(2048,8,M,[s]),y.getSnapshot!==o||A||Wt!==null&&Wt.memoizedState.tag&1){if(h.flags|=2048,Fl(9,mm(),F1.bind(null,h,y,c,o),null),ht===null)throw Error(i(349));w||(Os&124)!==0||B1(h,o,c)}return c}function B1(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=Ue.updateQueue,o===null?(o=sv(),Ue.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function F1(s,o,c,h){o.value=c,o.getSnapshot=h,q1(o)&&H1(s)}function z1(s,o,c){return c(function(){q1(o)&&H1(s)})}function q1(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!ri(s,c)}catch{return!0}}function H1(s){var o=Dl(s,2);o!==null&&ui(o,s,2)}function cv(s){var o=Kn();if(typeof s=="function"){var c=s;if(s=c(),yo){ni(!0);try{c()}finally{ni(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:s},o}function G1(s,o,c,h){return s.baseState=c,ov(s,lt,typeof h=="function"?h:Zr)}function cD(s,o,c,h,y){if(gm(s))throw Error(i(485));if(s=o.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};$.T!==null?c(!0):w.isTransition=!1,h(w),c=o.pending,c===null?(w.next=o.pending=w,$1(o,w)):(w.next=c.next,o.pending=c.next=w)}}function $1(s,o){var c=o.action,h=o.payload,y=s.state;if(o.isTransition){var w=$.T,A={};$.T=A;try{var M=c(y,h),G=$.S;G!==null&&G(A,M),K1(s,o,M)}catch(Z){uv(s,o,Z)}finally{$.T=w}}else try{w=c(y,h),K1(s,o,w)}catch(Z){uv(s,o,Z)}}function K1(s,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){W1(s,o,h)},function(h){return uv(s,o,h)}):W1(s,o,c)}function W1(s,o,c){o.status="fulfilled",o.value=c,Y1(o),s.state=c,o=s.pending,o!==null&&(c=o.next,c===o?s.pending=null:(c=c.next,o.next=c,$1(s,c)))}function uv(s,o,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,Y1(o),o=o.next;while(o!==h)}s.action=null}function Y1(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Q1(s,o){return o}function X1(s,o){if(et){var c=ht.formState;if(c!==null){e:{var h=Ue;if(et){if(jt){t:{for(var y=jt,w=rr;y.nodeType!==8;){if(!w){y=null;break t}if(y=Fi(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){jt=Fi(y.nextSibling),h=y.data==="F!";break e}}fo(h)}h=!1}h&&(o=c[0])}}return c=Kn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q1,lastRenderedState:o},c.queue=h,c=gT.bind(null,Ue,h),h.dispatch=c,h=cv(!1),w=pv.bind(null,Ue,!1,h.queue),h=Kn(),y={state:o,dispatch:null,action:s,pending:null},h.queue=y,c=cD.bind(null,Ue,y,w,c),y.dispatch=c,h.memoizedState=s,[o,c,!1]}function Z1(s){var o=Yt();return J1(o,lt,s)}function J1(s,o,c){if(o=ov(s,o,Q1)[0],s=fm(Zr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=td(o)}catch(A){throw A===Yu?om:A}else h=o;o=Yt();var y=o.queue,w=y.dispatch;return c!==o.memoizedState&&(Ue.flags|=2048,Fl(9,mm(),uD.bind(null,y,c),null)),[h,w,s]}function uD(s,o){s.action=o}function eT(s){var o=Yt(),c=lt;if(c!==null)return J1(o,c,s);Yt(),o=o.memoizedState,c=Yt();var h=c.queue.dispatch;return c.memoizedState=s,[o,h,!1]}function Fl(s,o,c,h){return s={tag:s,create:c,deps:h,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=sv(),Ue.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,o.lastEffect=s),s}function mm(){return{destroy:void 0,resource:void 0}}function tT(){return Yt().memoizedState}function pm(s,o,c,h){var y=Kn();h=h===void 0?null:h,Ue.flags|=s,y.memoizedState=Fl(1|o,mm(),c,h)}function nd(s,o,c,h){var y=Yt();h=h===void 0?null:h;var w=y.memoizedState.inst;lt!==null&&h!==null&&ev(h,lt.memoizedState.deps)?y.memoizedState=Fl(o,w,c,h):(Ue.flags|=s,y.memoizedState=Fl(1|o,w,c,h))}function nT(s,o){pm(8390656,8,s,o)}function iT(s,o){nd(2048,8,s,o)}function rT(s,o){return nd(4,2,s,o)}function sT(s,o){return nd(4,4,s,o)}function aT(s,o){if(typeof o=="function"){s=s();var c=o(s);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function oT(s,o,c){c=c!=null?c.concat([s]):null,nd(4,4,aT.bind(null,o,s),c)}function dv(){}function lT(s,o){var c=Yt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&ev(o,h[1])?h[0]:(c.memoizedState=[s,o],s)}function cT(s,o){var c=Yt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&ev(o,h[1]))return h[0];if(h=s(),yo){ni(!0);try{s()}finally{ni(!1)}}return c.memoizedState=[h,o],h}function hv(s,o,c){return c===void 0||(Os&1073741824)!==0?s.memoizedState=o:(s.memoizedState=c,s=hE(),Ue.lanes|=s,Hs|=s,c)}function uT(s,o,c,h){return ri(c,o)?c:Ll.current!==null?(s=hv(s,c,h),ri(s,o)||(cn=!0),s):(Os&42)===0?(cn=!0,s.memoizedState=c):(s=hE(),Ue.lanes|=s,Hs|=s,o)}function dT(s,o,c,h,y){var w=se.p;se.p=w!==0&&8>w?w:8;var A=$.T,M={};$.T=M,pv(s,!1,o,c);try{var G=y(),Z=$.S;if(Z!==null&&Z(M,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var oe=aD(G,h);id(s,o,oe,ci(s))}else id(s,o,h,ci(s))}catch(ue){id(s,o,{then:function(){},status:"rejected",reason:ue},ci())}finally{se.p=w,$.T=A}}function dD(){}function fv(s,o,c,h){if(s.tag!==5)throw Error(i(476));var y=hT(s).queue;dT(s,y,o,ae,c===null?dD:function(){return fT(s),c(h)})}function hT(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:ae},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:c},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function fT(s){var o=hT(s).next.queue;id(s,o,{},ci())}function mv(){return In(bd)}function mT(){return Yt().memoizedState}function pT(){return Yt().memoizedState}function hD(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var c=ci();s=Ms(c);var h=Vs(o,s,c);h!==null&&(ui(h,o,c),Xu(h,o,c)),o={cache:Hy()},s.payload=o;return}o=o.return}}function fD(s,o,c){var h=ci();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},gm(s)?yT(o,c):(c=ky(s,o,c,h),c!==null&&(ui(c,s,h),vT(c,o,h)))}function gT(s,o,c){var h=ci();id(s,o,c,h)}function id(s,o,c,h){var y={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(gm(s))yT(o,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var A=o.lastRenderedState,M=w(A,c);if(y.hasEagerState=!0,y.eagerState=M,ri(M,A))return Jf(s,o,y,0),ht===null&&Zf(),!1}catch{}finally{}if(c=ky(s,o,y,h),c!==null)return ui(c,s,h),vT(c,o,h),!0}return!1}function pv(s,o,c,h){if(h={lane:2,revertLane:Kv(),action:h,hasEagerState:!1,eagerState:null,next:null},gm(s)){if(o)throw Error(i(479))}else o=ky(s,c,h,2),o!==null&&ui(o,s,2)}function gm(s){var o=s.alternate;return s===Ue||o!==null&&o===Ue}function yT(s,o){Ul=um=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function vT(s,o,c){if((c&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,Su(s,c)}}var ym={readContext:In,use:hm,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},xT={readContext:In,use:hm,useCallback:function(s,o){return Kn().memoizedState=[s,o===void 0?null:o],s},useContext:In,useEffect:nT,useImperativeHandle:function(s,o,c){c=c!=null?c.concat([s]):null,pm(4194308,4,aT.bind(null,o,s),c)},useLayoutEffect:function(s,o){return pm(4194308,4,s,o)},useInsertionEffect:function(s,o){pm(4,2,s,o)},useMemo:function(s,o){var c=Kn();o=o===void 0?null:o;var h=s();if(yo){ni(!0);try{s()}finally{ni(!1)}}return c.memoizedState=[h,o],h},useReducer:function(s,o,c){var h=Kn();if(c!==void 0){var y=c(o);if(yo){ni(!0);try{c(o)}finally{ni(!1)}}}else y=o;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=fD.bind(null,Ue,s),[h.memoizedState,s]},useRef:function(s){var o=Kn();return s={current:s},o.memoizedState=s},useState:function(s){s=cv(s);var o=s.queue,c=gT.bind(null,Ue,o);return o.dispatch=c,[s.memoizedState,c]},useDebugValue:dv,useDeferredValue:function(s,o){var c=Kn();return hv(c,s,o)},useTransition:function(){var s=cv(!1);return s=dT.bind(null,Ue,s.queue,!0,!1),Kn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,c){var h=Ue,y=Kn();if(et){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),ht===null)throw Error(i(349));(Qe&124)!==0||B1(h,o,c)}y.memoizedState=c;var w={value:c,getSnapshot:o};return y.queue=w,nT(z1.bind(null,h,w,s),[s]),h.flags|=2048,Fl(9,mm(),F1.bind(null,h,w,c,o),null),c},useId:function(){var s=Kn(),o=ht.identifierPrefix;if(et){var c=Yr,h=Wr;c=(h&~(1<<32-An(h)-1)).toString(32)+c,o="«"+o+"R"+c,c=dm++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=oD++,o="«"+o+"r"+c.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:mv,useFormState:X1,useActionState:X1,useOptimistic:function(s){var o=Kn();o.memoizedState=o.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=pv.bind(null,Ue,!0,c),c.dispatch=o,[s,o]},useMemoCache:av,useCacheRefresh:function(){return Kn().memoizedState=hD.bind(null,Ue)}},wT={readContext:In,use:hm,useCallback:lT,useContext:In,useEffect:iT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:sT,useMemo:cT,useReducer:fm,useRef:tT,useState:function(){return fm(Zr)},useDebugValue:dv,useDeferredValue:function(s,o){var c=Yt();return uT(c,lt.memoizedState,s,o)},useTransition:function(){var s=fm(Zr)[0],o=Yt().memoizedState;return[typeof s=="boolean"?s:td(s),o]},useSyncExternalStore:U1,useId:mT,useHostTransitionStatus:mv,useFormState:Z1,useActionState:Z1,useOptimistic:function(s,o){var c=Yt();return G1(c,lt,s,o)},useMemoCache:av,useCacheRefresh:pT},mD={readContext:In,use:hm,useCallback:lT,useContext:In,useEffect:iT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:sT,useMemo:cT,useReducer:lv,useRef:tT,useState:function(){return lv(Zr)},useDebugValue:dv,useDeferredValue:function(s,o){var c=Yt();return lt===null?hv(c,s,o):uT(c,lt.memoizedState,s,o)},useTransition:function(){var s=lv(Zr)[0],o=Yt().memoizedState;return[typeof s=="boolean"?s:td(s),o]},useSyncExternalStore:U1,useId:mT,useHostTransitionStatus:mv,useFormState:eT,useActionState:eT,useOptimistic:function(s,o){var c=Yt();return lt!==null?G1(c,lt,s,o):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:av,useCacheRefresh:pT},zl=null,rd=0;function vm(s){var o=rd;return rd+=1,zl===null&&(zl=[]),P1(zl,s,o)}function sd(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function xm(s,o){throw o.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function bT(s){var o=s._init;return o(s._payload)}function _T(s){function o(W,K){if(s){var X=W.deletions;X===null?(W.deletions=[K],W.flags|=16):X.push(K)}}function c(W,K){if(!s)return null;for(;K!==null;)o(W,K),K=K.sibling;return null}function h(W){for(var K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function y(W,K){return W=Kr(W,K),W.index=0,W.sibling=null,W}function w(W,K,X){return W.index=X,s?(X=W.alternate,X!==null?(X=X.index,X<K?(W.flags|=67108866,K):X):(W.flags|=67108866,K)):(W.flags|=1048576,K)}function A(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function M(W,K,X,le){return K===null||K.tag!==6?(K=Vy(X,W.mode,le),K.return=W,K):(K=y(K,X),K.return=W,K)}function G(W,K,X,le){var Ee=X.type;return Ee===T?oe(W,K,X.props.children,le,X.key):K!==null&&(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&bT(Ee)===K.type)?(K=y(K,X.props),sd(K,X),K.return=W,K):(K=tm(X.type,X.key,X.props,null,W.mode,le),sd(K,X),K.return=W,K)}function Z(W,K,X,le){return K===null||K.tag!==4||K.stateNode.containerInfo!==X.containerInfo||K.stateNode.implementation!==X.implementation?(K=Oy(X,W.mode,le),K.return=W,K):(K=y(K,X.children||[]),K.return=W,K)}function oe(W,K,X,le,Ee){return K===null||K.tag!==7?(K=lo(X,W.mode,le,Ee),K.return=W,K):(K=y(K,X),K.return=W,K)}function ue(W,K,X){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Vy(""+K,W.mode,X),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return X=tm(K.type,K.key,K.props,null,W.mode,X),sd(X,K),X.return=W,X;case _:return K=Oy(K,W.mode,X),K.return=W,K;case S:var le=K._init;return K=le(K._payload),ue(W,K,X)}if(ve(K)||B(K))return K=lo(K,W.mode,X,null),K.return=W,K;if(typeof K.then=="function")return ue(W,vm(K),X);if(K.$$typeof===N)return ue(W,sm(W,K),X);xm(W,K)}return null}function J(W,K,X,le){var Ee=K!==null?K.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ee!==null?null:M(W,K,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return X.key===Ee?G(W,K,X,le):null;case _:return X.key===Ee?Z(W,K,X,le):null;case S:return Ee=X._init,X=Ee(X._payload),J(W,K,X,le)}if(ve(X)||B(X))return Ee!==null?null:oe(W,K,X,le,null);if(typeof X.then=="function")return J(W,K,vm(X),le);if(X.$$typeof===N)return J(W,K,sm(W,X),le);xm(W,X)}return null}function ee(W,K,X,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return W=W.get(X)||null,M(K,W,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return W=W.get(le.key===null?X:le.key)||null,G(K,W,le,Ee);case _:return W=W.get(le.key===null?X:le.key)||null,Z(K,W,le,Ee);case S:var Fe=le._init;return le=Fe(le._payload),ee(W,K,X,le,Ee)}if(ve(le)||B(le))return W=W.get(X)||null,oe(K,W,le,Ee,null);if(typeof le.then=="function")return ee(W,K,X,vm(le),Ee);if(le.$$typeof===N)return ee(W,K,X,sm(K,le),Ee);xm(K,le)}return null}function je(W,K,X,le){for(var Ee=null,Fe=null,Ie=K,Pe=K=0,dn=null;Ie!==null&&Pe<X.length;Pe++){Ie.index>Pe?(dn=Ie,Ie=null):dn=Ie.sibling;var Ze=J(W,Ie,X[Pe],le);if(Ze===null){Ie===null&&(Ie=dn);break}s&&Ie&&Ze.alternate===null&&o(W,Ie),K=w(Ze,K,Pe),Fe===null?Ee=Ze:Fe.sibling=Ze,Fe=Ze,Ie=dn}if(Pe===X.length)return c(W,Ie),et&&uo(W,Pe),Ee;if(Ie===null){for(;Pe<X.length;Pe++)Ie=ue(W,X[Pe],le),Ie!==null&&(K=w(Ie,K,Pe),Fe===null?Ee=Ie:Fe.sibling=Ie,Fe=Ie);return et&&uo(W,Pe),Ee}for(Ie=h(Ie);Pe<X.length;Pe++)dn=ee(Ie,W,Pe,X[Pe],le),dn!==null&&(s&&dn.alternate!==null&&Ie.delete(dn.key===null?Pe:dn.key),K=w(dn,K,Pe),Fe===null?Ee=dn:Fe.sibling=dn,Fe=dn);return s&&Ie.forEach(function(Js){return o(W,Js)}),et&&uo(W,Pe),Ee}function Re(W,K,X,le){if(X==null)throw Error(i(151));for(var Ee=null,Fe=null,Ie=K,Pe=K=0,dn=null,Ze=X.next();Ie!==null&&!Ze.done;Pe++,Ze=X.next()){Ie.index>Pe?(dn=Ie,Ie=null):dn=Ie.sibling;var Js=J(W,Ie,Ze.value,le);if(Js===null){Ie===null&&(Ie=dn);break}s&&Ie&&Js.alternate===null&&o(W,Ie),K=w(Js,K,Pe),Fe===null?Ee=Js:Fe.sibling=Js,Fe=Js,Ie=dn}if(Ze.done)return c(W,Ie),et&&uo(W,Pe),Ee;if(Ie===null){for(;!Ze.done;Pe++,Ze=X.next())Ze=ue(W,Ze.value,le),Ze!==null&&(K=w(Ze,K,Pe),Fe===null?Ee=Ze:Fe.sibling=Ze,Fe=Ze);return et&&uo(W,Pe),Ee}for(Ie=h(Ie);!Ze.done;Pe++,Ze=X.next())Ze=ee(Ie,W,Pe,Ze.value,le),Ze!==null&&(s&&Ze.alternate!==null&&Ie.delete(Ze.key===null?Pe:Ze.key),K=w(Ze,K,Pe),Fe===null?Ee=Ze:Fe.sibling=Ze,Fe=Ze);return s&&Ie.forEach(function(pj){return o(W,pj)}),et&&uo(W,Pe),Ee}function ut(W,K,X,le){if(typeof X=="object"&&X!==null&&X.type===T&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case x:e:{for(var Ee=X.key;K!==null;){if(K.key===Ee){if(Ee=X.type,Ee===T){if(K.tag===7){c(W,K.sibling),le=y(K,X.props.children),le.return=W,W=le;break e}}else if(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&bT(Ee)===K.type){c(W,K.sibling),le=y(K,X.props),sd(le,X),le.return=W,W=le;break e}c(W,K);break}else o(W,K);K=K.sibling}X.type===T?(le=lo(X.props.children,W.mode,le,X.key),le.return=W,W=le):(le=tm(X.type,X.key,X.props,null,W.mode,le),sd(le,X),le.return=W,W=le)}return A(W);case _:e:{for(Ee=X.key;K!==null;){if(K.key===Ee)if(K.tag===4&&K.stateNode.containerInfo===X.containerInfo&&K.stateNode.implementation===X.implementation){c(W,K.sibling),le=y(K,X.children||[]),le.return=W,W=le;break e}else{c(W,K);break}else o(W,K);K=K.sibling}le=Oy(X,W.mode,le),le.return=W,W=le}return A(W);case S:return Ee=X._init,X=Ee(X._payload),ut(W,K,X,le)}if(ve(X))return je(W,K,X,le);if(B(X)){if(Ee=B(X),typeof Ee!="function")throw Error(i(150));return X=Ee.call(X),Re(W,K,X,le)}if(typeof X.then=="function")return ut(W,K,vm(X),le);if(X.$$typeof===N)return ut(W,K,sm(W,X),le);xm(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,K!==null&&K.tag===6?(c(W,K.sibling),le=y(K,X),le.return=W,W=le):(c(W,K),le=Vy(X,W.mode,le),le.return=W,W=le),A(W)):c(W,K)}return function(W,K,X,le){try{rd=0;var Ee=ut(W,K,X,le);return zl=null,Ee}catch(Ie){if(Ie===Yu||Ie===om)throw Ie;var Fe=si(29,Ie,null,W.mode);return Fe.lanes=le,Fe.return=W,Fe}finally{}}}var ql=_T(!0),TT=_T(!1),Ii=ce(null),sr=null;function Ls(s){var o=s.alternate;pe(rn,rn.current&1),pe(Ii,s),sr===null&&(o===null||Ll.current!==null||o.memoizedState!==null)&&(sr=s)}function ET(s){if(s.tag===22){if(pe(rn,rn.current),pe(Ii,s),sr===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(sr=s)}}else Us()}function Us(){pe(rn,rn.current),pe(Ii,Ii.current)}function Jr(s){ge(Ii),sr===s&&(sr=null),ge(rn)}var rn=ce(0);function wm(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||s0(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function gv(s,o,c,h){o=s.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var yv={enqueueSetState:function(s,o,c){s=s._reactInternals;var h=ci(),y=Ms(h);y.payload=o,c!=null&&(y.callback=c),o=Vs(s,y,h),o!==null&&(ui(o,s,h),Xu(o,s,h))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var h=ci(),y=Ms(h);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Vs(s,y,h),o!==null&&(ui(o,s,h),Xu(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=ci(),h=Ms(c);h.tag=2,o!=null&&(h.callback=o),o=Vs(s,h,c),o!==null&&(ui(o,s,c),Xu(o,s,c))}};function ST(s,o,c,h,y,w,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,w,A):o.prototype&&o.prototype.isPureReactComponent?!Fu(c,h)||!Fu(y,w):!0}function AT(s,o,c,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==s&&yv.enqueueReplaceState(o,o.state,null)}function vo(s,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(s=s.defaultProps){c===o&&(c=p({},c));for(var y in s)c[y]===void 0&&(c[y]=s[y])}return c}var bm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function IT(s){bm(s)}function CT(s){console.error(s)}function NT(s){bm(s)}function _m(s,o){try{var c=s.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function RT(s,o,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function vv(s,o,c){return c=Ms(c),c.tag=3,c.payload={element:null},c.callback=function(){_m(s,o)},c}function PT(s){return s=Ms(s),s.tag=3,s}function DT(s,o,c,h){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;s.payload=function(){return y(w)},s.callback=function(){RT(o,c,h)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){RT(o,c,h),typeof y!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function pD(s,o,c,h,y){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&$u(o,c,y,!0),c=Ii.current,c!==null){switch(c.tag){case 13:return sr===null?zv():c.alternate===null&&kt===0&&(kt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,h===Ky?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),Hv(s,h,y)),!1;case 22:return c.flags|=65536,h===Ky?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),Hv(s,h,y)),!1}throw Error(i(435,c.tag))}return Hv(s,h,y),zv(),!1}if(et)return o=Ii.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,h!==By&&(s=Error(i(422),{cause:h}),Gu(Ti(s,c)))):(h!==By&&(o=Error(i(423),{cause:h}),Gu(Ti(o,c))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=Ti(h,c),y=vv(s.stateNode,h,y),Qy(s,y),kt!==4&&(kt=2)),!1;var w=Error(i(520),{cause:h});if(w=Ti(w,c),hd===null?hd=[w]:hd.push(w),kt!==4&&(kt=2),o===null)return!0;h=Ti(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,s=y&-y,c.lanes|=s,s=vv(c.stateNode,h,s),Qy(c,s),!1;case 1:if(o=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gs===null||!Gs.has(w))))return c.flags|=65536,y&=-y,c.lanes|=y,y=PT(y),DT(y,s,c,h),Qy(c,y),!1}c=c.return}while(c!==null);return!1}var jT=Error(i(461)),cn=!1;function yn(s,o,c,h){o.child=s===null?TT(o,null,c,h):ql(o,s.child,c,h)}function kT(s,o,c,h,y){c=c.render;var w=o.ref;if("ref"in h){var A={};for(var M in h)M!=="ref"&&(A[M]=h[M])}else A=h;return po(o),h=tv(s,o,c,A,w,y),M=nv(),s!==null&&!cn?(iv(s,o,y),es(s,o,y)):(et&&M&&Ly(o),o.flags|=1,yn(s,o,h,y),o.child)}function MT(s,o,c,h,y){if(s===null){var w=c.type;return typeof w=="function"&&!My(w)&&w.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=w,VT(s,o,w,h,y)):(s=tm(c.type,null,h,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,!Av(s,y)){var A=w.memoizedProps;if(c=c.compare,c=c!==null?c:Fu,c(A,h)&&s.ref===o.ref)return es(s,o,y)}return o.flags|=1,s=Kr(w,h),s.ref=o.ref,s.return=o,o.child=s}function VT(s,o,c,h,y){if(s!==null){var w=s.memoizedProps;if(Fu(w,h)&&s.ref===o.ref)if(cn=!1,o.pendingProps=h=w,Av(s,y))(s.flags&131072)!==0&&(cn=!0);else return o.lanes=s.lanes,es(s,o,y)}return xv(s,o,c,h,y)}function OT(s,o,c){var h=o.pendingProps,y=h.children,w=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=w!==null?w.baseLanes|c:c,s!==null){for(y=o.child=s.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;o.childLanes=w&~h}else o.childLanes=0,o.child=null;return LT(s,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&am(o,w!==null?w.cachePool:null),w!==null?V1(o,w):Zy(),ET(o);else return o.lanes=o.childLanes=536870912,LT(s,o,w!==null?w.baseLanes|c:c,c)}else w!==null?(am(o,w.cachePool),V1(o,w),Us(),o.memoizedState=null):(s!==null&&am(o,null),Zy(),Us());return yn(s,o,y,c),o.child}function LT(s,o,c,h){var y=$y();return y=y===null?null:{parent:nn._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},s!==null&&am(o,null),Zy(),ET(o),s!==null&&$u(s,o,h,!0),null}function Tm(s,o){var c=o.ref;if(c===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(o.flags|=4194816)}}function xv(s,o,c,h,y){return po(o),c=tv(s,o,c,h,void 0,y),h=nv(),s!==null&&!cn?(iv(s,o,y),es(s,o,y)):(et&&h&&Ly(o),o.flags|=1,yn(s,o,c,y),o.child)}function UT(s,o,c,h,y,w){return po(o),o.updateQueue=null,c=L1(o,h,c,y),O1(s),h=nv(),s!==null&&!cn?(iv(s,o,w),es(s,o,w)):(et&&h&&Ly(o),o.flags|=1,yn(s,o,c,w),o.child)}function BT(s,o,c,h,y){if(po(o),o.stateNode===null){var w=jl,A=c.contextType;typeof A=="object"&&A!==null&&(w=In(A)),w=new c(h,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=yv,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=h,w.state=o.memoizedState,w.refs={},Wy(o),A=c.contextType,w.context=typeof A=="object"&&A!==null?In(A):jl,w.state=o.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(gv(o,c,A,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&yv.enqueueReplaceState(w,w.state,null),Ju(o,h,w,y),Zu(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){w=o.stateNode;var M=o.memoizedProps,G=vo(c,M);w.props=G;var Z=w.context,oe=c.contextType;A=jl,typeof oe=="object"&&oe!==null&&(A=In(oe));var ue=c.getDerivedStateFromProps;oe=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M||Z!==A)&&AT(o,w,h,A),ks=!1;var J=o.memoizedState;w.state=J,Ju(o,h,w,y),Zu(),Z=o.memoizedState,M||J!==Z||ks?(typeof ue=="function"&&(gv(o,c,ue,h),Z=o.memoizedState),(G=ks||ST(o,c,G,h,J,Z,A))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Z),w.props=h,w.state=Z,w.context=A,h=G):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,Yy(s,o),A=o.memoizedProps,oe=vo(c,A),w.props=oe,ue=o.pendingProps,J=w.context,Z=c.contextType,G=jl,typeof Z=="object"&&Z!==null&&(G=In(Z)),M=c.getDerivedStateFromProps,(Z=typeof M=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ue||J!==G)&&AT(o,w,h,G),ks=!1,J=o.memoizedState,w.state=J,Ju(o,h,w,y),Zu();var ee=o.memoizedState;A!==ue||J!==ee||ks||s!==null&&s.dependencies!==null&&rm(s.dependencies)?(typeof M=="function"&&(gv(o,c,M,h),ee=o.memoizedState),(oe=ks||ST(o,c,oe,h,J,ee,G)||s!==null&&s.dependencies!==null&&rm(s.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ee,G),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ee,G)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ee),w.props=h,w.state=ee,w.context=G,h=oe):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=1024),h=!1)}return w=h,Tm(s,o),h=(o.flags&128)!==0,w||h?(w=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,s!==null&&h?(o.child=ql(o,s.child,null,y),o.child=ql(o,null,c,y)):yn(s,o,c,y),o.memoizedState=w.state,s=o.child):s=es(s,o,y),s}function FT(s,o,c,h){return Hu(),o.flags|=256,yn(s,o,c,h),o.child}var wv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bv(s){return{baseLanes:s,cachePool:C1()}}function _v(s,o,c){return s=s!==null?s.childLanes&~c:0,o&&(s|=Ci),s}function zT(s,o,c){var h=o.pendingProps,y=!1,w=(o.flags&128)!==0,A;if((A=w)||(A=s!==null&&s.memoizedState===null?!1:(rn.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(et){if(y?Ls(o):Us(),et){var M=jt,G;if(G=M){e:{for(G=M,M=rr;G.nodeType!==8;){if(!M){M=null;break e}if(G=Fi(G.nextSibling),G===null){M=null;break e}}M=G}M!==null?(o.memoizedState={dehydrated:M,treeContext:co!==null?{id:Wr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},G=si(18,null,null,0),G.stateNode=M,G.return=o,o.child=G,Ln=o,jt=null,G=!0):G=!1}G||fo(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return s0(M)?o.lanes=32:o.lanes=536870912,null;Jr(o)}return M=h.children,h=h.fallback,y?(Us(),y=o.mode,M=Em({mode:"hidden",children:M},y),h=lo(h,y,c,null),M.return=o,h.return=o,M.sibling=h,o.child=M,y=o.child,y.memoizedState=bv(c),y.childLanes=_v(s,A,c),o.memoizedState=wv,h):(Ls(o),Tv(o,M))}if(G=s.memoizedState,G!==null&&(M=G.dehydrated,M!==null)){if(w)o.flags&256?(Ls(o),o.flags&=-257,o=Ev(s,o,c)):o.memoizedState!==null?(Us(),o.child=s.child,o.flags|=128,o=null):(Us(),y=h.fallback,M=o.mode,h=Em({mode:"visible",children:h.children},M),y=lo(y,M,c,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,ql(o,s.child,null,c),h=o.child,h.memoizedState=bv(c),h.childLanes=_v(s,A,c),o.memoizedState=wv,o=y);else if(Ls(o),s0(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Z=A.dgst;A=Z,h=Error(i(419)),h.stack="",h.digest=A,Gu({value:h,source:null,stack:null}),o=Ev(s,o,c)}else if(cn||$u(s,o,c,!1),A=(c&s.childLanes)!==0,cn||A){if(A=ht,A!==null&&(h=c&-c,h=(h&42)!==0?1:As(h),h=(h&(A.suspendedLanes|c))!==0?0:h,h!==0&&h!==G.retryLane))throw G.retryLane=h,Dl(s,h),ui(A,s,h),jT;M.data==="$?"||zv(),o=Ev(s,o,c)}else M.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=G.treeContext,jt=Fi(M.nextSibling),Ln=o,et=!0,ho=null,rr=!1,s!==null&&(Si[Ai++]=Wr,Si[Ai++]=Yr,Si[Ai++]=co,Wr=s.id,Yr=s.overflow,co=o),o=Tv(o,h.children),o.flags|=4096);return o}return y?(Us(),y=h.fallback,M=o.mode,G=s.child,Z=G.sibling,h=Kr(G,{mode:"hidden",children:h.children}),h.subtreeFlags=G.subtreeFlags&65011712,Z!==null?y=Kr(Z,y):(y=lo(y,M,c,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,M=s.child.memoizedState,M===null?M=bv(c):(G=M.cachePool,G!==null?(Z=nn._currentValue,G=G.parent!==Z?{parent:Z,pool:Z}:G):G=C1(),M={baseLanes:M.baseLanes|c,cachePool:G}),y.memoizedState=M,y.childLanes=_v(s,A,c),o.memoizedState=wv,h):(Ls(o),c=s.child,s=c.sibling,c=Kr(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=c,o.memoizedState=null,c)}function Tv(s,o){return o=Em({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Em(s,o){return s=si(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ev(s,o,c){return ql(o,s.child,null,c),s=Tv(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function qT(s,o,c){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),zy(s.return,o,c)}function Sv(s,o,c,h,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:y}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=c,w.tailMode=y)}function HT(s,o,c){var h=o.pendingProps,y=h.revealOrder,w=h.tail;if(yn(s,o,h.children,c),h=rn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&qT(s,c,o);else if(s.tag===19)qT(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(pe(rn,h),y){case"forwards":for(c=o.child,y=null;c!==null;)s=c.alternate,s!==null&&wm(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Sv(o,!1,y,c,w);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&wm(s)===null){o.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}Sv(o,!0,c,null,w);break;case"together":Sv(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function es(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Hs|=o.lanes,(c&o.childLanes)===0)if(s!==null){if($u(s,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,c=Kr(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=Kr(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function Av(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&rm(s)))}function gD(s,o,c){switch(o.tag){case 3:Be(o,o.stateNode.containerInfo),js(o,nn,s.memoizedState.cache),Hu();break;case 27:case 5:Sn(o);break;case 4:Be(o,o.stateNode.containerInfo);break;case 10:js(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ls(o),o.flags|=128,null):(c&o.child.childLanes)!==0?zT(s,o,c):(Ls(o),s=es(s,o,c),s!==null?s.sibling:null);Ls(o);break;case 19:var y=(s.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||($u(s,o,c,!1),h=(c&o.childLanes)!==0),y){if(h)return HT(s,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pe(rn,rn.current),h)break;return null;case 22:case 23:return o.lanes=0,OT(s,o,c);case 24:js(o,nn,s.memoizedState.cache)}return es(s,o,c)}function GT(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps)cn=!0;else{if(!Av(s,c)&&(o.flags&128)===0)return cn=!1,gD(s,o,c);cn=(s.flags&131072)!==0}else cn=!1,et&&(o.flags&1048576)!==0&&b1(o,im,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,y=h._init;if(h=y(h._payload),o.type=h,typeof h=="function")My(h)?(s=vo(h,s),o.tag=1,o=BT(null,o,h,s,c)):(o.tag=0,o=xv(null,o,h,s,c));else{if(h!=null){if(y=h.$$typeof,y===z){o.tag=11,o=kT(null,o,h,s,c);break e}else if(y===j){o.tag=14,o=MT(null,o,h,s,c);break e}}throw o=me(h)||h,Error(i(306,o,""))}}return o;case 0:return xv(s,o,o.type,o.pendingProps,c);case 1:return h=o.type,y=vo(h,o.pendingProps),BT(s,o,h,y,c);case 3:e:{if(Be(o,o.stateNode.containerInfo),s===null)throw Error(i(387));h=o.pendingProps;var w=o.memoizedState;y=w.element,Yy(s,o),Ju(o,h,null,c);var A=o.memoizedState;if(h=A.cache,js(o,nn,h),h!==w.cache&&qy(o,[nn],c,!0),Zu(),h=A.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=FT(s,o,h,c);break e}else if(h!==y){y=Ti(Error(i(424)),o),Gu(y),o=FT(s,o,h,c);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(jt=Fi(s.firstChild),Ln=o,et=!0,ho=null,rr=!0,c=TT(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Hu(),h===y){o=es(s,o,c);break e}yn(s,o,h,c)}o=o.child}return o;case 26:return Tm(s,o),s===null?(c=YE(o.type,null,o.pendingProps,null))?o.memoizedState=c:et||(c=o.type,s=o.pendingProps,h=Lm(_e.current).createElement(c),h[Jt]=o,h[$t]=s,xn(h,c,s),Ut(h),o.stateNode=h):o.memoizedState=YE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Sn(o),s===null&&et&&(h=o.stateNode=$E(o.type,o.pendingProps,_e.current),Ln=o,rr=!0,y=jt,Ws(o.type)?(a0=y,jt=Fi(h.firstChild)):jt=y),yn(s,o,o.pendingProps.children,c),Tm(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&et&&((y=h=jt)&&(h=HD(h,o.type,o.pendingProps,rr),h!==null?(o.stateNode=h,Ln=o,jt=Fi(h.firstChild),rr=!1,y=!0):y=!1),y||fo(o)),Sn(o),y=o.type,w=o.pendingProps,A=s!==null?s.memoizedProps:null,h=w.children,n0(y,w)?h=null:A!==null&&n0(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=tv(s,o,lD,null,null,c),bd._currentValue=y),Tm(s,o),yn(s,o,h,c),o.child;case 6:return s===null&&et&&((s=c=jt)&&(c=GD(c,o.pendingProps,rr),c!==null?(o.stateNode=c,Ln=o,jt=null,s=!0):s=!1),s||fo(o)),null;case 13:return zT(s,o,c);case 4:return Be(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=ql(o,null,h,c):yn(s,o,h,c),o.child;case 11:return kT(s,o,o.type,o.pendingProps,c);case 7:return yn(s,o,o.pendingProps,c),o.child;case 8:return yn(s,o,o.pendingProps.children,c),o.child;case 12:return yn(s,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,js(o,o.type,h.value),yn(s,o,h.children,c),o.child;case 9:return y=o.type._context,h=o.pendingProps.children,po(o),y=In(y),h=h(y),o.flags|=1,yn(s,o,h,c),o.child;case 14:return MT(s,o,o.type,o.pendingProps,c);case 15:return VT(s,o,o.type,o.pendingProps,c);case 19:return HT(s,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},s===null?(c=Em(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Kr(s.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return OT(s,o,c);case 24:return po(o),h=In(nn),s===null?(y=$y(),y===null&&(y=ht,w=Hy(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=c),y=w),o.memoizedState={parent:h,cache:y},Wy(o),js(o,nn,y)):((s.lanes&c)!==0&&(Yy(s,o),Ju(o,null,null,c),Zu()),y=s.memoizedState,w=o.memoizedState,y.parent!==h?(y={parent:h,cache:h},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),js(o,nn,h)):(h=w.cache,js(o,nn,h),h!==y.cache&&qy(o,[nn],c,!0))),yn(s,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ts(s){s.flags|=4}function $T(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!e2(o)){if(o=Ii.current,o!==null&&((Qe&4194048)===Qe?sr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||o!==sr))throw Qu=Ky,N1;s.flags|=8192}}function Sm(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Tu():536870912,s.lanes|=o,Kl|=o)}function ad(s,o){if(!et)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Et(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(o)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=c,o}function yD(s,o,c){var h=o.pendingProps;switch(Uy(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return c=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Xr(nn),Tt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(qu(o)?ts(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,E1())),Et(o),null;case 26:return c=o.memoizedState,s===null?(ts(o),c!==null?(Et(o),$T(o,c)):(Et(o),o.flags&=-16777217)):c?c!==s.memoizedState?(ts(o),Et(o),$T(o,c)):(Et(o),o.flags&=-16777217):(s.memoizedProps!==h&&ts(o),Et(o),o.flags&=-16777217),null;case 27:$n(o),c=_e.current;var y=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&ts(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Et(o),null}s=Ce.current,qu(o)?_1(o):(s=$E(y,h,c),o.stateNode=s,ts(o))}return Et(o),null;case 5:if($n(o),c=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&ts(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Et(o),null}if(s=Ce.current,qu(o))_1(o);else{switch(y=Lm(_e.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?y.createElement(c,{is:h.is}):y.createElement(c)}}s[Jt]=o,s[$t]=h;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=s;e:switch(xn(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ts(o)}}return Et(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&ts(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(s=_e.current,qu(o)){if(s=o.stateNode,c=o.memoizedProps,h=null,y=Ln,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[Jt]=o,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||UE(s.nodeValue,c)),s||fo(o)}else s=Lm(s).createTextNode(h),s[Jt]=o,o.stateNode=s}return Et(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=qu(o),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Jt]=o}else Hu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),y=!1}else y=E1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Jr(o),o):(Jr(o),null)}if(Jr(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=o.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)}return c!==s&&c&&(o.child.flags|=8192),Sm(o,o.updateQueue),Et(o),null;case 4:return Tt(),s===null&&Xv(o.stateNode.containerInfo),Et(o),null;case 10:return Xr(o.type),Et(o),null;case 19:if(ge(rn),y=o.memoizedState,y===null)return Et(o),null;if(h=(o.flags&128)!==0,w=y.rendering,w===null)if(h)ad(y,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(w=wm(s),w!==null){for(o.flags|=128,ad(y,!1),s=w.updateQueue,o.updateQueue=s,Sm(o,s),o.subtreeFlags=0,s=c,c=o.child;c!==null;)w1(c,s),c=c.sibling;return pe(rn,rn.current&1|2),o.child}s=s.sibling}y.tail!==null&&yi()>Cm&&(o.flags|=128,h=!0,ad(y,!1),o.lanes=4194304)}else{if(!h)if(s=wm(w),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,Sm(o,s),ad(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!et)return Et(o),null}else 2*yi()-y.renderingStartTime>Cm&&c!==536870912&&(o.flags|=128,h=!0,ad(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(s=y.last,s!==null?s.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=yi(),o.sibling=null,s=rn.current,pe(rn,h?s&1|2:s&1),o):(Et(o),null);case 22:case 23:return Jr(o),Jy(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),c=o.updateQueue,c!==null&&Sm(o,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),s!==null&&ge(go),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Xr(nn),Et(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function vD(s,o){switch(Uy(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Xr(nn),Tt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return $n(o),null;case 13:if(Jr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Hu()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ge(rn),null;case 4:return Tt(),null;case 10:return Xr(o.type),null;case 22:case 23:return Jr(o),Jy(),s!==null&&ge(go),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Xr(nn),null;case 25:return null;default:return null}}function KT(s,o){switch(Uy(o),o.tag){case 3:Xr(nn),Tt();break;case 26:case 27:case 5:$n(o);break;case 4:Tt();break;case 13:Jr(o);break;case 19:ge(rn);break;case 10:Xr(o.type);break;case 22:case 23:Jr(o),Jy(),s!==null&&ge(go);break;case 24:Xr(nn)}}function od(s,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var y=h.next;c=y;do{if((c.tag&s)===s){h=void 0;var w=c.create,A=c.inst;h=w(),A.destroy=h}c=c.next}while(c!==y)}}catch(M){dt(o,o.return,M)}}function Bs(s,o,c){try{var h=o.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&s)===s){var A=h.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,y=o;var G=c,Z=M;try{Z()}catch(oe){dt(y,G,oe)}}}h=h.next}while(h!==w)}}catch(oe){dt(o,o.return,oe)}}function WT(s){var o=s.updateQueue;if(o!==null){var c=s.stateNode;try{M1(o,c)}catch(h){dt(s,s.return,h)}}}function YT(s,o,c){c.props=vo(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){dt(s,o,h)}}function ld(s,o){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(y){dt(s,o,y)}}function ar(s,o){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(y){dt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){dt(s,o,y)}else c.current=null}function QT(s){var o=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(y){dt(s,s.return,y)}}function Iv(s,o,c){try{var h=s.stateNode;UD(h,s.type,c,o),h[$t]=o}catch(y){dt(s,s.return,y)}}function XT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ws(s.type)||s.tag===4}function Cv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||XT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ws(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nv(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(s),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Om));else if(h!==4&&(h===27&&Ws(s.type)&&(c=s.stateNode,o=null),s=s.child,s!==null))for(Nv(s,o,c),s=s.sibling;s!==null;)Nv(s,o,c),s=s.sibling}function Am(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(h!==4&&(h===27&&Ws(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Am(s,o,c),s=s.sibling;s!==null;)Am(s,o,c),s=s.sibling}function ZT(s){var o=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);xn(o,h,c),o[Jt]=s,o[$t]=c}catch(w){dt(s,s.return,w)}}var ns=!1,Ft=!1,Rv=!1,JT=typeof WeakSet=="function"?WeakSet:Set,un=null;function xD(s,o){if(s=s.containerInfo,e0=Hm,s=u1(s),Cy(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var A=0,M=-1,G=-1,Z=0,oe=0,ue=s,J=null;t:for(;;){for(var ee;ue!==c||y!==0&&ue.nodeType!==3||(M=A+y),ue!==w||h!==0&&ue.nodeType!==3||(G=A+h),ue.nodeType===3&&(A+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)J=ue,ue=ee;for(;;){if(ue===s)break t;if(J===c&&++Z===y&&(M=A),J===w&&++oe===h&&(G=A),(ee=ue.nextSibling)!==null)break;ue=J,J=ue.parentNode}ue=ee}c=M===-1||G===-1?null:{start:M,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(t0={focusedElem:s,selectionRange:c},Hm=!1,un=o;un!==null;)if(o=un,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,un=s;else for(;un!==null;){switch(o=un,w=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,c=o,y=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var je=vo(c.type,y,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(je,w),h.__reactInternalSnapshotBeforeUpdate=s}catch(Re){dt(c,c.return,Re)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,c=s.nodeType,c===9)r0(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":r0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,un=s;break}un=o.return}}function eE(s,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Fs(s,c),h&4&&od(5,c);break;case 1:if(Fs(s,c),h&4)if(s=c.stateNode,o===null)try{s.componentDidMount()}catch(A){dt(c,c.return,A)}else{var y=vo(c.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){dt(c,c.return,A)}}h&64&&WT(c),h&512&&ld(c,c.return);break;case 3:if(Fs(s,c),h&64&&(s=c.updateQueue,s!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{M1(s,o)}catch(A){dt(c,c.return,A)}}break;case 27:o===null&&h&4&&ZT(c);case 26:case 5:Fs(s,c),o===null&&h&4&&QT(c),h&512&&ld(c,c.return);break;case 12:Fs(s,c);break;case 13:Fs(s,c),h&4&&iE(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=CD.bind(null,c),$D(s,c))));break;case 22:if(h=c.memoizedState!==null||ns,!h){o=o!==null&&o.memoizedState!==null||Ft,y=ns;var w=Ft;ns=h,(Ft=o)&&!w?zs(s,c,(c.subtreeFlags&8772)!==0):Fs(s,c),ns=y,Ft=w}break;case 30:break;default:Fs(s,c)}}function tE(s){var o=s.alternate;o!==null&&(s.alternate=null,tE(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ns(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var yt=null,Wn=!1;function is(s,o,c){for(c=c.child;c!==null;)nE(s,o,c),c=c.sibling}function nE(s,o,c){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(Dt,c)}catch{}switch(c.tag){case 26:Ft||ar(c,o),is(s,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ft||ar(c,o);var h=yt,y=Wn;Ws(c.type)&&(yt=c.stateNode,Wn=!1),is(s,o,c),yd(c.stateNode),yt=h,Wn=y;break;case 5:Ft||ar(c,o);case 6:if(h=yt,y=Wn,yt=null,is(s,o,c),yt=h,Wn=y,yt!==null)if(Wn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(c.stateNode)}catch(w){dt(c,o,w)}else try{yt.removeChild(c.stateNode)}catch(w){dt(c,o,w)}break;case 18:yt!==null&&(Wn?(s=yt,HE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Sd(s)):HE(yt,c.stateNode));break;case 4:h=yt,y=Wn,yt=c.stateNode.containerInfo,Wn=!0,is(s,o,c),yt=h,Wn=y;break;case 0:case 11:case 14:case 15:Ft||Bs(2,c,o),Ft||Bs(4,c,o),is(s,o,c);break;case 1:Ft||(ar(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&YT(c,o,h)),is(s,o,c);break;case 21:is(s,o,c);break;case 22:Ft=(h=Ft)||c.memoizedState!==null,is(s,o,c),Ft=h;break;default:is(s,o,c)}}function iE(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Sd(s)}catch(c){dt(o,o.return,c)}}function wD(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new JT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new JT),o;default:throw Error(i(435,s.tag))}}function Pv(s,o){var c=wD(s);o.forEach(function(h){var y=ND.bind(null,s,h);c.has(h)||(c.add(h),h.then(y,y))})}function ai(s,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var y=c[h],w=s,A=o,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(Ws(M.type)){yt=M.stateNode,Wn=!1;break e}break;case 5:yt=M.stateNode,Wn=!1;break e;case 3:case 4:yt=M.stateNode.containerInfo,Wn=!0;break e}M=M.return}if(yt===null)throw Error(i(160));nE(w,A,y),yt=null,Wn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)rE(o,s),o=o.sibling}var Bi=null;function rE(s,o){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ai(o,s),oi(s),h&4&&(Bs(3,s,s.return),od(3,s),Bs(5,s,s.return));break;case 1:ai(o,s),oi(s),h&512&&(Ft||c===null||ar(c,c.return)),h&64&&ns&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var y=Bi;if(ai(o,s),oi(s),h&512&&(Ft||c===null||ar(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[$a]||w[Jt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),xn(w,h,c),w[Jt]=s,Ut(w),h=w;break e;case"link":var A=ZE("link","href",y).get(h+(c.href||""));if(A){for(var M=0;M<A.length;M++)if(w=A[M],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(M,1);break t}}w=y.createElement(h),xn(w,h,c),y.head.appendChild(w);break;case"meta":if(A=ZE("meta","content",y).get(h+(c.content||""))){for(M=0;M<A.length;M++)if(w=A[M],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(M,1);break t}}w=y.createElement(h),xn(w,h,c),y.head.appendChild(w);break;default:throw Error(i(468,h))}w[Jt]=s,Ut(w),h=w}s.stateNode=h}else JE(y,s.type,s.stateNode);else s.stateNode=XE(y,h,s.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?JE(y,s.type,s.stateNode):XE(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Iv(s,s.memoizedProps,c.memoizedProps)}break;case 27:ai(o,s),oi(s),h&512&&(Ft||c===null||ar(c,c.return)),c!==null&&h&4&&Iv(s,s.memoizedProps,c.memoizedProps);break;case 5:if(ai(o,s),oi(s),h&512&&(Ft||c===null||ar(c,c.return)),s.flags&32){y=s.stateNode;try{xi(y,"")}catch(ee){dt(s,s.return,ee)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,Iv(s,y,c!==null?c.memoizedProps:y)),h&1024&&(Rv=!0);break;case 6:if(ai(o,s),oi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(ee){dt(s,s.return,ee)}}break;case 3:if(Fm=null,y=Bi,Bi=Um(o.containerInfo),ai(o,s),Bi=y,oi(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Sd(o.containerInfo)}catch(ee){dt(s,s.return,ee)}Rv&&(Rv=!1,sE(s));break;case 4:h=Bi,Bi=Um(s.stateNode.containerInfo),ai(o,s),oi(s),Bi=h;break;case 12:ai(o,s),oi(s);break;case 13:ai(o,s),oi(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ov=yi()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Pv(s,h)));break;case 22:y=s.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,Z=ns,oe=Ft;if(ns=Z||y,Ft=oe||G,ai(o,s),Ft=oe,ns=Z,oi(s),h&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||G||ns||Ft||xo(s)),c=null,o=s;;){if(o.tag===5||o.tag===26){if(c===null){G=c=o;try{if(w=G.stateNode,y)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=G.stateNode;var ue=G.memoizedProps.style,J=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;M.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){dt(G,G.return,ee)}}}else if(o.tag===6){if(c===null){G=o;try{G.stateNode.nodeValue=y?"":G.memoizedProps}catch(ee){dt(G,G.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Pv(s,c))));break;case 19:ai(o,s),oi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Pv(s,h)));break;case 30:break;case 21:break;default:ai(o,s),oi(s)}}function oi(s){var o=s.flags;if(o&2){try{for(var c,h=s.return;h!==null;){if(XT(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var y=c.stateNode,w=Cv(s);Am(s,w,y);break;case 5:var A=c.stateNode;c.flags&32&&(xi(A,""),c.flags&=-33);var M=Cv(s);Am(s,M,A);break;case 3:case 4:var G=c.stateNode.containerInfo,Z=Cv(s);Nv(s,Z,G);break;default:throw Error(i(161))}}catch(oe){dt(s,s.return,oe)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function sE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;sE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Fs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)eE(s,o.alternate,o),o=o.sibling}function xo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Bs(4,o,o.return),xo(o);break;case 1:ar(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&YT(o,o.return,c),xo(o);break;case 27:yd(o.stateNode);case 26:case 5:ar(o,o.return),xo(o);break;case 22:o.memoizedState===null&&xo(o);break;case 30:xo(o);break;default:xo(o)}s=s.sibling}}function zs(s,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,y=s,w=o,A=w.flags;switch(w.tag){case 0:case 11:case 15:zs(y,w,c),od(4,w);break;case 1:if(zs(y,w,c),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){dt(h,h.return,Z)}if(h=w,y=h.updateQueue,y!==null){var M=h.stateNode;try{var G=y.shared.hiddenCallbacks;if(G!==null)for(y.shared.hiddenCallbacks=null,y=0;y<G.length;y++)k1(G[y],M)}catch(Z){dt(h,h.return,Z)}}c&&A&64&&WT(w),ld(w,w.return);break;case 27:ZT(w);case 26:case 5:zs(y,w,c),c&&h===null&&A&4&&QT(w),ld(w,w.return);break;case 12:zs(y,w,c);break;case 13:zs(y,w,c),c&&A&4&&iE(y,w);break;case 22:w.memoizedState===null&&zs(y,w,c),ld(w,w.return);break;case 30:break;default:zs(y,w,c)}o=o.sibling}}function Dv(s,o){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Ku(c))}function jv(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ku(s))}function or(s,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)aE(s,o,c,h),o=o.sibling}function aE(s,o,c,h){var y=o.flags;switch(o.tag){case 0:case 11:case 15:or(s,o,c,h),y&2048&&od(9,o);break;case 1:or(s,o,c,h);break;case 3:or(s,o,c,h),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ku(s)));break;case 12:if(y&2048){or(s,o,c,h),s=o.stateNode;try{var w=o.memoizedProps,A=w.id,M=w.onPostCommit;typeof M=="function"&&M(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){dt(o,o.return,G)}}else or(s,o,c,h);break;case 13:or(s,o,c,h);break;case 23:break;case 22:w=o.stateNode,A=o.alternate,o.memoizedState!==null?w._visibility&2?or(s,o,c,h):cd(s,o):w._visibility&2?or(s,o,c,h):(w._visibility|=2,Hl(s,o,c,h,(o.subtreeFlags&10256)!==0)),y&2048&&Dv(A,o);break;case 24:or(s,o,c,h),y&2048&&jv(o.alternate,o);break;default:or(s,o,c,h)}}function Hl(s,o,c,h,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var w=s,A=o,M=c,G=h,Z=A.flags;switch(A.tag){case 0:case 11:case 15:Hl(w,A,M,G,y),od(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?Hl(w,A,M,G,y):cd(w,A):(oe._visibility|=2,Hl(w,A,M,G,y)),y&&Z&2048&&Dv(A.alternate,A);break;case 24:Hl(w,A,M,G,y),y&&Z&2048&&jv(A.alternate,A);break;default:Hl(w,A,M,G,y)}o=o.sibling}}function cd(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=s,h=o,y=h.flags;switch(h.tag){case 22:cd(c,h),y&2048&&Dv(h.alternate,h);break;case 24:cd(c,h),y&2048&&jv(h.alternate,h);break;default:cd(c,h)}o=o.sibling}}var ud=8192;function Gl(s){if(s.subtreeFlags&ud)for(s=s.child;s!==null;)oE(s),s=s.sibling}function oE(s){switch(s.tag){case 26:Gl(s),s.flags&ud&&s.memoizedState!==null&&sj(Bi,s.memoizedState,s.memoizedProps);break;case 5:Gl(s);break;case 3:case 4:var o=Bi;Bi=Um(s.stateNode.containerInfo),Gl(s),Bi=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=ud,ud=16777216,Gl(s),ud=o):Gl(s));break;default:Gl(s)}}function lE(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function dd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];un=h,uE(h,s)}lE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)cE(s),s=s.sibling}function cE(s){switch(s.tag){case 0:case 11:case 15:dd(s),s.flags&2048&&Bs(9,s,s.return);break;case 3:dd(s);break;case 12:dd(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Im(s)):dd(s);break;default:dd(s)}}function Im(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];un=h,uE(h,s)}lE(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Bs(8,o,o.return),Im(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Im(o));break;default:Im(o)}s=s.sibling}}function uE(s,o){for(;un!==null;){var c=un;switch(c.tag){case 0:case 11:case 15:Bs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ku(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,un=h;else e:for(c=s;un!==null;){h=un;var y=h.sibling,w=h.return;if(tE(h),h===c){un=null;break e}if(y!==null){y.return=w,un=y;break e}un=w}}}var bD={getCacheForType:function(s){var o=In(nn),c=o.data.get(s);return c===void 0&&(c=s(),o.data.set(s,c)),c}},_D=typeof WeakMap=="function"?WeakMap:Map,it=0,ht=null,ze=null,Qe=0,rt=0,li=null,qs=!1,$l=!1,kv=!1,rs=0,kt=0,Hs=0,wo=0,Mv=0,Ci=0,Kl=0,hd=null,Yn=null,Vv=!1,Ov=0,Cm=1/0,Nm=null,Gs=null,vn=0,$s=null,Wl=null,Yl=0,Lv=0,Uv=null,dE=null,fd=0,Bv=null;function ci(){if((it&2)!==0&&Qe!==0)return Qe&-Qe;if($.T!==null){var s=Vl;return s!==0?s:Kv()}return Is()}function hE(){Ci===0&&(Ci=(Qe&536870912)===0||et?_u():536870912);var s=Ii.current;return s!==null&&(s.flags|=32),Ci}function ui(s,o,c){(s===ht&&(rt===2||rt===9)||s.cancelPendingCommit!==null)&&(Ql(s,0),Ks(s,Qe,Ci,!1)),Vr(s,c),((it&2)===0||s!==ht)&&(s===ht&&((it&2)===0&&(wo|=c),kt===4&&Ks(s,Qe,Ci,!1)),lr(s))}function fE(s,o,c){if((it&6)!==0)throw Error(i(327));var h=!c&&(o&124)===0&&(o&s.expiredLanes)===0||Ga(s,o),y=h?SD(s,o):qv(s,o,!0),w=h;do{if(y===0){$l&&!h&&Ks(s,o,0,!1);break}else{if(c=s.current.alternate,w&&!TD(c)){y=qv(s,o,!1),w=!1;continue}if(y===2){if(w=o,s.errorRecoveryDisabledLanes&w)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var M=s;y=hd;var G=M.current.memoizedState.isDehydrated;if(G&&(Ql(M,A).flags|=256),A=qv(M,A,!1),A!==2){if(kv&&!G){M.errorRecoveryDisabledLanes|=w,wo|=w,y=4;break e}w=Yn,Yn=y,w!==null&&(Yn===null?Yn=w:Yn.push.apply(Yn,w))}y=A}if(w=!1,y!==2)continue}}if(y===1){Ql(s,0),Ks(s,o,0,!0);break}e:{switch(h=s,w=y,w){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ks(h,o,Ci,!qs);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Ov+300-yi(),10<y)){if(Ks(h,o,Ci,!qs),fl(h,0,!0)!==0)break e;h.timeoutHandle=zE(mE.bind(null,h,c,Yn,Nm,Vv,o,Ci,wo,Kl,qs,w,2,-0,0),y);break e}mE(h,c,Yn,Nm,Vv,o,Ci,wo,Kl,qs,w,0,-0,0)}}break}while(!0);lr(s)}function mE(s,o,c,h,y,w,A,M,G,Z,oe,ue,J,ee){if(s.timeoutHandle=-1,ue=o.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:rj},oE(o),ue=aj(),ue!==null)){s.cancelPendingCommit=ue(bE.bind(null,s,o,w,c,h,y,A,M,G,oe,1,J,ee)),Ks(s,w,A,!Z);return}bE(s,o,w,c,h,y,A,M,G)}function TD(s){for(var o=s;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var y=c[h],w=y.getSnapshot;y=y.value;try{if(!ri(w(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ks(s,o,c,h){o&=~Mv,o&=~wo,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var y=o;0<y;){var w=31-An(y),A=1<<w;h[w]=-1,y&=~A}c!==0&&Ki(s,c,o)}function Rm(){return(it&6)===0?(md(0),!1):!0}function Fv(){if(ze!==null){if(rt===0)var s=ze.return;else s=ze,Qr=mo=null,rv(s),zl=null,rd=0,s=ze;for(;s!==null;)KT(s.alternate,s),s=s.return;ze=null}}function Ql(s,o){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,FD(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Fv(),ht=s,ze=c=Kr(s.current,null),Qe=o,rt=0,li=null,qs=!1,$l=Ga(s,o),kv=!1,Kl=Ci=Mv=wo=Hs=kt=0,Yn=hd=null,Vv=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var y=31-An(h),w=1<<y;o|=s[y],h&=~w}return rs=o,Zf(),c}function pE(s,o){Ue=null,$.H=ym,o===Yu||o===om?(o=D1(),rt=3):o===N1?(o=D1(),rt=4):rt=o===jT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,li=o,ze===null&&(kt=1,_m(s,Ti(o,s.current)))}function gE(){var s=$.H;return $.H=ym,s===null?ym:s}function yE(){var s=$.A;return $.A=bD,s}function zv(){kt=4,qs||(Qe&4194048)!==Qe&&Ii.current!==null||($l=!0),(Hs&134217727)===0&&(wo&134217727)===0||ht===null||Ks(ht,Qe,Ci,!1)}function qv(s,o,c){var h=it;it|=2;var y=gE(),w=yE();(ht!==s||Qe!==o)&&(Nm=null,Ql(s,o)),o=!1;var A=kt;e:do try{if(rt!==0&&ze!==null){var M=ze,G=li;switch(rt){case 8:Fv(),A=6;break e;case 3:case 2:case 9:case 6:Ii.current===null&&(o=!0);var Z=rt;if(rt=0,li=null,Xl(s,M,G,Z),c&&$l){A=0;break e}break;default:Z=rt,rt=0,li=null,Xl(s,M,G,Z)}}ED(),A=kt;break}catch(oe){pE(s,oe)}while(!0);return o&&s.shellSuspendCounter++,Qr=mo=null,it=h,$.H=y,$.A=w,ze===null&&(ht=null,Qe=0,Zf()),A}function ED(){for(;ze!==null;)vE(ze)}function SD(s,o){var c=it;it|=2;var h=gE(),y=yE();ht!==s||Qe!==o?(Nm=null,Cm=yi()+500,Ql(s,o)):$l=Ga(s,o);e:do try{if(rt!==0&&ze!==null){o=ze;var w=li;t:switch(rt){case 1:rt=0,li=null,Xl(s,o,w,1);break;case 2:case 9:if(R1(w)){rt=0,li=null,xE(o);break}o=function(){rt!==2&&rt!==9||ht!==s||(rt=7),lr(s)},w.then(o,o);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:R1(w)?(rt=0,li=null,xE(o)):(rt=0,li=null,Xl(s,o,w,7));break;case 5:var A=null;switch(ze.tag){case 26:A=ze.memoizedState;case 5:case 27:var M=ze;if(!A||e2(A)){rt=0,li=null;var G=M.sibling;if(G!==null)ze=G;else{var Z=M.return;Z!==null?(ze=Z,Pm(Z)):ze=null}break t}}rt=0,li=null,Xl(s,o,w,5);break;case 6:rt=0,li=null,Xl(s,o,w,6);break;case 8:Fv(),kt=6;break e;default:throw Error(i(462))}}AD();break}catch(oe){pE(s,oe)}while(!0);return Qr=mo=null,$.H=h,$.A=y,it=c,ze!==null?0:(ht=null,Qe=0,Zf(),kt)}function AD(){for(;ze!==null&&!vu();)vE(ze)}function vE(s){var o=GT(s.alternate,s,rs);s.memoizedProps=s.pendingProps,o===null?Pm(s):ze=o}function xE(s){var o=s,c=o.alternate;switch(o.tag){case 15:case 0:o=UT(c,o,o.pendingProps,o.type,void 0,Qe);break;case 11:o=UT(c,o,o.pendingProps,o.type.render,o.ref,Qe);break;case 5:rv(o);default:KT(c,o),o=ze=w1(o,rs),o=GT(c,o,rs)}s.memoizedProps=s.pendingProps,o===null?Pm(s):ze=o}function Xl(s,o,c,h){Qr=mo=null,rv(o),zl=null,rd=0;var y=o.return;try{if(pD(s,y,o,c,Qe)){kt=1,_m(s,Ti(c,s.current)),ze=null;return}}catch(w){if(y!==null)throw ze=y,w;kt=1,_m(s,Ti(c,s.current)),ze=null;return}o.flags&32768?(et||h===1?s=!0:$l||(Qe&536870912)!==0?s=!1:(qs=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ii.current,h!==null&&h.tag===13&&(h.flags|=16384))),wE(o,s)):Pm(o)}function Pm(s){var o=s;do{if((o.flags&32768)!==0){wE(o,qs);return}s=o.return;var c=yD(o.alternate,o,rs);if(c!==null){ze=c;return}if(o=o.sibling,o!==null){ze=o;return}ze=o=s}while(o!==null);kt===0&&(kt=5)}function wE(s,o){do{var c=vD(s.alternate,s);if(c!==null){c.flags&=32767,ze=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(s=s.sibling,s!==null)){ze=s;return}ze=s=c}while(s!==null);kt=6,ze=null}function bE(s,o,c,h,y,w,A,M,G){s.cancelPendingCommit=null;do Dm();while(vn!==0);if((it&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(w=o.lanes|o.childLanes,w|=jy,Eu(s,c,w,A,M,G),s===ht&&(ze=ht=null,Qe=0),Wl=o,$s=s,Yl=c,Lv=w,Uv=y,dE=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,RD(Fa,function(){return AE(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,y=se.p,se.p=2,A=it,it|=4;try{xD(s,o,c)}finally{it=A,se.p=y,$.T=h}}vn=1,_E(),TE(),EE()}}function _E(){if(vn===1){vn=0;var s=$s,o=Wl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var h=se.p;se.p=2;var y=it;it|=4;try{rE(o,s);var w=t0,A=u1(s.containerInfo),M=w.focusedElem,G=w.selectionRange;if(A!==M&&M&&M.ownerDocument&&c1(M.ownerDocument.documentElement,M)){if(G!==null&&Cy(M)){var Z=G.start,oe=G.end;if(oe===void 0&&(oe=Z),"selectionStart"in M)M.selectionStart=Z,M.selectionEnd=Math.min(oe,M.value.length);else{var ue=M.ownerDocument||document,J=ue&&ue.defaultView||window;if(J.getSelection){var ee=J.getSelection(),je=M.textContent.length,Re=Math.min(G.start,je),ut=G.end===void 0?Re:Math.min(G.end,je);!ee.extend&&Re>ut&&(A=ut,ut=Re,Re=A);var W=l1(M,Re),K=l1(M,ut);if(W&&K&&(ee.rangeCount!==1||ee.anchorNode!==W.node||ee.anchorOffset!==W.offset||ee.focusNode!==K.node||ee.focusOffset!==K.offset)){var X=ue.createRange();X.setStart(W.node,W.offset),ee.removeAllRanges(),Re>ut?(ee.addRange(X),ee.extend(K.node,K.offset)):(X.setEnd(K.node,K.offset),ee.addRange(X))}}}}for(ue=[],ee=M;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ue.length;M++){var le=ue[M];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Hm=!!e0,t0=e0=null}finally{it=y,se.p=h,$.T=c}}s.current=o,vn=2}}function TE(){if(vn===2){vn=0;var s=$s,o=Wl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var h=se.p;se.p=2;var y=it;it|=4;try{eE(s,o.alternate,o)}finally{it=y,se.p=h,$.T=c}}vn=3}}function EE(){if(vn===4||vn===3){vn=0,If();var s=$s,o=Wl,c=Yl,h=dE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?vn=5:(vn=0,Wl=$s=null,SE(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Gs=null),ml(c),o=o.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(Dt,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=$.T,y=se.p,se.p=2,$.T=null;try{for(var w=s.onRecoverableError,A=0;A<h.length;A++){var M=h[A];w(M.value,{componentStack:M.stack})}}finally{$.T=o,se.p=y}}(Yl&3)!==0&&Dm(),lr(s),y=s.pendingLanes,(c&4194090)!==0&&(y&42)!==0?s===Bv?fd++:(fd=0,Bv=s):fd=0,md(0)}}function SE(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Ku(o)))}function Dm(s){return _E(),TE(),EE(),AE()}function AE(){if(vn!==5)return!1;var s=$s,o=Lv;Lv=0;var c=ml(Yl),h=$.T,y=se.p;try{se.p=32>c?32:c,$.T=null,c=Uv,Uv=null;var w=$s,A=Yl;if(vn=0,Wl=$s=null,Yl=0,(it&6)!==0)throw Error(i(331));var M=it;if(it|=4,cE(w.current),aE(w,w.current,A,c),it=M,md(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(Dt,w)}catch{}return!0}finally{se.p=y,$.T=h,SE(s,o)}}function IE(s,o,c){o=Ti(c,o),o=vv(s.stateNode,o,2),s=Vs(s,o,2),s!==null&&(Vr(s,2),lr(s))}function dt(s,o,c){if(s.tag===3)IE(s,s,c);else for(;o!==null;){if(o.tag===3){IE(o,s,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Gs===null||!Gs.has(h))){s=Ti(c,s),c=PT(2),h=Vs(o,c,2),h!==null&&(DT(c,h,o,s),Vr(h,2),lr(h));break}}o=o.return}}function Hv(s,o,c){var h=s.pingCache;if(h===null){h=s.pingCache=new _D;var y=new Set;h.set(o,y)}else y=h.get(o),y===void 0&&(y=new Set,h.set(o,y));y.has(c)||(kv=!0,y.add(c),s=ID.bind(null,s,o,c),o.then(s,s))}function ID(s,o,c){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ht===s&&(Qe&c)===c&&(kt===4||kt===3&&(Qe&62914560)===Qe&&300>yi()-Ov?(it&2)===0&&Ql(s,0):Mv|=c,Kl===Qe&&(Kl=0)),lr(s)}function CE(s,o){o===0&&(o=Tu()),s=Dl(s,o),s!==null&&(Vr(s,o),lr(s))}function CD(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),CE(s,c)}function ND(s,o){var c=0;switch(s.tag){case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),CE(s,c)}function RD(s,o){return Ua(s,o)}var jm=null,Zl=null,Gv=!1,km=!1,$v=!1,bo=0;function lr(s){s!==Zl&&s.next===null&&(Zl===null?jm=Zl=s:Zl=Zl.next=s),km=!0,Gv||(Gv=!0,DD())}function md(s,o){if(!$v&&km){$v=!0;do for(var c=!1,h=jm;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var A=h.suspendedLanes,M=h.pingedLanes;w=(1<<31-An(42|s)+1)-1,w&=y&~(A&~M),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,DE(h,w))}else w=Qe,w=fl(h,h===ht?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Ga(h,w)||(c=!0,DE(h,w));h=h.next}while(c);$v=!1}}function PD(){NE()}function NE(){km=Gv=!1;var s=0;bo!==0&&(BD()&&(s=bo),bo=0);for(var o=yi(),c=null,h=jm;h!==null;){var y=h.next,w=RE(h,o);w===0?(h.next=null,c===null?jm=y:c.next=y,y===null&&(Zl=c)):(c=h,(s!==0||(w&3)!==0)&&(km=!0)),h=y}md(s)}function RE(s,o){for(var c=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var A=31-An(w),M=1<<A,G=y[A];G===-1?((M&c)===0||(M&h)!==0)&&(y[A]=bu(M,o)):G<=o&&(s.expiredLanes|=M),w&=~M}if(o=ht,c=Qe,c=fl(s,s===o?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===o&&(rt===2||rt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ba(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Ga(s,c)){if(o=c&-c,o===s.callbackPriority)return o;switch(h!==null&&Ba(h),ml(c)){case 2:case 8:c=dl;break;case 32:c=Fa;break;case 268435456:c=hl;break;default:c=Fa}return h=PE.bind(null,s),c=Ua(c,h),s.callbackPriority=o,s.callbackNode=c,o}return h!==null&&h!==null&&Ba(h),s.callbackPriority=2,s.callbackNode=null,2}function PE(s,o){if(vn!==0&&vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Dm()&&s.callbackNode!==c)return null;var h=Qe;return h=fl(s,s===ht?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(fE(s,h,o),RE(s,yi()),s.callbackNode!=null&&s.callbackNode===c?PE.bind(null,s):null)}function DE(s,o){if(Dm())return null;fE(s,o,!0)}function DD(){zD(function(){(it&6)!==0?Ua(xu,PD):NE()})}function Kv(){return bo===0&&(bo=_u()),bo}function jE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wl(""+s)}function kE(s,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,s.id&&c.setAttribute("form",s.id),o.parentNode.insertBefore(c,o),s=new FormData(s),c.parentNode.removeChild(c),s}function jD(s,o,c,h,y){if(o==="submit"&&c&&c.stateNode===y){var w=jE((y[$t]||null).action),A=h.submitter;A&&(o=(o=A[$t]||null)?jE(o.formAction):A.getAttribute("formAction"),o!==null&&(w=o,A=null));var M=new bl("action","action",null,h,y);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(bo!==0){var G=A?kE(y,A):new FormData(y);fv(c,{pending:!0,data:G,method:y.method,action:w},null,G)}}else typeof w=="function"&&(M.preventDefault(),G=A?kE(y,A):new FormData(y),fv(c,{pending:!0,data:G,method:y.method,action:w},w,G))},currentTarget:y}]})}}for(var Wv=0;Wv<Dy.length;Wv++){var Yv=Dy[Wv],kD=Yv.toLowerCase(),MD=Yv[0].toUpperCase()+Yv.slice(1);Ui(kD,"on"+MD)}Ui(f1,"onAnimationEnd"),Ui(m1,"onAnimationIteration"),Ui(p1,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(Z6,"onTransitionRun"),Ui(J6,"onTransitionStart"),Ui(eD,"onTransitionCancel"),Ui(g1,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pd));function ME(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],y=h.event;h=h.listeners;e:{var w=void 0;if(o)for(var A=h.length-1;0<=A;A--){var M=h[A],G=M.instance,Z=M.currentTarget;if(M=M.listener,G!==w&&y.isPropagationStopped())break e;w=M,y.currentTarget=Z;try{w(y)}catch(oe){bm(oe)}y.currentTarget=null,w=G}else for(A=0;A<h.length;A++){if(M=h[A],G=M.instance,Z=M.currentTarget,M=M.listener,G!==w&&y.isPropagationStopped())break e;w=M,y.currentTarget=Z;try{w(y)}catch(oe){bm(oe)}y.currentTarget=null,w=G}}}}function qe(s,o){var c=o[Au];c===void 0&&(c=o[Au]=new Set);var h=s+"__bubble";c.has(h)||(VE(o,s,2,!1),c.add(h))}function Qv(s,o,c){var h=0;o&&(h|=4),VE(c,s,h,o)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function Xv(s){if(!s[Mm]){s[Mm]=!0,Iu.forEach(function(c){c!=="selectionchange"&&(VD.has(c)||Qv(c,!1,s),Qv(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Mm]||(o[Mm]=!0,Qv("selectionchange",!1,o))}}function VE(s,o,c,h){switch(a2(o)){case 2:var y=cj;break;case 8:y=uj;break;default:y=d0}c=y.bind(null,o,c,s),y=void 0,!bi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(o,c,{capture:!0,passive:y}):s.addEventListener(o,c,!0):y!==void 0?s.addEventListener(o,c,{passive:y}):s.addEventListener(o,c,!1)}function Zv(s,o,c,h,y){var w=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var M=h.stateNode.containerInfo;if(M===y)break;if(A===4)for(A=h.return;A!==null;){var G=A.tag;if((G===3||G===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;M!==null;){if(A=Or(M),A===null)return;if(G=A.tag,G===5||G===6||G===26||G===27){h=w=A;continue e}M=M.parentNode}}h=h.return}Of(function(){var Z=w,oe=wi(c),ue=[];e:{var J=y1.get(s);if(J!==void 0){var ee=bl,je=s;switch(s){case"keypress":if(Ji(c)===0)break e;case"keydown":case"keyup":ee=Il;break;case"focusin":je="focus",ee=El;break;case"focusout":je="blur",ee=El;break;case"beforeblur":case"afterblur":ee=El;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=_i;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ey;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Gf;break;case f1:case m1:case p1:ee=Sl;break;case g1:ee=Kf;break;case"scroll":case"scrollend":ee=Lf;break;case"wheel":ee=Cl;break;case"copy":case"cut":case"paste":ee=Al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Uu;break;case"toggle":case"beforetoggle":ee=Yf}var Re=(o&4)!==0,ut=!Re&&(s==="scroll"||s==="scrollend"),W=Re?J!==null?J+"Capture":null:J;Re=[];for(var K=Z,X;K!==null;){var le=K;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||W===null||(le=Ja(K,W),le!=null&&Re.push(gd(K,le,X))),ut)break;K=K.return}0<Re.length&&(J=new ee(J,je,null,c,oe),ue.push({event:J,listeners:Re}))}}if((o&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ee=s==="mouseout"||s==="pointerout",J&&c!==Fr&&(je=c.relatedTarget||c.fromElement)&&(Or(je)||je[vi]))break e;if((ee||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(je=c.relatedTarget||c.toElement,ee=Z,je=je?Or(je):null,je!==null&&(ut=a(je),Re=je.tag,je!==ut||Re!==5&&Re!==27&&Re!==6)&&(je=null)):(ee=null,je=Z),ee!==je)){if(Re=_i,le="onMouseLeave",W="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Re=Uu,le="onPointerLeave",W="onPointerEnter",K="pointer"),ut=ee==null?J:Yi(ee),X=je==null?J:Yi(je),J=new Re(le,K+"leave",ee,c,oe),J.target=ut,J.relatedTarget=X,le=null,Or(oe)===Z&&(Re=new Re(W,K+"enter",je,c,oe),Re.target=X,Re.relatedTarget=ut,le=Re),ut=le,ee&&je)t:{for(Re=ee,W=je,K=0,X=Re;X;X=Jl(X))K++;for(X=0,le=W;le;le=Jl(le))X++;for(;0<K-X;)Re=Jl(Re),K--;for(;0<X-K;)W=Jl(W),X--;for(;K--;){if(Re===W||W!==null&&Re===W.alternate)break t;Re=Jl(Re),W=Jl(W)}Re=null}else Re=null;ee!==null&&OE(ue,J,ee,Re,!1),je!==null&&ut!==null&&OE(ue,ut,je,Re,!0)}}e:{if(J=Z?Yi(Z):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ee=n1;else if(tn(J))if(i1)Ee=Y6;else{Ee=K6;var Fe=$6}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&Du(Z.elementType)&&(Ee=n1):Ee=W6;if(Ee&&(Ee=Ee(s,Z))){$r(ue,Ee,c,oe);break e}Fe&&Fe(s,J,Z),s==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&Ps(J,"number",J.value)}switch(Fe=Z?Yi(Z):window,s){case"focusin":(tn(Fe)||Fe.contentEditable==="true")&&(Nl=Fe,Ny=Z,zu=null);break;case"focusout":zu=Ny=Nl=null;break;case"mousedown":Ry=!0;break;case"contextmenu":case"mouseup":case"dragend":Ry=!1,d1(ue,c,oe);break;case"selectionchange":if(X6)break;case"keydown":case"keyup":d1(ue,c,oe)}var Ie;if(nr)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else We?ie(s,c)&&(Pe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Pe="onCompositionStart");Pe&&(E&&c.locale!=="ko"&&(We||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&We&&(Ie=ku()):(Zi=oe,Ds="value"in Zi?Zi.value:Zi.textContent,We=!0)),Fe=Vm(Z,Pe),0<Fe.length&&(Pe=new Ou(Pe,s,null,c,oe),ue.push({event:Pe,listeners:Fe}),Ie?Pe.data=Ie:(Ie=ye(c),Ie!==null&&(Pe.data=Ie)))),(Ie=b?en(s,c):Ye(s,c))&&(Pe=Vm(Z,"onBeforeInput"),0<Pe.length&&(Fe=new Ou("onBeforeInput","beforeinput",null,c,oe),ue.push({event:Fe,listeners:Pe}),Fe.data=Ie)),jD(ue,s,Z,c,oe)}ME(ue,o)})}function gd(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Vm(s,o){for(var c=o+"Capture",h=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Ja(s,c),y!=null&&h.unshift(gd(s,y,w)),y=Ja(s,o),y!=null&&h.push(gd(s,y,w))),s.tag===3)return h;s=s.return}return[]}function Jl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function OE(s,o,c,h,y){for(var w=o._reactName,A=[];c!==null&&c!==h;){var M=c,G=M.alternate,Z=M.stateNode;if(M=M.tag,G!==null&&G===h)break;M!==5&&M!==26&&M!==27||Z===null||(G=Z,y?(Z=Ja(c,w),Z!=null&&A.unshift(gd(c,Z,G))):y||(Z=Ja(c,w),Z!=null&&A.push(gd(c,Z,G)))),c=c.return}A.length!==0&&s.push({event:o,listeners:A})}var OD=/\r\n?/g,LD=/\u0000|\uFFFD/g;function LE(s){return(typeof s=="string"?s:""+s).replace(OD,`
`).replace(LD,"")}function UE(s,o){return o=LE(o),LE(s)===o}function Om(){}function ct(s,o,c,h,y,w){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||xi(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&xi(s,""+h);break;case"className":Qi(s,"class",h);break;case"tabIndex":Qi(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(s,c,h);break;case"style":Pu(s,h,w);break;case"data":if(o!=="object"){Qi(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=wl(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(o!=="input"&&ct(s,o,"name",y.name,y,null),ct(s,o,"formEncType",y.formEncType,y,null),ct(s,o,"formMethod",y.formMethod,y,null),ct(s,o,"formTarget",y.formTarget,y,null)):(ct(s,o,"encType",y.encType,y,null),ct(s,o,"method",y.method,y,null),ct(s,o,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=wl(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=Om);break;case"onScroll":h!=null&&qe("scroll",s);break;case"onScrollEnd":h!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=wl(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Rs(s,"popover",h);break;case"xlinkActuate":pn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":pn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":pn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":pn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":pn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":pn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":pn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":pn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":pn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Rs(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=_y.get(c)||c,Rs(s,c,h))}}function Jv(s,o,c,h,y,w){switch(c){case"style":Pu(s,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?xi(s,h):(typeof h=="number"||typeof h=="bigint")&&xi(s,""+h);break;case"onScroll":h!=null&&qe("scroll",s);break;case"onScrollEnd":h!=null&&qe("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),w=s[$t]||null,w=w!=null?w[c]:null,typeof w=="function"&&s.removeEventListener(o,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(o,h,y);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):Rs(s,c,h)}}}function xn(s,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var h=!1,y=!1,w;for(w in c)if(c.hasOwnProperty(w)){var A=c[w];if(A!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,w,A,c,null)}}y&&ct(s,o,"srcSet",c.srcSet,c,null),h&&ct(s,o,"src",c.src,c,null);return;case"input":qe("invalid",s);var M=w=A=y=null,G=null,Z=null;for(h in c)if(c.hasOwnProperty(h)){var oe=c[h];if(oe!=null)switch(h){case"name":y=oe;break;case"type":A=oe;break;case"checked":G=oe;break;case"defaultChecked":Z=oe;break;case"value":w=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:ct(s,o,h,oe,c,null)}}Qa(s,w,M,G,Z,A,y,!1),xl(s);return;case"select":qe("invalid",s),h=A=w=null;for(y in c)if(c.hasOwnProperty(y)&&(M=c[y],M!=null))switch(y){case"value":w=M;break;case"defaultValue":A=M;break;case"multiple":h=M;default:ct(s,o,y,M,c,null)}o=w,c=A,s.multiple=!!h,o!=null?Br(s,!!h,o,!1):c!=null&&Br(s,!!h,c,!0);return;case"textarea":qe("invalid",s),w=y=h=null;for(A in c)if(c.hasOwnProperty(A)&&(M=c[A],M!=null))switch(A){case"value":h=M;break;case"defaultValue":y=M;break;case"children":w=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:ct(s,o,A,M,c,null)}Xa(s,h,y,w),xl(s);return;case"option":for(G in c)if(c.hasOwnProperty(G)&&(h=c[G],h!=null))switch(G){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ct(s,o,G,h,c,null)}return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(h=0;h<pd.length;h++)qe(pd[h],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in c)if(c.hasOwnProperty(Z)&&(h=c[Z],h!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,Z,h,c,null)}return;default:if(Du(o)){for(oe in c)c.hasOwnProperty(oe)&&(h=c[oe],h!==void 0&&Jv(s,o,oe,h,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(h=c[M],h!=null&&ct(s,o,M,h,c,null))}function UD(s,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,A=null,M=null,G=null,Z=null,oe=null;for(ee in c){var ue=c[ee];if(c.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":G=ue;default:h.hasOwnProperty(ee)||ct(s,o,ee,null,h,ue)}}for(var J in h){var ee=h[J];if(ue=c[J],h.hasOwnProperty(J)&&(ee!=null||ue!=null))switch(J){case"type":w=ee;break;case"name":y=ee;break;case"checked":Z=ee;break;case"defaultChecked":oe=ee;break;case"value":A=ee;break;case"defaultValue":M=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ee!==ue&&ct(s,o,J,ee,h,ue)}}ii(s,A,M,G,Z,oe,w,y);return;case"select":ee=A=M=J=null;for(w in c)if(G=c[w],c.hasOwnProperty(w)&&G!=null)switch(w){case"value":break;case"multiple":ee=G;default:h.hasOwnProperty(w)||ct(s,o,w,null,h,G)}for(y in h)if(w=h[y],G=c[y],h.hasOwnProperty(y)&&(w!=null||G!=null))switch(y){case"value":J=w;break;case"defaultValue":M=w;break;case"multiple":A=w;default:w!==G&&ct(s,o,y,w,h,G)}o=M,c=A,h=ee,J!=null?Br(s,!!c,J,!1):!!h!=!!c&&(o!=null?Br(s,!!c,o,!0):Br(s,!!c,c?[]:"",!1));return;case"textarea":ee=J=null;for(M in c)if(y=c[M],c.hasOwnProperty(M)&&y!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:ct(s,o,M,null,h,y)}for(A in h)if(y=h[A],w=c[A],h.hasOwnProperty(A)&&(y!=null||w!=null))switch(A){case"value":J=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==w&&ct(s,o,A,y,h,w)}ot(s,J,ee);return;case"option":for(var je in c)if(J=c[je],c.hasOwnProperty(je)&&J!=null&&!h.hasOwnProperty(je))switch(je){case"selected":s.selected=!1;break;default:ct(s,o,je,null,h,J)}for(G in h)if(J=h[G],ee=c[G],h.hasOwnProperty(G)&&J!==ee&&(J!=null||ee!=null))switch(G){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ct(s,o,G,J,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in c)J=c[Re],c.hasOwnProperty(Re)&&J!=null&&!h.hasOwnProperty(Re)&&ct(s,o,Re,null,h,J);for(Z in h)if(J=h[Z],ee=c[Z],h.hasOwnProperty(Z)&&J!==ee&&(J!=null||ee!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:ct(s,o,Z,J,h,ee)}return;default:if(Du(o)){for(var ut in c)J=c[ut],c.hasOwnProperty(ut)&&J!==void 0&&!h.hasOwnProperty(ut)&&Jv(s,o,ut,void 0,h,J);for(oe in h)J=h[oe],ee=c[oe],!h.hasOwnProperty(oe)||J===ee||J===void 0&&ee===void 0||Jv(s,o,oe,J,h,ee);return}}for(var W in c)J=c[W],c.hasOwnProperty(W)&&J!=null&&!h.hasOwnProperty(W)&&ct(s,o,W,null,h,J);for(ue in h)J=h[ue],ee=c[ue],!h.hasOwnProperty(ue)||J===ee||J==null&&ee==null||ct(s,o,ue,J,h,ee)}var e0=null,t0=null;function Lm(s){return s.nodeType===9?s:s.ownerDocument}function BE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function n0(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var i0=null;function BD(){var s=window.event;return s&&s.type==="popstate"?s===i0?!1:(i0=s,!0):(i0=null,!1)}var zE=typeof setTimeout=="function"?setTimeout:void 0,FD=typeof clearTimeout=="function"?clearTimeout:void 0,qE=typeof Promise=="function"?Promise:void 0,zD=typeof queueMicrotask=="function"?queueMicrotask:typeof qE<"u"?function(s){return qE.resolve(null).then(s).catch(qD)}:zE;function qD(s){setTimeout(function(){throw s})}function Ws(s){return s==="head"}function HE(s,o){var c=o,h=0,y=0;do{var w=c.nextSibling;if(s.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(0<h&&8>h){c=h;var A=s.ownerDocument;if(c&1&&yd(A.documentElement),c&2&&yd(A.body),c&4)for(c=A.head,yd(c),A=c.firstChild;A;){var M=A.nextSibling,G=A.nodeName;A[$a]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=M}}if(y===0){s.removeChild(w),Sd(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:h=c.charCodeAt(0)-48;else h=0;c=w}while(c);Sd(o)}function r0(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":r0(c),Ns(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function HD(s,o,c,h){for(;s.nodeType===1;){var y=c;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[$a])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Fi(s.nextSibling),s===null)break}return null}function GD(s,o,c){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Fi(s.nextSibling),s===null))return null;return s}function s0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function $D(s,o){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Fi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var a0=null;function GE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}function $E(s,o,c){switch(o=Lm(c),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function yd(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ns(s)}var Ni=new Map,KE=new Set;function Um(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ss=se.d;se.d={f:KD,r:WD,D:YD,C:QD,L:XD,m:ZD,X:ej,S:JD,M:tj};function KD(){var s=ss.f(),o=Rm();return s||o}function WD(s){var o=Wi(s);o!==null&&o.tag===5&&o.type==="form"?fT(o):ss.r(s)}var ec=typeof document>"u"?null:document;function WE(s,o,c){var h=ec;if(h&&typeof o=="string"&&o){var y=Kt(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),KE.has(y)||(KE.add(y),s={rel:s,crossOrigin:c,href:o},h.querySelector(y)===null&&(o=h.createElement("link"),xn(o,"link",s),Ut(o),h.head.appendChild(o)))}}function YD(s){ss.D(s),WE("dns-prefetch",s,null)}function QD(s,o){ss.C(s,o),WE("preconnect",s,o)}function XD(s,o,c){ss.L(s,o,c);var h=ec;if(h&&s&&o){var y='link[rel="preload"][as="'+Kt(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Kt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Kt(c.imageSizes)+'"]')):y+='[href="'+Kt(s)+'"]';var w=y;switch(o){case"style":w=tc(s);break;case"script":w=nc(s)}Ni.has(w)||(s=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:s,as:o},c),Ni.set(w,s),h.querySelector(y)!==null||o==="style"&&h.querySelector(vd(w))||o==="script"&&h.querySelector(xd(w))||(o=h.createElement("link"),xn(o,"link",s),Ut(o),h.head.appendChild(o)))}}function ZD(s,o){ss.m(s,o);var c=ec;if(c&&s){var h=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Kt(h)+'"][href="'+Kt(s)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=nc(s)}if(!Ni.has(w)&&(s=p({rel:"modulepreload",href:s},o),Ni.set(w,s),c.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(xd(w)))return}h=c.createElement("link"),xn(h,"link",s),Ut(h),c.head.appendChild(h)}}}function JD(s,o,c){ss.S(s,o,c);var h=ec;if(h&&s){var y=Mn(h).hoistableStyles,w=tc(s);o=o||"default";var A=y.get(w);if(!A){var M={loading:0,preload:null};if(A=h.querySelector(vd(w)))M.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},c),(c=Ni.get(w))&&o0(s,c);var G=A=h.createElement("link");Ut(G),xn(G,"link",s),G._p=new Promise(function(Z,oe){G.onload=Z,G.onerror=oe}),G.addEventListener("load",function(){M.loading|=1}),G.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Bm(A,o,h)}A={type:"stylesheet",instance:A,count:1,state:M},y.set(w,A)}}}function ej(s,o){ss.X(s,o);var c=ec;if(c&&s){var h=Mn(c).hoistableScripts,y=nc(s),w=h.get(y);w||(w=c.querySelector(xd(y)),w||(s=p({src:s,async:!0},o),(o=Ni.get(y))&&l0(s,o),w=c.createElement("script"),Ut(w),xn(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function tj(s,o){ss.M(s,o);var c=ec;if(c&&s){var h=Mn(c).hoistableScripts,y=nc(s),w=h.get(y);w||(w=c.querySelector(xd(y)),w||(s=p({src:s,async:!0,type:"module"},o),(o=Ni.get(y))&&l0(s,o),w=c.createElement("script"),Ut(w),xn(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function YE(s,o,c,h){var y=(y=_e.current)?Um(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=tc(c.href),c=Mn(y).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=tc(c.href);var w=Mn(y).hoistableStyles,A=w.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,A),(w=y.querySelector(vd(s)))&&!w._p&&(A.instance=w,A.state.loading=5),Ni.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ni.set(s,c),w||nj(y,s,c,A.state))),o&&h===null)throw Error(i(528,""));return A}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=nc(c),c=Mn(y).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function tc(s){return'href="'+Kt(s)+'"'}function vd(s){return'link[rel="stylesheet"]['+s+"]"}function QE(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function nj(s,o,c,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),xn(o,"link",c),Ut(o),s.head.appendChild(o))}function nc(s){return'[src="'+Kt(s)+'"]'}function xd(s){return"script[async]"+s}function XE(s,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+Kt(c.href)+'"]');if(h)return o.instance=h,Ut(h),h;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Ut(h),xn(h,"style",y),Bm(h,c.precedence,s),o.instance=h;case"stylesheet":y=tc(c.href);var w=s.querySelector(vd(y));if(w)return o.state.loading|=4,o.instance=w,Ut(w),w;h=QE(c),(y=Ni.get(y))&&o0(h,y),w=(s.ownerDocument||s).createElement("link"),Ut(w);var A=w;return A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),xn(w,"link",h),o.state.loading|=4,Bm(w,c.precedence,s),o.instance=w;case"script":return w=nc(c.src),(y=s.querySelector(xd(w)))?(o.instance=y,Ut(y),y):(h=c,(y=Ni.get(w))&&(h=p({},c),l0(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ut(y),xn(y,"link",h),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Bm(h,c.precedence,s));return o.instance}function Bm(s,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,A=0;A<h.length;A++){var M=h[A];if(M.dataset.precedence===o)w=M;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(s,o.firstChild))}function o0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function l0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Fm=null;function ZE(s,o,c){if(Fm===null){var h=new Map,y=Fm=new Map;y.set(c,h)}else y=Fm,h=y.get(c),h||(h=new Map,y.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),y=0;y<c.length;y++){var w=c[y];if(!(w[$a]||w[Jt]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(o)||"";A=s+A;var M=h.get(A);M?M.push(w):h.set(A,[w])}}return h}function JE(s,o,c){s=s.ownerDocument||s,s.head.insertBefore(c,o==="title"?s.querySelector("head > title"):null)}function ij(s,o,c){if(c===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function e2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var wd=null;function rj(){}function sj(s,o,c){if(wd===null)throw Error(i(475));var h=wd;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=tc(c.href),w=s.querySelector(vd(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=zm.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=w,Ut(w);return}w=s.ownerDocument||s,c=QE(c),(y=Ni.get(y))&&o0(c,y),w=w.createElement("link"),Ut(w);var A=w;A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),xn(w,"link",c),o.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=zm.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function aj(){if(wd===null)throw Error(i(475));var s=wd;return s.stylesheets&&s.count===0&&c0(s,s.stylesheets),0<s.count?function(o){var c=setTimeout(function(){if(s.stylesheets&&c0(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c)}}:null}function zm(){if(this.count--,this.count===0){if(this.stylesheets)c0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qm=null;function c0(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qm=new Map,o.forEach(oj,s),qm=null,zm.call(s))}function oj(s,o){if(!(o.state.loading&4)){var c=qm.get(s);if(c)var h=c.get(null);else{c=new Map,qm.set(s,c);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var A=y[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),h=A)}h&&c.set(null,h)}y=o.instance,A=y.getAttribute("data-precedence"),w=c.get(A)||h,w===h&&c.set(null,y),c.set(A,y),this.count++,h=zm.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var bd={$$typeof:N,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function lj(s,o,c,h,y,w,A,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function t2(s,o,c,h,y,w,A,M,G,Z,oe,ue){return s=new lj(s,o,c,A,M,G,Z,ue),o=1,w===!0&&(o|=24),w=si(3,null,null,o),s.current=w,w.stateNode=s,o=Hy(),o.refCount++,s.pooledCache=o,o.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:o},Wy(w),s}function n2(s){return s?(s=jl,s):jl}function i2(s,o,c,h,y,w){y=n2(y),h.context===null?h.context=y:h.pendingContext=y,h=Ms(o),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=Vs(s,h,o),c!==null&&(ui(c,s,o),Xu(c,s,o))}function r2(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function u0(s,o){r2(s,o),(s=s.alternate)&&r2(s,o)}function s2(s){if(s.tag===13){var o=Dl(s,67108864);o!==null&&ui(o,s,67108864),u0(s,67108864)}}var Hm=!0;function cj(s,o,c,h){var y=$.T;$.T=null;var w=se.p;try{se.p=2,d0(s,o,c,h)}finally{se.p=w,$.T=y}}function uj(s,o,c,h){var y=$.T;$.T=null;var w=se.p;try{se.p=8,d0(s,o,c,h)}finally{se.p=w,$.T=y}}function d0(s,o,c,h){if(Hm){var y=h0(h);if(y===null)Zv(s,o,h,Gm,c),o2(s,h);else if(hj(y,s,o,c,h))h.stopPropagation();else if(o2(s,h),o&4&&-1<dj.indexOf(s)){for(;y!==null;){var w=Wi(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=Vi(w.pendingLanes);if(A!==0){var M=w;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var G=1<<31-An(A);M.entanglements[1]|=G,A&=~G}lr(w),(it&6)===0&&(Cm=yi()+500,md(0))}}break;case 13:M=Dl(w,2),M!==null&&ui(M,w,2),Rm(),u0(w,2)}if(w=h0(h),w===null&&Zv(s,o,h,Gm,c),w===y)break;y=w}y!==null&&h.stopPropagation()}else Zv(s,o,h,null,c)}}function h0(s){return s=wi(s),f0(s)}var Gm=null;function f0(s){if(Gm=null,s=Or(s),s!==null){var o=a(s);if(o===null)s=null;else{var c=o.tag;if(c===13){if(s=l(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Gm=s,null}function a2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gy()){case xu:return 2;case dl:return 8;case Fa:case yy:return 32;case hl:return 268435456;default:return 32}default:return 32}}var m0=!1,Ys=null,Qs=null,Xs=null,_d=new Map,Td=new Map,Zs=[],dj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o2(s,o){switch(s){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":_d.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(o.pointerId)}}function Ed(s,o,c,h,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},o!==null&&(o=Wi(o),o!==null&&s2(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function hj(s,o,c,h,y){switch(o){case"focusin":return Ys=Ed(Ys,s,o,c,h,y),!0;case"dragenter":return Qs=Ed(Qs,s,o,c,h,y),!0;case"mouseover":return Xs=Ed(Xs,s,o,c,h,y),!0;case"pointerover":var w=y.pointerId;return _d.set(w,Ed(_d.get(w)||null,s,o,c,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Td.set(w,Ed(Td.get(w)||null,s,o,c,h,y)),!0}return!1}function l2(s){var o=Or(s.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){s.blockedOn=o,Rf(s.priority,function(){if(c.tag===13){var h=ci();h=As(h);var y=Dl(c,h);y!==null&&ui(y,c,h),u0(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $m(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=h0(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Fr=h,c.target.dispatchEvent(h),Fr=null}else return o=Wi(c),o!==null&&s2(o),s.blockedOn=c,!1;o.shift()}return!0}function c2(s,o,c){$m(s)&&c.delete(o)}function fj(){m0=!1,Ys!==null&&$m(Ys)&&(Ys=null),Qs!==null&&$m(Qs)&&(Qs=null),Xs!==null&&$m(Xs)&&(Xs=null),_d.forEach(c2),Td.forEach(c2)}function Km(s,o){s.blockedOn===o&&(s.blockedOn=null,m0||(m0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fj)))}var Wm=null;function u2(s){Wm!==s&&(Wm=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wm===s&&(Wm=null);for(var o=0;o<s.length;o+=3){var c=s[o],h=s[o+1],y=s[o+2];if(typeof h!="function"){if(f0(h||c)===null)continue;break}var w=Wi(c);w!==null&&(s.splice(o,3),o-=3,fv(w,{pending:!0,data:y,method:c.method,action:h},h,y))}}))}function Sd(s){function o(G){return Km(G,s)}Ys!==null&&Km(Ys,s),Qs!==null&&Km(Qs,s),Xs!==null&&Km(Xs,s),_d.forEach(o),Td.forEach(o);for(var c=0;c<Zs.length;c++){var h=Zs[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Zs.length&&(c=Zs[0],c.blockedOn===null);)l2(c),c.blockedOn===null&&Zs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var y=c[h],w=c[h+1],A=y[$t]||null;if(typeof w=="function")A||u2(c);else if(A){var M=null;if(w&&w.hasAttribute("formAction")){if(y=w,A=w[$t]||null)M=A.formAction;else if(f0(y)!==null)continue}else M=A.action;typeof M=="function"?c[h+1]=M:(c.splice(h,3),h-=3),u2(c)}}}function p0(s){this._internalRoot=s}Ym.prototype.render=p0.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,h=ci();i2(c,h,s,o,null,null)},Ym.prototype.unmount=p0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;i2(s.current,2,null,s,null,null),Rm(),o[vi]=null}};function Ym(s){this._internalRoot=s}Ym.prototype.unstable_scheduleHydration=function(s){if(s){var o=Is();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Zs.length&&o!==0&&o<Zs[c].priority;c++);Zs.splice(c,0,s),c===0&&l2(s)}};var d2=e.version;if(d2!=="19.1.0")throw Error(i(527,d2,"19.1.0"));se.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var mj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Dt=Qm.inject(mj),nt=Qm}catch{}}return Id.createRoot=function(s,o){if(!r(s))throw Error(i(299));var c=!1,h="",y=IT,w=CT,A=NT,M=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=t2(s,1,!1,null,null,c,h,y,w,A,M,null),s[vi]=o.current,Xv(s),new p0(o)},Id.hydrateRoot=function(s,o,c){if(!r(s))throw Error(i(299));var h=!1,y="",w=IT,A=CT,M=NT,G=null,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(G=c.unstable_transitionCallbacks),c.formState!==void 0&&(Z=c.formState)),o=t2(s,1,!0,o,c??null,h,y,w,A,M,G,Z),o.context=n2(null),c=o.current,h=ci(),h=As(h),y=Ms(h),y.callback=null,Vs(c,y,h),c=h,o.current.lanes=c,Vr(o,c),lr(o),s[vi]=o.current,Xv(s),new Ym(o)},Id.version="19.1.0",Id}var b2;function Ej(){if(b2)return v0.exports;b2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),v0.exports=Tj(),v0.exports}var Sj=Ej(),Cd={},_2;function Aj(){if(_2)return Cd;_2=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.parse=l,Cd.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,_){const T=new a,C=x.length;if(C<2)return T;const D=(_==null?void 0:_.decode)||p;let P=0;do{const I=x.indexOf("=",P);if(I===-1)break;const N=x.indexOf(";",P),z=N===-1?C:N;if(I>z){P=x.lastIndexOf(";",I-1)+1;continue}const F=u(x,P,I),H=d(x,I,F),j=x.slice(F,H);if(T[j]===void 0){let S=u(x,I+1,z),R=d(x,z,S);const V=D(x.slice(S,R));T[j]=V}P=z+1}while(P<C);return T}function u(x,_,T){do{const C=x.charCodeAt(_);if(C!==32&&C!==9)return _}while(++_<T);return T}function d(x,_,T){for(;_>T;){const C=x.charCodeAt(--_);if(C!==32&&C!==9)return _+1}return T}function f(x,_,T){const C=(T==null?void 0:T.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const D=C(_);if(!e.test(D))throw new TypeError(`argument val is invalid: ${_}`);let P=x+"="+D;if(!T)return P;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);P+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);P+="; Domain="+T.domain}if(T.path){if(!i.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);P+="; Path="+T.path}if(T.expires){if(!v(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);P+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(P+="; HttpOnly"),T.secure&&(P+="; Secure"),T.partitioned&&(P+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":P+="; Priority=Low";break;case"medium":P+="; Priority=Medium";break;case"high":P+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":P+="; SameSite=Strict";break;case"lax":P+="; SameSite=Lax";break;case"none":P+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return P}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function v(x){return r.call(x)==="[object Date]"}return Cd}Aj();var T2="popstate";function Ij(n={}){function e(i,r){let{pathname:a,search:l,hash:u}=i.location;return ux("",{pathname:a,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:gh(r)}return Nj(e,t,null,n)}function It(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ar(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cj(){return Math.random().toString(36).substring(2,10)}function E2(n,e){return{usr:n.state,key:n.key,idx:e}}function ux(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tu(e):e,state:t,key:e&&e.key||i||Cj()}}function gh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Nj(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function v(){u="POP";let D=p(),P=D==null?null:D-f;f=D,d&&d({action:u,location:C.location,delta:P})}function x(D,P){u="PUSH";let I=ux(C.location,D,P);f=p()+1;let N=E2(I,f),z=C.createHref(I);try{l.pushState(N,"",z)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(z)}a&&d&&d({action:u,location:C.location,delta:1})}function _(D,P){u="REPLACE";let I=ux(C.location,D,P);f=p();let N=E2(I,f),z=C.createHref(I);l.replaceState(N,"",z),a&&d&&d({action:u,location:C.location,delta:0})}function T(D){return Rj(D)}let C={get action(){return u},get location(){return n(r,l)},listen(D){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(T2,v),d=D,()=>{r.removeEventListener(T2,v),d=null}},createHref(D){return e(r,D)},createURL:T,encodeLocation(D){let P=T(D);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:x,replace:_,go(D){return l.go(D)}};return C}function Rj(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),It(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:gh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function h4(n,e,t="/"){return Pj(n,e,t,!1)}function Pj(n,e,t,i){let r=typeof e=="string"?tu(e):e,a=hs(r.pathname||"/",t);if(a==null)return null;let l=f4(n);Dj(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=qj(a);u=Fj(l[d],f,i)}return u}function f4(n,e=[],t=[],i=""){let r=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(It(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=us([i,d.relativePath]),p=t.concat(d);a.children&&a.children.length>0&&(It(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),f4(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:Uj(f,a.index),routesMeta:p})};return n.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))r(a,l);else for(let d of m4(a.path))r(a,l,d)}),e}function m4(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=m4(i.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),r&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function Dj(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Bj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var jj=/^:[\w-]+$/,kj=3,Mj=2,Vj=1,Oj=10,Lj=-2,S2=n=>n==="*";function Uj(n,e){let t=n.split("/"),i=t.length;return t.some(S2)&&(i+=Lj),e&&(i+=Mj),t.filter(r=>!S2(r)).reduce((r,a)=>r+(jj.test(a)?kj:a===""?Vj:Oj),i)}function Bj(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Fj(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",v=kp({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),x=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=kp({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!v)return null;Object.assign(r,v.params),l.push({params:r,pathname:us([a,v.pathname]),pathnameBase:Kj(us([a,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(a=us([a,v.pathnameBase]))}return l}function kp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=zj(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:v},x)=>{if(p==="*"){let T=u[x]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const _=u[x];return v&&!_?f[p]=void 0:f[p]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function zj(n,e=!1,t=!0){Ar(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function qj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ar(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function hs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Hj(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?tu(n):n;return{pathname:t?t.startsWith("/")?t:Gj(t,e):e,search:Wj(i),hash:Yj(r)}}function Gj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function _0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $j(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function p4(n){let e=$j(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function g4(n,e,t,i=!1){let r;typeof n=="string"?r=tu(n):(r={...n},It(!r.pathname||!r.pathname.includes("?"),_0("?","pathname","search",r)),It(!r.pathname||!r.pathname.includes("#"),_0("#","pathname","hash",r)),It(!r.search||!r.search.includes("#"),_0("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;r.pathname=x.join("/")}u=v>=0?e[v]:"/"}let d=Hj(r,u),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var us=n=>n.join("/").replace(/\/\/+/g,"/"),Kj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Yj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Qj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var y4=["POST","PUT","PATCH","DELETE"];new Set(y4);var Xj=["GET",...y4];new Set(Xj);var nu=k.createContext(null);nu.displayName="DataRouter";var bg=k.createContext(null);bg.displayName="DataRouterState";var v4=k.createContext({isTransitioning:!1});v4.displayName="ViewTransition";var Zj=k.createContext(new Map);Zj.displayName="Fetchers";var Jj=k.createContext(null);Jj.displayName="Await";var Dr=k.createContext(null);Dr.displayName="Navigation";var Xh=k.createContext(null);Xh.displayName="Location";var jr=k.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var Sw=k.createContext(null);Sw.displayName="RouteError";function ek(n,{relative:e}={}){It(Zh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=k.useContext(Dr),{hash:r,pathname:a,search:l}=Jh(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:us([t,a])),i.createHref({pathname:u,search:l,hash:r})}function Zh(){return k.useContext(Xh)!=null}function rl(){return It(Zh(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Xh).location}var x4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function w4(n){k.useContext(Dr).static||k.useLayoutEffect(n)}function ti(){let{isDataRoute:n}=k.useContext(jr);return n?fk():tk()}function tk(){It(Zh(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(nu),{basename:e,navigator:t}=k.useContext(Dr),{matches:i}=k.useContext(jr),{pathname:r}=rl(),a=JSON.stringify(p4(i)),l=k.useRef(!1);return w4(()=>{l.current=!0}),k.useCallback((d,f={})=>{if(Ar(l.current,x4),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=g4(d,JSON.parse(a),r,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:us([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,r,n])}k.createContext(null);function b4(){let{matches:n}=k.useContext(jr),e=n[n.length-1];return e?e.params:{}}function Jh(n,{relative:e}={}){let{matches:t}=k.useContext(jr),{pathname:i}=rl(),r=JSON.stringify(p4(t));return k.useMemo(()=>g4(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function nk(n,e){return _4(n,e)}function _4(n,e,t,i){var P;It(Zh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=k.useContext(Dr),{matches:a}=k.useContext(jr),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let I=p&&p.path||"";T4(d,!p||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let v=rl(),x;if(e){let I=typeof e=="string"?tu(e):e;It(f==="/"||((P=I.pathname)==null?void 0:P.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${I.pathname}" was given in the \`location\` prop.`),x=I}else x=v;let _=x.pathname||"/",T=_;if(f!=="/"){let I=f.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(I.length).join("/")}let C=h4(n,{pathname:T});Ar(p||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ar(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=ok(C&&C.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:us([f,r.encodeLocation?r.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?f:us([f,r.encodeLocation?r.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,t,i);return e&&D?k.createElement(Xh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},D):D}function ik(){let n=hk(),e=Qj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:r},t):null,l)}var rk=k.createElement(ik,null),sk=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?k.createElement(jr.Provider,{value:this.props.routeContext},k.createElement(Sw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ak({routeContext:n,match:e,children:t}){let i=k.useContext(nu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(jr.Provider,{value:n},t)}function ok(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t==null?void 0:t.errors;if(a!=null){let d=r.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);It(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<r.length;d++){let f=r[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:v}=t,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((d,f,p)=>{let v,x=!1,_=null,T=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||rk,l&&(u<0&&p===0?(T4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,T=null):u===p&&(x=!0,T=f.route.hydrateFallbackElement||null)));let C=e.concat(r.slice(0,p+1)),D=()=>{let P;return v?P=_:x?P=T:f.route.Component?P=k.createElement(f.route.Component,null):f.route.element?P=f.route.element:P=d,k.createElement(ak,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:t!=null},children:P})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?k.createElement(sk,{location:t.location,revalidation:t.revalidation,component:_,error:v,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):D()},null)}function Aw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lk(n){let e=k.useContext(nu);return It(e,Aw(n)),e}function ck(n){let e=k.useContext(bg);return It(e,Aw(n)),e}function uk(n){let e=k.useContext(jr);return It(e,Aw(n)),e}function Iw(n){let e=uk(n),t=e.matches[e.matches.length-1];return It(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dk(){return Iw("useRouteId")}function hk(){var i;let n=k.useContext(Sw),e=ck("useRouteError"),t=Iw("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function fk(){let{router:n}=lk("useNavigate"),e=Iw("useNavigate"),t=k.useRef(!1);return w4(()=>{t.current=!0}),k.useCallback(async(r,a={})=>{Ar(t.current,x4),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var A2={};function T4(n,e,t){!e&&!A2[n]&&(A2[n]=!0,Ar(!1,t))}k.memo(mk);function mk({routes:n,future:e,state:t}){return _4(n,void 0,t,e)}function di(n){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pk({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1}){It(!Zh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof t=="string"&&(t=tu(t));let{pathname:d="/",search:f="",hash:p="",state:v=null,key:x="default"}=t,_=k.useMemo(()=>{let T=hs(d,l);return T==null?null:{location:{pathname:T,search:f,hash:p,state:v,key:x},navigationType:i}},[l,d,f,p,v,x,i]);return Ar(_!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:k.createElement(Dr.Provider,{value:u},k.createElement(Xh.Provider,{children:e,value:_}))}function gk({children:n,location:e}){return nk(dx(n),e)}function dx(n,e=[]){let t=[];return k.Children.forEach(n,(i,r)=>{if(!k.isValidElement(i))return;let a=[...e,r];if(i.type===k.Fragment){t.push.apply(t,dx(i.props.children,a));return}It(i.type===di,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=dx(i.props.children,a)),t.push(l)}),t}var hp="get",fp="application/x-www-form-urlencoded";function _g(n){return n!=null&&typeof n.tagName=="string"}function yk(n){return _g(n)&&n.tagName.toLowerCase()==="button"}function vk(n){return _g(n)&&n.tagName.toLowerCase()==="form"}function xk(n){return _g(n)&&n.tagName.toLowerCase()==="input"}function wk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bk(n,e){return n.button===0&&(!e||e==="_self")&&!wk(n)}var Xm=null;function _k(){if(Xm===null)try{new FormData(document.createElement("form"),0),Xm=!1}catch{Xm=!0}return Xm}var Tk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function T0(n){return n!=null&&!Tk.has(n)?(Ar(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fp}"`),null):n}function Ek(n,e){let t,i,r,a,l;if(vk(n)){let u=n.getAttribute("action");i=u?hs(u,e):null,t=n.getAttribute("method")||hp,r=T0(n.getAttribute("enctype"))||fp,a=new FormData(n)}else if(yk(n)||xk(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?hs(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||hp,r=T0(n.getAttribute("formenctype"))||T0(u.getAttribute("enctype"))||fp,a=new FormData(u,n),!_k()){let{name:f,type:p,value:v}=n;if(p==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,v)}}else{if(_g(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hp,i=null,r=fp,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:l}}function Cw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Sk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ak(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Ik(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await Sk(a,t);return l.links?l.links():[]}return[]}));return Pk(i.flat(1).filter(Ak).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function I2(n,e,t,i,r,a){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>{var p;return t[f].pathname!==d.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{var v;let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Ck(n,e,{includeHydrateFallback:t}={}){return Nk(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function Nk(n){return[...new Set(n)]}function Rk(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Pk(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(Rk(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Dk=new Set([100,101,204,205]);function jk(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&hs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function E4(){let n=k.useContext(nu);return Cw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kk(){let n=k.useContext(bg);return Cw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Nw=k.createContext(void 0);Nw.displayName="FrameworkContext";function S4(){let n=k.useContext(Nw);return Cw(n,"You must render this element inside a <HydratedRouter> element"),n}function Mk(n,e){let t=k.useContext(Nw),[i,r]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=e,x=k.useRef(null);k.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let C=P=>{P.forEach(I=>{l(I.isIntersecting)})},D=new IntersectionObserver(C,{threshold:.5});return x.current&&D.observe(x.current),()=>{D.disconnect()}}},[n]),k.useEffect(()=>{if(i){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[i]);let _=()=>{r(!0)},T=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Nd(u,_),onBlur:Nd(d,T),onMouseEnter:Nd(f,_),onMouseLeave:Nd(p,T),onTouchStart:Nd(v,_)}]:[!1,x,{}]}function Nd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Vk({page:n,...e}){let{router:t}=E4(),i=k.useMemo(()=>h4(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?k.createElement(Lk,{page:n,matches:i,...e}):null}function Ok(n){let{manifest:e,routeModules:t}=S4(),[i,r]=k.useState([]);return k.useEffect(()=>{let a=!1;return Ik(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),i}function Lk({page:n,matches:e,...t}){let i=rl(),{manifest:r,routeModules:a}=S4(),{basename:l}=E4(),{loaderData:u,matches:d}=kk(),f=k.useMemo(()=>I2(n,e,d,r,i,"data"),[n,e,d,r,i]),p=k.useMemo(()=>I2(n,e,d,r,i,"assets"),[n,e,d,r,i]),v=k.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let T=new Set,C=!1;if(e.forEach(P=>{var N;let I=r.routes[P.route.id];!I||!I.hasLoader||(!f.some(z=>z.route.id===P.route.id)&&P.route.id in u&&((N=a[P.route.id])!=null&&N.shouldRevalidate)||I.hasClientLoader?C=!0:T.add(P.route.id))}),T.size===0)return[];let D=jk(n,l);return C&&T.size>0&&D.searchParams.set("_routes",e.filter(P=>T.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[l,u,i,r,f,e,n,a]),x=k.useMemo(()=>Ck(p,r),[p,r]),_=Ok(p);return k.createElement(k.Fragment,null,v.map(T=>k.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),x.map(T=>k.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),_.map(({key:T,link:C})=>k.createElement("link",{key:T,...C})))}function Uk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var A4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A4&&(window.__reactRouterVersion="7.6.1")}catch{}function Bk({basename:n,children:e,window:t}){let i=k.useRef();i.current==null&&(i.current=Ij({window:t,v5Compat:!0}));let r=i.current,[a,l]=k.useState({action:r.action,location:r.location}),u=k.useCallback(d=>{k.startTransition(()=>l(d))},[l]);return k.useLayoutEffect(()=>r.listen(u),[r,u]),k.createElement(pk,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var I4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=k.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:v,...x},_){let{basename:T}=k.useContext(Dr),C=typeof f=="string"&&I4.test(f),D,P=!1;if(typeof f=="string"&&C&&(D=f,A4))try{let R=new URL(window.location.href),V=f.startsWith("//")?new URL(R.protocol+f):new URL(f),L=hs(V.pathname,T);V.origin===R.origin&&L!=null?f=L+V.search+V.hash:P=!0}catch{Ar(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=ek(f,{relative:r}),[N,z,F]=Mk(i,x),H=Hk(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:r,viewTransition:v});function j(R){e&&e(R),R.defaultPrevented||H(R)}let S=k.createElement("a",{...x,...F,href:D||I,onClick:P||a?e:j,ref:Uk(_,z),target:d,"data-discover":!C&&t==="render"?"true":void 0});return N&&!C?k.createElement(k.Fragment,null,S,k.createElement(Vk,{page:I})):S});Xt.displayName="Link";var Fk=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:u,children:d,...f},p){let v=Jh(l,{relative:f.relative}),x=rl(),_=k.useContext(bg),{navigator:T,basename:C}=k.useContext(Dr),D=_!=null&&Yk(v)&&u===!0,P=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,I=x.pathname,N=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(I=I.toLowerCase(),N=N?N.toLowerCase():null,P=P.toLowerCase()),N&&C&&(N=hs(N,C)||N);const z=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let F=I===P||!r&&I.startsWith(P)&&I.charAt(z)==="/",H=N!=null&&(N===P||!r&&N.startsWith(P)&&N.charAt(P.length)==="/"),j={isActive:F,isPending:H,isTransitioning:D},S=F?e:void 0,R;typeof i=="function"?R=i(j):R=[i,F?"active":null,H?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(j):a;return k.createElement(Xt,{...f,"aria-current":S,className:R,ref:p,style:V,to:l,viewTransition:u},typeof d=="function"?d(j):d)});Fk.displayName="NavLink";var zk=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:l=hp,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:v,...x},_)=>{let T=Kk(),C=Wk(u,{relative:f}),D=l.toLowerCase()==="get"?"get":"post",P=typeof u=="string"&&I4.test(u),I=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let z=N.nativeEvent.submitter,F=(z==null?void 0:z.getAttribute("formmethod"))||l;T(z||N.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:r,state:a,relative:f,preventScrollReset:p,viewTransition:v})};return k.createElement("form",{ref:_,method:D,action:C,onSubmit:i?d:I,...x,"data-discover":!P&&n==="render"?"true":void 0})});zk.displayName="Form";function qk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C4(n){let e=k.useContext(nu);return It(e,qk(n)),e}function Hk(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:l}={}){let u=ti(),d=rl(),f=Jh(n,{relative:a});return k.useCallback(p=>{if(bk(p,e)){p.preventDefault();let v=t!==void 0?t:gh(d)===gh(f);u(n,{replace:v,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[d,u,f,t,i,e,n,r,a,l])}var Gk=0,$k=()=>`__${String(++Gk)}__`;function Kk(){let{router:n}=C4("useSubmit"),{basename:e}=k.useContext(Dr),t=dk();return k.useCallback(async(i,r={})=>{let{action:a,method:l,encType:u,formData:d,body:f}=Ek(i,e);if(r.navigate===!1){let p=r.fetcherKey||$k();await n.fetch(p,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function Wk(n,{relative:e}={}){let{basename:t}=k.useContext(Dr),i=k.useContext(jr);It(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Jh(n||".",{relative:e})},l=rl();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:us([t,a.pathname])),gh(a)}function Yk(n,e={}){let t=k.useContext(v4);It(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=C4("useViewTransitionState"),r=Jh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=hs(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=hs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return kp(r.pathname,l)!=null||kp(r.pathname,a)!=null}[...Dk];d4();const Qk=()=>{};var C2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Xk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],l=n[t++],u=n[t++],d=((r&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},R4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],l=r+1<n.length,u=l?n[r+1]:0,d=r+2<n.length,f=d?n[r+2]:0,p=a>>2,v=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,_=f&63;d||(_=64,l||(x=64)),i.push(t[p],t[v],t[x],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(N4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Xk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],u=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const v=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||u==null||f==null||v==null)throw new Zk;const x=a<<2|u>>4;if(i.push(x),f!==64){const _=u<<4&240|f>>2;if(i.push(_),v!==64){const T=f<<6&192|v;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Zk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jk=function(n){const e=N4(n);return R4.encodeByteArray(e,!0)},Mp=function(n){return Jk(n).replace(/\./g,"")},Rw=function(n){try{return R4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Vp(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!eM(t)||(n[t]=Vp(n[t],e[t]));return n}function eM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=()=>Pw().__FIREBASE_DEFAULTS__,nM=()=>{if(typeof process>"u"||typeof C2>"u")return;const n=C2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rw(n[1]);return e&&JSON.parse(e)},Dw=()=>{try{return Qk()||tM()||nM()||iM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},P4=()=>{var n;return(n=Dw())===null||n===void 0?void 0:n.config},rM=n=>{var e;return(e=Dw())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){return n.endsWith(".cloudworkstations.dev")}async function D4(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mp(JSON.stringify(t)),Mp(JSON.stringify(l)),""].join(".")}const Yd={};function oM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yd))Yd[e]?n.emulator.push(e):n.prod.push(e);return n}function lM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let N2=!1;function j4(n,e){if(typeof window>"u"||typeof document>"u"||!ef(window.location.host)||Yd[n]===e||Yd[n]||N2)return;Yd[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",a=oM().prod.length>0;function l(){const x=document.getElementById(i);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,_){x.setAttribute("width","24"),x.setAttribute("id",_),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{N2=!0,l()},x}function p(x,_){x.setAttribute("id",_),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function v(){const x=lM(i),_=t("text"),T=document.getElementById(_)||document.createElement("span"),C=t("learnmore"),D=document.getElementById(C)||document.createElement("a"),P=t("preprendIcon"),I=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const N=x.element;u(N),p(D,C);const z=f();d(I,P),N.append(I,T,D,z),document.body.appendChild(N)}a?(T.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function Tg(){var n;const e=(n=Dw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uM(){return typeof window<"u"||k4()}function k4(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V4(){const n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function O4(){return!Tg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L4(){return!Tg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function yh(){try{return typeof indexedDB=="object"}catch{return!1}}function hM(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="FirebaseError";class zn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fM,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?mM(a,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new zn(r,u,i)}}function mM(n,e){return n.replace(pM,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const pM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ga(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],l=e[r];if(P2(a)&&P2(l)){if(!ga(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function P2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Fd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function U4(n,e){const t=new yM(n,e);return t.subscribe.bind(t)}class yM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");vM(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=E0),r.error===void 0&&(r.error=E0),r.complete===void 0&&(r.complete=E0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function E0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new sM;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bM(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);i===u&&l.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wM(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wM(n){return n===Eo?void 0:n}function bM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=[];var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const F4={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},_M=He.INFO,TM={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},EM=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=TM[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eg{constructor(e){this.name=e,this._logLevel=_M,this._logHandler=EM,this._userLogHandler=null,kw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}function SM(n){kw.forEach(e=>{e.setLogLevel(n)})}function AM(n,e){for(const t of kw){let i=null;e&&e.level&&(i=F4[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,a,...l)=>{const u=l.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");a>=(i??r.logLevel)&&n({level:He[a].toLowerCase(),message:u,args:l,type:r.name})}}}const IM=(n,e)=>e.some(t=>n instanceof t);let D2,j2;function CM(){return D2||(D2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NM(){return j2||(j2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z4=new WeakMap,hx=new WeakMap,q4=new WeakMap,S0=new WeakMap,Mw=new WeakMap;function RM(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(da(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&z4.set(t,n)}).catch(()=>{}),Mw.set(e,n),e}function PM(n){if(hx.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});hx.set(n,e)}let fx={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||q4.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return da(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DM(n){fx=n(fx)}function jM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(A0(this),e,...t);return q4.set(i,e.sort?e.sort():[e]),da(i)}:NM().includes(n)?function(...e){return n.apply(A0(this),e),da(z4.get(this))}:function(...e){return da(n.apply(A0(this),e))}}function kM(n){return typeof n=="function"?jM(n):(n instanceof IDBTransaction&&PM(n),IM(n,CM())?new Proxy(n,fx):n)}function da(n){if(n instanceof IDBRequest)return RM(n);if(S0.has(n))return S0.get(n);const e=kM(n);return e!==n&&(S0.set(n,e),Mw.set(e,n)),e}const A0=n=>Mw.get(n);function MM(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(n,e),u=da(l);return i&&l.addEventListener("upgradeneeded",d=>{i(da(l.result),d.oldVersion,d.newVersion,da(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const VM=["get","getKey","getAll","getAllKeys","count"],OM=["put","add","delete","clear"],I0=new Map;function k2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(I0.get(e))return I0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=OM.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||VM.includes(t)))return;const a=async function(l,...u){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),r&&d.done]))[0]};return I0.set(e,a),a}DM(n=>({...n,get:(e,t,i)=>k2(e,t)||n.get(e,t,i),has:(e,t)=>!!k2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UM(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function UM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Op="@firebase/app",mx="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Eg("@firebase/app"),BM="@firebase/app-compat",FM="@firebase/analytics-compat",zM="@firebase/analytics",qM="@firebase/app-check-compat",HM="@firebase/app-check",GM="@firebase/auth",$M="@firebase/auth-compat",KM="@firebase/database",WM="@firebase/data-connect",YM="@firebase/database-compat",QM="@firebase/functions",XM="@firebase/functions-compat",ZM="@firebase/installations",JM="@firebase/installations-compat",eV="@firebase/messaging",tV="@firebase/messaging-compat",nV="@firebase/performance",iV="@firebase/performance-compat",rV="@firebase/remote-config",sV="@firebase/remote-config-compat",aV="@firebase/storage",oV="@firebase/storage-compat",lV="@firebase/firestore",cV="@firebase/ai",uV="@firebase/firestore-compat",dV="firebase",hV="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]",fV={[Op]:"fire-core",[BM]:"fire-core-compat",[zM]:"fire-analytics",[FM]:"fire-analytics-compat",[HM]:"fire-app-check",[qM]:"fire-app-check-compat",[GM]:"fire-auth",[$M]:"fire-auth-compat",[KM]:"fire-rtdb",[WM]:"fire-data-connect",[YM]:"fire-rtdb-compat",[QM]:"fire-fn",[XM]:"fire-fn-compat",[ZM]:"fire-iid",[JM]:"fire-iid-compat",[eV]:"fire-fcm",[tV]:"fire-fcm-compat",[nV]:"fire-perf",[iV]:"fire-perf-compat",[rV]:"fire-rc",[sV]:"fire-rc-compat",[aV]:"fire-gcs",[oV]:"fire-gcs-compat",[lV]:"fire-fst",[uV]:"fire-fst-compat",[cV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new Map,Nc=new Map,Rc=new Map;function vh(n,e){try{n.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function H4(n,e){n.container.addOrOverwriteComponent(e)}function xa(n){const e=n.name;if(Rc.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Rc.set(e,n);for(const t of va.values())vh(t,n);for(const t of Nc.values())vh(t,n);return!0}function G4(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mV(n,e,t=ya){G4(n,e).clearInstance(t)}function $4(n){return n.options!==void 0}function xt(n){return n==null?!1:n.settings!==void 0}function pV(){Rc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new sl("app","Firebase",gV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K4=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n,e){const t=Rw(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(t).exp*1e3,a=new Date().getTime();r-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class yV extends K4{constructor(e,t,i,r){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,r);else{const u=e;super(u.options,l,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._serverConfig.authIdToken&&M2(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&M2(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Gi(Op,mx,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ow(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ji.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=hV;function Vw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ya,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw ji.create("bad-app-name",{appName:String(r)});if(t||(t=P4()),!t)throw ji.create("no-options");const a=va.get(r);if(a){if(ga(t,a.options)&&ga(i,a.config))return a;throw ji.create("duplicate-app",{appName:r})}const l=new B4(r);for(const d of Rc.values())l.addComponent(d);const u=new K4(t,i,l);return va.set(r,u),u}function vV(n,e){if(uM()&&!k4())throw ji.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let t;$4(n)?t=n.options:t=n;const i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=f=>[...f].reduce((p,v)=>Math.imul(31,p)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ji.create("finalization-registry-not-supported",{});const a=""+r(JSON.stringify(i)),l=Nc.get(a);if(l)return l.incRefCount(e.releaseOnDeref),l;const u=new B4(a);for(const f of Rc.values())u.addComponent(f);const d=new yV(t,e,a,u);return Nc.set(a,d),d}function xV(n=ya){const e=va.get(n);if(!e&&n===ya&&P4())return Vw();if(!e)throw ji.create("no-app",{appName:n});return e}function wV(){return Array.from(va.values())}async function Ow(n){let e=!1;const t=n.name;va.has(t)?(e=!0,va.delete(t)):Nc.has(t)&&n.decRefCount()<=0&&(Nc.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Gi(n,e,t){var i;let r=(i=fV[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(u.join(" "));return}xa(new Ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function W4(n,e){if(n!==null&&typeof n!="function")throw ji.create("invalid-log-argument");AM(n,e)}function Y4(n){SM(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="firebase-heartbeat-database",_V=1,xh="firebase-heartbeat-store";let C0=null;function Q4(){return C0||(C0=MM(bV,_V,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ji.create("idb-open",{originalErrorMessage:n.message})})),C0}async function TV(n){try{const t=(await Q4()).transaction(xh),i=await t.objectStore(xh).get(X4(n));return await t.done,i}catch(e){if(e instanceof zn)fs.warn(e.message);else{const t=ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(t.message)}}}async function V2(n,e){try{const i=(await Q4()).transaction(xh,"readwrite");await i.objectStore(xh).put(e,X4(n)),await i.done}catch(t){if(t instanceof zn)fs.warn(t.message);else{const i=ji.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fs.warn(i.message)}}}function X4(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1024,SV=30;class AV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CV(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=O2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>SV){const l=NV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=O2(),{heartbeatsToSend:i,unsentEntries:r}=IV(this._heartbeatsCache.heartbeats),a=Mp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return fs.warn(t),""}}}function O2(){return new Date().toISOString().substring(0,10)}function IV(n,e=EV){const t=[];let i=n.slice();for(const r of n){const a=t.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),L2(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),L2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yh()?hM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return V2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return V2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function L2(n){return Mp(JSON.stringify({version:2,heartbeats:n})).length}function NV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(n){xa(new Ir("platform-logger",e=>new LM(e),"PRIVATE")),xa(new Ir("heartbeat",e=>new AV(e),"PRIVATE")),Gi(Op,mx,n),Gi(Op,mx,"esm2017"),Gi("fire-js","")}RV("");const PV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zn,SDK_VERSION:Pa,_DEFAULT_ENTRY_NAME:ya,_addComponent:vh,_addOrOverwriteComponent:H4,_apps:va,_clearComponents:pV,_components:Rc,_getProvider:G4,_isFirebaseApp:$4,_isFirebaseServerApp:xt,_registerComponent:xa,_removeServiceInstance:mV,_serverApps:Nc,deleteApp:Ow,getApp:xV,getApps:wV,initializeApp:Vw,initializeServerApp:vV,onLog:W4,registerVersion:Gi,setLogLevel:Y4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t){this._delegate=e,this.firebase=t,vh(e,new Ir("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ow(this._delegate)))}_getService(e,t=ya){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ya){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){vh(this._delegate,e)}_addOrOverwriteComponent(e){H4(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},U2=new sl("app-compat","Firebase",jV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(n){const e={},t={__esModule:!0,initializeApp:a,app:r,registerVersion:Gi,setLogLevel:Y4,onLog:W4,apps:null,SDK_VERSION:Pa,INTERNAL:{registerComponent:u,removeApp:i,useAsService:d,modularAPIs:PV}};t.default=t,Object.defineProperty(t,"apps",{get:l});function i(f){delete e[f]}function r(f){if(f=f||ya,!R2(e,f))throw U2.create("no-app",{appName:f});return e[f]}r.App=n;function a(f,p={}){const v=Vw(f,p);if(R2(e,v.name))return e[v.name];const x=new n(v,t);return e[v.name]=x,x}function l(){return Object.keys(e).map(f=>e[f])}function u(f){const p=f.name,v=p.replace("-compat","");if(xa(f)&&f.type==="PUBLIC"){const x=(_=r())=>{if(typeof _[v]!="function")throw U2.create("invalid-app-argument",{appName:p});return _[v]()};f.serviceProps!==void 0&&Vp(x,f.serviceProps),t[v]=x,n.prototype[v]=function(..._){return this._getService.bind(this,p).apply(this,f.multipleInstances?_:[])}}return f.type==="PUBLIC"?t[v]:null}function d(f,p){return p==="serverAuth"?null:p}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){const n=kV(DV);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Z4,extendNamespace:e,createSubscribe:U4,ErrorFactory:sl,deepExtend:Vp});function e(t){Vp(n,t)}return n}const MV=Z4();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Eg("@firebase/app-compat"),VV="@firebase/app-compat",OV="0.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(n){Gi(VV,OV,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Pw();if(n.firebase!==void 0){B2.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&B2.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const te=MV;LV();var UV="firebase",BV="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */te.registerVersion(UV,BV,"app-compat");function Lw(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}const Rd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ic={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function J4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zV=FV,qV=J4,eC=new sl("auth","Firebase",J4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new Eg("@firebase/auth");function HV(n,...e){Lp.logLevel<=He.WARN&&Lp.warn(`Auth (${Pa}): ${n}`,...e)}function mp(n,...e){Lp.logLevel<=He.ERROR&&Lp.error(`Auth (${Pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n,...e){throw Bw(n,...e)}function sn(n,...e){return Bw(n,...e)}function Uw(n,e,t){const i=Object.assign(Object.assign({},qV()),{[e]:t});return new sl("auth","Firebase",i).create(e,{appName:n.name})}function mn(n){return Uw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ru(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&En(n,"argument-error"),Uw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bw(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return eC.create(n,...e)}function fe(n,e,...t){if(!n)throw Bw(e,...t)}function pr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mp(e),new Error(e)}function $i(n,e){n||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Fw(){return F2()==="http:"||F2()==="https:"}function F2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fw()||M4()||"connection"in navigator)?navigator.onLine:!0}function $V(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=cM()||jw()}get(){return GV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YV=new tf(3e4,6e4);function Ot(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lt(n,e,t,i,r={}){return nC(n,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const u=iu(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:d},a);return dM()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&ef(n.emulatorConfig.host)&&(f.credentials="include"),tC.fetch()(await iC(n,n.config.apiHost,t,u),f)})}async function nC(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},KV),e);try{const r=new XV(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw zd(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw zd(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw zd(n,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Uw(n,p,f);En(n,p)}}catch(r){if(r instanceof zn)throw r;En(n,"network-request-failed",{message:String(r)})}}async function ws(n,e,t,i,r={}){const a=await Lt(n,e,t,i,r);return"mfaPendingCredential"in a&&En(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function iC(n,e,t,i){const r=`${e}${t}?${i}`,a=n,l=a.config.emulator?zw(n.config,r):`${n.config.apiScheme}://${r}`;return WV.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function QV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(sn(this.auth,"network-request-failed")),YV.get())})}}function zd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=sn(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){return n!==void 0&&n.getResponse!==void 0}function q2(n){return n!==void 0&&n.enterprise!==void 0}class rC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return QV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(n){return(await Lt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sC(n,e){return Lt(n,"GET","/v2/recaptchaConfig",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(n,e){return Lt(n,"POST","/v1/accounts:delete",e)}async function eO(n,e){return Lt(n,"POST","/v1/accounts:update",e)}async function Up(n,e){return Lt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tO(n,e=!1){const t=Ne(n),i=await t.getIdToken(e),r=Sg(i);fe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:Qd(N0(r.auth_time)),issuedAtTime:Qd(N0(r.iat)),expirationTime:Qd(N0(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function N0(n){return Number(n)*1e3}function Sg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return mp("JWT malformed, contained fewer than 3 sections"),null;try{const r=Rw(t);return r?JSON.parse(r):(mp("Failed to decode base64 JWT payload"),null)}catch(r){return mp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function H2(n){const e=Sg(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ms(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof zn&&nO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function nO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qd(this.lastLoginAt),this.creationTime=Qd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(n){var e;const t=n.auth,i=await n.getIdToken(),r=await ms(n,Up(t,{idToken:i}));fe(r==null?void 0:r.users.length,t,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?aC(a.providerUserInfo):[],u=sO(n.providerData,l),d=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=d?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new px(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function rO(n){const e=Ne(n);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sO(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function aC(n){return n.map(e=>{var{providerId:t}=e,i=Lw(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n,e){const t=await nC(n,{},async()=>{const i=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,l=await iC(n,r,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",tC.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oO(n,e){return Lt(n,"POST","/v2/accounts:revokeToken",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=H2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await aO(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,l=new bc;return i&&(fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(fe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bc,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Hi{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,a=Lw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new px(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ms(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tO(this,e)}reload(){return rO(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject(mn(this.auth));const e=await this.getIdToken();return await ms(this,JV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,a,l,u,d,f,p;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,x=(r=t.email)!==null&&r!==void 0?r:void 0,_=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=t.photoURL)!==null&&l!==void 0?l:void 0,C=(u=t.tenantId)!==null&&u!==void 0?u:void 0,D=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,P=(f=t.createdAt)!==null&&f!==void 0?f:void 0,I=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:z,isAnonymous:F,providerData:H,stsTokenManager:j}=t;fe(N&&j,e,"internal-error");const S=bc.fromJSON(this.name,j);fe(typeof N=="string",e,"internal-error"),ea(v,e.name),ea(x,e.name),fe(typeof z=="boolean",e,"internal-error"),fe(typeof F=="boolean",e,"internal-error"),ea(_,e.name),ea(T,e.name),ea(C,e.name),ea(D,e.name),ea(P,e.name),ea(I,e.name);const R=new Hi({uid:N,auth:e,email:x,emailVerified:z,displayName:v,isAnonymous:F,photoURL:T,phoneNumber:_,tenantId:C,stsTokenManager:S,createdAt:P,lastLoginAt:I});return H&&Array.isArray(H)&&(R.providerData=H.map(V=>Object.assign({},V))),D&&(R._redirectEventId=D),R}static async _fromIdTokenResponse(e,t,i=!1){const r=new bc;r.updateFromServerResponse(t);const a=new Hi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await bh(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];fe(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?aC(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),u=new bc;u.updateFromIdToken(i);const d=new Hi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new px(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Map;function pi(n){$i(n instanceof Function,"Expected a class definition");let e=G2.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,G2.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oC.type="NONE";const Pc=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(n,e,t){return`firebase:${n}:${e}:${t}`}class _c{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Uo(this.userKey,r.apiKey,a),this.fullPersistenceKey=Uo("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Up(this.auth,{idToken:e}).catch(()=>{});return t?Hi._fromGetAccountInfoResponse(this.auth,t,e):null}return Hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _c(pi(Pc),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||pi(Pc);const l=Uo(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const x=await Up(e,{idToken:p}).catch(()=>{});if(!x)break;v=await Hi._fromGetAccountInfoResponse(e,x,p)}else v=Hi._fromJSON(e,p);f!==a&&(u=v),a=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new _c(a,e,i):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new _c(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hC(e))return"Blackberry";if(fC(e))return"Webos";if(cC(e))return"Safari";if((e.includes("chrome/")||uC(e))&&!e.includes("edge/"))return"Chrome";if(nf(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function lC(n=Rt()){return/firefox\//i.test(n)}function cC(n=Rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uC(n=Rt()){return/crios\//i.test(n)}function dC(n=Rt()){return/iemobile/i.test(n)}function nf(n=Rt()){return/android/i.test(n)}function hC(n=Rt()){return/blackberry/i.test(n)}function fC(n=Rt()){return/webos/i.test(n)}function rf(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lO(n=Rt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function cO(n=Rt()){var e;return rf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uO(){return V4()&&document.documentMode===10}function mC(n=Rt()){return rf(n)||nf(n)||fC(n)||hC(n)||/windows phone/i.test(n)||dC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n,e=[]){let t;switch(n){case"Browser":t=$2(Rt());break;case"Worker":t=`${$2(Rt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,u)=>{try{const d=e(a);l(d)}catch(d){u(d)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(n,e={}){return Lt(n,"GET","/v2/passwordPolicy",Ot(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=6;class mO{constructor(e){var t,i,r,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:fO,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,a,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K2(this),this.idTokenSubscription=new K2(this),this.beforeStateQueue=new dO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await _c.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Up(this,{idToken:e}),i=await Hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$V()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject(mn(this));const t=e?Ne(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject(mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject(mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hO(this),t=new mO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await oO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await _c.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&HV(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pt(n){return Ne(n)}class K2{constructor(e){this.auth=e,this.observer=null,this.addObserver=U4(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gO(n){sf=n}function qw(n){return sf.loadJS(n)}function yO(){return sf.recaptchaV2Script}function vO(){return sf.recaptchaEnterpriseScript}function xO(){return sf.gapiScript}function gC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=500,bO=6e4,Zm=1e12;class _O{constructor(e){this.auth=e,this.counter=Zm,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new SO(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Zm;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||Zm;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||Zm;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class TO{constructor(){this.enterprise=new EO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class SO{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;fe(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=AO(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},bO)},wO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function AO(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const IO="recaptcha-enterprise",Xd="NO_RECAPTCHA";class yC{constructor(e){this.type=IO,this.auth=Pt(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{sC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new rC(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function r(a,l,u){const d=window.grecaptcha;q2(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(Xd)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TO().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(u=>{if(!t&&q2(window.grecaptcha))r(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=vO();d.length!==0&&(d+=u),qw(d).then(()=>{r(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function Pd(n,e,t,i=!1,r=!1){const a=new yC(n);let l;if(r)l=Xd;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function ha(n,e,t,i,r){var a,l;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Pd(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Pd(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)});else if(r==="PHONE_PROVIDER")if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("PHONE_PROVIDER")){const u=await Pd(n,e,t);return i(n,u).catch(async d=>{var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Pd(n,e,t,!1,!0);return i(n,p)}return Promise.reject(d)})}else{const u=await Pd(n,e,t,!1,!0);return i(n,u)}else return Promise.reject(r+" provider is not supported.")}async function CO(n){const e=Pt(n),t=await sC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new rC(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new yC(e).verify()}function NO(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(pi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function RO(n,e,t){const i=Pt(n);fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),a=vC(e),{host:l,port:u}=PO(e),d=u===null?"":`:${u}`,f={url:`${a}//${l}${d}/`},p=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),fe(ga(f,i.config.emulator)&&ga(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,ef(l)?(D4(`${a}//${l}${d}`),j4("Auth",!0)):r||DO()}function vC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function PO(n){const e=vC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:W2(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:W2(l)}}}function W2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,t){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(n,e){return Lt(n,"POST","/v1/accounts:resetPassword",Ot(n,e))}async function jO(n,e){return Lt(n,"POST","/v1/accounts:update",e)}async function kO(n,e){return Lt(n,"POST","/v1/accounts:signUp",e)}async function MO(n,e){return Lt(n,"POST","/v1/accounts:update",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e){return ws(n,"POST","/v1/accounts:signInWithPassword",Ot(n,e))}async function Ag(n,e){return Lt(n,"POST","/v1/accounts:sendOobCode",Ot(n,e))}async function OO(n,e){return Ag(n,e)}async function LO(n,e){return Ag(n,e)}async function UO(n,e){return Ag(n,e)}async function BO(n,e){return Ag(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e){return ws(n,"POST","/v1/accounts:signInWithEmailLink",Ot(n,e))}async function zO(n,e){return ws(n,"POST","/v1/accounts:signInWithEmailLink",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends su{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _h(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new _h(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ha(e,t,"signInWithPassword",VO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return FO(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ha(e,i,"signUpPassword",kO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return zO(e,{idToken:t,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(n,e){return ws(n,"POST","/v1/accounts:signInWithIdp",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="http://localhost";class Cr extends su{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):En("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,a=Lw(t,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Cr(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ds(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ds(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ds(e,t)}buildRequest(){const e={requestUri:qO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(n,e){return Lt(n,"POST","/v1/accounts:sendVerificationCode",Ot(n,e))}async function HO(n,e){return ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ot(n,e))}async function GO(n,e){const t=await ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ot(n,e));if(t.temporaryProof)throw zd(n,"account-exists-with-different-credential",t);return t}const $O={USER_NOT_FOUND:"user-not-found"};async function KO(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ot(n,t),$O)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends su{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return HO(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return GO(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return KO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:a}=e;return!i&&!t&&!r&&!a?null:new Bo({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YO(n){const e=pc(Fd(n)).link,t=e?pc(Fd(e)).deep_link_id:null,i=pc(Fd(n)).deep_link_id;return(i?pc(Fd(i)).link:null)||i||t||e||n}class Ig{constructor(e){var t,i,r,a,l,u;const d=pc(Fd(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=WO((r=d.mode)!==null&&r!==void 0?r:null);fe(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=YO(e);try{return new Ig(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return _h._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ig.parseLink(t);return fe(i,"argument-error"),_h._fromEmailAndCode(e,i.code,i.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Tc extends au{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return fe("providerId"in t&&"signInMethod"in t,"argument-error"),Cr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return fe(e.idToken||e.accessToken,"argument-error"),Cr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Tc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Tc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:l,providerId:u}=e;if(!i&&!r&&!t&&!a||!u)return null;try{return new Tc(u)._credential({idToken:t,accessToken:i,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends au{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hr.credential(t,i)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends au{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="http://localhost";class Dc extends su{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ds(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ds(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ds(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:a}=t;return!i||!r||!a||i!==r?null:new Dc(i,a)}static _create(e,t){return new Dc(e,t)}buildRequest(){return{requestUri:QO,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="saml.";class Bp extends bs{constructor(e){fe(e.startsWith(XO),"argument-error"),super(e)}static credentialFromResult(e){return Bp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Bp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Dc.fromJSON(e);return fe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Dc._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends au{constructor(){super("twitter.com")}static credential(e,t){return Cr._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(n,e){return ws(n,"POST","/v1/accounts:signUp",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Hi._fromIdTokenResponse(e,i,r),l=Q2(i);return new Mi({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Q2(i);return new Mi({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Q2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(n){var e;if(xt(n.app))return Promise.reject(mn(n));const t=Pt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mi({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await wC(t,{returnSecureToken:!0}),r=await Mi._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends zn{constructor(e,t,i,r){var a;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Fp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Fp(e,t,i,r)}}function bC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Fp._fromErrorAndOperation(n,a,e,i):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,e){const t=Ne(n);await Cg(!0,t,e);const{providerUserInfo:i}=await eO(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),r=_C(i||[]);return t.providerData=t.providerData.filter(a=>r.has(a.providerId)),r.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Hw(n,e,t=!1){const i=await ms(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mi._forOperation(n,"link",i)}async function Cg(n,e,t){await bh(e);const i=_C(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";fe(i.has(t)===n,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e,t=!1){const{auth:i}=n;if(xt(i.app))return Promise.reject(mn(i));const r="reauthenticate";try{const a=await ms(n,bC(i,r,e,n),t);fe(a.idToken,i,"internal-error");const l=Sg(a.idToken);fe(l,i,"internal-error");const{sub:u}=l;return fe(n.uid===u,i,"user-mismatch"),Mi._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&En(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,e,t=!1){if(xt(n.app))return Promise.reject(mn(n));const i="signIn",r=await bC(n,i,e),a=await Mi._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}async function Ng(n,e){return EC(Pt(n),e)}async function SC(n,e){const t=Ne(n);return await Cg(!1,t,e.providerId),Hw(t,e)}async function AC(n,e){return TC(Ne(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(n,e){return ws(n,"POST","/v1/accounts:signInWithCustomToken",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(n,e){if(xt(n.app))return Promise.reject(mn(n));const t=Pt(n),i=await e5(t,{token:e,returnSecureToken:!0}),r=await Mi._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Gw._fromServerResponse(e,t):"totpInfo"in t?$w._fromServerResponse(e,t):En(e,"internal-error")}}class Gw extends af{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Gw(t)}}class $w extends af{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new $w(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n,e,t){var i;fe(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),fe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),fe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(fe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(fe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(n){const e=Pt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n5(n,e,t){const i=Pt(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Rg(i,r,t),await ha(i,r,"getOobCode",LO,"EMAIL_PASSWORD_PROVIDER")}async function i5(n,e,t){await xC(Ne(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Kw(n),i})}async function r5(n,e){await MO(Ne(n),{oobCode:e})}async function IC(n,e){const t=Ne(n),i=await xC(t,{oobCode:e}),r=i.requestType;switch(fe(r,t,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(i.mfaInfo,t,"internal-error");default:fe(i.email,t,"internal-error")}let a=null;return i.mfaInfo&&(a=af._fromServerResponse(Pt(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:a},operation:r}}async function s5(n,e){const{data:t}=await IC(Ne(n),e);return t.email}async function a5(n,e,t){if(xt(n.app))return Promise.reject(mn(n));const i=Pt(n),l=await ha(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wC,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Kw(n),d}),u=await Mi._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function o5(n,e,t){return xt(n.app)?Promise.reject(mn(n)):Ng(Ne(n),Da.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Kw(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l5(n,e,t){const i=Pt(n),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,u){fe(u.handleCodeInApp,i,"argument-error"),u&&Rg(i,l,u)}a(r,t),await ha(i,r,"getOobCode",UO,"EMAIL_PASSWORD_PROVIDER")}function c5(n,e){const t=Ig.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function u5(n,e,t){if(xt(n.app))return Promise.reject(mn(n));const i=Ne(n),r=Da.credentialWithLink(e,t||wh());return fe(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Ng(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(n,e){return Lt(n,"POST","/v1/accounts:createAuthUri",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(n,e){const t=Fw()?wh():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=await d5(Ne(n),i);return r||[]}async function f5(n,e){const t=Ne(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Rg(t.auth,r,e);const{email:a}=await OO(t.auth,r);a!==n.email&&await n.reload()}async function m5(n,e,t){const i=Ne(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Rg(i.auth,a,t);const{email:l}=await BO(i.auth,a);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n,e){return Lt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Ne(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await ms(i,p5(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function y5(n,e){const t=Ne(n);return xt(t.auth.app)?Promise.reject(mn(t.auth)):CC(t,e,null)}function v5(n,e){return CC(Ne(n),null,e)}async function CC(n,e,t){const{auth:i}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const l=await ms(n,jO(i,a));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(n){var e,t;if(!n)return null;const{providerId:i}=n,r=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(n!=null&&n.idToken)){const l=(t=(e=Sg(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(l){const u=l!=="anonymous"&&l!=="custom"?l:null;return new Ec(a,u)}}if(!i)return null;switch(i){case"facebook.com":return new w5(a,r);case"github.com":return new b5(a,r);case"google.com":return new _5(a,r);case"twitter.com":return new T5(a,r,n.screenName||null);case"custom":case"anonymous":return new Ec(a,null);default:return new Ec(a,i,r)}}class Ec{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class NC extends Ec{constructor(e,t,i,r){super(e,t,i),this.username=r}}class w5 extends Ec{constructor(e,t){super(e,"facebook.com",t)}}class b5 extends NC{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class _5 extends Ec{constructor(e,t){super(e,"google.com",t)}}class T5 extends NC{constructor(e,t,i){super(e,"twitter.com",t,i)}}function E5(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:x5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new jo("enroll",e,t)}static _fromMfaPendingCredential(e){return new jo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return jo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return jo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=Pt(e),r=t.customData._serverResponse,a=(r.mfaInfo||[]).map(u=>af._fromServerResponse(i,u));fe(r.mfaPendingCredential,i,"internal-error");const l=jo._fromMfaPendingCredential(r.mfaPendingCredential);return new Ww(l,a,async u=>{const d=await u._process(i,l);delete r.mfaInfo,delete r.mfaPendingCredential;const f=Object.assign(Object.assign({},r),{idToken:d.idToken,refreshToken:d.refreshToken});switch(t.operationType){case"signIn":const p=await Mi._fromIdTokenResponse(i,t.operationType,f);return await i._updateCurrentUser(p.user),p;case"reauthenticate":return fe(t.user,i,"internal-error"),Mi._forOperation(t.user,t.operationType,f);default:En(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function S5(n,e){var t;const i=Ne(n),r=e;return fe(e.customData.operationType,i,"argument-error"),fe((t=r.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,i,"argument-error"),Ww._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(n,e){return Lt(n,"POST","/v2/accounts/mfaEnrollment:start",Ot(n,e))}function A5(n,e){return Lt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(n,e))}function I5(n,e){return Lt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(n,e))}class Yw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>af._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new Yw(e)}async getSession(){return jo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const i=e,r=await this.getSession(),a=await ms(this.user,i._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await ms(this.user,I5(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const R0=new WeakMap;function C5(n){const e=Ne(n);return R0.has(e)||R0.set(e,Yw._fromUser(e)),R0.get(e)}const zp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zp,"1"),this.storage.removeItem(zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=1e3,R5=10;class PC extends RC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);uO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,R5):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},N5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PC.type="LOCAL";const Qw=PC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends RC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DC.type="SESSION";const Ho=DC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Pg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async f=>f(t.origin,a)),d=await P5(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const f=of("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const x=v;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return window}function j5(n){Zt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}async function k5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function V5(){return Xw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="firebaseLocalStorageDb",O5=1,qp="firebaseLocalStorage",kC="fbase_key";class lf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dg(n,e){return n.transaction([qp],e?"readwrite":"readonly").objectStore(qp)}function L5(){const n=indexedDB.deleteDatabase(jC);return new lf(n).toPromise()}function gx(){const n=indexedDB.open(jC,O5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(qp,{keyPath:kC})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(qp)?e(i):(i.close(),await L5(),e(await gx()))})})}async function Z2(n,e,t){const i=Dg(n,!0).put({[kC]:e,value:t});return new lf(i).toPromise()}async function U5(n,e){const t=Dg(n,!1).get(e),i=await new lf(t).toPromise();return i===void 0?null:i.value}function J2(n,e){const t=Dg(n,!0).delete(e);return new lf(t).toPromise()}const B5=800,F5=3;class MC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>F5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pg._getInstance(V5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await k5(),!this.activeServiceWorker)return;this.sender=new D5(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gx();return await Z2(e,zp,"1"),await J2(e,zp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Z2(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>U5(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>J2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Dg(r,!1).getAll();return new lf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MC.type="LOCAL";const Th=MC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e){return Lt(n,"POST","/v2/accounts/mfaSignIn:start",Ot(n,e))}function z5(n,e){return Lt(n,"POST","/v2/accounts/mfaSignIn:finalize",Ot(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=gC("rcb"),q5=new tf(3e4,6e4);class H5{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Zt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return fe(G5(t),e,"argument-error"),this.shouldResolveImmediately(t)&&z2(Zt().grecaptcha)?Promise.resolve(Zt().grecaptcha):new Promise((i,r)=>{const a=Zt().setTimeout(()=>{r(sn(e,"network-request-failed"))},q5.get());Zt()[P0]=()=>{Zt().clearTimeout(a),delete Zt()[P0];const u=Zt().grecaptcha;if(!u||!z2(u)){r(sn(e,"internal-error"));return}const d=u.render;u.render=(f,p)=>{const v=d(f,p);return this.counter++,v},this.hostLanguage=t,i(u)};const l=`${yO()}?${iu({onload:P0,render:"explicit",hl:t})}`;qw(l).catch(()=>{clearTimeout(a),r(sn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Zt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function G5(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class $5{async load(e){return new _O(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="recaptcha",K5={theme:"light",type:"image"};let W5=class{constructor(e,t,i=Object.assign({},K5)){this.parameters=i,this.type=Zd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof t=="string"?document.getElementById(t):t;fe(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $5:new H5,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),r(l))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Zt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(Fw()&&!Xw(),this.auth,"internal-error"),await Y5(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await ZV(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Y5(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Bo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Q5(n,e,t){if(xt(n.app))return Promise.reject(mn(n));const i=Pt(n),r=await jg(i,e,Ne(t));return new Zw(r,a=>Ng(i,a))}async function X5(n,e,t){const i=Ne(n);await Cg(!1,i,"phone");const r=await jg(i.auth,e,Ne(t));return new Zw(r,a=>SC(i,a))}async function Z5(n,e,t){const i=Ne(n);if(xt(i.auth.app))return Promise.reject(mn(i.auth));const r=await jg(i.auth,e,Ne(t));return new Zw(r,a=>AC(i,a))}async function jg(n,e,t){var i;if(!n._getRecaptchaConfig())try{await CO(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){fe(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ha(n,l,"mfaSmsEnrollment",async(p,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Xd){fe((t==null?void 0:t.type)===Zd,p,"argument-error");const x=await D0(p,v,t);return X2(p,x)}return X2(p,v)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{fe(a.type==="signin",n,"internal-error");const l=((i=r.multiFactorHint)===null||i===void 0?void 0:i.uid)||r.multiFactorUid;fe(l,n,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ha(n,u,"mfaSmsSignIn",async(v,x)=>{if(x.phoneSignInInfo.captchaResponse===Xd){fe((t==null?void 0:t.type)===Zd,v,"argument-error");const _=await D0(v,x,t);return eS(v,_)}return eS(v,x)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ha(n,a,"sendVerificationCode",async(f,p)=>{if(p.captchaResponse===Xd){fe((t==null?void 0:t.type)===Zd,f,"argument-error");const v=await D0(f,p,t);return Y2(f,v)}return Y2(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t==null||t._reset()}}async function J5(n,e){const t=Ne(n);if(xt(t.auth.app))return Promise.reject(mn(t.auth));await Hw(t,e)}async function D0(n,e,t){fe(t.type===Zd,n,"argument-error");const i=await t.verify();fe(typeof i=="string",n,"argument-error");const r=Object.assign({},e);if("phoneEnrollmentInfo"in r){const a=r.phoneEnrollmentInfo.phoneNumber,l=r.phoneEnrollmentInfo.captchaResponse,u=r.phoneEnrollmentInfo.clientType,d=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:l,clientType:u,recaptchaVersion:d}}),r}else if("phoneSignInInfo"in r){const a=r.phoneSignInInfo.captchaResponse,l=r.phoneSignInInfo.clientType,u=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:l,recaptchaVersion:u}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go=class pp{constructor(e){this.providerId=pp.PROVIDER_ID,this.auth=Pt(e)}verifyPhoneNumber(e,t){return jg(this.auth,e,Ne(t))}static credential(e,t){return Bo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pp.credentialFromTaggedObject(t)}static credentialFromError(e){return pp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?Bo._fromTokenResponse(t,i):null}};Go.PROVIDER_ID="phone";Go.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(n,e){return e?pi(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends su{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ds(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e8(n){return EC(n.auth,new Jw(n),n.bypassAuthState)}function t8(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),TC(t,new Jw(n),n.bypassAuthState)}async function n8(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),Hw(t,new Jw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e8;case"linkViaPopup":case"linkViaRedirect":return n8;case"reauthViaPopup":case"reauthViaRedirect":return t8;default:En(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new tf(2e3,1e4);async function r8(n,e,t){if(xt(n.app))return Promise.reject(sn(n,"operation-not-supported-in-this-environment"));const i=Pt(n);ru(n,e,bs);const r=al(i,t);return new ls(i,"signInViaPopup",e,r).executeNotNull()}async function s8(n,e,t){const i=Ne(n);if(xt(i.auth.app))return Promise.reject(sn(i.auth,"operation-not-supported-in-this-environment"));ru(i.auth,e,bs);const r=al(i.auth,t);return new ls(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function a8(n,e,t){const i=Ne(n);ru(i.auth,e,bs);const r=al(i.auth,t);return new ls(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class ls extends VC{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i8.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="pendingRedirect",Jd=new Map;class l8 extends VC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const i=await c8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function c8(n,e){const t=LC(e),i=OC(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}async function eb(n,e){return OC(n)._set(LC(e),"true")}function u8(){Jd.clear()}function tb(n,e){Jd.set(n._key(),e)}function OC(n){return pi(n._redirectPersistence)}function LC(n){return Uo(o8,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(n,e,t){return h8(n,e,t)}async function h8(n,e,t){if(xt(n.app))return Promise.reject(mn(n));const i=Pt(n);ru(n,e,bs),await i._initializationPromise;const r=al(i,t);return await eb(r,i),r._openRedirect(i,e,"signInViaRedirect")}function f8(n,e,t){return m8(n,e,t)}async function m8(n,e,t){const i=Ne(n);if(ru(i.auth,e,bs),xt(i.auth.app))return Promise.reject(mn(i.auth));await i.auth._initializationPromise;const r=al(i.auth,t);await eb(r,i.auth);const a=await UC(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",a)}function p8(n,e,t){return g8(n,e,t)}async function g8(n,e,t){const i=Ne(n);ru(i.auth,e,bs),await i.auth._initializationPromise;const r=al(i.auth,t);await Cg(!1,i,e.providerId),await eb(r,i.auth);const a=await UC(i);return r._openRedirect(i.auth,e,"linkViaRedirect",a)}async function y8(n,e){return await Pt(n)._initializationPromise,kg(n,e,!1)}async function kg(n,e,t=!1){if(xt(n.app))return Promise.reject(mn(n));const i=Pt(n),r=al(i,e),l=await new l8(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}async function UC(n){const e=of(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=10*60*1e3;class BC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!FC(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v8&&this.cachedEventUids.clear(),this.cachedEventUids.has(tS(e))}saveEventToCache(e){this.cachedEventUids.add(tS(e)),this.lastProcessedEventTime=Date.now()}}function tS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,e={}){return Lt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b8=/^https?/;async function _8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zC(n);for(const t of e)try{if(T8(t))return}catch{}En(n,"unauthorized-domain")}function T8(n){const e=wh(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!b8.test(t))return!1;if(w8.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new tf(3e4,6e4);function nS(){const n=Zt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function S8(n){return new Promise((e,t)=>{var i,r,a;function l(){nS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nS(),t(sn(n,"network-request-failed"))},timeout:E8.get()})}if(!((r=(i=Zt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Zt().gapi)===null||a===void 0)&&a.load)l();else{const u=gC("iframefcb");return Zt()[u]=()=>{gapi.load?l():t(sn(n,"network-request-failed"))},qw(`${xO()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw gp=null,e})}let gp=null;function A8(n){return gp=gp||S8(n),gp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new tf(5e3,15e3),C8="__/auth/iframe",N8="emulator/auth/iframe",R8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D8(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zw(e,N8):`https://${n.config.authDomain}/${C8}`,i={apiKey:e.apiKey,appName:n.name,v:Pa},r=P8.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${iu(i).slice(1)}`}async function j8(n){const e=await A8(n),t=Zt().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:D8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R8,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=sn(n,"network-request-failed"),u=Zt().setTimeout(()=>{a(l)},I8.get());function d(){Zt().clearTimeout(u),r(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M8=500,V8=600,O8="_blank",L8="http://localhost";class iS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function U8(n,e,t,i=M8,r=V8){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d=Object.assign(Object.assign({},k8),{width:i.toString(),height:r.toString(),top:a,left:l}),f=Rt().toLowerCase();t&&(u=uC(f)?O8:t),lC(f)&&(e=e||L8,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[_,T])=>`${x}${_}=${T},`,"");if(cO(f)&&u!=="_self")return B8(e||"",u),new iS(null);const v=window.open(e||"",u,p);fe(v,n,"popup-blocked");try{v.focus()}catch{}return new iS(v)}function B8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8="__/auth/handler",z8="emulator/auth/handler",q8=encodeURIComponent("fac");async function yx(n,e,t,i,r,a){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Pa,eventId:r};if(e instanceof bs){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",gM(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries(a||{}))l[p]=v}if(e instanceof au){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await n._getAppCheckToken(),f=d?`#${q8}=${encodeURIComponent(d)}`:"";return`${H8(n)}?${iu(u).slice(1)}${f}`}function H8({config:n}){return n.emulator?zw(n,z8):`https://${n.authDomain}/${F8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="webStorageSupport";class G8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ho,this._completeRedirectFn=kg,this._overrideRedirectResult=tb}async _openPopup(e,t,i,r){var a;$i((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await yx(e,t,i,wh(),r);return U8(e,l,of())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await yx(e,t,i,wh(),r);return j5(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):($i(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await j8(e),i=new BC(e);return t.register("authEvent",r=>(fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(j0,{type:j0},r=>{var a;const l=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[j0];l!==void 0&&t(!!l),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mC()||cC()||rf()}}const $8=G8;class K8{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return pr("unexpected MultiFactorSessionType")}}}class nb extends K8{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new nb(e)}_finalizeEnroll(e,t,i){return A5(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return z5(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class qC{constructor(){}static assertion(e){return nb._fromCredential(e)}}qC.FACTOR_ID="phone";var rS="@firebase/auth",sS="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q8(n){xa(new Ir("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pC(n)},f=new pO(i,r,a,d);return NO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xa(new Ir("auth-internal",e=>{const t=Pt(e.getProvider("auth").getImmediate());return(i=>new W8(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(rS,sS,Y8(n)),Gi(rS,sS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=5*60;rM("authIdTokenMaxAge");function Z8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=sn("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",Z8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q8("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=2e3;async function eL(n,e,t){var i;const{BuildInfo:r}=$o();$i(e.sessionId,"AuthEvent did not contain a session ID");const a=await sL(e.sessionId),l={};return rf()?l.ibi=r.packageName:nf()?l.apn=r.packageName:En(n,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,yx(n,t,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,l)}async function tL(n){const{BuildInfo:e}=$o(),t={};rf()?t.iosBundleId=e.packageName:nf()?t.androidPackageName=e.packageName:En(n,"operation-not-supported-in-this-environment"),await zC(n,t)}function nL(n){const{cordova:e}=$o();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(n):r=e.InAppBrowser.open(n,lO()?"_blank":"_system","location=yes"),t(r)})})}async function iL(n,e,t){const{cordova:i}=$o();let r=()=>{};try{await new Promise((a,l)=>{let u=null;function d(){var v;a();const x=(v=i.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof x=="function"&&x(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function f(){u||(u=window.setTimeout(()=>{l(sn(n,"redirect-cancelled-by-user"))},J8))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(d),document.addEventListener("resume",f,!1),nf()&&document.addEventListener("visibilitychange",p,!1),r=()=>{e.removePassiveListener(d),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{r()}}function rL(n){var e,t,i,r,a,l,u,d,f,p;const v=$o();fe(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe(typeof((a=(r=(i=v==null?void 0:v.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe(typeof((d=(u=(l=v==null?void 0:v.cordova)===null||l===void 0?void 0:l.plugins)===null||u===void 0?void 0:u.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe(typeof((p=(f=v==null?void 0:v.cordova)===null||f===void 0?void 0:f.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function sL(n){const e=aL(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}function aL(n){if($i(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=20;class lL extends BC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function cL(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:hL(),postBody:null,tenantId:n.tenantId,error:sn(n,"no-auth-event")}}function uL(n,e){return vx()._set(xx(n),e)}async function aS(n){const e=await vx()._get(xx(n));return e&&await vx()._remove(xx(n)),e}function dL(n,e){var t,i;const r=mL(e);if(r.includes("/__/auth/callback")){const a=yp(r),l=a.firebaseError?fL(decodeURIComponent(a.firebaseError)):null,u=(i=(t=l==null?void 0:l.code)===null||t===void 0?void 0:t.split("auth/"))===null||i===void 0?void 0:i[1],d=u?sn(u):null;return d?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:r,postBody:null}}return null}function hL(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<oL;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function vx(){return pi(Qw)}function xx(n){return Uo("authEvent",n.config.apiKey,n.name)}function fL(n){try{return JSON.parse(n)}catch{return null}}function mL(n){const e=yp(n),t=e.link?decodeURIComponent(e.link):void 0,i=yp(t).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return yp(r).link||r||i||t||n}function yp(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return pc(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=500;class gL{constructor(){this._redirectPersistence=Ho,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kg,this._overrideRedirectResult=tb}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new lL(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){En(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,r){rL(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),u8(),await this._originValidation(e);const l=cL(e,i,r);await uL(e,l);const u=await eL(e,l,t),d=await nL(u);return iL(e,a,d)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tL(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:r,BuildInfo:a}=$o(),l=setTimeout(async()=>{await aS(e),t.onEvent(oS())},pL),u=async p=>{clearTimeout(l);const v=await aS(e);let x=null;v&&(p!=null&&p.url)&&(x=dL(v,p.url)),t.onEvent(x||oS())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const d=r,f=`${a.packageName.toLowerCase()}://`;$o().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(f)&&u({url:p}),typeof d=="function")try{d(p)}catch(v){console.error(v)}}}}const yL=gL;function oS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(n,e){Pt(n)._logFramework(e)}var xL="@firebase/auth-compat",wL="0.5.26";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=1e3;function eh(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function _L(){return eh()==="http:"||eh()==="https:"}function HC(n=Rt()){return!!((eh()==="file:"||eh()==="ionic:"||eh()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function TL(){return jw()||Tg()}function EL(){return V4()&&(document==null?void 0:document.documentMode)===11}function SL(n=Rt()){return/Edge\/\d+/.test(n)}function AL(n=Rt()){return EL()||SL(n)}function GC(){try{const n=self.localStorage,e=of();if(n)return n.setItem(e,"1"),n.removeItem(e),AL()?yh():!0}catch{return ib()&&yh()}return!1}function ib(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function k0(){return(_L()||M4()||HC())&&!TL()&&GC()&&!ib()}function $C(){return HC()&&typeof document<"u"}async function IL(){return $C()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},bL);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function CL(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi={LOCAL:"local",NONE:"none",SESSION:"session"},Dd=fe,KC="persistence";function NL(n,e){if(Dd(Object.values(mi).includes(e),n,"invalid-persistence-type"),jw()){Dd(e!==mi.SESSION,n,"unsupported-persistence-type");return}if(Tg()){Dd(e===mi.NONE,n,"unsupported-persistence-type");return}if(ib()){Dd(e===mi.NONE||e===mi.LOCAL&&yh(),n,"unsupported-persistence-type");return}Dd(e===mi.NONE||GC(),n,"unsupported-persistence-type")}async function wx(n){await n._initializationPromise;const e=WC(),t=Uo(KC,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function RL(n,e){const t=WC();if(!t)return[];const i=Uo(KC,n,e);switch(t.getItem(i)){case mi.NONE:return[Pc];case mi.LOCAL:return[Th,Ho];case mi.SESSION:return[Ho];default:return[]}}function WC(){var n;try{return((n=CL())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=fe;class oa{constructor(){this.browserResolver=pi($8),this.cordovaResolver=pi(yL),this.underlyingResolver=null,this._redirectPersistence=Ho,this._completeRedirectFn=kg,this._overrideRedirectResult=tb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,r)}async _openRedirect(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return $C()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return PL(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await IL();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){return n.unwrap()}function DL(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){return QC(n)}function kL(n,e){var t;const i=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new ML(n,S5(n,e))}else if(i){const r=QC(e),a=e;r&&(a.credential=r,a.tenantId=i.tenantId||void 0,a.email=i.email||void 0,a.phoneNumber=i.phoneNumber||void 0)}}function QC(n){const{_tokenResponse:e}=n instanceof zn?n.customData:n;if(!e)return null;if(!(n instanceof zn)&&"temporaryProof"in e&&"phoneNumber"in e)return Go.credentialFromResult(n);const t=e.providerId;if(!t||t===Rd.PASSWORD)return null;let i;switch(t){case Rd.GOOGLE:i=hr;break;case Rd.FACEBOOK:i=dr;break;case Rd.GITHUB:i=fr;break;case Rd.TWITTER:i=mr;break;default:const{oauthIdToken:r,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:u,nonce:d}=e;return!a&&!l&&!r&&!u?null:u?t.startsWith("saml.")?Dc._create(t,u):Cr._fromParams({providerId:t,signInMethod:t,pendingToken:u,idToken:r,accessToken:a}):new Tc(t).credential({idToken:r,accessToken:a,rawNonce:d})}return n instanceof zn?i.credentialFromError(n):i.credentialFromResult(n)}function Qn(n,e){return e.catch(t=>{throw t instanceof zn&&kL(n,t),t}).then(t=>{const i=t.operationType,r=t.user;return{operationType:i,credential:jL(t),additionalUserInfo:E5(t),user:Mg.getOrCreate(r)}})}async function bx(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>Qn(n,t.confirm(i))}}class ML{constructor(e,t){this.resolver=t,this.auth=DL(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Qn(YC(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg=class qd{constructor(e){this._delegate=e,this.multiFactor=C5(e)}static getOrCreate(e){return qd.USER_MAP.has(e)||qd.USER_MAP.set(e,new qd(e)),qd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Qn(this.auth,SC(this._delegate,e))}async linkWithPhoneNumber(e,t){return bx(this.auth,X5(this._delegate,e,t))}async linkWithPopup(e){return Qn(this.auth,a8(this._delegate,e,oa))}async linkWithRedirect(e){return await wx(Pt(this.auth)),p8(this._delegate,e,oa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Qn(this.auth,AC(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return bx(this.auth,Z5(this._delegate,e,t))}reauthenticateWithPopup(e){return Qn(this.auth,s8(this._delegate,e,oa))}async reauthenticateWithRedirect(e){return await wx(Pt(this.auth)),f8(this._delegate,e,oa)}sendEmailVerification(e){return f5(this._delegate,e)}async unlink(e){return await JO(this._delegate,e),this}updateEmail(e){return y5(this._delegate,e)}updatePassword(e){return v5(this._delegate,e)}updatePhoneNumber(e){return J5(this._delegate,e)}updateProfile(e){return g5(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return m5(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Mg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=fe;class _x{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;jd(i,"invalid-api-key",{appName:e.name}),jd(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?oa:void 0;this._delegate=t.initialize({options:{persistence:VL(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(zV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){RO(this._delegate,e,t)}applyActionCode(e){return r5(this._delegate,e)}checkActionCode(e){return IC(this._delegate,e)}confirmPasswordReset(e,t){return i5(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Qn(this._delegate,a5(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return h5(this._delegate,e)}isSignInWithEmailLink(e){return c5(this._delegate,e)}async getRedirectResult(){jd(k0(),this._delegate,"operation-not-supported-in-this-environment");const e=await y8(this._delegate,oa);return e?Qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){vL(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:r,error:a,complete:l}=lS(e,t,i);return this._delegate.onAuthStateChanged(r,a,l)}onIdTokenChanged(e,t,i){const{next:r,error:a,complete:l}=lS(e,t,i);return this._delegate.onIdTokenChanged(r,a,l)}sendSignInLinkToEmail(e,t){return l5(this._delegate,e,t)}sendPasswordResetEmail(e,t){return n5(this._delegate,e,t||void 0)}async setPersistence(e){NL(this._delegate,e);let t;switch(e){case mi.SESSION:t=Ho;break;case mi.LOCAL:t=await pi(Th)._isAvailable()?Th:Qw;break;case mi.NONE:t=Pc;break;default:return En("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Qn(this._delegate,ZO(this._delegate))}signInWithCredential(e){return Qn(this._delegate,Ng(this._delegate,e))}signInWithCustomToken(e){return Qn(this._delegate,t5(this._delegate,e))}signInWithEmailAndPassword(e,t){return Qn(this._delegate,o5(this._delegate,e,t))}signInWithEmailLink(e,t){return Qn(this._delegate,u5(this._delegate,e,t))}signInWithPhoneNumber(e,t){return bx(this._delegate,Q5(this._delegate,e,t))}async signInWithPopup(e){return jd(k0(),this._delegate,"operation-not-supported-in-this-environment"),Qn(this._delegate,r8(this._delegate,e,oa))}async signInWithRedirect(e){return jd(k0(),this._delegate,"operation-not-supported-in-this-environment"),await wx(this._delegate),d8(this._delegate,e,oa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s5(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}_x.Persistence=mi;function lS(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const r=i;return{next:l=>r(l&&Mg.getOrCreate(l)),error:e,complete:t}}function VL(n,e){const t=RL(n,e);if(typeof self<"u"&&!t.includes(Th)&&t.push(Th),typeof window<"u")for(const i of[Qw,Ho])t.includes(i)||t.push(i);return t.includes(Pc)||t.push(Pc),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{static credential(e,t){return Go.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Go(YC(te.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}rb.PHONE_SIGN_IN_METHOD=Go.PHONE_SIGN_IN_METHOD;rb.PROVIDER_ID=Go.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=fe;class LL{constructor(e,t,i=te.app()){var r;OL((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new W5(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="auth-compat";function BL(n){n.INTERNAL.registerComponent(new Ir(UL,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new _x(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ic.EMAIL_SIGNIN,PASSWORD_RESET:ic.PASSWORD_RESET,RECOVER_EMAIL:ic.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ic.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ic.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ic.VERIFY_EMAIL}},EmailAuthProvider:Da,FacebookAuthProvider:dr,GithubAuthProvider:fr,GoogleAuthProvider:hr,OAuthProvider:Tc,SAMLAuthProvider:Bp,PhoneAuthProvider:rb,PhoneMultiFactorGenerator:qC,RecaptchaVerifier:LL,TwitterAuthProvider:mr,Auth:_x,AuthCredential:su,Error:zn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(xL,wL)}BL(te);var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fa,XC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function R(){}R.prototype=S.prototype,j.D=S.prototype,j.prototype=new R,j.prototype.constructor=j,j.C=function(V,L,B){for(var O=Array(arguments.length-2),me=2;me<arguments.length;me++)O[me-2]=arguments[me];return S.prototype[L].apply(V,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(j,S,R){R||(R=0);var V=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)V[L]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(L=0;16>L;++L)V[L]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=j.g[0],R=j.g[1],L=j.g[2];var B=j.g[3],O=S+(B^R&(L^B))+V[0]+3614090360&4294967295;S=R+(O<<7&4294967295|O>>>25),O=B+(L^S&(R^L))+V[1]+3905402710&4294967295,B=S+(O<<12&4294967295|O>>>20),O=L+(R^B&(S^R))+V[2]+606105819&4294967295,L=B+(O<<17&4294967295|O>>>15),O=R+(S^L&(B^S))+V[3]+3250441966&4294967295,R=L+(O<<22&4294967295|O>>>10),O=S+(B^R&(L^B))+V[4]+4118548399&4294967295,S=R+(O<<7&4294967295|O>>>25),O=B+(L^S&(R^L))+V[5]+1200080426&4294967295,B=S+(O<<12&4294967295|O>>>20),O=L+(R^B&(S^R))+V[6]+2821735955&4294967295,L=B+(O<<17&4294967295|O>>>15),O=R+(S^L&(B^S))+V[7]+4249261313&4294967295,R=L+(O<<22&4294967295|O>>>10),O=S+(B^R&(L^B))+V[8]+1770035416&4294967295,S=R+(O<<7&4294967295|O>>>25),O=B+(L^S&(R^L))+V[9]+2336552879&4294967295,B=S+(O<<12&4294967295|O>>>20),O=L+(R^B&(S^R))+V[10]+4294925233&4294967295,L=B+(O<<17&4294967295|O>>>15),O=R+(S^L&(B^S))+V[11]+2304563134&4294967295,R=L+(O<<22&4294967295|O>>>10),O=S+(B^R&(L^B))+V[12]+1804603682&4294967295,S=R+(O<<7&4294967295|O>>>25),O=B+(L^S&(R^L))+V[13]+4254626195&4294967295,B=S+(O<<12&4294967295|O>>>20),O=L+(R^B&(S^R))+V[14]+2792965006&4294967295,L=B+(O<<17&4294967295|O>>>15),O=R+(S^L&(B^S))+V[15]+1236535329&4294967295,R=L+(O<<22&4294967295|O>>>10),O=S+(L^B&(R^L))+V[1]+4129170786&4294967295,S=R+(O<<5&4294967295|O>>>27),O=B+(R^L&(S^R))+V[6]+3225465664&4294967295,B=S+(O<<9&4294967295|O>>>23),O=L+(S^R&(B^S))+V[11]+643717713&4294967295,L=B+(O<<14&4294967295|O>>>18),O=R+(B^S&(L^B))+V[0]+3921069994&4294967295,R=L+(O<<20&4294967295|O>>>12),O=S+(L^B&(R^L))+V[5]+3593408605&4294967295,S=R+(O<<5&4294967295|O>>>27),O=B+(R^L&(S^R))+V[10]+38016083&4294967295,B=S+(O<<9&4294967295|O>>>23),O=L+(S^R&(B^S))+V[15]+3634488961&4294967295,L=B+(O<<14&4294967295|O>>>18),O=R+(B^S&(L^B))+V[4]+3889429448&4294967295,R=L+(O<<20&4294967295|O>>>12),O=S+(L^B&(R^L))+V[9]+568446438&4294967295,S=R+(O<<5&4294967295|O>>>27),O=B+(R^L&(S^R))+V[14]+3275163606&4294967295,B=S+(O<<9&4294967295|O>>>23),O=L+(S^R&(B^S))+V[3]+4107603335&4294967295,L=B+(O<<14&4294967295|O>>>18),O=R+(B^S&(L^B))+V[8]+1163531501&4294967295,R=L+(O<<20&4294967295|O>>>12),O=S+(L^B&(R^L))+V[13]+2850285829&4294967295,S=R+(O<<5&4294967295|O>>>27),O=B+(R^L&(S^R))+V[2]+4243563512&4294967295,B=S+(O<<9&4294967295|O>>>23),O=L+(S^R&(B^S))+V[7]+1735328473&4294967295,L=B+(O<<14&4294967295|O>>>18),O=R+(B^S&(L^B))+V[12]+2368359562&4294967295,R=L+(O<<20&4294967295|O>>>12),O=S+(R^L^B)+V[5]+4294588738&4294967295,S=R+(O<<4&4294967295|O>>>28),O=B+(S^R^L)+V[8]+2272392833&4294967295,B=S+(O<<11&4294967295|O>>>21),O=L+(B^S^R)+V[11]+1839030562&4294967295,L=B+(O<<16&4294967295|O>>>16),O=R+(L^B^S)+V[14]+4259657740&4294967295,R=L+(O<<23&4294967295|O>>>9),O=S+(R^L^B)+V[1]+2763975236&4294967295,S=R+(O<<4&4294967295|O>>>28),O=B+(S^R^L)+V[4]+1272893353&4294967295,B=S+(O<<11&4294967295|O>>>21),O=L+(B^S^R)+V[7]+4139469664&4294967295,L=B+(O<<16&4294967295|O>>>16),O=R+(L^B^S)+V[10]+3200236656&4294967295,R=L+(O<<23&4294967295|O>>>9),O=S+(R^L^B)+V[13]+681279174&4294967295,S=R+(O<<4&4294967295|O>>>28),O=B+(S^R^L)+V[0]+3936430074&4294967295,B=S+(O<<11&4294967295|O>>>21),O=L+(B^S^R)+V[3]+3572445317&4294967295,L=B+(O<<16&4294967295|O>>>16),O=R+(L^B^S)+V[6]+76029189&4294967295,R=L+(O<<23&4294967295|O>>>9),O=S+(R^L^B)+V[9]+3654602809&4294967295,S=R+(O<<4&4294967295|O>>>28),O=B+(S^R^L)+V[12]+3873151461&4294967295,B=S+(O<<11&4294967295|O>>>21),O=L+(B^S^R)+V[15]+530742520&4294967295,L=B+(O<<16&4294967295|O>>>16),O=R+(L^B^S)+V[2]+3299628645&4294967295,R=L+(O<<23&4294967295|O>>>9),O=S+(L^(R|~B))+V[0]+4096336452&4294967295,S=R+(O<<6&4294967295|O>>>26),O=B+(R^(S|~L))+V[7]+1126891415&4294967295,B=S+(O<<10&4294967295|O>>>22),O=L+(S^(B|~R))+V[14]+2878612391&4294967295,L=B+(O<<15&4294967295|O>>>17),O=R+(B^(L|~S))+V[5]+4237533241&4294967295,R=L+(O<<21&4294967295|O>>>11),O=S+(L^(R|~B))+V[12]+1700485571&4294967295,S=R+(O<<6&4294967295|O>>>26),O=B+(R^(S|~L))+V[3]+2399980690&4294967295,B=S+(O<<10&4294967295|O>>>22),O=L+(S^(B|~R))+V[10]+4293915773&4294967295,L=B+(O<<15&4294967295|O>>>17),O=R+(B^(L|~S))+V[1]+2240044497&4294967295,R=L+(O<<21&4294967295|O>>>11),O=S+(L^(R|~B))+V[8]+1873313359&4294967295,S=R+(O<<6&4294967295|O>>>26),O=B+(R^(S|~L))+V[15]+4264355552&4294967295,B=S+(O<<10&4294967295|O>>>22),O=L+(S^(B|~R))+V[6]+2734768916&4294967295,L=B+(O<<15&4294967295|O>>>17),O=R+(B^(L|~S))+V[13]+1309151649&4294967295,R=L+(O<<21&4294967295|O>>>11),O=S+(L^(R|~B))+V[4]+4149444226&4294967295,S=R+(O<<6&4294967295|O>>>26),O=B+(R^(S|~L))+V[11]+3174756917&4294967295,B=S+(O<<10&4294967295|O>>>22),O=L+(S^(B|~R))+V[2]+718787259&4294967295,L=B+(O<<15&4294967295|O>>>17),O=R+(B^(L|~S))+V[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,j.g[2]=j.g[2]+L&4294967295,j.g[3]=j.g[3]+B&4294967295}i.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var R=S-this.blockSize,V=this.B,L=this.h,B=0;B<S;){if(L==0)for(;B<=R;)r(this,j,B),B+=this.blockSize;if(typeof j=="string"){for(;B<S;)if(V[L++]=j.charCodeAt(B++),L==this.blockSize){r(this,V),L=0;break}}else for(;B<S;)if(V[L++]=j[B++],L==this.blockSize){r(this,V),L=0;break}}this.h=L,this.o+=S},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var R=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=R&255,R/=256;for(this.u(j),j=Array(16),S=R=0;4>S;++S)for(var V=0;32>V;V+=8)j[R++]=this.g[S]>>>V&255;return j};function a(j,S){var R=u;return Object.prototype.hasOwnProperty.call(R,j)?R[j]:R[j]=S(j)}function l(j,S){this.h=S;for(var R=[],V=!0,L=j.length-1;0<=L;L--){var B=j[L]|0;V&&B==S||(R[L]=B,V=!1)}this.g=R}var u={};function d(j){return-128<=j&&128>j?a(j,function(S){return new l([S|0],0>S?-1:0)}):new l([j|0],0>j?-1:0)}function f(j){if(isNaN(j)||!isFinite(j))return v;if(0>j)return D(f(-j));for(var S=[],R=1,V=0;j>=R;V++)S[V]=j/R|0,R*=4294967296;return new l(S,0)}function p(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return D(p(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(S,8)),V=v,L=0;L<j.length;L+=8){var B=Math.min(8,j.length-L),O=parseInt(j.substring(L,L+B),S);8>B?(B=f(Math.pow(S,B)),V=V.j(B).add(f(O))):(V=V.j(R),V=V.add(f(O)))}return V}var v=d(0),x=d(1),_=d(16777216);n=l.prototype,n.m=function(){if(C(this))return-D(this).m();for(var j=0,S=1,R=0;R<this.g.length;R++){var V=this.i(R);j+=(0<=V?V:4294967296+V)*S,S*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(T(this))return"0";if(C(this))return"-"+D(this).toString(j);for(var S=f(Math.pow(j,6)),R=this,V="";;){var L=z(R,S).g;R=P(R,L.j(S));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(j);if(R=L,T(R))return B+V;for(;6>B.length;)B="0"+B;V=B+V}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function T(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function C(j){return j.h==-1}n.l=function(j){return j=P(this,j),C(j)?-1:T(j)?0:1};function D(j){for(var S=j.g.length,R=[],V=0;V<S;V++)R[V]=~j.g[V];return new l(R,~j.h).add(x)}n.abs=function(){return C(this)?D(this):this},n.add=function(j){for(var S=Math.max(this.g.length,j.g.length),R=[],V=0,L=0;L<=S;L++){var B=V+(this.i(L)&65535)+(j.i(L)&65535),O=(B>>>16)+(this.i(L)>>>16)+(j.i(L)>>>16);V=O>>>16,B&=65535,O&=65535,R[L]=O<<16|B}return new l(R,R[R.length-1]&-2147483648?-1:0)};function P(j,S){return j.add(D(S))}n.j=function(j){if(T(this)||T(j))return v;if(C(this))return C(j)?D(this).j(D(j)):D(D(this).j(j));if(C(j))return D(this.j(D(j)));if(0>this.l(_)&&0>j.l(_))return f(this.m()*j.m());for(var S=this.g.length+j.g.length,R=[],V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<j.g.length;L++){var B=this.i(V)>>>16,O=this.i(V)&65535,me=j.i(L)>>>16,ve=j.i(L)&65535;R[2*V+2*L]+=O*ve,I(R,2*V+2*L),R[2*V+2*L+1]+=B*ve,I(R,2*V+2*L+1),R[2*V+2*L+1]+=O*me,I(R,2*V+2*L+1),R[2*V+2*L+2]+=B*me,I(R,2*V+2*L+2)}for(V=0;V<S;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=S;V<2*S;V++)R[V]=0;return new l(R,0)};function I(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function N(j,S){this.g=j,this.h=S}function z(j,S){if(T(S))throw Error("division by zero");if(T(j))return new N(v,v);if(C(j))return S=z(D(j),S),new N(D(S.g),D(S.h));if(C(S))return S=z(j,D(S)),new N(D(S.g),S.h);if(30<j.g.length){if(C(j)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var R=x,V=S;0>=V.l(j);)R=F(R),V=F(V);var L=H(R,1),B=H(V,1);for(V=H(V,2),R=H(R,2);!T(V);){var O=B.add(V);0>=O.l(j)&&(L=L.add(R),B=O),V=H(V,1),R=H(R,1)}return S=P(j,L.j(S)),new N(L,S)}for(L=v;0<=j.l(S);){for(R=Math.max(1,Math.floor(j.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),B=f(R),O=B.j(S);C(O)||0<O.l(j);)R-=V,B=f(R),O=B.j(S);T(B)&&(B=x),L=L.add(B),j=P(j,O)}return new N(L,j)}n.A=function(j){return z(this,j).h},n.and=function(j){for(var S=Math.max(this.g.length,j.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)&j.i(V);return new l(R,this.h&j.h)},n.or=function(j){for(var S=Math.max(this.g.length,j.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)|j.i(V);return new l(R,this.h|j.h)},n.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)^j.i(V);return new l(R,this.h^j.h)};function F(j){for(var S=j.g.length+1,R=[],V=0;V<S;V++)R[V]=j.i(V)<<1|j.i(V-1)>>>31;return new l(R,j.h)}function H(j,S){var R=S>>5;S%=32;for(var V=j.g.length-R,L=[],B=0;B<V;B++)L[B]=0<S?j.i(B+R)>>>S|j.i(B+R+1)<<32-S:j.i(B+R);return new l(L,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,fa=l}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZC,Hd,JC,vp,Tx,eN,tN,nN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,b,E){return g==Array.prototype||g==Object.prototype||(g[b]=E.value),g};function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jm=="object"&&Jm];for(var b=0;b<g.length;++b){var E=g[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function r(g,b){if(b)e:{var E=i;g=g.split(".");for(var U=0;U<g.length-1;U++){var Y=g[U];if(!(Y in E))break e;E=E[Y]}g=g[g.length-1],U=E[g],b=b(U),b!=U&&b!=null&&e(E,g,{configurable:!0,writable:!0,value:b})}}function a(g,b){g instanceof String&&(g+="");var E=0,U=!1,Y={next:function(){if(!U&&E<g.length){var ie=E++;return{value:b(ie,g[ie]),done:!1}}return U=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}r("Array.prototype.values",function(g){return g||function(){return a(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(g){var b=typeof g;return b=b!="object"?b:g?Array.isArray(g)?"array":b:"null",b=="array"||b=="object"&&typeof g.length=="number"}function f(g){var b=typeof g;return b=="object"&&g!=null||b=="function"}function p(g,b,E){return g.call.apply(g.bind,arguments)}function v(g,b,E){if(!g)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,U),g.apply(b,Y)}}return function(){return g.apply(b,arguments)}}function x(g,b,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,x.apply(null,arguments)}function _(g,b){var E=Array.prototype.slice.call(arguments,1);return function(){var U=E.slice();return U.push.apply(U,arguments),g.apply(this,U)}}function T(g,b){function E(){}E.prototype=b.prototype,g.aa=b.prototype,g.prototype=new E,g.prototype.constructor=g,g.Qb=function(U,Y,ie){for(var ye=Array(arguments.length-2),We=2;We<arguments.length;We++)ye[We-2]=arguments[We];return b.prototype[Y].apply(U,ye)}}function C(g){const b=g.length;if(0<b){const E=Array(b);for(let U=0;U<b;U++)E[U]=g[U];return E}return[]}function D(g,b){for(let E=1;E<arguments.length;E++){const U=arguments[E];if(d(U)){const Y=g.length||0,ie=U.length||0;g.length=Y+ie;for(let ye=0;ye<ie;ye++)g[Y+ye]=U[ye]}else g.push(U)}}class P{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(g){return/^[\s\xa0]*$/.test(g)}function N(){var g=u.navigator;return g&&(g=g.userAgent)?g:""}function z(g){return z[" "](g),g}z[" "]=function(){};var F=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function H(g,b,E){for(const U in g)b.call(E,g[U],U,g)}function j(g,b){for(const E in g)b.call(void 0,g[E],E,g)}function S(g){const b={};for(const E in g)b[E]=g[E];return b}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,b){let E,U;for(let Y=1;Y<arguments.length;Y++){U=arguments[Y];for(E in U)g[E]=U[E];for(let ie=0;ie<R.length;ie++)E=R[ie],Object.prototype.hasOwnProperty.call(U,E)&&(g[E]=U[E])}}function L(g){var b=1;g=g.split(":");const E=[];for(;0<b&&g.length;)E.push(g.shift()),b--;return g.length&&E.push(g.join(":")),E}function B(g){u.setTimeout(()=>{throw g},0)}function O(){var g=xe;let b=null;return g.g&&(b=g.g,g.g=g.g.next,g.g||(g.h=null),b.next=null),b}class me{constructor(){this.h=this.g=null}add(b,E){const U=ve.get();U.set(b,E),this.h?this.h.next=U:this.g=U,this.h=U}}var ve=new P(()=>new $,g=>g.reset());class ${constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ae=!1,xe=new me,q=()=>{const g=u.Promise.resolve(void 0);se=()=>{g.then(ce)}};var ce=()=>{for(var g;g=O();){try{g.h.call(g.g)}catch(E){B(E)}var b=ve;b.j(g),100>b.h&&(b.h++,g.next=b.g,b.g=g)}ae=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(g,b){this.type=g,this.g=this.target=b,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,b=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return g}();function Le(g,b){if(pe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var E=this.type=g.type,U=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=b,b=g.relatedTarget){if(F){e:{try{z(b.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(b=null)}}else E=="mouseover"?b=g.fromElement:E=="mouseout"&&(b=g.toElement);this.relatedTarget=b,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:_e[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Le.aa.h.call(this)}}T(Le,pe);var _e={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Tt(g,b,E,U,Y){this.listener=g,this.proxy=null,this.src=b,this.type=E,this.capture=!!U,this.ha=Y,this.key=++Be,this.da=this.fa=!1}function Sn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function $n(g){this.src=g,this.g={},this.h=0}$n.prototype.add=function(g,b,E,U,Y){var ie=g.toString();g=this.g[ie],g||(g=this.g[ie]=[],this.h++);var ye=Ua(g,b,U,Y);return-1<ye?(b=g[ye],E||(b.fa=!1)):(b=new Tt(b,this.src,ie,!!U,Y),b.fa=E,g.push(b)),b};function kr(g,b){var E=b.type;if(E in g.g){var U=g.g[E],Y=Array.prototype.indexOf.call(U,b,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(U,Y,1),ie&&(Sn(b),g.g[E].length==0&&(delete g.g[E],g.h--))}}function Ua(g,b,E,U){for(var Y=0;Y<g.length;++Y){var ie=g[Y];if(!ie.da&&ie.listener==b&&ie.capture==!!E&&ie.ha==U)return Y}return-1}var Ba="closure_lm_"+(1e6*Math.random()|0),vu={};function If(g,b,E,U,Y){if(Array.isArray(b)){for(var ie=0;ie<b.length;ie++)If(g,b[ie],E,U,Y);return null}return E=Cf(E),g&&g[Ge]?g.K(b,E,f(U)?!!U.capture:!1,Y):yi(g,b,E,!1,U,Y)}function yi(g,b,E,U,Y,ie){if(!b)throw Error("Invalid event type");var ye=f(Y)?!!Y.capture:!!Y,We=hl(g);if(We||(g[Ba]=We=new $n(g)),E=We.add(b,E,U,ye,ie),E.proxy)return E;if(U=gy(),E.proxy=U,U.src=g,U.listener=E,g.addEventListener)Ce||(Y=ye),Y===void 0&&(Y=!1),g.addEventListener(b.toString(),U,Y);else if(g.attachEvent)g.attachEvent(Fa(b.toString()),U);else if(g.addListener&&g.removeListener)g.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return E}function gy(){function g(E){return b.call(g.src,g.listener,E)}const b=yy;return g}function xu(g,b,E,U,Y){if(Array.isArray(b))for(var ie=0;ie<b.length;ie++)xu(g,b[ie],E,U,Y);else U=f(U)?!!U.capture:!!U,E=Cf(E),g&&g[Ge]?(g=g.i,b=String(b).toString(),b in g.g&&(ie=g.g[b],E=Ua(ie,E,U,Y),-1<E&&(Sn(ie[E]),Array.prototype.splice.call(ie,E,1),ie.length==0&&(delete g.g[b],g.h--)))):g&&(g=hl(g))&&(b=g.g[b.toString()],g=-1,b&&(g=Ua(b,E,U,Y)),(E=-1<g?b[g]:null)&&dl(E))}function dl(g){if(typeof g!="number"&&g&&!g.da){var b=g.src;if(b&&b[Ge])kr(b.i,g);else{var E=g.type,U=g.proxy;b.removeEventListener?b.removeEventListener(E,U,g.capture):b.detachEvent?b.detachEvent(Fa(E),U):b.addListener&&b.removeListener&&b.removeListener(U),(E=hl(b))?(kr(E,g),E.h==0&&(E.src=null,b[Ba]=null)):Sn(g)}}}function Fa(g){return g in vu?vu[g]:vu[g]="on"+g}function yy(g,b){if(g.da)g=!0;else{b=new Le(b,this);var E=g.listener,U=g.ha||g.src;g.fa&&dl(g),g=E.call(U,b)}return g}function hl(g){return g=g[Ba],g instanceof $n?g:null}var wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cf(g){return typeof g=="function"?g:(g[wu]||(g[wu]=function(b){return g.handleEvent(b)}),g[wu])}function Dt(){ge.call(this),this.i=new $n(this),this.M=this,this.F=null}T(Dt,ge),Dt.prototype[Ge]=!0,Dt.prototype.removeEventListener=function(g,b,E,U){xu(this,g,b,E,U)};function nt(g,b){var E,U=g.F;if(U)for(E=[];U;U=U.F)E.push(U);if(g=g.M,U=b.type||b,typeof b=="string")b=new pe(b,g);else if(b instanceof pe)b.target=b.target||g;else{var Y=b;b=new pe(U,g),V(b,Y)}if(Y=!0,E)for(var ie=E.length-1;0<=ie;ie--){var ye=b.g=E[ie];Y=ni(ye,U,!0,b)&&Y}if(ye=b.g=g,Y=ni(ye,U,!0,b)&&Y,Y=ni(ye,U,!1,b)&&Y,E)for(ie=0;ie<E.length;ie++)ye=b.g=E[ie],Y=ni(ye,U,!1,b)&&Y}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var g=this.i,b;for(b in g.g){for(var E=g.g[b],U=0;U<E.length;U++)Sn(E[U]);delete g.g[b],g.h--}}this.F=null},Dt.prototype.K=function(g,b,E,U){return this.i.add(String(g),b,!1,E,U)},Dt.prototype.L=function(g,b,E,U){return this.i.add(String(g),b,!0,E,U)};function ni(g,b,E,U){if(b=g.i.g[String(b)],!b)return!0;b=b.concat();for(var Y=!0,ie=0;ie<b.length;++ie){var ye=b[ie];if(ye&&!ye.da&&ye.capture==E){var We=ye.listener,en=ye.ha||ye.src;ye.fa&&kr(g.i,ye),Y=We.call(en,U)!==!1&&Y}}return Y&&!U.defaultPrevented}function An(g,b,E){if(typeof g=="function")E&&(g=x(g,E));else if(g&&typeof g.handleEvent=="function")g=x(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(g,b||0)}function Nf(g){g.g=An(()=>{g.g=null,g.i&&(g.i=!1,Nf(g))},g.l);const b=g.h;g.h=null,g.m.apply(null,b)}class vy extends ge{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Nf(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(g){ge.call(this),this.h=g,this.g={}}T(za,ge);var qa=[];function Ha(g){H(g.g,function(b,E){this.g.hasOwnProperty(E)&&dl(b)},g),g.g={}}za.prototype.N=function(){za.aa.N.call(this),Ha(this)},za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=u.JSON.stringify,fl=u.JSON.parse,Ga=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function bu(){}bu.prototype.h=null;function _u(g){return g.h||(g.h=g.i())}function Tu(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vr(){pe.call(this,"d")}T(Vr,pe);function Eu(){pe.call(this,"c")}T(Eu,pe);var Ki={},Su=null;function As(){return Su=Su||new Dt}Ki.La="serverreachability";function ml(g){pe.call(this,Ki.La,g)}T(ml,pe);function Is(g){const b=As();nt(b,new ml(b))}Ki.STAT_EVENT="statevent";function Rf(g,b){pe.call(this,Ki.STAT_EVENT,g),this.stat=b}T(Rf,pe);function gt(g){const b=As();nt(b,new Rf(b,g))}Ki.Ma="timingevent";function Jt(g,b){pe.call(this,Ki.Ma,g),this.size=b}T(Jt,pe);function $t(g,b){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},b)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function Au(g,b,E,U,Y,ie){g.info(function(){if(g.g)if(ie)for(var ye="",We=ie.split("&"),en=0;en<We.length;en++){var Ye=We[en].split("=");if(1<Ye.length){var ln=Ye[0];Ye=Ye[1];var tn=ln.split("_");ye=2<=tn.length&&tn[1]=="type"?ye+(ln+"="+Ye+"&"):ye+(ln+"=redacted&")}}else ye=null;else ye=ie;return"XMLHTTP REQ ("+U+") [attempt "+Y+"]: "+b+`
`+E+`
`+ye})}function xy(g,b,E,U,Y,ie,ye){g.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+Y+"]: "+b+`
`+E+`
`+ie+" "+ye})}function Cs(g,b,E,U){g.info(function(){return"XMLHTTP TEXT ("+b+"): "+$a(g,E)+(U?" "+U:"")})}function Pf(g,b){g.info(function(){return"TIMEOUT: "+b})}vi.prototype.info=function(){};function $a(g,b){if(!g.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(g=0;g<E.length;g++)if(Array.isArray(E[g])){var U=E[g];if(!(2>U.length)){var Y=U[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ye=1;ye<Y.length;ye++)Y[ye]=""}}}}return Vi(E)}catch{return b}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Or={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wi;function Yi(){}T(Yi,bu),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Wi=new Yi;function Mn(g,b,E,U){this.j=g,this.i=b,this.l=E,this.R=U||1,this.U=new za(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var Iu={},pl={};function Oi(g,b,E){g.L=1,g.v=Xa(ii(b)),g.m=E,g.P=!0,Lr(g,null)}function Lr(g,b){g.F=Date.now(),Ka(g),g.A=ii(g.v);var E=g.A,U=g.R;Array.isArray(U)||(U=[String(U)]),ju(E.i,"t",U),g.C=0,E=g.j.J,g.h=new Ut,g.g=Kf(g.j,E?b:null,!g.m),0<g.O&&(g.M=new vy(x(g.Y,g,g.g),g.O)),b=g.U,E=g.g,U=g.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(qa[0]=Y.toString()),Y=qa);for(var ie=0;ie<Y.length;ie++){var ye=If(E,Y[ie],U||b.handleEvent,!1,b.h||b);if(!ye)break;b.g[ye.key]=ye}b=g.H?S(g.H):{},g.m?(g.u||(g.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,b)):(g.u="GET",g.g.ea(g.A,g.u,null,b)),Is(),Au(g.i,g.u,g.A,g.l,g.R,g.m)}Mn.prototype.ca=function(g){g=g.target;const b=this.M;b&&_i(g)==3?b.j():this.Y(g)},Mn.prototype.Y=function(g){try{if(g==this.g)e:{const tn=_i(this.g);var b=this.g.Ba();const $r=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||Uf(this.g)))){this.J||tn!=4||b==7||(b==8||0>=$r?Is(3):Is(2)),Rs(this);var E=this.g.Z();this.X=E;t:if(Df(this)){var U=Uf(this.g);g="";var Y=U.length,ie=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Qi(this);var ye="";break t}this.h.i=new u.TextDecoder}for(b=0;b<Y;b++)this.h.h=!0,g+=this.h.i.decode(U[b],{stream:!(ie&&b==Y-1)});U.length=0,this.h.g+=g,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=E==200,xy(this.i,this.u,this.A,this.l,this.R,tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var We,en=this.g;if((We=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(We)){var Ye=We;break t}}Ye=null}if(E=Ye)Cs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wa(this,E);else{this.o=!1,this.s=3,gt(12),pn(this),Qi(this);break e}}if(this.P){E=!0;let gn;for(;!this.J&&this.C<ye.length;)if(gn=jf(this,ye),gn==pl){tn==4&&(this.s=4,gt(14),E=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Iu){this.s=4,gt(15),Cs(this.i,this.l,ye,"[Invalid Chunk]"),E=!1;break}else Cs(this.i,this.l,gn,null),Wa(this,gn);if(Df(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||ye.length!=0||this.h.h||(this.s=1,gt(16),E=!1),this.o=this.o&&E,!E)Cs(this.i,this.l,ye,"[Invalid Chunked Response]"),pn(this),Qi(this);else if(0<ye.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),so(ln),ln.M=!0,gt(11))}}else Cs(this.i,this.l,ye,null),Wa(this,ye);tn==4&&pn(this),this.o&&!this.J&&(tn==4?Hf(this.j,this):(this.o=!1,Ka(this)))}else Ey(this.g),E==400&&0<ye.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),pn(this),Qi(this)}}}catch{}finally{}};function Df(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function jf(g,b){var E=g.C,U=b.indexOf(`
`,E);return U==-1?pl:(E=Number(b.substring(E,U)),isNaN(E)?Iu:(U+=1,U+E>b.length?pl:(b=b.slice(U,U+E),g.C=U+E,b)))}Mn.prototype.cancel=function(){this.J=!0,pn(this)};function Ka(g){g.S=Date.now()+g.I,kf(g,g.I)}function kf(g,b){if(g.B!=null)throw Error("WatchDog timer not null");g.B=$t(x(g.ba,g),b)}function Rs(g){g.B&&(u.clearTimeout(g.B),g.B=null)}Mn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Pf(this.i,this.A),this.L!=2&&(Is(),gt(17)),pn(this),this.s=2,Qi(this)):kf(this,this.S-g)};function Qi(g){g.j.G==0||g.J||Hf(g.j,g)}function pn(g){Rs(g);var b=g.M;b&&typeof b.ma=="function"&&b.ma(),g.M=null,Ha(g.U),g.g&&(b=g.g,g.g=null,b.abort(),b.ma())}function Wa(g,b){try{var E=g.j;if(E.G!=0&&(E.g==g||Cu(E.h,g))){if(!g.K&&Cu(E.h,g)&&E.G==3){try{var U=E.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&U.length==3){var Y=U;if(Y[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<g.F)Il(E),Sl(E);else break e;Lu(E),gt(18)}}else E.za=Y[1],0<E.za-E.T&&37500>Y[2]&&E.F&&E.v==0&&!E.C&&(E.C=$t(x(E.Za,E),6e3));if(1>=yl(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Gr(E,11)}else if((g.K||E.g==g)&&Il(E),!I(b))for(Y=E.Da.g.parse(b),b=0;b<Y.length;b++){let Ye=Y[b];if(E.T=Ye[0],Ye=Ye[1],E.G==2)if(Ye[0]=="c"){E.K=Ye[1],E.ia=Ye[2];const ln=Ye[3];ln!=null&&(E.la=ln,E.j.info("VER="+E.la));const tn=Ye[4];tn!=null&&(E.Aa=tn,E.j.info("SVER="+E.Aa));const $r=Ye[5];$r!=null&&typeof $r=="number"&&0<$r&&(U=1.5*$r,E.L=U,E.j.info("backChannelRequestTimeoutMs_="+U)),U=E;const gn=g.g;if(gn){const ir=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ir){var ie=U.h;ie.g||ir.indexOf("spdy")==-1&&ir.indexOf("quic")==-1&&ir.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(vl(ie,ie.h),ie.h=null))}if(U.D){const Bu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bu&&(U.ya=Bu,ot(U.I,U.D,Bu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-g.F,E.j.info("Handshake RTT: "+E.R+"ms")),U=E;var ye=g;if(U.qa=$f(U,U.J?U.ia:null,U.W),ye.K){Vn(U.h,ye);var We=ye,en=U.L;en&&(We.I=en),We.B&&(Rs(We),Ka(We)),U.g=ye}else zf(U);0<E.i.length&&Al(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Gr(E,7);else E.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Gr(E,7):Vu(E):Ye[0]!="noop"&&E.l&&E.l.ta(Ye),E.v=0)}}Is(4)}catch{}}var Mf=class{constructor(g,b){this.g=g,this.map=b}};function Ur(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function yl(g){return g.h?1:g.g?g.g.size:0}function Cu(g,b){return g.h?g.h==b:g.g?g.g.has(b):!1}function vl(g,b){g.g?g.g.add(b):g.h=b}function Vn(g,b){g.h&&g.h==b?g.h=null:g.g&&g.g.has(b)&&g.g.delete(b)}Ur.prototype.cancel=function(){if(this.i=Nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Nu(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let b=g.i;for(const E of g.g.values())b=b.concat(E.D);return b}return C(g.i)}function wy(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var b=[],E=g.length,U=0;U<E;U++)b.push(g[U]);return b}b=[],E=0;for(U in g)b[E++]=g[U];return b}function xl(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var b=[];g=g.length;for(var E=0;E<g;E++)b.push(E);return b}b=[],E=0;for(const U in g)b[E++]=U;return b}}}function Ru(g,b){if(g.forEach&&typeof g.forEach=="function")g.forEach(b,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,b,void 0);else for(var E=xl(g),U=wy(g),Y=U.length,ie=0;ie<Y;ie++)b.call(void 0,U[ie],E&&E[ie],g)}var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function by(g,b){if(g){g=g.split("&");for(var E=0;E<g.length;E++){var U=g[E].indexOf("="),Y=null;if(0<=U){var ie=g[E].substring(0,U);Y=g[E].substring(U+1)}else ie=g[E];b(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Kt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Kt){this.h=g.h,Qa(this,g.j),this.o=g.o,this.g=g.g,Ps(this,g.s),this.l=g.l;var b=g.i,E=new Fr;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),Br(this,E),this.m=g.m}else g&&(b=String(g).match(Ya))?(this.h=!1,Qa(this,b[1]||"",!0),this.o=xi(b[2]||""),this.g=xi(b[3]||"",!0),Ps(this,b[4]),this.l=xi(b[5]||"",!0),Br(this,b[6]||"",!0),this.m=xi(b[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}Kt.prototype.toString=function(){var g=[],b=this.j;b&&g.push(Za(b,Pu,!0),":");var E=this.g;return(E||b=="file")&&(g.push("//"),(b=this.o)&&g.push(Za(b,Pu,!0),"@"),g.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&g.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&g.push("/"),g.push(Za(E,E.charAt(0)=="/"?_y:Du,!0))),(E=this.i.toString())&&g.push("?",E),(E=this.m)&&g.push("#",Za(E,wl)),g.join("")};function ii(g){return new Kt(g)}function Qa(g,b,E){g.j=E?xi(b,!0):b,g.j&&(g.j=g.j.replace(/:$/,""))}function Ps(g,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);g.s=b}else g.s=null}function Br(g,b,E){b instanceof Fr?(g.i=b,Of(g.i,g.h)):(E||(b=Za(b,Ty)),g.i=new Fr(b,g.h))}function ot(g,b,E){g.i.set(b,E)}function Xa(g){return ot(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function xi(g,b){return g?b?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Za(g,b,E){return typeof g=="string"?(g=encodeURI(g).replace(b,Vf),E&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Vf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Pu=/[#\/\?@]/g,Du=/[#\?:]/g,_y=/[#\?]/g,Ty=/[#\?@]/g,wl=/#/g;function Fr(g,b){this.h=this.g=null,this.i=g||null,this.j=!!b}function wi(g){g.g||(g.g=new Map,g.h=0,g.i&&by(g.i,function(b,E){g.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=Fr.prototype,n.add=function(g,b){wi(this),this.i=null,g=Xi(this,g);var E=this.g.get(g);return E||this.g.set(g,E=[]),E.push(b),this.h+=1,this};function zr(g,b){wi(g),b=Xi(g,b),g.g.has(b)&&(g.i=null,g.h-=g.g.get(b).length,g.g.delete(b))}function qr(g,b){return wi(g),b=Xi(g,b),g.g.has(b)}n.forEach=function(g,b){wi(this),this.g.forEach(function(E,U){E.forEach(function(Y){g.call(b,Y,U,this)},this)},this)},n.na=function(){wi(this);const g=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let U=0;U<b.length;U++){const Y=g[U];for(let ie=0;ie<Y.length;ie++)E.push(b[U])}return E},n.V=function(g){wi(this);let b=[];if(typeof g=="string")qr(this,g)&&(b=b.concat(this.g.get(Xi(this,g))));else{g=Array.from(this.g.values());for(let E=0;E<g.length;E++)b=b.concat(g[E])}return b},n.set=function(g,b){return wi(this),this.i=null,g=Xi(this,g),qr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[b]),this.h+=1,this},n.get=function(g,b){return g?(g=this.V(g),0<g.length?String(g[0]):b):b};function ju(g,b,E){zr(g,b),0<E.length&&(g.i=null,g.g.set(Xi(g,b),C(E)),g.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var U=b[E];const ie=encodeURIComponent(String(U)),ye=this.V(U);for(U=0;U<ye.length;U++){var Y=ie;ye[U]!==""&&(Y+="="+encodeURIComponent(String(ye[U]))),g.push(Y)}}return this.i=g.join("&")};function Xi(g,b){return b=String(b),g.j&&(b=b.toLowerCase()),b}function Of(g,b){b&&!g.j&&(wi(g),g.i=null,g.g.forEach(function(E,U){var Y=U.toLowerCase();U!=Y&&(zr(this,U),ju(this,Y,E))},g)),g.j=b}function Ja(g,b){const E=new vi;if(u.Image){const U=new Image;U.onload=_(bi,E,"TestLoadImage: loaded",!0,b,U),U.onerror=_(bi,E,"TestLoadImage: error",!1,b,U),U.onabort=_(bi,E,"TestLoadImage: abort",!1,b,U),U.ontimeout=_(bi,E,"TestLoadImage: timeout",!1,b,U),u.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=g}else b(!1)}function Li(g,b){const E=new vi,U=new AbortController,Y=setTimeout(()=>{U.abort(),bi(E,"TestPingServer: timeout",!1,b)},1e4);fetch(g,{signal:U.signal}).then(ie=>{clearTimeout(Y),ie.ok?bi(E,"TestPingServer: ok",!0,b):bi(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),bi(E,"TestPingServer: error",!1,b)})}function bi(g,b,E,U,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),U(E)}catch{}}function eo(){this.g=new Ga}function Zi(g,b,E){const U=E||"";try{Ru(g,function(Y,ie){let ye=Y;f(Y)&&(ye=Vi(Y)),b.push(U+ie+"="+encodeURIComponent(ye))})}catch(Y){throw b.push(U+"type="+encodeURIComponent("_badmap")),Y}}function Ds(g){this.l=g.Ub||null,this.j=g.eb||!1}T(Ds,bu),Ds.prototype.g=function(){return new Hr(this.l,this.j)},Ds.prototype.i=function(g){return function(){return g}}({});function Hr(g,b){Dt.call(this),this.D=g,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Hr,Dt),n=Hr.prototype,n.open=function(g,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=b,this.readyState=1,er(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(b.body=g),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ku(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function ku(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var b=g.value?g.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!g.done}))&&(this.response=this.responseText+=b)}g.done?Ji(this):er(this),this.readyState==3&&ku(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Ji(this))},n.Qa=function(g){this.g&&(this.response=g,Ji(this))},n.ga=function(){this.g&&Ji(this)};function Ji(g){g.readyState=4,g.l=null,g.j=null,g.v=null,er(g)}n.setRequestHeader=function(g,b){this.u.append(g,b)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,g.push(E[0]+": "+E[1]),E=b.next();return g.join(`\r
`)};function er(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Mu(g){let b="";return H(g,function(E,U){b+=U,b+=":",b+=E,b+=`\r
`}),b}function on(g,b,E){e:{for(U in E){var U=!1;break e}U=!0}U||(E=Mu(E),typeof g=="string"?E!=null&&encodeURIComponent(String(E)):ot(g,b,E))}function tt(g){Dt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(tt,Dt);var bl=/^https?$/i,to=["POST","PUT"];n=tt.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,b,E,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);b=b?b.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wi.g(),this.v=this.o?_u(this.o):_u(Wi),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(g),!0),this.B=!1}catch(ie){Lf(this,ie);return}if(g=E||"",E=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var Y in U)E.set(Y,U[Y]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ie of U.keys())E.set(ie,U.get(ie));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(E.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=u.FormData&&g instanceof u.FormData,!(0<=Array.prototype.indexOf.call(to,b,void 0))||U||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ye]of E)this.g.setRequestHeader(ie,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{no(this),this.u=!0,this.g.send(g),this.u=!1}catch(ie){Lf(this,ie)}};function Lf(g,b){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=b,g.m=5,_l(g),tr(g)}function _l(g){g.A||(g.A=!0,nt(g,"complete"),nt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,nt(this,"complete"),nt(this,"abort"),tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tl(this):this.bb())},n.bb=function(){Tl(this)};function Tl(g){if(g.h&&typeof l<"u"&&(!g.v[1]||_i(g)!=4||g.Z()!=2)){if(g.u&&_i(g)==4)An(g.Ea,0,g);else if(nt(g,"readystatechange"),_i(g)==4){g.h=!1;try{const ye=g.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var U;if(U=ye===0){var Y=String(g.D).match(Ya)[1]||null;!Y&&u.self&&u.self.location&&(Y=u.self.location.protocol.slice(0,-1)),U=!bl.test(Y?Y.toLowerCase():"")}E=U}if(E)nt(g,"complete"),nt(g,"success");else{g.m=6;try{var ie=2<_i(g)?g.g.statusText:""}catch{ie=""}g.l=ie+" ["+g.Z()+"]",_l(g)}}finally{tr(g)}}}}function tr(g,b){if(g.g){no(g);const E=g.g,U=g.v[0]?()=>{}:null;g.g=null,g.v=null,b||nt(g,"ready");try{E.onreadystatechange=U}catch{}}}function no(g){g.I&&(u.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function _i(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var b=this.g.responseText;return g&&b.indexOf(g)==0&&(b=b.substring(g.length)),fl(b)}};function Uf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ey(g){const b={};g=(g.g&&2<=_i(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<g.length;U++){if(I(g[U]))continue;var E=L(g[U]);const Y=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ie=b[Y]||[];b[Y]=ie,ie.push(E)}j(b,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(g,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[g]||b}function El(g){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,g),this.cb=io("retryDelaySeedMs",1e4,g),this.Wa=io("forwardChannelMaxRetries",2,g),this.wa=io("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Ur(g&&g.concurrentRequestLimit),this.Da=new eo,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=El.prototype,n.la=8,n.G=1,n.connect=function(g,b,E,U){gt(0),this.W=g,this.H=b||{},E&&U!==void 0&&(this.H.OSID=E,this.H.OAID=U),this.F=this.X,this.I=$f(this,null,this.W),Al(this)};function Vu(g){if(Bf(g),g.G==3){var b=g.U++,E=ii(g.I);if(ot(E,"SID",g.K),ot(E,"RID",b),ot(E,"TYPE","terminate"),ro(g,E),b=new Mn(g,g.j,b),b.L=2,b.v=Xa(ii(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.v,E=!0),E||(b.g=Kf(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ka(b)}Gf(g)}function Sl(g){g.g&&(so(g),g.g.cancel(),g.g=null)}function Bf(g){Sl(g),g.u&&(u.clearTimeout(g.u),g.u=null),Il(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&u.clearTimeout(g.s),g.s=null)}function Al(g){if(!gl(g.h)&&!g.s){g.s=!0;var b=g.Ga;se||q(),ae||(se(),ae=!0),xe.add(b,g),g.B=0}}function Sy(g,b){return yl(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=b.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=$t(x(g.Ga,g,b),Uu(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Y=new Mn(this,this.j,g);let ie=this.o;if(this.S&&(ie?(ie=S(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var U=this.i[E];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(b+=U,4096<b){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=Ff(this,Y,b),E=ii(this.I),ot(E,"RID",g),ot(E,"CVER",22),this.D&&ot(E,"X-HTTP-Session-Id",this.D),ro(this,E),ie&&(this.O?b="headers="+encodeURIComponent(String(Mu(ie)))+"&"+b:this.m&&on(E,this.m,ie)),vl(this.h,Y),this.Ua&&ot(E,"TYPE","init"),this.P?(ot(E,"$req",b),ot(E,"SID","null"),Y.T=!0,Oi(Y,E,null)):Oi(Y,E,b),this.G=2}}else this.G==3&&(g?Ou(this,g):this.i.length==0||gl(this.h)||Ou(this))};function Ou(g,b){var E;b?E=b.l:E=g.U++;const U=ii(g.I);ot(U,"SID",g.K),ot(U,"RID",E),ot(U,"AID",g.T),ro(g,U),g.m&&g.o&&on(U,g.m,g.o),E=new Mn(g,g.j,E,g.B+1),g.m===null&&(E.H=g.o),b&&(g.i=b.D.concat(g.i)),b=Ff(g,E,1e3),E.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),vl(g.h,E),Oi(E,U,b)}function ro(g,b){g.H&&H(g.H,function(E,U){ot(b,U,E)}),g.l&&Ru({},function(E,U){ot(b,U,E)})}function Ff(g,b,E){E=Math.min(g.i.length,E);var U=g.l?x(g.l.Na,g.l,g):null;e:{var Y=g.i;let ie=-1;for(;;){const ye=["count="+E];ie==-1?0<E?(ie=Y[0].g,ye.push("ofs="+ie)):ie=0:ye.push("ofs="+ie);let We=!0;for(let en=0;en<E;en++){let Ye=Y[en].g;const ln=Y[en].map;if(Ye-=ie,0>Ye)ie=Math.max(0,Y[en].g-100),We=!1;else try{Zi(ln,ye,"req"+Ye+"_")}catch{U&&U(ln)}}if(We){U=ye.join("&");break e}}}return g=g.i.splice(0,E),b.D=g,U}function zf(g){if(!g.g&&!g.u){g.Y=1;var b=g.Fa;se||q(),ae||(se(),ae=!0),xe.add(b,g),g.v=0}}function Lu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=$t(x(g.Fa,g),Uu(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,qf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=$t(x(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Sl(this),qf(this))};function so(g){g.A!=null&&(u.clearTimeout(g.A),g.A=null)}function qf(g){g.g=new Mn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var b=ii(g.qa);ot(b,"RID","rpc"),ot(b,"SID",g.K),ot(b,"AID",g.T),ot(b,"CI",g.F?"0":"1"),!g.F&&g.ja&&ot(b,"TO",g.ja),ot(b,"TYPE","xmlhttp"),ro(g,b),g.m&&g.o&&on(b,g.m,g.o),g.L&&(g.g.I=g.L);var E=g.g;g=g.ia,E.L=1,E.v=Xa(ii(b)),E.m=null,E.P=!0,Lr(E,g)}n.Za=function(){this.C!=null&&(this.C=null,Sl(this),Lu(this),gt(19))};function Il(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Hf(g,b){var E=null;if(g.g==b){Il(g),so(g),g.g=null;var U=2}else if(Cu(g.h,b))E=b.D,Vn(g.h,b),U=1;else return;if(g.G!=0){if(b.o)if(U==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var Y=g.B;U=As(),nt(U,new Jt(U,E)),Al(g)}else zf(g);else if(Y=b.s,Y==3||Y==0&&0<b.X||!(U==1&&Sy(g,b)||U==2&&Lu(g)))switch(E&&0<E.length&&(b=g.h,b.i=b.i.concat(E)),Y){case 1:Gr(g,5);break;case 4:Gr(g,10);break;case 3:Gr(g,6);break;default:Gr(g,2)}}}function Uu(g,b){let E=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(E*=2),E*b}function Gr(g,b){if(g.j.info("Error code "+b),b==2){var E=x(g.fb,g),U=g.Xa;const Y=!U;U=new Kt(U||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Qa(U,"https"),Xa(U),Y?Ja(U.toString(),E):Li(U.toString(),E)}else gt(2);g.G=0,g.l&&g.l.sa(b),Gf(g),Bf(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Gf(g){if(g.G=0,g.ka=[],g.l){const b=Nu(g.h);(b.length!=0||g.i.length!=0)&&(D(g.ka,b),D(g.ka,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.ra()}}function $f(g,b,E){var U=E instanceof Kt?ii(E):new Kt(E);if(U.g!="")b&&(U.g=b+"."+U.g),Ps(U,U.s);else{var Y=u.location;U=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new Kt(null);U&&Qa(ie,U),b&&(ie.g=b),Y&&Ps(ie,Y),E&&(ie.l=E),U=ie}return E=g.D,b=g.ya,E&&b&&ot(U,E,b),ot(U,"VER",g.la),ro(g,U),U}function Kf(g,b,E){if(b&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=g.Ca&&!g.pa?new tt(new Ds({eb:E})):new tt(g.pa),b.Ha(g.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wf(){}n=Wf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cl(){}Cl.prototype.g=function(g,b){return new On(g,b)};function On(g,b){Dt.call(this),this.g=new El(b),this.l=g,this.h=b&&b.messageUrlParams||null,g=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(g?g["X-WebChannel-Content-Type"]=b.messageContentType:g={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(g?g["X-WebChannel-Client-Profile"]=b.va:g={"X-WebChannel-Client-Profile":b.va}),this.g.S=g,(g=b&&b.Sb)&&!I(g)&&(this.g.m=g),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!I(b)&&(this.g.D=b,g=this.h,g!==null&&b in g&&(g=this.h,b in g&&delete g[b])),this.j=new nr(this)}T(On,Dt),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Vu(this.g)},On.prototype.o=function(g){var b=this.g;if(typeof g=="string"){var E={};E.__data__=g,g=E}else this.u&&(E={},E.__data__=Vi(g),g=E);b.i.push(new Mf(b.Ya++,g)),b.G==3&&Al(b)},On.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,On.aa.N.call(this)};function Yf(g){Vr.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var b=g.__sm__;if(b){e:{for(const E in b){g=E;break e}g=void 0}(this.i=g)&&(g=this.i,b=b!==null&&g in b?b[g]:void 0),this.data=b}else this.data=g}T(Yf,Vr);function Qf(){Eu.call(this),this.status=1}T(Qf,Eu);function nr(g){this.g=g}T(nr,Wf),nr.prototype.ua=function(){nt(this.g,"a")},nr.prototype.ta=function(g){nt(this.g,new Yf(g))},nr.prototype.sa=function(g){nt(this.g,new Qf)},nr.prototype.ra=function(){nt(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,nN=function(){return new Cl},tN=function(){return As()},eN=Ki,Tx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,vp=Ns,Or.COMPLETE="complete",JC=Or,Tu.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Hd=Tu,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,ZC=tt}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});const uS="@firebase/firestore",dS="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Eg("@firebase/firestore");function uc(){return wa.logLevel}function FL(n){wa.setLogLevel(n)}function he(n,...e){if(wa.logLevel<=He.DEBUG){const t=e.map(sb);wa.debug(`Firestore (${ou}): ${n}`,...t)}}function qt(n,...e){if(wa.logLevel<=He.ERROR){const t=e.map(sb);wa.error(`Firestore (${ou}): ${n}`,...t)}}function Nr(n,...e){if(wa.logLevel<=He.WARN){const t=e.map(sb);wa.warn(`Firestore (${ou}): ${n}`,...t)}}function sb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,iN(n,i,t)}function iN(n,e,t){let i=`FIRESTORE (${ou}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw qt(i),new Error(i)}function Se(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||iN(e,r,i)}function zL(n,e){n||Te(57014,e)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class HL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GL{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let a=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tn,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tn)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Se(typeof i.accessToken=="string",31837,{l:i}),new rN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class $L{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $L(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=YL(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function De(n,e){return n<e?-1:n>e?1:0}function Ex(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return De(i,r);{const a=ab(),l=QL(a.encode(fS(n,t)),a.encode(fS(e,t)));return l!==0?l:De(i,r)}}t+=i>65535?2:1}return De(n.length,e.length)}function fS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function QL(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function jc(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function aN(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=-62135596800,pS=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*pS);return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mS)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pS}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-mS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new _t(0,0))}static max(){return new Ae(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__name__";class cr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=cr.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return De(e.length,t.length)}static compareSegments(e,t){const i=cr.isNumericId(e),r=cr.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?cr.extractNumericId(e).compare(cr.extractNumericId(t)):Ex(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fa.fromString(e.substring(4,e.length-2))}}class $e extends cr{construct(e,t,i){return new $e(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new $e(t)}static emptyPath(){return new $e([])}}const XL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends cr{construct(e,t,i){return new wt(e,t,i)}static isValidIdentifier(e){return XL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gS}static keyField(){return new wt([gS])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(a(),r++)}if(a(),l)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we($e.fromString(e))}static fromName(e){return new we($e.fromString(e).popFirst(5))}static empty(){return new we($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;class Hp{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Sx(n){return n.fields.find(e=>e.kind===2)}function So(n){return n.fields.filter(e=>e.kind!==2)}Hp.UNKNOWN_ID=-1;class xp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Eh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Eh(0,gi.min())}}function oN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ae.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new gi(r,we.empty(),e)}function lN(n){return new gi(n.readTime,n.key,kc)}class gi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new gi(Ae.min(),we.empty(),kc)}static max(){return new gi(Ae.max(),we.empty(),kc)}}function ob(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==cN)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,i)=>{t(e)})}static reject(e){return new Q((t,i)=>{i(e)})}static waitFor(e){return new Q((t,i)=>{let r=0,a=0,l=!1;e.forEach(u=>{++r,u.next(()=>{++a,l&&a===r&&t()},d=>i(d))}),l=!0,a===r&&t()})}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next(r=>r?Q.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,a)=>{i.push(t.call(this,r,a))}),this.waitFor(i)}static mapArray(e,t){return new Q((i,r)=>{const a=e.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;t(e[f]).next(p=>{l[f]=p,++u,u===a&&i(l)},p=>r(p))}})}static doWhile(e,t){return new Q((i,r)=>{const a=()=>{e()===!0?t().next(()=>{a()},r):i()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="SimpleDb";class Vg{static open(e,t,i,r){try{return new Vg(t,e.transaction(r,i))}catch(a){throw new th(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Tn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new th(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=lb(i.target.error);this.S.reject(new th(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(he(hi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JL(t)}}class wr{static delete(e){return he(hi,"Removing database:",e),Co(Pw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!yh())return!1;if(wr.F())return!0;const e=Rt(),t=wr.M(e),i=0<t&&t<10,r=dN(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.B=i,this.L=null,wr.M(Rt())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(he(hi,"Opening database:",this.name),this.db=await new Promise((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=a=>{const l=a.target.result;t(l)},r.onblocked=()=>{i(new th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new de(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new de(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new th(e,l))},r.onupgradeneeded=a=>{he(hi,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${l.version}`);this.B.q(l,r.transaction,a.oldVersion,this.version).next(()=>{he(hi,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const i=t.target;this.L=i.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.k(e);const u=Vg.open(this.db,e,a?"readonly":"readwrite",i),d=r(u).next(f=>(u.v(),f)).catch(f=>(u.abort(f),Q.reject(f))).toPromise();return d.catch(()=>{}),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&l<3;if(he(hi,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ZL{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Co(this.K.delete())}}class th extends de{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ka(n){return n.name==="IndexedDbTransactionError"}class JL{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(he(hi,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(he(hi,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Co(i)}add(e){return he(hi,"ADD",this.store.name,e,e),Co(this.store.add(e))}get(e){return Co(this.store.get(e)).next(t=>(t===void 0&&(t=null),he(hi,"GET",this.store.name,e,t),t))}delete(e){return he(hi,"DELETE",this.store.name,e),Co(this.store.delete(e))}count(){return he(hi,"COUNT",this.store.name),Co(this.store.count())}J(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const a=r.getAll(i.range);return new Q((l,u)=>{a.onerror=d=>{u(d.target.error)},a.onsuccess=d=>{l(d.target.result)}})}{const a=this.cursor(i),l=[];return this.Y(a,(u,d)=>{l.push(d)}).next(()=>l)}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new Q((r,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}X(e,t){he(hi,"DELETE ALL",this.store.name);const i=this.options(e,t);i.ee=!1;const r=this.cursor(i);return this.Y(r,(a,l,u)=>u.delete())}te(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Y(r,t)}ne(e){const t=this.cursor({});return new Q((i,r)=>{t.onerror=a=>{const l=lb(a.target.error);r(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(u=>{u?l.continue():i()}):i()}})}Y(e,t){const i=[];return new Q((r,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void r();const d=new ZL(u),f=t(u.primaryKey,u.value,d);if(f instanceof Q){const p=f.catch(v=>(d.done(),Q.reject(v)));i.push(p)}d.isDone?r():d.j===null?u.continue():u.continue(d.j)}}).next(()=>Q.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.ee?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Co(n){return new Q((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=lb(i.target.error);t(r)}})}let yS=!1;function lb(n){const e=wr.M(Rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yS||(yS=!0,setTimeout(()=>{throw i},0)),i}}return n}const nh="IndexBackfiller";class e9{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){he(nh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();he(nh,`Documents written: ${t}`)}catch(t){ka(t)?he(nh,"Ignoring IndexedDB error during index backfill: ",t):await ja(t)}await this.ie(6e4)})}}class t9{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const i=new Set;let r=t,a=!0;return Q.doWhile(()=>a===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!i.has(l))return he(nh,`Processing collection: ${l}`),this._e(e,l,r).next(u=>{r-=u,i.add(l)});a=!1})).next(()=>t-r)}_e(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ae(r,a)).next(u=>(he(nh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>l.size)}))}ae(e,t){let i=e;return t.changes.forEach((r,a)=>{const l=lN(a);ob(l,i)>0&&(i=l)}),new gi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Xn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function cf(n){return n==null}function Sh(n){return n===0&&1/n==-1/0}function hN(n){return typeof n=="number"&&Number.isInteger(n)&&!Sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="";function jn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vS(e)),e=n9(n.get(t),e);return vS(e)}function n9(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case Gp:t+="";break;default:t+=a}}return t}function vS(n){return n+Gp+""}function gr(n){const e=n.length;if(Se(e>=2,64408,{path:n}),e===2)return Se(n.charAt(0)===Gp&&n.charAt(1)==="",56145,{path:n}),$e.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const l=n.indexOf(Gp,a);switch((l<0||l>t)&&Te(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(a,l);let d;r.length===0?d=u:(r+=u,d=r,r=""),i.push(d);break;case"":r+=n.substring(a,l),r+="\0";break;case"":r+=n.substring(a,l+1);break;default:Te(61167,{path:n})}a=l+2}return new $e(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="remoteDocuments",uf="owner",rc="owner",Ah="mutationQueues",i9="userId",qi="mutations",xS="batchId",ko="userMutationsIndex",wS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,e){return[n,jn(e)]}function fN(n,e,t){return[n,jn(e),t]}const r9={},Mc="documentMutations",$p="remoteDocumentsV14",s9=["prefixPath","collectionGroup","readTime","documentId"],bp="documentKeyIndex",a9=["prefixPath","collectionGroup","documentId"],mN="collectionGroupIndex",o9=["collectionGroup","readTime","prefixPath","documentId"],Ih="remoteDocumentGlobal",Ax="remoteDocumentGlobalKey",Vc="targets",pN="queryTargetsIndex",l9=["canonicalId","targetId"],Oc="targetDocuments",c9=["targetId","path"],cb="documentTargetsIndex",u9=["path","targetId"],Kp="targetGlobalKey",Fo="targetGlobal",Ch="collectionParents",d9=["collectionId","parent"],Lc="clientMetadata",h9="clientId",Og="bundles",f9="bundleId",Lg="namedQueries",m9="name",ub="indexConfiguration",p9="indexId",Ix="collectionGroupIndex",g9="collectionGroup",ih="indexState",y9=["indexId","uid"],gN="sequenceNumberIndex",v9=["uid","sequenceNumber"],rh="indexEntries",x9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yN="documentKeyIndex",w9=["indexId","uid","orderedDocumentKey"],Ug="documentOverlays",b9=["userId","collectionPath","documentId"],Cx="collectionPathOverlayIndex",_9=["userId","collectionPath","largestBatchId"],vN="collectionGroupOverlayIndex",T9=["userId","collectionGroup","largestBatchId"],db="globals",E9="name",xN=[Ah,qi,Mc,Ao,Vc,uf,Fo,Oc,Lc,Ih,Ch,Og,Lg],S9=[...xN,Ug],wN=[Ah,qi,Mc,$p,Vc,uf,Fo,Oc,Lc,Ih,Ch,Og,Lg,Ug],bN=wN,hb=[...bN,ub,ih,rh],A9=hb,_N=[...hb,db],I9=_N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends uN{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function an(n,e){const t=be(n);return wr.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??bn.RED,this.left=r??bn.EMPTY,this.right=a??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new bn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return bn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _S(this.data.getIterator())}getIteratorFrom(e){return new _S(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class _S{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new at(wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new EN("Invalid base64 string: "+a):a}}(e);return new Vt(t)}static fromUint8Array(e){const t=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const N9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(Se(!!n,39018),typeof n=="string"){let e=0;const t=N9.exec(n);if(Se(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="server_timestamp",AN="__type__",IN="__previous_value__",CN="__local_write_time__";function Bg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[AN])===null||t===void 0?void 0:t.stringValue)===SN}function Fg(n){const e=n.mapValue.fields[IN];return Bg(e)?Fg(e):e}function Nh(n){const e=ps(n.mapValue.fields[CN].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t,i,r,a,l,u,d,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Rx="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Rx}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Rx}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="__type__",NN="__max__",la={mapValue:{fields:{__type__:{stringValue:NN}}}},mb="__vector__",Uc="value",_p={nullValue:"NULL_VALUE"};function _a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bg(n)?4:RN(n)?9007199254740991:zg(n)?10:11:Te(28295,{value:n})}function Rr(n,e){if(n===e)return!0;const t=_a(n);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nh(n).isEqual(Nh(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=ps(r.timestampValue),u=ps(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,a){return gs(r.bytesValue).isEqual(gs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return vt(r.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return vt(r.integerValue)===vt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=vt(r.doubleValue),u=vt(a.doubleValue);return l===u?Sh(l)===Sh(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return jc(n.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return function(r,a){const l=r.mapValue.fields||{},u=a.mapValue.fields||{};if(bS(l)!==bS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Rr(l[d],u[d])))return!1;return!0}(n,e);default:return Te(52216,{left:n})}}function Rh(n,e){return(n.values||[]).find(t=>Rr(t,e))!==void 0}function Ta(n,e){if(n===e)return 0;const t=_a(n),i=_a(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(a,l){const u=vt(a.integerValue||a.doubleValue),d=vt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return TS(n.timestampValue,e.timestampValue);case 4:return TS(Nh(n),Nh(e));case 5:return Ex(n.stringValue,e.stringValue);case 6:return function(a,l){const u=gs(a),d=gs(l);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const u=a.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=De(u[f],d[f]);if(p!==0)return p}return De(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const u=De(vt(a.latitude),vt(l.latitude));return u!==0?u:De(vt(a.longitude),vt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ES(n.arrayValue,e.arrayValue);case 10:return function(a,l){var u,d,f,p;const v=a.fields||{},x=l.fields||{},_=(u=v[Uc])===null||u===void 0?void 0:u.arrayValue,T=(d=x[Uc])===null||d===void 0?void 0:d.arrayValue,C=De(((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:ES(_,T)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===la.mapValue&&l===la.mapValue)return 0;if(a===la.mapValue)return 1;if(l===la.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const x=Ex(d[v],p[v]);if(x!==0)return x;const _=Ta(u[d[v]],f[p[v]]);if(_!==0)return _}return De(d.length,p.length)}(n.mapValue,e.mapValue);default:throw Te(23264,{Pe:t})}}function TS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=ps(n),i=ps(e),r=De(t.seconds,i.seconds);return r!==0?r:De(t.nanos,i.nanos)}function ES(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Ta(t[r],i[r]);if(a)return a}return De(t.length,i.length)}function Bc(n){return Px(n)}function Px(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ps(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return we.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=Px(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${Px(t.fields[l])}`;return r+"}"}(n.mapValue):Te(61005,{value:n})}function Tp(n){switch(_a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fg(n);return e?16+Tp(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,a)=>r+Tp(a),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Ma(i.fields,(a,l)=>{r+=a.length+Tp(l)}),r}(n.mapValue);default:throw Te(13486,{value:n})}}function Ko(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dx(n){return!!n&&"integerValue"in n}function Ph(n){return!!n&&"arrayValue"in n}function SS(n){return!!n&&"nullValue"in n}function AS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ep(n){return!!n&&"mapValue"in n}function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[fb])===null||t===void 0?void 0:t.stringValue)===mb}function sh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ma(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=sh(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NN}const PN={mapValue:{fields:{[fb]:{stringValue:mb},[Uc]:{arrayValue:{}}}}};function P9(n){return"nullValue"in n?_p:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ko(ba.empty(),we.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zg(n)?PN:{mapValue:{}}:Te(35942,{value:n})}function D9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ko(ba.empty(),we.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?PN:"mapValue"in n?zg(n)?{mapValue:{}}:la:Te(61959,{value:n})}function IS(n,e){const t=Ta(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function CS(n,e){const t=Ta(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ep(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=wt.emptyPath(),i={},r=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,i,r),i={},r=[],t=u.popLast()}l?i[u.lastSegment()]=sh(l):r.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Ep(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ep(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ma(t,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new _n(sh(this.value))}}function DN(n){const e=[];return Ma(n.fields,(t,i)=>{const r=new wt([t]);if(Ep(i)){const a=DN(i.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t,i,r,a,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new pt(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,t,i,r){return new pt(e,1,t,Ae.min(),i,r,0)}static newNoDocument(e,t){return new pt(e,2,t,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.position=e,this.inclusive=t}}function NS(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],l=n.position[r];if(a.field.isKeyField()?i=we.comparator(we.fromName(l.referenceValue),t.key):i=Ta(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function RS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t="asc"){this.field=e,this.dir=t}}function j9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{}class Ke extends jN{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new k9(e,t,i):t==="array-contains"?new O9(e,i):t==="in"?new UN(e,i):t==="not-in"?new L9(e,i):t==="array-contains-any"?new U9(e,i):new Ke(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new M9(e,i):new V9(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ta(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends jN{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new st(e,t)}matches(e){return Fc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Fc(n){return n.op==="and"}function jx(n){return n.op==="or"}function pb(n){return kN(n)&&Fc(n)}function kN(n){for(const e of n.filters)if(e instanceof st)return!1;return!0}function kx(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+Bc(n.value);if(pb(n))return n.filters.map(e=>kx(e)).join(",");{const e=n.filters.map(t=>kx(t)).join(",");return`${n.op}(${e})`}}function MN(n,e){return n instanceof Ke?function(i,r){return r instanceof Ke&&i.op===r.op&&i.field.isEqual(r.field)&&Rr(i.value,r.value)}(n,e):n instanceof st?function(i,r){return r instanceof st&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,l,u)=>a&&MN(l,r.filters[u]),!0):!1}(n,e):void Te(19439)}function VN(n,e){const t=n.filters.concat(e);return st.create(t,n.op)}function ON(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${Bc(t.value)}`}(n):n instanceof st?function(t){return t.op.toString()+" {"+t.getFilters().map(ON).join(" ,")+"}"}(n):"Filter"}class k9 extends Ke{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class M9 extends Ke{constructor(e,t){super(e,"in",t),this.keys=LN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class V9 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=LN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class O9 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ph(t)&&Rh(t.arrayValue,this.value)}}class UN extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rh(this.value.arrayValue,t)}}class L9 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rh(this.value.arrayValue,t)}}class U9 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ph(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Rh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,t=null,i=[],r=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=u,this.Ie=null}}function Mx(n,e=null,t=[],i=[],r=null,a=null,l=null){return new B9(n,e,t,i,r,a,l)}function Wo(n){const e=be(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>kx(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Bc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Bc(i)).join(",")),e.Ie=t}return e.Ie}function df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RS(n.startAt,e.startAt)&&RS(n.endAt,e.endAt)}function Wp(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Yp(n,e){return n.filters.filter(t=>t instanceof Ke&&t.field.isEqual(e))}function PS(n,e,t){let i=_p,r=!0;for(const a of Yp(n,e)){let l=_p,u=!0;switch(a.op){case"<":case"<=":l=P9(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,u=!1;break;case"!=":case"not-in":l=_p}IS({value:i,inclusive:r},{value:l,inclusive:u})<0&&(i=l,r=u)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];IS({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function DS(n,e,t){let i=la,r=!0;for(const a of Yp(n,e)){let l=la,u=!0;switch(a.op){case">=":case">":l=D9(a.value),u=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,u=!1;break;case"!=":case"not-in":l=la}CS({value:i,inclusive:r},{value:l,inclusive:u})>0&&(i=l,r=u)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];CS({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t=null,i=[],r=[],a=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function BN(n,e,t,i,r,a,l,u){return new _s(n,e,t,i,r,a,l,u)}function lu(n){return new _s(n)}function jS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gb(n){return n.collectionGroup!==null}function Sc(n){const e=be(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new at(wt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Dh(a,i))}),t.has(wt.keyField().canonicalString())||e.Ee.push(new Dh(wt.keyField(),i))}return e.Ee}function qn(n){const e=be(n);return e.de||(e.de=F9(e,Sc(n))),e.de}function F9(n,e){if(n.limitType==="F")return Mx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new Dh(r.field,a)});const t=n.endAt?new Ea(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ea(n.startAt.position,n.startAt.inclusive):null;return Mx(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Vx(n,e){const t=n.filters.concat([e]);return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qp(n,e,t){return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return df(qn(n),qn(e))&&n.limitType===e.limitType}function FN(n){return`${Wo(qn(n))}|lt:${n.limitType}`}function dc(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>ON(r)).join(", ")}]`),cf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Bc(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Bc(r)).join(",")),`Target(${i})`}(qn(n))}; limitType=${n.limitType})`}function ff(n,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,r){for(const a of Sc(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(l,u,d){const f=NS(l,u,d);return l.inclusive?f<=0:f<0}(i.startAt,Sc(i),r)||i.endAt&&!function(l,u,d){const f=NS(l,u,d);return l.inclusive?f>=0:f>0}(i.endAt,Sc(i),r))}(n,e)}function zN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qN(n){return(e,t)=>{let i=!1;for(const r of Sc(n)){const a=z9(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function z9(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(a,l,u){const d=l.data.field(a),f=u.data.field(a);return d!==null&&f!==null?Ta(d,f):Te(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,(t,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return TN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new mt(we.comparator);function Jn(){return q9}const HN=new mt(we.comparator);function Gd(...n){let e=HN;for(const t of n)e=e.insert(t.key,t);return e}function GN(n){let e=HN;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function yr(){return ah()}function $N(){return ah()}function ah(){return new Ts(n=>n.toString(),(n,e)=>n.isEqual(e))}const H9=new mt(we.comparator),G9=new at(we.comparator);function Ve(...n){let e=G9;for(const t of n)e=e.add(t);return e}const $9=new at(De);function yb(){return $9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function KN(n){return{integerValue:""+n}}function WN(n,e){return hN(e)?KN(e):vb(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this._=void 0}}function K9(n,e,t){return n instanceof zc?function(r,a){const l={fields:{[AN]:{stringValue:SN},[CN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Bg(a)&&(a=Fg(a)),a&&(l.fields[IN]=a),{mapValue:l}}(t,e):n instanceof Yo?QN(n,e):n instanceof Qo?XN(n,e):function(r,a){const l=YN(r,a),u=kS(l)+kS(r.Re);return Dx(l)&&Dx(r.Re)?KN(u):vb(r.serializer,u)}(n,e)}function W9(n,e,t){return n instanceof Yo?QN(n,e):n instanceof Qo?XN(n,e):t}function YN(n,e){return n instanceof qc?function(i){return Dx(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class zc extends qg{}class Yo extends qg{constructor(e){super(),this.elements=e}}function QN(n,e){const t=ZN(e);for(const i of n.elements)t.some(r=>Rr(r,i))||t.push(i);return{arrayValue:{values:t}}}class Qo extends qg{constructor(e){super(),this.elements=e}}function XN(n,e){let t=ZN(e);for(const i of n.elements)t=t.filter(r=>!Rr(r,i));return{arrayValue:{values:t}}}class qc extends qg{constructor(e,t){super(),this.serializer=e,this.Re=t}}function kS(n){return vt(n.integerValue||n.doubleValue)}function ZN(n){return Ph(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.field=e,this.transform=t}}function Y9(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Yo&&r instanceof Yo||i instanceof Qo&&r instanceof Qo?jc(i.elements,r.elements,Rr):i instanceof qc&&r instanceof qc?Rr(i.Re,r.Re):i instanceof zc&&r instanceof zc}(n.transform,e.transform)}class Q9{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hg{}function JN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uu(n.key,bt.none()):new cu(n.key,n.data,bt.none());{const t=n.data,i=_n.empty();let r=new at(wt.comparator);for(let a of e.fields)if(!r.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new Es(n.key,i,new Zn(r.toArray()),bt.none())}}function X9(n,e,t){n instanceof cu?function(r,a,l){const u=r.value.clone(),d=VS(r.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Es?function(r,a,l){if(!Sp(r.precondition,a))return void a.convertToUnknownDocument(l.version);const u=VS(r.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(eR(r)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function oh(n,e,t,i){return n instanceof cu?function(a,l,u,d){if(!Sp(a.precondition,l))return u;const f=a.value.clone(),p=OS(a.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Es?function(a,l,u,d){if(!Sp(a.precondition,l))return u;const f=OS(a.fieldTransforms,d,l),p=l.data;return p.setAll(eR(a)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,l,u){return Sp(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function Z9(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=YN(i.transform,r||null);a!=null&&(t===null&&(t=_n.empty()),t.set(i.field,a))}return t||null}function MS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&jc(i,r,(a,l)=>Y9(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Hg{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Es extends Hg{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function eR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function VS(n,e,t){const i=new Map;Se(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let r=0;r<t.length;r++){const a=n[r],l=a.transform,u=e.data.field(a.field);i.set(a.field,W9(l,u,t[r]))}return i}function OS(n,e,t){const i=new Map;for(const r of n){const a=r.transform,l=t.data.field(r.field);i.set(r.field,K9(a,l,e))}return i}class uu extends Hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xb extends Hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&X9(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=oh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=oh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$N();return this.mutations.forEach(r=>{const a=e.get(r.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=t.has(r.key)?null:u;const d=JN(l,u);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(t,i)=>MS(t,i))&&jc(this.baseMutations,e.baseMutations,(t,i)=>MS(t,i))}}class bb{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Se(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return H9}();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new bb(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,Xe;function tR(n){switch(n){case ne.OK:return Te(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function nR(n){if(n===void 0)return qt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Qt.OK:return ne.OK;case Qt.CANCELLED:return ne.CANCELLED;case Qt.UNKNOWN:return ne.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ne.INTERNAL;case Qt.UNAVAILABLE:return ne.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ne.NOT_FOUND;case Qt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Qt.ABORTED:return ne.ABORTED;case Qt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Qt.DATA_LOSS:return ne.DATA_LOSS;default:return Te(39323,{code:n})}}(Xe=Qt||(Qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new fa([4294967295,4294967295],0);function LS(n){const e=ab().encode(n),t=new XC;return t.update(e),new Uint8Array(t.digest())}function US(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fa([t,i],0),new fa([r,a],0)]}class Tb{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $d(`Invalid padding: ${t}`);if(i<0)throw new $d(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $d(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new $d(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=fa.fromNumber(this.pe)}we(e,t,i){let r=e.add(t.multiply(fa.fromNumber(i)));return r.compare(e7)===1&&(r=new fa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=LS(e),[i,r]=US(t);for(let a=0;a<this.hashCount;a++){const l=this.we(i,r,a);if(!this.Se(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Tb(a,r,t);return i.forEach(u=>l.insert(u)),l}insert(e){if(this.pe===0)return;const t=LS(e),[i,r]=US(t);for(let a=0;a<this.hashCount;a++){const l=this.we(i,r,a);this.be(l)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,gf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new pf(Ae.min(),r,new mt(De),Jn(),Ve())}}class gf{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new gf(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,i,r){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=r}}class iR{constructor(e,t){this.targetId=e,this.Ce=t}}class rR{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class BS{constructor(){this.Fe=0,this.Me=FS(),this.xe=Vt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ve(),t=Ve(),i=Ve();return this.Me.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Te(38017,{changeType:a})}}),new gf(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=FS()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Se(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class t7{constructor(e){this.ze=e,this.je=new Map,this.He=Jn(),this.Je=tp(),this.Ye=tp(),this.Ze=new mt(De)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,r)=>{this.it(r)&&t(r)})}ot(e){const t=e.targetId,i=e.Ce.count,r=this._t(t);if(r){const a=r.target;if(Wp(a))if(i===0){const l=new we(a.path);this.tt(t,l,pt.newNoDocument(l,Ae.min()))}else Se(i===1,20013,{expectedCount:i});else{const l=this.ut(t);if(l!==i){const u=this.ct(e),d=u?this.lt(u,e,l):1;if(d!==0){this.st(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let l,u;try{l=gs(i).toUint8Array()}catch(d){if(d instanceof EN)return Nr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Tb(l,r,a)}catch(d){return Nr(d instanceof $d?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.pe===0?null:u}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let r=0;return i.forEach(a=>{const l=this.ze.Pt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,a,null),r++)}),r}It(e){const t=new Map;this.je.forEach((a,l)=>{const u=this._t(l);if(u){if(a.current&&Wp(u.target)){const d=new we(u.target.path);this.Et(d).has(l)||this.dt(l,d)||this.tt(l,d,pt.newNoDocument(d,e))}a.Le&&(t.set(l,a.qe()),a.Qe())}});let i=Ve();this.Ye.forEach((a,l)=>{let u=!0;l.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(a))}),this.He.forEach((a,l)=>l.setReadTime(e));const r=new pf(e,t,this.Ze,this.He,i);return this.He=Jn(),this.Je=tp(),this.Ye=tp(),this.Ze=new mt(De),r}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new BS,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new at(De),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new at(De),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new BS),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function tp(){return new mt(we.comparator)}function FS(){return new mt(we.comparator)}const n7={asc:"ASCENDING",desc:"DESCENDING"},i7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r7={and:"AND",or:"OR"};class s7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ox(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a7(n,e){return Hc(n,e.toTimestamp())}function Ht(n){return Se(!!n,49232),Ae.fromTimestamp(function(t){const i=ps(t);return new _t(i.seconds,i.nanos)}(n))}function Eb(n,e){return Lx(n,e).canonicalString()}function Lx(n,e){const t=function(r){return new $e(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aR(n){const e=$e.fromString(n);return Se(gR(e),10190,{key:e.toString()}),e}function jh(n,e){return Eb(n.databaseId,e.path)}function br(n,e){const t=aR(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(cR(t))}function oR(n,e){return Eb(n.databaseId,e)}function lR(n){const e=aR(n);return e.length===4?$e.emptyPath():cR(e)}function Ux(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cR(n){return Se(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zS(n,e,t){return{name:jh(n,e),fields:t.value.mapValue.fields}}function uR(n,e,t){const i=br(n,e.name),r=Ht(e.updateTime),a=e.createTime?Ht(e.createTime):Ae.min(),l=new _n({mapValue:{fields:e.fields}}),u=pt.newFoundDocument(i,r,a,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function o7(n,e){return"found"in e?function(i,r){Se(!!r.found,43571),r.found.name,r.found.updateTime;const a=br(i,r.found.name),l=Ht(r.found.updateTime),u=r.found.createTime?Ht(r.found.createTime):Ae.min(),d=new _n({mapValue:{fields:r.found.fields}});return pt.newFoundDocument(a,l,u,d)}(n,e):"missing"in e?function(i,r){Se(!!r.missing,3894),Se(!!r.readTime,22933);const a=br(i,r.missing),l=Ht(r.readTime);return pt.newNoDocument(a,l)}(n,e):Te(7234,{result:e})}function l7(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(Se(p===void 0||typeof p=="string",58123),Vt.fromBase64String(p||"")):(Se(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Vt.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const p=f.code===void 0?ne.UNKNOWN:nR(f.code);return new de(p,f.message||"")}(l);t=new rR(i,r,a,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=br(n,i.document.name),a=Ht(i.document.updateTime),l=i.document.createTime?Ht(i.document.createTime):Ae.min(),u=new _n({mapValue:{fields:i.document.fields}}),d=pt.newFoundDocument(r,a,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];t=new Ap(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=br(n,i.document),a=i.readTime?Ht(i.readTime):Ae.min(),l=pt.newNoDocument(r,a),u=i.removedTargetIds||[];t=new Ap([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=br(n,i.document),a=i.removedTargetIds||[];t=new Ap([],a,r,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new J9(r,a),u=i.targetId;t=new iR(u,l)}}return t}function kh(n,e){let t;if(e instanceof cu)t={update:zS(n,e.key,e.value)};else if(e instanceof uu)t={delete:jh(n,e.key)};else if(e instanceof Es)t={update:zS(n,e.key,e.data),updateMask:m7(e.fieldMask)};else{if(!(e instanceof xb))return Te(16599,{ft:e.type});t={verify:jh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const u=l.transform;if(u instanceof zc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof qc)return{fieldPath:l.field.canonicalString(),increment:u.Re};throw Te(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:a7(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)}(n,e.precondition)),t}function Bx(n,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?bt.updateTime(Ht(a.updateTime)):a.exists!==void 0?bt.exists(a.exists):bt.none()}(e.currentDocument):bt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(l,u){let d=null;if("setToServerValue"in u)Se(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new zc;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];d=new Yo(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];d=new Qo(p)}else"increment"in u?d=new qc(l,u.increment):Te(16584,{proto:u});const f=wt.fromServerFormat(u.fieldPath);return new mf(f,d)}(n,r)):[];if(e.update){e.update.name;const r=br(n,e.update.name),a=new _n({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(d){const f=d.fieldPaths||[];return new Zn(f.map(p=>wt.fromServerFormat(p)))}(e.updateMask);return new Es(r,a,l,t,i)}return new cu(r,a,t,i)}if(e.delete){const r=br(n,e.delete);return new uu(r,t)}if(e.verify){const r=br(n,e.verify);return new xb(r,t)}return Te(1463,{proto:e})}function c7(n,e){return n&&n.length>0?(Se(e!==void 0,14353),n.map(t=>function(r,a){let l=r.updateTime?Ht(r.updateTime):Ht(a);return l.isEqual(Ae.min())&&(l=Ht(a)),new Q9(l,r.transformResults||[])}(t,e))):[]}function dR(n,e){return{documents:[oR(n,e.path)]}}function hR(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=oR(n,r);const a=function(f){if(f.length!==0)return pR(st.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(p=>function(x){return{field:hc(x.field),direction:d7(x.dir)}}(p))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Ox(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:r}}function fR(n){let e=lR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Se(i===1,65062);const p=t.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=function(v){const x=mR(v);return x instanceof st&&pb(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(x=>function(T){return new Dh(fc(T.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(x))}(t.orderBy));let u=null;t.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,cf(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(v){const x=!!v.before,_=v.values||[];return new Ea(_,x)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const x=!v.before,_=v.values||[];return new Ea(_,x)}(t.endAt)),BN(e,r,l,a,u,"F",d,f)}function u7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fc(t.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=fc(t.unaryFilter.field);return Ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fc(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=fc(t.unaryFilter.field);return Ke.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(fc(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return st.create(t.compositeFilter.filters.map(i=>mR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(t.compositeFilter.op))}(n):Te(30097,{filter:n})}function d7(n){return n7[n]}function h7(n){return i7[n]}function f7(n){return r7[n]}function hc(n){return{fieldPath:n.canonicalString()}}function fc(n){return wt.fromServerFormat(n.fieldPath)}function pR(n){return n instanceof Ke?function(t){if(t.op==="=="){if(AS(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NAN"}};if(SS(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AS(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NAN"}};if(SS(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hc(t.field),op:h7(t.op),value:t.value}}}(n):n instanceof st?function(t){const i=t.getFilters().map(r=>pR(r));return i.length===1?i[0]:{compositeFilter:{op:f7(t.op),filters:i}}}(n):Te(54877,{filter:n})}function m7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,i,r,a=Ae.min(),l=Ae.min(),u=Vt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.wt=e}}function p7(n,e){let t;if(e.document)t=uR(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=we.fromSegments(e.noDocument.path),r=Zo(e.noDocument.readTime);t=pt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const i=we.fromSegments(e.unknownDocument.path),r=Zo(e.unknownDocument.version);t=pt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const a=new _t(r[0],r[1]);return Ae.fromTimestamp(a)}(e.readTime)),t}function qS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(a,l){return{name:jh(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Hc(a,l.version.toTimestamp()),createTime:Hc(a,l.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Xo(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Xo(e.version)}}return i}function Xp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zo(n){const e=new _t(n.seconds,n.nanoseconds);return Ae.fromTimestamp(e)}function No(n,e){const t=(e.baseMutations||[]).map(a=>Bx(n.wt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const u=e.mutations[a+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map(a=>Bx(n.wt,a)),r=_t.fromMillis(e.localWriteTimeMs);return new wb(e.batchId,r,t,i)}function Kd(n){const e=Zo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zo(n.lastLimboFreeSnapshotVersion):Ae.min();let i;return i=function(a){return a.documents!==void 0}(n.query)?function(a){const l=a.documents.length;return Se(l===1,1966,{count:l}),qn(lu(lR(a.documents[0])))}(n.query):function(a){return qn(fR(a))}(n.query),new cs(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vt.fromBase64String(n.resumeToken))}function vR(n,e){const t=Xo(e.snapshotVersion),i=Xo(e.lastLimboFreeSnapshotVersion);let r;r=Wp(e.target)?dR(n.wt,e.target):hR(n.wt,e.target).gt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Sb(n){const e=fR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qp(e,e.limit,"L"):e}function M0(n,e){return new _b(e.largestBatchId,Bx(n.wt,e.overlayMutation))}function HS(n,e){const t=e.path.lastSegment();return[n,jn(e.path.popLast()),t]}function GS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Xo(i.readTime),documentKey:jn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{getBundleMetadata(e,t){return $S(e).get(t).next(i=>{if(i)return function(a){return{id:a.bundleId,createTime:Zo(a.createTime),version:a.version}}(i)})}saveBundleMetadata(e,t){return $S(e).put(function(r){return{bundleId:r.id,createTime:Xo(Ht(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return KS(e).get(t).next(i=>{if(i)return function(a){return{name:a.name,query:Sb(a.bundledQuery),readTime:Zo(a.readTime)}}(i)})}saveNamedQuery(e,t){return KS(e).put(function(r){return{name:r.name,readTime:Xo(Ht(r.readTime)),bundledQuery:r.bundledQuery}}(t))}}function $S(n){return an(n,Og)}function KS(n){return an(n,Lg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const i=t.uid||"";return new Gg(e,i)}getOverlay(e,t){return kd(e).get(HS(this.userId,t)).next(i=>i?M0(this.serializer,i):null)}getOverlays(e,t){const i=yr();return Q.forEach(t,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((a,l)=>{const u=new _b(t,l);r.push(this.bt(e,u))}),Q.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(jn(l.getCollectionPath())));const a=[];return r.forEach(l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(kd(e).X(Cx,u))}),Q.waitFor(a)}getOverlaysForCollection(e,t,i){const r=yr(),a=jn(t),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return kd(e).J(Cx,l).next(u=>{for(const d of u){const f=M0(this.serializer,d);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const a=yr();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kd(e).te({index:vN,range:u},(d,f,p)=>{const v=M0(this.serializer,f);a.size()<r||v.largestBatchId===l?(a.set(v.getKey(),v),l=v.largestBatchId):p.done()}).next(()=>a)}bt(e,t){return kd(e).put(function(r,a,l){const[u,d,f]=HS(a,l.mutation.key);return{userId:a,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:kh(r.wt,l.mutation)}}(this.serializer,this.userId,t))}}function kd(n){return an(n,Ug)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{Dt(e){return an(e,db)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const i=t==null?void 0:t.value;return i?Vt.fromUint8Array(i):Vt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(vt(e.integerValue));else if("doubleValue"in e){const i=vt(e.doubleValue);isNaN(i)?this.Mt(t,13):(this.Mt(t,15),Sh(i)?t.xt(0):t.xt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Mt(t,20),typeof i=="string"&&(i=ps(i)),t.Ot(`${i.seconds||""}`),t.xt(i.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(gs(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Mt(t,45),t.xt(i.latitude||0),t.xt(i.longitude||0)}else"mapValue"in e?RN(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):zg(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Te(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const i=e.fields||{};this.Mt(t,55);for(const r of Object.keys(i))this.Nt(r,t),this.Ct(i[r],t)}qt(e,t){var i,r;const a=e.fields||{};this.Mt(t,53);const l=Uc,u=((r=(i=a[l].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Mt(t,15),t.xt(vt(u)),this.Nt(l,t),this.Ct(a[l],t)}$t(e,t){const i=e.values||[];this.Mt(t,50);for(const r of i)this.Ct(r,t)}kt(e,t){this.Mt(t,37),we.fromName(e).path.forEach(i=>{this.Mt(t,60),this.Kt(i,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Ro.Wt=new Ro;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=255;function v7(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function WS(n){const e=64-function(i){let r=0;for(let a=0;a<8;++a){const l=v7(255&i[a]);if(r+=l,l!==8)break}return r}(n);return Math.ceil(e/8)}class x7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.zt(i.value),i=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Yt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.zt(i);else if(i<2048)this.zt(960|i>>>6),this.zt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i);else{const r=t.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=t.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const t=this.tn(e),i=WS(t);this.nn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}rn(e){const t=this.tn(e),i=WS(t);this.nn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}sn(){this._n(ac),this._n(255)}an(){this.un(ac),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===ac?(this._n(ac),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===ac?(this.un(ac),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class w7{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class b7{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Md{constructor(){this.ln=new x7,this.hn=new w7(this.ln),this.Pn=new b7(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t,i,r){this.In=e,this.En=t,this.dn=i,this.An=r}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.An,0),t!==e?i.set([0],this.An.length):++i[i.length-1],new Po(this.In,this.En,this.dn,i)}Vn(e,t,i){return{indexId:this.In,uid:e,arrayValue:Ip(this.dn),directionalValue:Ip(this.An),orderedDocumentKey:Ip(t),documentKey:i.path.toArray()}}mn(e,t,i){const r=this.Vn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function ta(n,e){let t=n.In-e.In;return t!==0?t:(t=YS(n.dn,e.dn),t!==0?t:(t=YS(n.An,e.An),t!==0?t:we.comparator(n.En,e.En)))}function YS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Ip(n){return L4()?function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i}(n):n}function QS(n){return typeof n!="string"?n:function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(n)}class XS{constructor(e){this.fn=new at((t,i)=>wt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const i=t;i.isInequality()?this.fn=this.fn.add(i):this.pn.push(i)}}get yn(){return this.fn.size>1}wn(e){if(Se(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Sx(e);if(t!==void 0&&!this.Sn(t))return!1;const i=So(e);let r=new Set,a=0,l=0;for(;a<i.length&&this.Sn(i[a]);++a)r=r.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.fn.size>0){const u=this.fn.getIterator().getNext();if(!r.has(u.field.canonicalString())){const d=i[a];if(!this.bn(u,d)||!this.Dn(this.gn[l++],d))return!1}++a}for(;a<i.length;++a){const u=i[a];if(l>=this.gn.length||!this.Dn(this.gn[l++],u))return!1}return!0}vn(){if(this.yn)return null;let e=new at(wt.comparator);const t=[];for(const i of this.pn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new xp(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new xp(i.field,0))}for(const i of this.gn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new xp(i.field,i.dir==="asc"?0:1)));return new Hp(Hp.UNKNOWN_ID,this.collectionId,t,Eh.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n){var e,t;if(Se(n instanceof Ke||n instanceof st,20012),n instanceof Ke){if(n instanceof UN){const r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Ke.create(n.field,"==",a)))||[];return st.create(r,"or")}return n}const i=n.filters.map(r=>xR(r));return st.create(i,n.op)}function _7(n){if(n.getFilters().length===0)return[];const e=qx(xR(n));return Se(wR(e),7391),Fx(e)||zx(e)?[e]:e.getFilters()}function Fx(n){return n instanceof Ke}function zx(n){return n instanceof st&&pb(n)}function wR(n){return Fx(n)||zx(n)||function(t){if(t instanceof st&&jx(t)){for(const i of t.getFilters())if(!Fx(i)&&!zx(i))return!1;return!0}return!1}(n)}function qx(n){if(Se(n instanceof Ke||n instanceof st,34018),n instanceof Ke)return n;if(n.filters.length===1)return qx(n.filters[0]);const e=n.filters.map(i=>qx(i));let t=st.create(e,n.op);return t=Zp(t),wR(t)?t:(Se(t instanceof st,64498),Se(Fc(t),40251),Se(t.filters.length>1,57927),t.filters.reduce((i,r)=>Ab(i,r)))}function Ab(n,e){let t;return Se(n instanceof Ke||n instanceof st,38388),Se(e instanceof Ke||e instanceof st,25473),t=n instanceof Ke?e instanceof Ke?function(r,a){return st.create([r,a],"and")}(n,e):ZS(n,e):e instanceof Ke?ZS(e,n):function(r,a){if(Se(r.filters.length>0&&a.filters.length>0,48005),Fc(r)&&Fc(a))return VN(r,a.getFilters());const l=jx(r)?r:a,u=jx(r)?a:r,d=l.filters.map(f=>Ab(f,u));return st.create(d,"or")}(n,e),Zp(t)}function ZS(n,e){if(Fc(e))return VN(e,n.getFilters());{const t=e.filters.map(i=>Ab(n,i));return st.create(t,"or")}}function Zp(n){if(Se(n instanceof Ke||n instanceof st,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return Zp(e[0]);if(kN(n))return n;const t=e.map(r=>Zp(r)),i=[];return t.forEach(r=>{r instanceof Ke?i.push(r):r instanceof st&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:st.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(){this.Cn=new Ib}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(gi.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class Ib{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new at($e.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new at($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="IndexedDbIndexManager",np=new Uint8Array(0);class E7{constructor(e,t){this.databaseId=t,this.Fn=new Ib,this.Mn=new Ts(i=>Wo(i),(i,r)=>df(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const a={collectionId:i,parent:jn(r)};return eA(e).put(a)}return Q.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[aN(t),""],!1,!0);return eA(e).J(r).next(a=>{for(const l of a){if(l.collectionId!==t)break;i.push(gr(l.parent))}return i})}addFieldIndex(e,t){const i=Vd(e),r=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete r.indexId;const a=i.add(r);if(t.indexState){const l=lc(e);return a.next(u=>{l.put(GS(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const i=Vd(e),r=lc(e),a=oc(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Vd(e),i=oc(e),r=lc(e);return t.X().next(()=>i.X()).next(()=>r.X())}createTargetIndexes(e,t){return Q.forEach(this.xn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const a=new XS(i).vn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const i=oc(e);let r=!0;const a=new Map;return Q.forEach(this.xn(t),l=>this.On(e,l).next(u=>{r&&(r=!!u),a.set(l,u)})).next(()=>{if(r){let l=Ve();const u=[];return Q.forEach(a,(d,f)=>{he(JS,`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(d)} to execute ${Wo(t)}`);const p=function(N,z){const F=Sx(z);if(F===void 0)return null;for(const H of Yp(N,F.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(f,d),v=function(N,z){const F=new Map;for(const H of So(z))for(const j of Yp(N,H.fieldPath))switch(j.op){case"==":case"in":F.set(H.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return F.set(H.fieldPath.canonicalString(),j.value),Array.from(F.values())}return null}(f,d),x=function(N,z){const F=[];let H=!0;for(const j of So(z)){const S=j.kind===0?PS(N,j.fieldPath,N.startAt):DS(N,j.fieldPath,N.startAt);F.push(S.value),H&&(H=S.inclusive)}return new Ea(F,H)}(f,d),_=function(N,z){const F=[];let H=!0;for(const j of So(z)){const S=j.kind===0?DS(N,j.fieldPath,N.endAt):PS(N,j.fieldPath,N.endAt);F.push(S.value),H&&(H=S.inclusive)}return new Ea(F,H)}(f,d),T=this.Nn(d,f,x),C=this.Nn(d,f,_),D=this.Bn(d,f,v),P=this.Ln(d.indexId,p,T,x.inclusive,C,_.inclusive,D);return Q.forEach(P,I=>i.Z(I,t.limit).next(N=>{N.forEach(z=>{const F=we.fromSegments(z.documentKey);l.has(F)||(l=l.add(F),u.push(F))})}))}).next(()=>u)}return Q.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=_7(st.create(e.filters,"and")).map(i=>Mx(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,i,r,a,l,u){const d=(t!=null?t.length:1)*Math.max(i.length,a.length),f=d/(t!=null?t.length:1),p=[];for(let v=0;v<d;++v){const x=t?this.kn(t[v/f]):np,_=this.qn(e,x,i[v%f],r),T=this.Qn(e,x,a[v%f],l),C=u.map(D=>this.qn(e,x,D,!0));p.push(...this.createRange(_,T,C))}return p}qn(e,t,i,r){const a=new Po(e,we.empty(),t,i);return r?a:a.Rn()}Qn(e,t,i,r){const a=new Po(e,we.empty(),t,i);return r?a.Rn():a}On(e,t){const i=new XS(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(a=>{let l=null;for(const u of a)i.wn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l})}getIndexType(e,t){let i=2;const r=this.xn(t);return Q.forEach(r,a=>this.On(e,a).next(l=>{l?i!==0&&l.fields.length<function(d){let f=new at(wt.comparator),p=!1;for(const v of d.filters)for(const x of v.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:f=f.add(x.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(p?1:0)}(a)&&(i=1):i=0})).next(()=>function(l){return l.limit!==null}(t)&&r.length>1&&i===2?1:i)}$n(e,t){const i=new Md;for(const r of So(e)){const a=t.data.field(r.fieldPath);if(a==null)return null;const l=i.Tn(r.kind);Ro.Wt.vt(a,l)}return i.cn()}kn(e){const t=new Md;return Ro.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const i=new Md;return Ro.Wt.vt(Ko(this.databaseId,t),i.Tn(function(a){const l=So(a);return l.length===0?0:l[l.length-1].kind}(e))),i.cn()}Bn(e,t,i){if(i===null)return[];let r=[];r.push(new Md);let a=0;for(const l of So(e)){const u=i[a++];for(const d of r)if(this.Kn(t,l.fieldPath)&&Ph(u))r=this.Wn(r,l,u);else{const f=d.Tn(l.kind);Ro.Wt.vt(u,f)}}return this.Gn(r)}Nn(e,t,i){return this.Bn(e,t,i.position)}Gn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].cn();return t}Wn(e,t,i){const r=[...e],a=[];for(const l of i.arrayValue.values||[])for(const u of r){const d=new Md;d.seed(u.cn()),Ro.Wt.vt(l,d.Tn(t.kind)),a.push(d)}return a}Kn(e,t){return!!e.filters.find(i=>i instanceof Ke&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=Vd(e),r=lc(e);return(t?i.J(Ix,IDBKeyRange.bound(t,t)):i.J()).next(a=>{const l=[];return Q.forEach(a,u=>r.get([u.indexId,this.uid]).next(d=>{l.push(function(p,v){const x=v?new Eh(v.sequenceNumber,new gi(Zo(v.readTime),new we(gr(v.documentKey)),v.largestBatchId)):Eh.empty(),_=p.fields.map(([T,C])=>new xp(wt.fromServerFormat(T),C));return new Hp(p.indexId,p.collectionGroup,_,x)}(u,d))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return a!==0?a:De(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Vd(e),a=lc(e);return this.zn(e).next(l=>r.J(Ix,IDBKeyRange.bound(t,t)).next(u=>Q.forEach(u,d=>a.put(GS(d.indexId,this.uid,l,i)))))}updateIndexEntries(e,t){const i=new Map;return Q.forEach(t,(r,a)=>{const l=i.get(r.collectionGroup);return(l?Q.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),Q.forEach(u,d=>this.jn(e,r,d).next(f=>{const p=this.Hn(a,d);return f.isEqual(p)?Q.resolve():this.Jn(e,a,d,f,p)}))))})}Yn(e,t,i,r){return oc(e).put(r.Vn(this.uid,this.Un(i,t.key),t.key))}Zn(e,t,i,r){return oc(e).delete(r.mn(this.uid,this.Un(i,t.key),t.key))}jn(e,t,i){const r=oc(e);let a=new at(ta);return r.te({index:yN,range:IDBKeyRange.only([i.indexId,this.uid,Ip(this.Un(i,t))])},(l,u)=>{a=a.add(new Po(i.indexId,t,QS(u.arrayValue),QS(u.directionalValue)))}).next(()=>a)}Hn(e,t){let i=new at(ta);const r=this.$n(t,e);if(r==null)return i;const a=Sx(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Ph(l))for(const u of l.arrayValue.values||[])i=i.add(new Po(t.indexId,e.key,this.kn(u),r))}else i=i.add(new Po(t.indexId,e.key,np,r));return i}Jn(e,t,i,r,a){he(JS,"Updating index entries for document '%s'",t.key);const l=[];return function(d,f,p,v,x){const _=d.getIterator(),T=f.getIterator();let C=sc(_),D=sc(T);for(;C||D;){let P=!1,I=!1;if(C&&D){const N=p(C,D);N<0?I=!0:N>0&&(P=!0)}else C!=null?I=!0:P=!0;P?(v(D),D=sc(T)):I?(x(C),C=sc(_)):(C=sc(_),D=sc(T))}}(r,a,ta,u=>{l.push(this.Yn(e,t,i,u))},u=>{l.push(this.Zn(e,t,i,u))}),Q.waitFor(l)}zn(e){let t=1;return lc(e).te({index:gN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,a)=>{a.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,u)=>ta(l,u)).filter((l,u,d)=>!u||ta(l,d[u-1])!==0);const r=[];r.push(e);for(const l of i){const u=ta(l,e),d=ta(l,t);if(u===0)r[0]=e.Rn();else if(u>0&&d<0)r.push(l),r.push(l.Rn());else if(d>0)break}r.push(t);const a=[];for(let l=0;l<r.length;l+=2){if(this.Xn(r[l],r[l+1]))return[];const u=r[l].mn(this.uid,np,we.empty()),d=r[l+1].mn(this.uid,np,we.empty());a.push(IDBKeyRange.bound(u,d))}return a}Xn(e,t){return ta(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tA)}getMinOffset(e,t){return Q.mapArray(this.xn(t),i=>this.On(e,i).next(r=>r||Te(44426))).next(tA)}}function eA(n){return an(n,Ch)}function oc(n){return an(n,rh)}function Vd(n){return an(n,ub)}function lc(n){return an(n,ih)}function tA(n){Se(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;ob(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new gi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bR=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n,e,t){const i=n.store(qi),r=n.store(Mc),a=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=i.te({range:l},(p,v,x)=>(u++,x.delete()));a.push(d.next(()=>{Se(u===1,47070,{batchId:t.batchId})}));const f=[];for(const p of t.mutations){const v=fN(e,p.key.path,t.batchId);a.push(r.delete(v)),f.push(p.key)}return Q.waitFor(a).next(()=>f)}function Jp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(bR,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class $g{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.er={}}static St(e,t,i,r){Se(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new $g(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return na(e).te({index:ko,range:i},(r,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const a=mc(e),l=na(e);return l.add({}).next(u=>{Se(typeof u=="number",49019);const d=new wb(u,t,i,r),f=function(_,T,C){const D=C.baseMutations.map(I=>kh(_.wt,I)),P=C.mutations.map(I=>kh(_.wt,I));return{userId:T,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:D,mutations:P}}(this.serializer,this.userId,d),p=[];let v=new at((x,_)=>De(x.canonicalString(),_.canonicalString()));for(const x of r){const _=fN(this.userId,x.key.path,u);v=v.add(x.key.path.popLast()),p.push(l.put(f)),p.push(a.put(_,r9))}return v.forEach(x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.er[u]=d.keys()}),Q.waitFor(p).next(()=>d)})}lookupMutationBatch(e,t){return na(e).get(t).next(i=>i?(Se(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),No(this.serializer,i)):null)}tr(e,t){return this.er[t]?Q.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.er[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return na(e).te({index:ko,range:r},(l,u,d)=>{u.userId===this.userId&&(Se(u.batchId>=i,47524,{nr:i}),a=No(this.serializer,u)),d.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=ma;return na(e).te({index:ko,range:t,reverse:!0},(r,a,l)=>{i=a.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return na(e).J(ko,t).next(i=>i.map(r=>No(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=wp(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return mc(e).te({range:r},(l,u,d)=>{const[f,p,v]=l,x=gr(p);if(f===this.userId&&t.path.isEqual(x))return na(e).get(v).next(_=>{if(!_)throw Te(61480,{rr:l,batchId:v});Se(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:v}),a.push(No(this.serializer,_))});d.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(De);const r=[];return t.forEach(a=>{const l=wp(this.userId,a.path),u=IDBKeyRange.lowerBound(l),d=mc(e).te({range:u},(f,p,v)=>{const[x,_,T]=f,C=gr(_);x===this.userId&&a.path.isEqual(C)?i=i.add(T):v.done()});r.push(d)}),Q.waitFor(r).next(()=>this.ir(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=wp(this.userId,i),l=IDBKeyRange.lowerBound(a);let u=new at(De);return mc(e).te({range:l},(d,f,p)=>{const[v,x,_]=d,T=gr(x);v===this.userId&&i.isPrefixOf(T)?T.length===r&&(u=u.add(_)):p.done()}).next(()=>this.ir(e,u))}ir(e,t){const i=[],r=[];return t.forEach(a=>{r.push(na(e).get(a).next(l=>{if(l===null)throw Te(35274,{batchId:a});Se(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push(No(this.serializer,l))}))}),Q.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return _R(e.he,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),Q.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Q.resolve();const i=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),r=[];return mc(e).te({range:i},(a,l,u)=>{if(a[0]===this.userId){const d=gr(a[1]);r.push(d)}else u.done()}).next(()=>{Se(r.length===0,56720,{_r:r.map(a=>a.canonicalString())})})})}containsKey(e,t){return TR(e,this.userId,t)}ar(e){return ER(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""})}}function TR(n,e,t){const i=wp(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return mc(n).te({range:a,ee:!0},(u,d,f)=>{const[p,v,x]=u;p===e&&v===r&&(l=!0),f.done()}).next(()=>l)}function na(n){return an(n,qi)}function mc(n){return an(n,Mc)}function ER(n){return an(n,Ah)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Jo(0)}static lr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const i=new Jo(t.highestTargetId);return t.highestTargetId=i.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>Ae.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.hr(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pr(e,r)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(i=>(i.targetCount+=1,this.Ir(t,i),this.Pr(e,i))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cc(e).delete(t.targetId)).next(()=>this.hr(e)).next(i=>(Se(i.targetCount>0,8065),i.targetCount-=1,this.Pr(e,i)))}removeTargets(e,t,i){let r=0;const a=[];return cc(e).te((l,u)=>{const d=Kd(u);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(r++,a.push(this.removeTargetData(e,d)))}).next(()=>Q.waitFor(a)).next(()=>r)}forEachTarget(e,t){return cc(e).te((i,r)=>{const a=Kd(r);t(a)})}hr(e){return iA(e).get(Kp).next(t=>(Se(t!==null,2888),t))}Pr(e,t){return iA(e).put(Kp,t)}Tr(e,t){return cc(e).put(vR(this.serializer,t))}Ir(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Wo(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return cc(e).te({range:r,index:pN},(l,u,d)=>{const f=Kd(u);df(t,f.target)&&(a=f,d.done())}).next(()=>a)}addMatchingKeys(e,t,i){const r=[],a=aa(e);return t.forEach(l=>{const u=jn(l.path);r.push(a.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,l))}),Q.waitFor(r)}removeMatchingKeys(e,t,i){const r=aa(e);return Q.forEach(t,a=>{const l=jn(a.path);return Q.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,a)])})}removeMatchingKeysForTargetId(e,t){const i=aa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=aa(e);let a=Ve();return r.te({range:i,ee:!0},(l,u,d)=>{const f=gr(l[1]),p=new we(f);a=a.add(p)}).next(()=>a)}containsKey(e,t){const i=jn(t.path),r=IDBKeyRange.bound([i],[aN(i)],!1,!0);let a=0;return aa(e).te({index:cb,ee:!0,range:r},([l,u],d,f)=>{l!==0&&(a++,f.done())}).next(()=>a>0)}Rt(e,t){return cc(e).get(t).next(i=>i?Kd(i):null)}}function cc(n){return an(n,Vc)}function iA(n){return an(n,Fo)}function aa(n){return an(n,Oc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="LruGarbageCollector",A7=1048576;function sA([n,e],[t,i]){const r=De(n,t);return r===0?De(e,i):r}class I7{constructor(e){this.Er=e,this.buffer=new at(sA),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(rA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ka(t)?he(rA,"Ignoring IndexedDB error during garbage collection: ",t):await ja(t)}await this.mr(3e5)})}}class C7{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Xn.le);const i=new I7(t);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(nA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nA):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,r,a,l,u,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(i=v,u=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),uc()<=He.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:v})))}}function AR(n,e){return new C7(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,t){this.db=e,this.garbageCollector=AR(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,(i,r)=>t(r))}addReference(e,t,i){return ip(e,i)}removeReference(e,t,i){return ip(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return ip(e,t)}Dr(e,t){return function(r,a){let l=!1;return ER(r).ne(u=>TR(r,u,a).next(d=>(d&&(l=!0),Q.resolve(!d)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.br(e,(l,u)=>{if(u<=t){const d=this.Dr(e,l).next(f=>{if(!f)return a++,i.getEntry(e,l).next(()=>(i.removeEntry(l,Ae.min()),aa(e).delete(function(v){return[0,jn(v.path)]}(l))))});r.push(d)}}).next(()=>Q.waitFor(r)).next(()=>i.apply(e)).next(()=>a)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return ip(e,t)}br(e,t){const i=aa(e);let r,a=Xn.le;return i.te({index:cb},([l,u],{path:d,sequenceNumber:f})=>{l===0?(a!==Xn.le&&t(new we(gr(r)),a),a=f,r=d):a=Xn.le}).next(()=>{a!==Xn.le&&t(new we(gr(r)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ip(n,e){return aa(n).put(function(i,r){return{targetId:0,path:jn(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.changes=new Ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return _o(e).put(i)}removeEntry(e,t,i){return _o(e).delete(function(a,l){const u=a.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Xp(l),u[u.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.vr(e,i)))}getEntry(e,t){let i=pt.newInvalidDocument(t);return _o(e).te({index:bp,range:IDBKeyRange.only(Od(t))},(r,a)=>{i=this.Cr(t,a)}).next(()=>i)}Fr(e,t){let i={size:0,document:pt.newInvalidDocument(t)};return _o(e).te({index:bp,range:IDBKeyRange.only(Od(t))},(r,a)=>{i={document:this.Cr(t,a),size:Jp(a)}}).next(()=>i)}getEntries(e,t){let i=Jn();return this.Mr(e,t,(r,a)=>{const l=this.Cr(r,a);i=i.insert(r,l)}).next(()=>i)}Or(e,t){let i=Jn(),r=new mt(we.comparator);return this.Mr(e,t,(a,l)=>{const u=this.Cr(a,l);i=i.insert(a,u),r=r.insert(a,Jp(l))}).next(()=>({documents:i,Nr:r}))}Mr(e,t,i){if(t.isEmpty())return Q.resolve();let r=new at(lA);t.forEach(d=>r=r.add(d));const a=IDBKeyRange.bound(Od(r.first()),Od(r.last())),l=r.getIterator();let u=l.getNext();return _o(e).te({index:bp,range:a},(d,f,p)=>{const v=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&lA(u,v)<0;)i(u,null),u=l.getNext();u&&u.isEqual(v)&&(i(u,f),u=l.hasNext()?l.getNext():null),u?p.H(Od(u)):p.done()}).next(()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,a){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Xp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _o(e).J(IDBKeyRange.bound(u,d,!0)).next(f=>{a==null||a.incrementDocumentReadCount(f.length);let p=Jn();for(const v of f){const x=this.Cr(we.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);x.isFoundDocument()&&(ff(t,x)||r.has(x.key))&&(p=p.insert(x.key,x))}return p})}getAllFromCollectionGroup(e,t,i,r){let a=Jn();const l=oA(t,i),u=oA(t,gi.max());return _o(e).te({index:mN,range:IDBKeyRange.bound(l,u,!0)},(d,f,p)=>{const v=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(v.key,v),a.size===r&&p.done()}).next(()=>a)}newChangeBuffer(e){return new P7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aA(e).get(Ax).next(t=>(Se(!!t,20021),t))}vr(e,t){return aA(e).put(Ax,t)}Cr(e,t){if(t){const i=p7(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ae.min())))return i}return pt.newInvalidDocument(e)}}function CR(n){return new R7(n)}class P7 extends IR{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Ts(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new at((a,l)=>De(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const u=this.Lr.get(a);if(t.push(this.Br.removeEntry(e,a,u.readTime)),l.isValidDocument()){const d=qS(this.Br.serializer,l);r=r.add(a.path.popLast());const f=Jp(d);i+=f-u.size,t.push(this.Br.addEntry(e,a,d))}else if(i-=u.size,this.trackRemovals){const d=qS(this.Br.serializer,l.convertToNoDocument(Ae.min()));t.push(this.Br.addEntry(e,a,d))}}),r.forEach(a=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Br.updateMetadata(e,i)),Q.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(i=>(this.Lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:i,Nr:r})=>(r.forEach((a,l)=>{this.Lr.set(a,{size:l,readTime:i.get(a).readTime})}),i))}}function aA(n){return an(n,Ih)}function _o(n){return an(n,$p)}function Od(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oA(n,e){const t=e.documentKey.path.toArray();return[n,Xp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lA(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=De(t[a],i[a]),r)return r;return r=De(t.length,i.length),r||(r=De(t[t.length-2],i[i.length-2]),r||De(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&oh(i.mutation,r,Zn.empty(),_t.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){const r=yr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(a=>{let l=Gd();return a.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=yr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){const r=[];return i.forEach(a=>{t.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,i,r){let a=Jn();const l=ah(),u=function(){return ah()}();return t.forEach((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof Es)?a=a.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),oh(p.mutation,f,p.mutation.getFieldMask(),_t.now())):l.set(f.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((f,p)=>l.set(f,p)),t.forEach((f,p)=>{var v;return u.set(f,new D7(p,(v=l.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const i=ah();let r=new mt((l,u)=>l-u),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let p=i.get(d)||Zn.empty();p=u.applyToLocalView(f,p),i.set(d,p);const v=(r.get(u.batchId)||Ve()).add(d);r=r.insert(u.batchId,v)})}).next(()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,v=$N();p.forEach(x=>{if(!a.has(x)){const _=JN(t.get(x),i.get(x));_!==null&&v.set(x,_),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(l){return we.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):Q.resolve(yr());let u=kc,d=a;return l.next(f=>Q.forEach(f,(p,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(p)?Q.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{d=d.insert(p,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,d,f,Ve())).next(p=>({batchId:u,changes:GN(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let r=Gd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let l=Gd();return this.indexManager.getCollectionParents(e,a).next(u=>Q.forEach(u,d=>{const f=function(v,x){return new _s(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r))).next(l=>{a.forEach((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,pt.newInvalidDocument(p)))});let u=Gd();return l.forEach((d,f)=>{const p=a.get(d);p!==void 0&&oh(p.mutation,f,Zn.empty(),_t.now()),ff(t,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Q.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Ht(r.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(r){return{name:r.name,query:Sb(r.bundledQuery),readTime:Ht(r.readTime)}}(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.overlays=new mt(we.comparator),this.Qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yr();return Q.forEach(t,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,a)=>{this.bt(e,t,a)}),Q.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const r=yr(),a=t.length+1,l=new we(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new mt((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=yr(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=yr(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=r)););return Q.resolve(u)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new _b(t,i));let a=this.Qr.get(t);a===void 0&&(a=Ve(),this.Qr.set(t,a)),this.Qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.$r=new at(hn.Ur),this.Kr=new at(hn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new hn(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new hn(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new we(new $e([])),i=new hn(t,e),r=new hn(t,e+1),a=[];return this.Kr.forEachInRange([i,r],l=>{this.zr(l),a.push(l.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new we(new $e([])),i=new hn(t,e),r=new hn(t,e+1);let a=Ve();return this.Kr.forEachInRange([i,r],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new hn(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return we.comparator(e.key,t.key)||De(e.Zr,t.Zr)}static Wr(e,t){return De(e.Zr,t.Zr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new at(hn.Ur)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new wb(a,t,i,r);this.mutationQueue.push(l);for(const u of r)this.Xr=this.Xr.add(new hn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,t){return Q.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ti(i),a=r<0?0:r;return Q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?ma:this.nr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new hn(t,0),r=new hn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,r],l=>{const u=this.ei(l.Zr);a.push(u)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(De);return t.forEach(r=>{const a=new hn(r,0),l=new hn(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,l],u=>{i=i.add(u.Zr)})}),Q.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const l=new hn(new we(a),0);let u=new at(De);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.Zr)),!0)},l),Q.resolve(this.ni(u))}ni(e){const t=[];return e.forEach(i=>{const r=this.ei(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Se(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return Q.forEach(t.mutations,r=>{const a=new hn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new hn(t,0),r=this.Xr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.ii=e,this.docs=function(){return new mt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,l=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let i=Jn();return t.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():pt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Jn();const l=t.path,u=new we(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||ob(lN(p),i)<=0||(r.has(p.key)||ff(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Te(9500)}si(e,t){return Q.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new L7(this)}getSize(e){return Q.resolve(this.size)}}class L7 extends IR{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),Q.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.persistence=e,this.oi=new Ts(t=>Wo(t),df),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this._i=0,this.ai=new Cb,this.targetCount=0,this.ui=Jo.cr()}forEachTarget(e,t){return this.oi.forEach((i,r)=>t(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),Q.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Tr(t),Q.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.oi.forEach((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.oi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(a).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(l=>{a.push(r.markPotentiallyOrphaned(e,l))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t){this.ci={},this.overlays={},this.li=new Xn(0),this.hi=!1,this.hi=!0,this.Pi=new M7,this.referenceDelegate=e(this),this.Ti=new U7(this),this.indexManager=new T7,this.remoteDocumentCache=function(r){return new O7(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new yR(t),this.Ei=new j7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new V7(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const r=new B7(this.li.next());return this.referenceDelegate.di(),i(r).next(a=>this.referenceDelegate.Ai(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Ri(e,t){return Q.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class B7 extends uN{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.Vi=new Cb,this.mi=null}static fi(e){return new Kg(e)}get gi(){if(this.mi)return this.mi;throw Te(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.gi,i=>{const r=we.fromPath(i);return this.pi(e,r).next(a=>{a||t.removeEntry(r,Ae.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Q.or([()=>Q.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class eg{constructor(e,t){this.persistence=e,this.yi=new Ts(i=>jn(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=AR(this,t)}static fi(e,t){return new eg(e,t)}di(){}Ai(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return Q.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(a=>a?Q.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.si(e,l=>this.Dr(e,l,t).next(u=>{u||(i++,a.removeEntry(l,Ae.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Q.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tp(e.data.value)),t}Dr(e,t,i){return Q.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.yi.get(t);return Q.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.serializer=e}q(e,t,i,r){const a=new Vg("createOrUpgrade",t);i<1&&r>=1&&(function(d){d.createObjectStore(uf)}(e),function(d){d.createObjectStore(Ah,{keyPath:i9}),d.createObjectStore(qi,{keyPath:xS,autoIncrement:!0}).createIndex(ko,wS,{unique:!0}),d.createObjectStore(Mc)}(e),cA(e),function(d){d.createObjectStore(Ao)}(e));let l=Q.resolve();return i<3&&r>=3&&(i!==0&&(function(d){d.deleteObjectStore(Oc),d.deleteObjectStore(Vc),d.deleteObjectStore(Fo)}(e),cA(e)),l=l.next(()=>function(d){const f=d.store(Fo),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return f.put(Kp,p)}(a))),i<4&&r>=4&&(i!==0&&(l=l.next(()=>function(d,f){return f.store(qi).J().next(v=>{d.deleteObjectStore(qi),d.createObjectStore(qi,{keyPath:xS,autoIncrement:!0}).createIndex(ko,wS,{unique:!0});const x=f.store(qi),_=v.map(T=>x.put(T));return Q.waitFor(_)})}(e,a))),l=l.next(()=>{(function(d){d.createObjectStore(Lc,{keyPath:h9})})(e)})),i<5&&r>=5&&(l=l.next(()=>this.wi(a))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore(Ih)}(e),this.Si(a)))),i<7&&r>=7&&(l=l.next(()=>this.bi(a))),i<8&&r>=8&&(l=l.next(()=>this.Di(e,a))),i<9&&r>=9&&(l=l.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(l=l.next(()=>this.Ci(a))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore(Og,{keyPath:f9})})(e),function(d){d.createObjectStore(Lg,{keyPath:m9})}(e)})),i<12&&r>=12&&(l=l.next(()=>{(function(d){const f=d.createObjectStore(Ug,{keyPath:b9});f.createIndex(Cx,_9,{unique:!1}),f.createIndex(vN,T9,{unique:!1})})(e)})),i<13&&r>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore($p,{keyPath:s9});f.createIndex(bp,a9),f.createIndex(mN,o9)}(e)).next(()=>this.Fi(e,a)).next(()=>e.deleteObjectStore(Ao))),i<14&&r>=14&&(l=l.next(()=>this.Mi(e,a))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore(ub,{keyPath:p9,autoIncrement:!0}).createIndex(Ix,g9,{unique:!1}),d.createObjectStore(ih,{keyPath:y9}).createIndex(gN,v9,{unique:!1}),d.createObjectStore(rh,{keyPath:x9}).createIndex(yN,w9,{unique:!1})}(e))),i<16&&r>=16&&(l=l.next(()=>{t.objectStore(ih).clear()}).next(()=>{t.objectStore(rh).clear()})),i<17&&r>=17&&(l=l.next(()=>{(function(d){d.createObjectStore(db,{keyPath:E9})})(e)})),i<18&&r>=18&&L4()&&(l=l.next(()=>{t.objectStore(ih).clear()}).next(()=>{t.objectStore(rh).clear()})),l}Si(e){let t=0;return e.store(Ao).te((i,r)=>{t+=Jp(r)}).next(()=>{const i={byteSize:t};return e.store(Ih).put(Ax,i)})}wi(e){const t=e.store(Ah),i=e.store(qi);return t.J().next(r=>Q.forEach(r,a=>{const l=IDBKeyRange.bound([a.userId,ma],[a.userId,a.lastAcknowledgedBatchId]);return i.J(ko,l).next(u=>Q.forEach(u,d=>{Se(d.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=No(this.serializer,d);return _R(e,a.userId,f).next(()=>{})}))}))}bi(e){const t=e.store(Oc),i=e.store(Ao);return e.store(Fo).get(Kp).next(r=>{const a=[];return i.te((l,u)=>{const d=new $e(l),f=function(v){return[0,jn(v)]}(d);a.push(t.get(f).next(p=>p?Q.resolve():(v=>t.put({targetId:0,path:jn(v),sequenceNumber:r.highestListenSequenceNumber}))(d)))}).next(()=>Q.waitFor(a))})}Di(e,t){e.createObjectStore(Ch,{keyPath:d9});const i=t.store(Ch),r=new Ib,a=l=>{if(r.add(l)){const u=l.lastSegment(),d=l.popLast();return i.put({collectionId:u,parent:jn(d)})}};return t.store(Ao).te({ee:!0},(l,u)=>{const d=new $e(l);return a(d.popLast())}).next(()=>t.store(Mc).te({ee:!0},([l,u,d],f)=>{const p=gr(u);return a(p.popLast())}))}Ci(e){const t=e.store(Vc);return t.te((i,r)=>{const a=Kd(r),l=vR(this.serializer,a);return t.put(l)})}Fi(e,t){const i=t.store(Ao),r=[];return i.te((a,l)=>{const u=t.store($p),d=function(v){return v.document?new we($e.fromString(v.document.name).popFirst(5)):v.noDocument?we.fromSegments(v.noDocument.path):v.unknownDocument?we.fromSegments(v.unknownDocument.path):Te(36783)}(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(u.put(f))}).next(()=>Q.waitFor(r))}Mi(e,t){const i=t.store(qi),r=CR(this.serializer),a=new Nb(Kg.fi,this.serializer.wt);return i.J().next(l=>{const u=new Map;return l.forEach(d=>{var f;let p=(f=u.get(d.userId))!==null&&f!==void 0?f:Ve();No(this.serializer,d).keys().forEach(v=>p=p.add(v)),u.set(d.userId,p)}),Q.forEach(u,(d,f)=>{const p=new fn(f),v=Gg.St(this.serializer,p),x=a.getIndexManager(p),_=$g.St(p,this.serializer,x,a.referenceDelegate);return new NR(r,_,v,x).recalculateAndSaveOverlaysForDocumentKeys(new Nx(t,Xn.le),d).next()})})}}function cA(n){n.createObjectStore(Oc,{keyPath:c9}).createIndex(cb,u9,{unique:!0}),n.createObjectStore(Vc,{keyPath:"targetId"}).createIndex(pN,l9,{unique:!0}),n.createObjectStore(Fo)}const ia="IndexedDbPersistence",V0=18e5,O0=5e3,L0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RR="main";class Rb{constructor(e,t,i,r,a,l,u,d,f,p,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.xi=a,this.window=l,this.document=u,this.Oi=f,this.Ni=p,this.Bi=v,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=x=>Promise.resolve(),!Rb.C())throw new de(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N7(this,r),this.Ui=t+RR,this.serializer=new yR(d),this.Ki=new wr(this.Ui,this.Bi,new F7(this.serializer)),this.Pi=new y7,this.Ti=new S7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CR(this.serializer),this.Ei=new g7,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,p===!1&&qt(ia,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,L0);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Xn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(ka(e))return he(ia,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he(ia,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ld(e).get(rc).next(t=>Q.resolve(this.ts(t)))}ns(e){return rp(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,V0)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=an(t,Lc);return i.J().next(r=>{const a=this._s(r,V0),l=r.filter(u=>a.indexOf(u)===-1);return Q.forEach(l,u=>i.delete(u.clientId)).next(()=>l)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?Q.resolve(!0):Ld(e).get(rc).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,O0)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,L0);return!1}}return!(!this.networkEnabled||!this.inForeground)||rp(e).J().next(i=>this._s(i,O0).find(r=>{if(this.clientId!==r.clientId){const a=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(a||l&&u)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&he(ia,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[uf,Lc],e=>{const t=new Nx(e,Xn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(i=>this.ss(i.updateTimeMs,t)&&!this.cs(i.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>rp(e).J().next(t=>this._s(t,V0).map(i=>i.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return $g.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E7(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Gg.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,i){he(ia,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",a=function(d){return d===18?I9:d===17?_N:d===16?A9:d===15?hb:d===14?bN:d===13?wN:d===12?S9:d===11?xN:void Te(60245)}(this.Bi);let l;return this.Ki.runTransaction(e,r,a,u=>(l=new Nx(u,this.li?this.li.next():Xn.le),t==="readwrite-primary"?this.Yi(l).next(d=>!!d||this.Zi(l)).next(d=>{if(!d)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new de(ne.FAILED_PRECONDITION,cN);return i(l)}).next(d=>this.es(l).next(()=>d)):this.Es(l).next(()=>i(l)))).then(u=>(l.raiseOnCommittedEvent(),u))}Es(e){return Ld(e).get(rc).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,O0)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(ne.FAILED_PRECONDITION,L0)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ld(e).put(rc,t)}static C(){return wr.C()}Xi(e){const t=Ld(e);return t.get(rc).next(i=>this.ts(i)?(he(ia,"Releasing primary lease."),t.delete(rc)):Q.resolve())}ss(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(qt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;O4()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const i=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return he(ia,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return qt(ia,"Failed to get zombied client id.",i),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ld(n){return an(n,uf)}function rp(n){return an(n,Lc)}function Pb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ds=i,this.As=r}static Rs(e,t){let i=Ve(),r=Ve();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Db(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return O4()?8:dN(Rt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.ws(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.Ss(e,t,r,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new z7;return this.bs(e,t,l).next(u=>{if(a.result=u,this.fs)return this.Ds(e,t,l,u.size)})}).next(()=>a.result)}Ds(e,t,i,r){return i.documentReadCount<this.gs?(uc()<=He.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",dc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Q.resolve()):(uc()<=He.DEBUG&&he("QueryEngine","Query:",dc(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(uc()<=He.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",dc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(t))):Q.resolve())}ws(e,t){if(jS(t))return Q.resolve(null);let i=qn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Qp(t,null,"F"),i=qn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const l=Ve(...a);return this.ys.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.vs(t,u);return this.Cs(t,f,l,d.readTime)?this.ws(e,Qp(t,null,"F")):this.Fs(e,f,t,d)}))})))}Ss(e,t,i,r){return jS(t)||r.isEqual(Ae.min())?Q.resolve(null):this.ys.getDocuments(e,i).next(a=>{const l=this.vs(t,a);return this.Cs(t,l,i,r)?Q.resolve(null):(uc()<=He.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dc(t)),this.Fs(e,l,t,oN(r,kc)).next(u=>u))})}vs(e,t){let i=new at(qN(e));return t.forEach((r,a)=>{ff(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}bs(e,t,i){return uc()<=He.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",dc(t)),this.ys.getDocumentsMatchingQuery(e,t,gi.min(),i)}Fs(e,t,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="LocalStore",q7=3e8;class H7{constructor(e,t,i,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new mt(De),this.Os=new Ts(a=>Wo(a),df),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function DR(n,e,t,i){return new H7(n,e,t,i)}async function jR(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],u=[];let d=Ve();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(i,d).next(f=>({ks:f,removedBatchIds:l,addedBatchIds:u}))})})}function G7(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,p){const v=f.batch,x=v.keys();let _=Q.resolve();return x.forEach(T=>{_=_.next(()=>p.getEntry(d,T)).next(C=>{const D=f.docVersions.get(T);Se(D!==null,48541),C.version.compareTo(D)<0&&(v.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),p.addEntry(C)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=Ve();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function kR(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function $7(n,e){const t=be(n),i=e.snapshotVersion;let r=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.xs;const u=[];e.targetChanges.forEach((p,v)=>{const x=r.get(v);if(!x)return;u.push(t.Ti.removeMatchingKeys(a,p.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(a,p.addedDocuments,v)));let _=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?_=_.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,i)),r=r.insert(v,_),function(C,D,P){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=q7?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(x,_,p)&&u.push(t.Ti.updateTargetData(a,_))});let d=Jn(),f=Ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(MR(a,l,e.documentUpdates).next(p=>{d=p.qs,f=p.Qs})),!i.isEqual(Ae.min())){const p=t.Ti.getLastRemoteSnapshotVersion(a).next(v=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));u.push(p)}return Q.waitFor(u).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(t.xs=r,a))}function MR(n,e,t){let i=Ve(),r=Ve();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let l=Jn();return t.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Ae.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):he(jb,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{qs:l,Qs:r}})}function K7(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ma),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Gc(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ti.getTargetData(i,e).next(a=>a?(r=a,Q.resolve(r)):t.Ti.allocateTargetId(i).next(l=>(r=new cs(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function $c(n,e,t){const i=be(n),r=i.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!ka(l))throw l;he(jb,`Failed to update sequence numbers for target ${e}: ${l}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)}function tg(n,e,t){const i=be(n);let r=Ae.min(),a=Ve();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,p){const v=be(d),x=v.Os.get(p);return x!==void 0?Q.resolve(v.xs.get(x)):v.Ti.getTargetData(f,p)}(i,l,qn(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(l,u.targetId).next(d=>{a=d})}).next(()=>i.Ms.getDocumentsMatchingQuery(l,e,t?r:Ae.min(),t?a:Ve())).next(u=>(LR(i,zN(e),u),{documents:u,$s:a})))}function VR(n,e){const t=be(n),i=be(t.Ti),r=t.xs.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",a=>i.Rt(a,e).next(l=>l?l.target:null))}function OR(n,e){const t=be(n),i=t.Ns.get(e)||Ae.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Bs.getAllFromCollectionGroup(r,e,oN(i,kc),Number.MAX_SAFE_INTEGER)).then(r=>(LR(t,e,r),r))}function LR(n,e,t){let i=n.Ns.get(e)||Ae.min();t.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Ns.set(e,i)}async function W7(n,e,t,i){const r=be(n);let a=Ve(),l=Jn();for(const f of t){const p=e.Us(f.metadata.name);f.document&&(a=a.add(p));const v=e.Ks(f);v.setReadTime(e.Ws(f.metadata.readTime)),l=l.insert(p,v)}const u=r.Bs.newChangeBuffer({trackRemovals:!0}),d=await Gc(r,function(p){return qn(lu($e.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>MR(f,u,l).next(p=>(u.apply(f),p)).next(p=>r.Ti.removeMatchingKeysForTargetId(f,d.targetId).next(()=>r.Ti.addMatchingKeys(f,a,d.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,p.qs,p.Qs)).next(()=>p.qs)))}async function Y7(n,e,t=Ve()){const i=await Gc(n,qn(Sb(e.bundledQuery))),r=be(n);return r.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ht(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ei.saveNamedQuery(a,e);const u=i.withResumeToken(Vt.EMPTY_BYTE_STRING,l);return r.xs=r.xs.insert(u.targetId,u),r.Ti.updateTargetData(a,u).next(()=>r.Ti.removeMatchingKeysForTargetId(a,i.targetId)).next(()=>r.Ti.addMatchingKeys(a,t,i.targetId)).next(()=>r.Ei.saveNamedQuery(a,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="firestore_clients";function uA(n,e){return`${UR}_${n}_${e}`}const BR="firestore_mutations";function dA(n,e,t){let i=`${BR}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const FR="firestore_targets";function U0(n,e){return`${FR}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="SharedClientState";class ng{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Gs(e,t,i){const r=JSON.parse(i);let a,l=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new de(r.error.code,r.error.message))),l?new ng(e,t,r.state,a):(qt(ur,`Failed to parse mutation state for ID '${t}': ${i}`),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Gs(e,t){const i=JSON.parse(t);let r,a=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(r=new de(i.error.code,i.error.message))),a?new lh(e,i.state,r):(qt(ur,`Failed to parse target state for ID '${e}': ${t}`),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ig{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Gs(e,t){const i=JSON.parse(t);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,a=yb();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=hN(i.activeTargetIds[l]),a=a.add(i.activeTargetIds[l]);return r?new ig(e,a):(qt(ur,`Failed to parse client data for instance '${e}': ${t}`),null)}}class kb{constructor(e,t){this.clientId=e,this.onlineState=t}static Gs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new kb(t.clientId,t.onlineState):(qt(ur,`Failed to parse online state: ${e}`),null)}}class Hx{constructor(){this.activeTargetIds=yb()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B0{constructor(e,t,i,r,a){this.window=e,this.xi=t,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ys=this.Zs.bind(this),this.Xs=new mt(De),this.started=!1,this.eo=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.no=uA(this.persistenceKey,this.Js),this.ro=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.Xs=this.Xs.insert(this.Js,new Hx),this.io=new RegExp(`^${UR}_${l}_([^_]*)$`),this.so=new RegExp(`^${BR}_${l}_(\\d+)(?:_(.*))?$`),this.oo=new RegExp(`^${FR}_${l}_(\\d+)$`),this._o=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.ao=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ys)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Is();for(const i of e){if(i===this.Js)continue;const r=this.getItem(uA(this.persistenceKey,i));if(r){const a=ig.Gs(i,r);a&&(this.Xs=this.Xs.insert(a.clientId,a))}}this.uo();const t=this.storage.getItem(this._o);if(t){const i=this.co(t);i&&this.lo(i)}for(const i of this.eo)this.Zs(i);this.eo=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ro,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ho(this.Xs)}isActiveQueryTarget(e){let t=!1;return this.Xs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Po(e,"pending")}updateMutationState(e,t,i){this.Po(e,t,i),this.To(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(U0(this.persistenceKey,e));if(r){const a=lh.Gs(e,r);a&&(i=a.state)}}return t&&this.Io.js(e),this.uo(),i}removeLocalQueryTarget(e){this.Io.Hs(e),this.uo()}isLocalQueryTarget(e){return this.Io.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(U0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Eo(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.To(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Ao(e)}notifyBundleLoaded(e){this.Ro(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ys),this.removeItem(this.no),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he(ur,"READ",e,t),t}setItem(e,t){he(ur,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){he(ur,"REMOVE",e),this.storage.removeItem(e)}Zs(e){const t=e;if(t.storageArea===this.storage){if(he(ur,"EVENT",t.key,t.newValue),t.key===this.no)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.xi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.io.test(t.key)){if(t.newValue==null){const i=this.Vo(t.key);return this.mo(i,null)}{const i=this.fo(t.key,t.newValue);if(i)return this.mo(i.clientId,i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.po(t.key,t.newValue);if(i)return this.yo(i)}}else if(this.oo.test(t.key)){if(t.newValue!==null){const i=this.wo(t.key,t.newValue);if(i)return this.So(i)}}else if(t.key===this._o){if(t.newValue!==null){const i=this.co(t.newValue);if(i)return this.lo(i)}}else if(t.key===this.ro){const i=function(a){let l=Xn.le;if(a!=null)try{const u=JSON.parse(a);Se(typeof u=="number",30636,{bo:a}),l=u}catch(u){qt(ur,"Failed to read sequence number from WebStorage",u)}return l}(t.newValue);i!==Xn.le&&this.sequenceNumberHandler(i)}else if(t.key===this.ao){const i=this.Do(t.newValue);await Promise.all(i.map(r=>this.syncEngine.vo(r)))}}}else this.eo.push(t)})}}get Io(){return this.Xs.get(this.Js)}uo(){this.setItem(this.no,this.Io.zs())}Po(e,t,i){const r=new ng(this.currentUser,e,t,i),a=dA(this.persistenceKey,this.currentUser,e);this.setItem(a,r.zs())}To(e){const t=dA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ao(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this._o,JSON.stringify(t))}Eo(e,t,i){const r=U0(this.persistenceKey,e),a=new lh(e,t,i);this.setItem(r,a.zs())}Ro(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ao,t)}Vo(e){const t=this.io.exec(e);return t?t[1]:null}fo(e,t){const i=this.Vo(e);return ig.Gs(i,t)}po(e,t){const i=this.so.exec(e),r=Number(i[1]),a=i[2]!==void 0?i[2]:null;return ng.Gs(new fn(a),r,t)}wo(e,t){const i=this.oo.exec(e),r=Number(i[1]);return lh.Gs(r,t)}co(e){return kb.Gs(e)}Do(e){return JSON.parse(e)}async yo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);he(ur,`Ignoring mutation for non-active user ${e.user.uid}`)}So(e){return this.syncEngine.Fo(e.targetId,e.state,e.error)}mo(e,t){const i=t?this.Xs.insert(e,t):this.Xs.remove(e),r=this.ho(this.Xs),a=this.ho(i),l=[],u=[];return a.forEach(d=>{r.has(d)||l.push(d)}),r.forEach(d=>{a.has(d)||u.push(d)}),this.syncEngine.Mo(l,u).then(()=>{this.Xs=i})}lo(e){this.Xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ho(e){let t=yb();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class zR{constructor(){this.xo=new Hx,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Hx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="ConnectivityMonitor";class fA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(hA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(hA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp=null;function Gx(){return sp===null?sp=function(){return 268435456+Math.round(2147483648*Math.random())}():sp++,"0x"+sp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="RestConnection",X7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z7{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===Rx?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,t,i,r,a){const l=Gx(),u=this.jo(e,t.toUriEncodedString());he(F0,`Sending RPC '${e}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,r,a);const{host:f}=new URL(u),p=ef(f);return this.Jo(e,u,d,i,p).then(v=>(he(F0,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Nr(F0,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v})}Yo(e,t,i,r,a,l){return this.zo(e,t,i,r,a)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ou}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}jo(e,t){const i=X7[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class eU extends Z7{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,a){const l=Gx();return new Promise((u,d)=>{const f=new ZC;f.setWithCredentials(!0),f.listenOnce(JC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case vp.NO_ERROR:const v=f.getResponseJson();he(Nn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case vp.TIMEOUT:he(Nn,`RPC '${e}' ${l} timed out`),d(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const x=f.getStatus();if(he(Nn,`RPC '${e}' ${l} failed with status:`,x,"response text:",f.getResponseText()),x>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const C=function(P){const I=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(I)>=0?I:ne.UNKNOWN}(T.status);d(new de(C,T.message))}else d(new de(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{he(Nn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(r);he(Nn,`RPC '${e}' ${l} sending request:`,r),f.send(t,"POST",p,i,15)})}T_(e,t,i){const r=Gx(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=nN(),u=tN(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=a.join("");he(Nn,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);let x=!1,_=!1;const T=new J7({Zo:D=>{_?he(Nn,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(x||(he(Nn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),x=!0),he(Nn,`RPC '${e}' stream ${r} sending:`,D),v.send(D))},Xo:()=>v.close()}),C=(D,P,I)=>{D.listen(P,N=>{try{I(N)}catch(z){setTimeout(()=>{throw z},0)}})};return C(v,Hd.EventType.OPEN,()=>{_||(he(Nn,`RPC '${e}' stream ${r} transport opened.`),T.__())}),C(v,Hd.EventType.CLOSE,()=>{_||(_=!0,he(Nn,`RPC '${e}' stream ${r} transport closed`),T.u_())}),C(v,Hd.EventType.ERROR,D=>{_||(_=!0,Nr(Nn,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),T.u_(new de(ne.UNAVAILABLE,"The operation could not be completed")))}),C(v,Hd.EventType.MESSAGE,D=>{var P;if(!_){const I=D.data[0];Se(!!I,16349);const N=I,z=(N==null?void 0:N.error)||((P=N[0])===null||P===void 0?void 0:P.error);if(z){he(Nn,`RPC '${e}' stream ${r} received error:`,z);const F=z.status;let H=function(R){const V=Qt[R];if(V!==void 0)return nR(V)}(F),j=z.message;H===void 0&&(H=ne.INTERNAL,j="Unknown error status: "+F+" with message "+z.message),_=!0,T.u_(new de(H,j)),v.close()}else he(Nn,`RPC '${e}' stream ${r} received:`,I),T.c_(I)}}),C(u,eN.STAT_EVENT,D=>{D.stat===Tx.PROXY?he(Nn,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Tx.NOPROXY&&he(Nn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.a_()},0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof window<"u"?window:null}function Cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n){return new s7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,t,i=1e3,r=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=r,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-i);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="PersistentStream";class HR{constructor(e,t,i,r,a,l,u,d){this.xi=e,this.y_=i,this.w_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Mb(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.S_===t&&this.K_(i,r)},i=>{e(()=>{const r=new de(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(r)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.W_(r))}),this.stream.onMessage(r=>{i(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return he(mA,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(he(mA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tU extends HR{constructor(e,t,i,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=l7(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ae.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?Ht(l.readTime):Ae.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=Ux(this.serializer),t.addTarget=function(a,l){let u;const d=l.target;if(u=Wp(d)?{documents:dR(a,d)}:{query:hR(a,d).gt},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=sR(a,l.resumeToken);const f=Ox(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ae.min())>0){u.readTime=Hc(a,l.snapshotVersion.toTimestamp());const f=Ox(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=u7(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=Ux(this.serializer),t.removeTarget=e,this.L_(t)}}class nU extends HR{constructor(e,t,i,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=c7(e.writeResults,e.commitTime),i=Ht(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=Ux(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>kh(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{}class rU extends iU{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.na=!1}ra(){if(this.na)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.zo(e,Lx(t,i),r,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ne.UNKNOWN,a.toString())})}Yo(e,t,i,r,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Yo(e,Lx(t,i),r,l,u,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ne.UNKNOWN,l.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class sU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(qt(t),this.oa=!1):he("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class aU{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(l=>{i.enqueueAndForget(async()=>{Va(this)&&(he(el,"Restarting streams for network reachability change."),await async function(d){const f=be(d);f.Ta.add(4),await du(f),f.da.set("Unknown"),f.Ta.delete(4),await vf(f)}(this))})}),this.da=new sU(i,r)}}async function vf(n){if(Va(n))for(const e of n.Ia)await e(!0)}async function du(n){for(const e of n.Ia)await e(!1)}function Wg(n,e){const t=be(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Lb(t)?Ob(t):fu(t).M_()&&Vb(t,e))}function Kc(n,e){const t=be(n),i=fu(t);t.Pa.delete(e),i.M_()&&GR(t,e),t.Pa.size===0&&(i.M_()?i.N_():Va(t)&&t.da.set("Unknown"))}function Vb(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fu(n).H_(e)}function GR(n,e){n.Aa.Ke(e),fu(n).J_(e)}function Ob(n){n.Aa=new t7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),fu(n).start(),n.da._a()}function Lb(n){return Va(n)&&!fu(n).F_()&&n.Pa.size>0}function Va(n){return be(n).Ta.size===0}function $R(n){n.Aa=void 0}async function oU(n){n.da.set("Online")}async function lU(n){n.Pa.forEach((e,t)=>{Vb(n,e)})}async function cU(n,e){$R(n),Lb(n)?(n.da.ca(e),Ob(n)):n.da.set("Unknown")}async function uU(n,e,t){if(n.da.set("Online"),e instanceof rR&&e.state===2&&e.cause)try{await async function(r,a){const l=a.cause;for(const u of a.targetIds)r.Pa.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.Pa.delete(u),r.Aa.removeTarget(u))}(n,e)}catch(i){he(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rg(n,i)}else if(e instanceof Ap?n.Aa.Xe(e):e instanceof iR?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ae.min()))try{const i=await kR(n.localStore);t.compareTo(i)>=0&&await function(a,l){const u=a.Aa.It(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.Pa.get(f);p&&a.Pa.set(f,p.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const p=a.Pa.get(d);if(!p)return;a.Pa.set(d,p.withResumeToken(Vt.EMPTY_BYTE_STRING,p.snapshotVersion)),GR(a,d);const v=new cs(p.target,d,f,p.sequenceNumber);Vb(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(i){he(el,"Failed to raise snapshot:",i),await rg(n,i)}}async function rg(n,e,t){if(!ka(e))throw e;n.Ta.add(1),await du(n),n.da.set("Offline"),t||(t=()=>kR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(el,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await vf(n)})}function KR(n,e){return e().catch(t=>rg(n,t,e))}async function hu(n){const e=be(n),t=Sa(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:ma;for(;dU(e);)try{const r=await K7(e.localStore,i);if(r===null){e.ha.length===0&&t.N_();break}i=r.batchId,hU(e,r)}catch(r){await rg(e,r)}WR(e)&&YR(e)}function dU(n){return Va(n)&&n.ha.length<10}function hU(n,e){n.ha.push(e);const t=Sa(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function WR(n){return Va(n)&&!Sa(n).F_()&&n.ha.length>0}function YR(n){Sa(n).start()}async function fU(n){Sa(n).ta()}async function mU(n){const e=Sa(n);for(const t of n.ha)e.Z_(t.mutations)}async function pU(n,e,t){const i=n.ha.shift(),r=bb.from(i,e,t);await KR(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await hu(n)}async function gU(n,e){e&&Sa(n).Y_&&await async function(i,r){if(function(l){return tR(l)&&l!==ne.ABORTED}(r.code)){const a=i.ha.shift();Sa(i).O_(),await KR(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await hu(i)}}(n,e),WR(n)&&YR(n)}async function pA(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),he(el,"RemoteStore received new credentials");const i=Va(t);t.Ta.add(3),await du(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await vf(t)}async function $x(n,e){const t=be(n);e?(t.Ta.delete(2),await vf(t)):e||(t.Ta.add(2),await du(t),t.da.set("Unknown"))}function fu(n){return n.Ra||(n.Ra=function(t,i,r){const a=be(t);return a.ra(),new tU(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{e_:oU.bind(null,n),n_:lU.bind(null,n),i_:cU.bind(null,n),j_:uU.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),Lb(n)?Ob(n):n.da.set("Unknown")):(await n.Ra.stop(),$R(n))})),n.Ra}function Sa(n){return n.Va||(n.Va=function(t,i,r){const a=be(t);return a.ra(),new nU(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:fU.bind(null,n),i_:gU.bind(null,n),X_:mU.bind(null,n),ea:pU.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await hu(n)):(await n.Va.stop(),n.ha.length>0&&(he(el,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const l=Date.now()+i,u=new Ub(e,t,l,r,a);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mu(n,e){if(qt("AsyncQueue",`${e}: ${n}`),ka(n))return new de(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{static emptySet(e){return new Ac(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Gd(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ac)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ac;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.ma=new mt(we.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class Wc{constructor(e,t,i,r,a,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,a){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Wc(e,t,Ac.emptySet(t),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class vU{constructor(){this.queries=yA(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const r=be(t),a=r.queries;r.queries=yA(),a.forEach((l,u)=>{for(const d of u.ya)d.onError(i)})})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function yA(){return new Ts(n=>FN(n),hf)}async function Bb(n,e){const t=be(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.wa()&&e.Sa()&&(i=2):(a=new yU,i=e.Sa()?0:1);try{switch(i){case 0:a.pa=await t.onListen(r,!0);break;case 1:a.pa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const u=mu(l,`Initialization of query '${dc(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&zb(t)}async function Fb(n,e){const t=be(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const l=a.ya.indexOf(e);l>=0&&(a.ya.splice(l,1),a.ya.length===0?r=e.Sa()?0:1:!a.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function xU(n,e){const t=be(n);let i=!1;for(const r of e){const a=r.query,l=t.queries.get(a);if(l){for(const u of l.ya)u.va(r)&&(i=!0);l.pa=r}}i&&zb(t)}function wU(n,e,t){const i=be(n),r=i.queries.get(e);if(r)for(const a of r.ya)a.onError(t);i.queries.delete(e)}function zb(n){n.ba.forEach(e=>{e.next()})}var Kx,vA;(vA=Kx||(Kx={})).Ca="default",vA.Cache="cache";class qb{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Wc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Kx.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t){this.ka=e,this.byteLength=t}qa(){return"metadata"in this.ka}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.serializer=e}Us(e){return br(this.serializer,e)}Ks(e){return e.metadata.exists?uR(this.serializer,e.document,!1):pt.newNoDocument(this.Us(e.metadata.name),this.Ws(e.metadata.readTime))}Ws(e){return Ht(e)}}class _U{constructor(e,t,i){this.Qa=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QR(e)}$a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ka.namedQuery)this.queries.push(e.ka.namedQuery);else if(e.ka.documentMetadata){this.documents.push({metadata:e.ka.documentMetadata}),e.ka.documentMetadata.exists||++t;const i=$e.fromString(e.ka.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ka.document&&(this.documents[this.documents.length-1].document=e.ka.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ua(e){const t=new Map,i=new xA(this.serializer);for(const r of e)if(r.metadata.queries){const a=i.Us(r.metadata.name);for(const l of r.metadata.queries){const u=(t.get(l)||Ve()).add(a);t.set(l,u)}}return t}async complete(){const e=await W7(this.localStore,new xA(this.serializer),this.documents,this.Qa.id),t=this.Ua(this.documents);for(const i of this.queries)await Y7(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ka:this.collectionGroups,Wa:e}}}function QR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.key=e}}class ZR{constructor(e){this.key=e}}class JR{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ve(),this.mutatedKeys=Ve(),this.Ha=qN(e),this.Ja=new Ac(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new gA,r=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,l=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,v)=>{const x=r.get(p),_=ff(this.query,v)?v:null,T=!!x&&this.mutatedKeys.has(x.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let D=!1;x&&_?x.data.isEqual(_.data)?T!==C&&(i.track({type:3,doc:_}),D=!0):this.eu(x,_)||(i.track({type:2,doc:_}),D=!0,(d&&this.Ha(_,d)>0||f&&this.Ha(_,f)<0)&&(u=!0)):!x&&_?(i.track({type:0,doc:_}),D=!0):x&&!_&&(i.track({type:1,doc:x}),D=!0,(d||f)&&(u=!0)),D&&(_?(l=l.add(_),a=C?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{Ja:l,Xa:i,Cs:u,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const l=e.Xa.ga();l.sort((p,v)=>function(_,T){const C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:D})}};return C(_)-C(T)}(p.type,v.type)||this.Ha(p.doc,v.doc)),this.tu(i),r=r!=null&&r;const u=t&&!r?this.nu():[],d=this.ja.size===0&&this.current&&!r?1:0,f=d!==this.za;return this.za=d,l.length!==0||f?{snapshot:new Wc(this.query,e.Ja,a,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:u}:{ru:u}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new gA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ve(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new ZR(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new XR(i))}),t}su(e){this.Ga=e.$s,this.ja=Ve();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Wc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Oa="SyncEngine";class TU{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class EU{constructor(e){this.key=e,this._u=!1}}class SU{constructor(e,t,i,r,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.au={},this.uu=new Ts(u=>FN(u),hf),this.cu=new Map,this.lu=new Set,this.hu=new mt(we.comparator),this.Pu=new Map,this.Tu=new Cb,this.Iu={},this.Eu=new Map,this.du=Jo.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function AU(n,e,t=!0){const i=Yg(n);let r;const a=i.uu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.ou()):r=await eP(i,e,t,!0),r}async function IU(n,e){const t=Yg(n);await eP(t,e,!0,!1)}async function eP(n,e,t,i){const r=await Gc(n.localStore,qn(e)),a=r.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let u;return i&&(u=await Hb(n,e,a,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&Wg(n.remoteStore,r),u}async function Hb(n,e,t,i,r){n.Ru=(v,x,_)=>async function(C,D,P,I){let N=D.view.Za(P);N.Cs&&(N=await tg(C.localStore,D.query,!1).then(({documents:j})=>D.view.Za(j,N)));const z=I&&I.targetChanges.get(D.targetId),F=I&&I.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(N,C.isPrimaryClient,z,F);return Wx(C,D.targetId,H.ru),H.snapshot}(n,v,x,_);const a=await tg(n.localStore,e,!0),l=new JR(e,a.$s),u=l.Za(a.documents),d=gf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=l.applyChanges(u,n.isPrimaryClient,d);Wx(n,t,f.ru);const p=new TU(e,t,l);return n.uu.set(e,p),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),f.snapshot}async function CU(n,e,t){const i=be(n),r=i.uu.get(e),a=i.cu.get(r.targetId);if(a.length>1)return i.cu.set(r.targetId,a.filter(l=>!hf(l,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await $c(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Kc(i.remoteStore,r.targetId),Yc(i,r.targetId)}).catch(ja)):(Yc(i,r.targetId),await $c(i.localStore,r.targetId,!0))}async function NU(n,e){const t=be(n),i=t.uu.get(e),r=t.cu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kc(t.remoteStore,i.targetId))}async function RU(n,e,t){const i=Wb(n);try{const r=await function(l,u){const d=be(l),f=_t.now(),p=u.reduce((_,T)=>_.add(T.key),Ve());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=Jn(),C=Ve();return d.Bs.getEntries(_,p).next(D=>{T=D,T.forEach((P,I)=>{I.isValidDocument()||(C=C.add(P))})}).next(()=>d.localDocuments.getOverlayedDocuments(_,T)).next(D=>{v=D;const P=[];for(const I of u){const N=Z9(I,v.get(I.key).overlayedDocument);N!=null&&P.push(new Es(I.key,N,DN(N.value.mapValue),bt.exists(!0)))}return d.mutationQueue.addMutationBatch(_,f,P,u)}).next(D=>{x=D;const P=D.applyToLocalDocumentSet(v,C);return d.documentOverlayCache.saveOverlays(_,D.batchId,P)})}).then(()=>({batchId:x.batchId,changes:GN(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,u,d){let f=l.Iu[l.currentUser.toKey()];f||(f=new mt(De)),f=f.insert(u,d),l.Iu[l.currentUser.toKey()]=f}(i,r.batchId,t),await Ss(i,r.changes),await hu(i.remoteStore)}catch(r){const a=mu(r,"Failed to persist write");t.reject(a)}}async function tP(n,e){const t=be(n);try{const i=await $7(t.localStore,e);e.targetChanges.forEach((r,a)=>{const l=t.Pu.get(a);l&&(Se(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l._u=!0:r.modifiedDocuments.size>0?Se(l._u,14607):r.removedDocuments.size>0&&(Se(l._u,42227),l._u=!1))}),await Ss(t,i,e)}catch(i){await ja(i)}}function wA(n,e,t){const i=be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.uu.forEach((a,l)=>{const u=l.view.Da(e);u.snapshot&&r.push(u.snapshot)}),function(l,u){const d=be(l);d.onlineState=u;let f=!1;d.queries.forEach((p,v)=>{for(const x of v.ya)x.Da(u)&&(f=!0)}),f&&zb(d)}(i.eventManager,e),r.length&&i.au.j_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PU(n,e,t){const i=be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Pu.get(e),a=r&&r.key;if(a){let l=new mt(we.comparator);l=l.insert(a,pt.newNoDocument(a,Ae.min()));const u=Ve().add(a),d=new pf(Ae.min(),new Map,new mt(De),l,u);await tP(i,d),i.hu=i.hu.remove(a),i.Pu.delete(e),Kb(i)}else await $c(i.localStore,e,!1).then(()=>Yc(i,e,t)).catch(ja)}async function DU(n,e){const t=be(n),i=e.batch.batchId;try{const r=await G7(t.localStore,e);$b(t,i,null),Gb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ss(t,r)}catch(r){await ja(r)}}async function jU(n,e,t){const i=be(n);try{const r=await function(l,u){const d=be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(Se(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(i.localStore,e);$b(i,e,t),Gb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ss(i,r)}catch(r){await ja(r)}}async function kU(n,e){const t=be(n);Va(t.remoteStore)||he(Oa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(l){const u=be(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(i===ma)return void e.resolve();const r=t.Eu.get(i)||[];r.push(e),t.Eu.set(i,r)}catch(i){const r=mu(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function Gb(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function $b(n,e,t){const i=be(n);let r=i.Iu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.Iu[i.currentUser.toKey()]=r}}function Yc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||nP(n,i)})}function nP(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Kc(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Kb(n))}function Wx(n,e,t){for(const i of t)i instanceof XR?(n.Tu.addReference(i.key,e),MU(n,i)):i instanceof ZR?(he(Oa,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||nP(n,i.key)):Te(19791,{mu:i})}function MU(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(he(Oa,"New document in limbo: "+t),n.lu.add(i),Kb(n))}function Kb(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new we($e.fromString(e)),i=n.du.next();n.Pu.set(i,new EU(t)),n.hu=n.hu.insert(t,i),Wg(n.remoteStore,new cs(qn(lu(t.path)),i,"TargetPurposeLimboResolution",Xn.le))}}async function Ss(n,e,t){const i=be(n),r=[],a=[],l=[];i.uu.isEmpty()||(i.uu.forEach((u,d)=>{l.push(i.Ru(d,e,t).then(f=>{var p;if((f||t)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=Db.Rs(d.targetId,f);a.push(v)}}))}),await Promise.all(l),i.au.j_(r),await async function(d,f){const p=be(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Q.forEach(f,x=>Q.forEach(x.ds,_=>p.persistence.referenceDelegate.addReference(v,x.targetId,_)).next(()=>Q.forEach(x.As,_=>p.persistence.referenceDelegate.removeReference(v,x.targetId,_)))))}catch(v){if(!ka(v))throw v;he(jb,"Failed to update sequence numbers: "+v)}for(const v of f){const x=v.targetId;if(!v.fromCache){const _=p.xs.get(x),T=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(T);p.xs=p.xs.insert(x,C)}}}(i.localStore,a))}async function VU(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){he(Oa,"User change. New user:",e.toKey());const i=await jR(t.localStore,e);t.currentUser=e,function(a,l){a.Eu.forEach(u=>{u.forEach(d=>{d.reject(new de(ne.CANCELLED,l))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ss(t,i.ks)}}function OU(n,e){const t=be(n),i=t.Pu.get(e);if(i&&i._u)return Ve().add(i.key);{let r=Ve();const a=t.cu.get(e);if(!a)return r;for(const l of a){const u=t.uu.get(l);r=r.unionWith(u.view.Ya)}return r}}async function LU(n,e){const t=be(n),i=await tg(t.localStore,e.query,!0),r=e.view.su(i);return t.isPrimaryClient&&Wx(t,e.targetId,r.ru),r}async function UU(n,e){const t=be(n);return OR(t.localStore,e).then(i=>Ss(t,i))}async function BU(n,e,t,i){const r=be(n),a=await function(u,d){const f=be(u),p=be(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",v=>p.tr(v,d).next(x=>x?f.localDocuments.getDocuments(v,x):Q.resolve(null)))}(r.localStore,e);a!==null?(t==="pending"?await hu(r.remoteStore):t==="acknowledged"||t==="rejected"?($b(r,e,i||null),Gb(r,e),function(u,d){be(be(u).mutationQueue).sr(d)}(r.localStore,e)):Te(6720,"Unknown batchState",{fu:t}),await Ss(r,a)):he(Oa,"Cannot apply mutation batch with id: "+e)}async function FU(n,e){const t=be(n);if(Yg(t),Wb(t),e===!0&&t.Au!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),r=await bA(t,i.toArray());t.Au=!0,await $x(t.remoteStore,!0);for(const a of r)Wg(t.remoteStore,a)}else if(e===!1&&t.Au!==!1){const i=[];let r=Promise.resolve();t.cu.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Yc(t,l),$c(t.localStore,l,!0))),Kc(t.remoteStore,l)}),await r,await bA(t,i),function(l){const u=be(l);u.Pu.forEach((d,f)=>{Kc(u.remoteStore,f)}),u.Tu.Jr(),u.Pu=new Map,u.hu=new mt(we.comparator)}(t),t.Au=!1,await $x(t.remoteStore,!1)}}async function bA(n,e,t){const i=be(n),r=[],a=[];for(const l of e){let u;const d=i.cu.get(l);if(d&&d.length!==0){u=await Gc(i.localStore,qn(d[0]));for(const f of d){const p=i.uu.get(f),v=await LU(i,p);v.snapshot&&a.push(v.snapshot)}}else{const f=await VR(i.localStore,l);u=await Gc(i.localStore,f),await Hb(i,iP(f),l,!1,u.resumeToken)}r.push(u)}return i.au.j_(a),r}function iP(n){return BN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zU(n){return function(t){return be(be(t).persistence).Is()}(be(n).localStore)}async function qU(n,e,t,i){const r=be(n);if(r.Au)return void he(Oa,"Ignoring unexpected query state notification.");const a=r.cu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await OR(r.localStore,zN(a[0])),u=pf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Vt.EMPTY_BYTE_STRING);await Ss(r,l,u);break}case"rejected":await $c(r.localStore,e,!0),Yc(r,e,i);break;default:Te(64155,t)}}async function HU(n,e,t){const i=Yg(n);if(i.Au){for(const r of e){if(i.cu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){he(Oa,"Adding an already active target "+r);continue}const a=await VR(i.localStore,r),l=await Gc(i.localStore,a);await Hb(i,iP(a),l.targetId,!1,l.resumeToken),Wg(i.remoteStore,l)}for(const r of t)i.cu.has(r)&&await $c(i.localStore,r,!1).then(()=>{Kc(i.remoteStore,r),Yc(i,r)}).catch(ja)}}function Yg(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PU.bind(null,e),e.au.j_=xU.bind(null,e.eventManager),e.au.Vu=wU.bind(null,e.eventManager),e}function Wb(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jU.bind(null,e),e}function GU(n,e,t){const i=be(n);(async function(a,l,u){try{const d=await l.getMetadata();if(await function(_,T){const C=be(_),D=Ht(T.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",P=>C.Ei.getBundleMetadata(P,T.id)).then(P=>!!P&&P.createTime.compareTo(D)>=0)}(a.localStore,d))return await l.close(),u._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(d)),Promise.resolve(new Set);u._updateProgress(QR(d));const f=new _U(d,a.localStore,l.serializer);let p=await l.gu();for(;p;){const x=await f.$a(p);x&&u._updateProgress(x),p=await l.gu()}const v=await f.complete();return await Ss(a,v.Wa,void 0),await function(_,T){const C=be(_);return C.persistence.runTransaction("Save bundle","readwrite",D=>C.Ei.saveBundleMetadata(D,T))}(a.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Ka)}catch(d){return Nr(Oa,`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return DR(this.persistence,new PR,e.initialUser,this.serializer)}yu(e){return new Nb(Kg.fi,this.serializer)}pu(e){return new zR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class $U extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){Se(this.persistence.referenceDelegate instanceof eg,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new SR(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Nb(i=>eg.fi(i,t),this.serializer)}}class rP extends Mh{constructor(e,t,i){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await Wb(this.Du.syncEngine),await hu(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(e){return DR(this.persistence,new PR,e.initialUser,this.serializer)}Su(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new SR(i,e.asyncQueue,t)}bu(e,t){const i=new t9(t,this.persistence);return new e9(e.asyncQueue,i)}yu(e){const t=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Rb(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,qR(),Cp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new zR}}class KU extends rP{constructor(e,t){super(e,t,!1),this.Du=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Du.syncEngine;this.sharedClientState instanceof B0&&(this.sharedClientState.syncEngine={Co:BU.bind(null,t),Fo:qU.bind(null,t),Mo:HU.bind(null,t),Is:zU.bind(null,t),vo:UU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await FU(this.Du.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}pu(e){const t=qR();if(!B0.C(t))throw new de(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new B0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Vh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VU.bind(null,this.syncEngine),await $x(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vU}()}createDatastore(e){const t=yf(e.databaseInfo.databaseId),i=function(a){return new eU(a)}(e.databaseInfo);return function(a,l,u,d){return new rU(a,l,u,d)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,a,l,u){return new aU(i,r,a,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>wA(this.syncEngine,t,0),function(){return fA.C()?new fA:new Q7}())}createSyncEngine(e,t){return function(r,a,l,u,d,f,p){const v=new SU(r,a,l,u,d,f);return p&&(v.Au=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const a=be(r);he(el,"RemoteStore shutting down."),a.Ta.add(5),await du(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Vh.provider={build:()=>new Vh};function _A(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,t){this.Fu=e,this.serializer=t,this.metadata=new Tn,this.buffer=new Uint8Array,this.Mu=function(){return new TextDecoder("utf-8")}(),this.xu().then(i=>{i&&i.qa()?this.metadata.resolve(i.ka.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.ka)}`))},i=>this.metadata.reject(i))}close(){return this.Fu.cancel()}async getMetadata(){return this.metadata.promise}async gu(){return await this.getMetadata(),this.xu()}async xu(){const e=await this.Ou();if(e===null)return null;const t=this.Mu.decode(e),i=Number(t);isNaN(i)&&this.Nu(`length string (${t}) is not valid number`);const r=await this.Bu(i);return new bU(JSON.parse(r),e.length+i)}Lu(){return this.buffer.findIndex(e=>e===123)}async Ou(){for(;this.Lu()<0&&!await this.ku(););if(this.buffer.length===0)return null;const e=this.Lu();e<0&&this.Nu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Bu(e){for(;this.buffer.length<e;)await this.ku()&&this.Nu("Reached the end of bundle when more is expected.");const t=this.Mu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Nu(e){throw this.Fu.cancel(),new Error(`Invalid bundle format: ${e}`)}async ku(){const e=await this.Fu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(r,a){const l=be(r),u={documents:a.map(v=>jh(l.serializer,v))},d=await l.Yo("BatchGetDocuments",l.serializer.databaseId,$e.emptyPath(),u,a.length),f=new Map;d.forEach(v=>{const x=o7(l.serializer,v);f.set(x.key.toString(),x)});const p=[];return a.forEach(v=>{const x=f.get(v.toString());Se(!!x,55234,{key:v}),p.push(x)}),p}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const r=we.fromPath(i);this.mutations.push(new xb(r,this.precondition(r)))}),await async function(i,r){const a=be(i),l={writes:r.map(u=>kh(a.serializer,u))};await a.zo("Commit",a.serializer.databaseId,$e.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{qu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new de(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new de(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,t,i,r,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=a,this.Qu=i.maxAttempts,this.C_=new Mb(this.asyncQueue,"transaction_retry")}$u(){this.Qu-=1,this.Uu()}Uu(){this.C_.f_(async()=>{const e=new YU(this.datastore),t=this.Ku(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Wu(r)}))}).catch(i=>{this.Wu(i)})})}Ku(e){try{const t=this.updateFunction(e);return!cf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Wu(e){this.Qu>0&&this.Gu(e)?(this.Qu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Uu(),Promise.resolve()))):this.deferred.reject(e)}Gu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!tR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="FirestoreClient";class XU{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=sN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{he(Aa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(he(Aa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=mu(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function z0(n,e){n.asyncQueue.verifyOperationInProgress(),he(Aa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await jR(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function TA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Yb(n);he(Aa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>pA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>pA(e.remoteStore,r)),n._onlineComponents=e}async function Yb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Aa,"Using user provided OfflineComponentProvider");try{await z0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Nr("Error using user provided cache. Falling back to memory cache: "+t),await z0(n,new Mh)}}else he(Aa,"Using default OfflineComponentProvider"),await z0(n,new $U(void 0));return n._offlineComponents}async function Xg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Aa,"Using user provided OnlineComponentProvider"),await TA(n,n._uninitializedComponentsProvider._online)):(he(Aa,"Using default OnlineComponentProvider"),await TA(n,new Vh))),n._onlineComponents}function sP(n){return Yb(n).then(e=>e.persistence)}function Qb(n){return Yb(n).then(e=>e.localStore)}function aP(n){return Xg(n).then(e=>e.remoteStore)}function Xb(n){return Xg(n).then(e=>e.syncEngine)}function ZU(n){return Xg(n).then(e=>e.datastore)}async function Qc(n){const e=await Xg(n),t=e.eventManager;return t.onListen=AU.bind(null,e.syncEngine),t.onUnlisten=CU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NU.bind(null,e.syncEngine),t}function JU(n){return n.asyncQueue.enqueue(async()=>{const e=await sP(n),t=await aP(n);return e.setNetworkEnabled(!0),function(r){const a=be(r);return a.Ta.delete(0),vf(a)}(t)})}function eB(n){return n.asyncQueue.enqueue(async()=>{const e=await sP(n),t=await aP(n);return e.setNetworkEnabled(!1),async function(r){const a=be(r);a.Ta.add(0),await du(a),a.da.set("Offline")}(t)})}function tB(n,e){const t=new Tn;return n.asyncQueue.enqueueAndForget(async()=>async function(r,a,l){try{const u=await function(f,p){const v=be(f);return v.persistence.runTransaction("read document","readonly",x=>v.localDocuments.getDocument(x,p))}(r,a);u.isFoundDocument()?l.resolve(u):u.isNoDocument()?l.resolve(null):l.reject(new de(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=mu(u,`Failed to get document '${a} from cache`);l.reject(d)}}(await Qb(n),e,t)),t.promise}function oP(n,e,t={}){const i=new Tn;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,u,d,f){const p=new Qg({next:x=>{p.Cu(),l.enqueueAndForget(()=>Fb(a,v));const _=x.docs.has(u);!_&&x.fromCache?f.reject(new de(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&x.fromCache&&d&&d.source==="server"?f.reject(new de(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new qb(lu(u.path),p,{includeMetadataChanges:!0,La:!0});return Bb(a,v)}(await Qc(n),n.asyncQueue,e,t,i)),i.promise}function nB(n,e){const t=new Tn;return n.asyncQueue.enqueueAndForget(async()=>async function(r,a,l){try{const u=await tg(r,a,!0),d=new JR(a,u.$s),f=d.Za(u.documents),p=d.applyChanges(f,!1);l.resolve(p.snapshot)}catch(u){const d=mu(u,`Failed to execute query '${a} against cache`);l.reject(d)}}(await Qb(n),e,t)),t.promise}function lP(n,e,t={}){const i=new Tn;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,u,d,f){const p=new Qg({next:x=>{p.Cu(),l.enqueueAndForget(()=>Fb(a,v)),x.fromCache&&d.source==="server"?f.reject(new de(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new qb(u,p,{includeMetadataChanges:!0,La:!0});return Bb(a,v)}(await Qc(n),n.asyncQueue,e,t,i)),i.promise}function iB(n,e){const t=new Qg(e);return n.asyncQueue.enqueueAndForget(async()=>function(r,a){be(r).ba.add(a),a.next()}(await Qc(n),t)),()=>{t.Cu(),n.asyncQueue.enqueueAndForget(async()=>function(r,a){be(r).ba.delete(a)}(await Qc(n),t))}}function rB(n,e,t,i){const r=function(l,u){let d;return d=typeof l=="string"?ab().encode(l):l,function(p,v){return new WU(p,v)}(function(p,v){if(p instanceof Uint8Array)return _A(p,v);if(p instanceof ArrayBuffer)return _A(new Uint8Array(p),v);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),u)}(t,yf(e));n.asyncQueue.enqueueAndForget(async()=>{GU(await Xb(n),r,i)})}function sB(n,e){return n.asyncQueue.enqueue(async()=>function(i,r){const a=be(i);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ei.getNamedQuery(l,r))}(await Qb(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n,e,t){if(!t)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uP(n,e,t,i){if(e===!0&&i===!0)throw new de(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SA(n){if(!we.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AA(n){if(we.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Je(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zg(n);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dP(n,e){if(e<=0)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="firestore.googleapis.com",IA=!0;class CA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hP,this.ssl=IA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:IA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A7)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new qL;switch(i.type){case"firstParty":return new KL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=EA.get(t);i&&(he("ComponentProvider","Removing Datastore"),EA.delete(t),i.terminate())}(this),Promise.resolve()}}function aB(n,e,t,i={}){var r;n=Je(n,xf);const a=ef(e),l=n._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;a&&(D4(`https://${d}`),j4("Firestore",!0)),l.host!==hP&&l.host!==d&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!ga(f,u)&&(n._setSettings(f),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=fn.MOCK_USER;else{p=aM(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new fn(x)}n._authCredentials=new HL(new rN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class fP{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fP(this.firestore,e,this._query)}},Ct=class mP{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mP(this.firestore,e,this._key)}},pa=class pP extends Hn{constructor(e,t,i){super(e,t,lu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new we(e))}withConverter(e){return new pP(this.firestore,e,this._path)}};function gP(n,e,...t){if(n=Ne(n),Zb("collection","path",e),n instanceof xf){const i=$e.fromString(e,...t);return AA(i),new pa(n,null,i)}{if(!(n instanceof Ct||n instanceof pa))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($e.fromString(e,...t));return AA(i),new pa(n.firestore,null,i)}}function oB(n,e){if(n=Je(n,xf),Zb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hn(n,null,function(i){return new _s($e.emptyPath(),i)}(e))}function sg(n,e,...t){if(n=Ne(n),arguments.length===1&&(e=sN.newId()),Zb("doc","path",e),n instanceof xf){const i=$e.fromString(e,...t);return SA(i),new Ct(n,null,new we(i))}{if(!(n instanceof Ct||n instanceof pa))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($e.fromString(e,...t));return SA(i),new Ct(n.firestore,n instanceof pa?n.converter:null,new we(i))}}function yP(n,e){return n=Ne(n),e=Ne(e),(n instanceof Ct||n instanceof pa)&&(e instanceof Ct||e instanceof pa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vP(n,e){return n=Ne(n),e=Ne(e),n instanceof Hn&&e instanceof Hn&&n.firestore===e.firestore&&hf(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="AsyncQueue";class RA{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Mb(this,"async_queue_retry"),this.ec=()=>{const i=Cp();i&&he(NA,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=Cp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Cp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Tn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ka(e))throw e;he(NA,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,qt("INTERNAL UNHANDLED ERROR: ",PA(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=Ub.createAndSchedule(this,e,t,i,a=>this.oc(a));return this.Hu.push(r),r}nc(){this.Ju&&Te(47125,{_c:PA(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function PA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1}(n,["next","error","complete"])}class lB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=-1;let Gt=class extends xf{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new RA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RA(e),this._firestoreClient=void 0,await e}}};function kn(n){if(n._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xP(n),n._firestoreClient}function xP(n){var e,t,i;const r=n._freezeSettings(),a=function(u,d,f,p){return new R9(u,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,cP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new XU(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(n._componentsProvider))}function uB(n,e){Nr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return wP(n,Vh.provider,{build:i=>new rP(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function dB(n){Nr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();wP(n,Vh.provider,{build:t=>new KU(t,e.cacheSizeBytes)})}function wP(n,e,t){if((n=Je(n,Gt))._firestoreClient||n._terminated)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(ne.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xP(n)}function hB(n){if(n._initialized&&!n._terminated)throw new de(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!wr.C())return Promise.resolve();const r=i+RR;await wr.delete(r)}(Pb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function fB(n){return function(t){const i=new Tn;return t.asyncQueue.enqueueAndForget(async()=>kU(await Xb(t),i)),i.promise}(kn(n=Je(n,Gt)))}function mB(n){return JU(kn(n=Je(n,Gt)))}function pB(n){return eB(kn(n=Je(n,Gt)))}function gB(n,e){const t=kn(n=Je(n,Gt)),i=new lB;return rB(t,n._databaseId,e,i),i}function yB(n,e){return sB(kn(n=Je(n,Gt)),e).then(t=>t?new Hn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(Vt.fromBase64String(e))}catch(t){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pr(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=/^__.*__$/;class xB{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}class bP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _P(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{hc:n})}}class ey{constructor(e,t,i,r,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new ey(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tc({path:i,Ec:!1});return r.dc(e),r}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tc({path:i,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return ag(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(_P(this.hc)&&vB.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class wB{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||yf(e)}gc(e,t,i,r=!1){return new ey({hc:e,methodName:t,fc:i,path:wt.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ll(n){const e=n._freezeSettings(),t=yf(n._databaseId);return new wB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ty(n,e,t,i,r,a={}){const l=n.gc(a.merge||a.mergeFields?2:0,e,t,r);a_("Data must be an object, but it was:",l,i);const u=SP(i,l);let d,f;if(a.merge)d=new Zn(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const v of a.mergeFields){const x=Qx(e,v,t);if(!l.contains(x))throw new de(ne.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);IP(p,x)||p.push(x)}d=new Zn(p),f=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=l.fieldTransforms;return new xB(new _n(u),d,f)}class wf extends ol{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}function TP(n,e,t){return new ey({hc:3,fc:e.settings.fc,methodName:n._methodName,Ec:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class e_ extends ol{_toFieldTransform(e){return new mf(e.path,new zc)}isEqual(e){return e instanceof e_}}class t_ extends ol{constructor(e,t){super(e),this.yc=t}_toFieldTransform(e){const t=TP(this,e,!0),i=this.yc.map(a=>cl(a,t)),r=new Yo(i);return new mf(e.path,r)}isEqual(e){return e instanceof t_&&ga(this.yc,e.yc)}}class n_ extends ol{constructor(e,t){super(e),this.yc=t}_toFieldTransform(e){const t=TP(this,e,!0),i=this.yc.map(a=>cl(a,t)),r=new Qo(i);return new mf(e.path,r)}isEqual(e){return e instanceof n_&&ga(this.yc,e.yc)}}class i_ extends ol{constructor(e,t){super(e),this.wc=t}_toFieldTransform(e){const t=new qc(e.serializer,WN(e.serializer,this.wc));return new mf(e.path,t)}isEqual(e){return e instanceof i_&&this.wc===e.wc}}function r_(n,e,t,i){const r=n.gc(1,e,t);a_("Data must be an object, but it was:",r,i);const a=[],l=_n.empty();Ma(i,(d,f)=>{const p=o_(e,d,t);f=Ne(f);const v=r.Ac(p);if(f instanceof wf)a.push(p);else{const x=cl(f,v);x!=null&&(a.push(p),l.set(p,x))}});const u=new Zn(a);return new bP(l,u,r.fieldTransforms)}function s_(n,e,t,i,r,a){const l=n.gc(1,e,t),u=[Qx(e,i,t)],d=[r];if(a.length%2!=0)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(Qx(e,a[x])),d.push(a[x+1]);const f=[],p=_n.empty();for(let x=u.length-1;x>=0;--x)if(!IP(f,u[x])){const _=u[x];let T=d[x];T=Ne(T);const C=l.Ac(_);if(T instanceof wf)f.push(_);else{const D=cl(T,C);D!=null&&(f.push(_),p.set(_,D))}}const v=new Zn(f);return new bP(p,v,l.fieldTransforms)}function EP(n,e,t,i=!1){return cl(t,n.gc(i?4:3,e))}function cl(n,e){if(AP(n=Ne(n)))return a_("Unsupported field value:",e,n),SP(n,e);if(n instanceof ol)return function(i,r){if(!_P(r.hc))throw r.Vc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,r){const a=[];let l=0;for(const u of i){let d=cl(u,r.Rc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}}(n,e)}return function(i,r){if((i=Ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:Hc(r.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(r.serializer,a)}}if(i instanceof Jg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Pr)return{bytesValue:sR(r.serializer,i._byteString)};if(i instanceof Ct){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Vc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Eb(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Jb)return function(l,u){return{mapValue:{fields:{[fb]:{stringValue:mb},[Uc]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Vc("VectorValues must only contain numeric values.");return vb(u.serializer,f)})}}}}}}(i,r);throw r.Vc(`Unsupported field value: ${Zg(i)}`)}(n,e)}function SP(n,e){const t={};return TN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(n,(i,r)=>{const a=cl(r,e.Ic(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function AP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Jg||n instanceof Pr||n instanceof Ct||n instanceof ol||n instanceof Jb)}function a_(n,e,t){if(!AP(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=Zg(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function Qx(n,e,t){if((e=Ne(e))instanceof Ia)return e._internalPath;if(typeof e=="string")return o_(n,e);throw ag("Field path arguments must be of type string or ",n,!1,void 0,t)}const bB=new RegExp("[~\\*/\\[\\]]");function o_(n,e,t){if(e.search(bB)>=0)throw ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ia(...e.split("."))._internalPath}catch{throw ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ag(n,e,t,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new de(ne.INVALID_ARGUMENT,u+n+d)}function IP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _B(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ny("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _B extends Oh{data(){return super.data()}}function ny(n,e){return typeof e=="string"?o_(n,e):e instanceof Ia?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l_{}class bf extends l_{}function ra(n,e,...t){let i=[];e instanceof l_&&i.push(e),i=i.concat(t),function(a){const l=a.filter(d=>d instanceof c_).length,u=a.filter(d=>d instanceof iy).length;if(l>1||l>0&&u>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class iy extends bf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new iy(e,t,i)}_apply(e){const t=this._parse(e);return RP(e._query,t),new Hn(e.firestore,e.converter,Vx(e._query,t))}_parse(e){const t=ll(e.firestore);return function(a,l,u,d,f,p,v){let x;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jA(v,p);const T=[];for(const C of v)T.push(DA(d,a,C));x={arrayValue:{values:T}}}else x=DA(d,a,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jA(v,p),x=EP(u,l,v,p==="in"||p==="not-in");return Ke.create(f,p,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function TB(n,e,t){const i=e,r=ny("where",n);return iy._create(r,i,t)}class c_ extends l_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c_(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,a){let l=r;const u=a.getFlattenedFilters();for(const d of u)RP(l,d),l=Vx(l,d)}(e._query,t),new Hn(e.firestore,e.converter,Vx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u_ extends bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new u_(e,t)}_apply(e){const t=function(r,a,l){if(r.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dh(a,l)}(e._query,this._field,this._direction);return new Hn(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new _s(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function EB(n,e="asc"){const t=e,i=ny("orderBy",n);return u_._create(i,t)}class ry extends bf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ry(e,t,i)}_apply(e){return new Hn(e.firestore,e.converter,Qp(e._query,this._limit,this._limitType))}}function SB(n){return dP("limit",n),ry._create("limit",n,"F")}function AB(n){return dP("limitToLast",n),ry._create("limitToLast",n,"L")}class sy extends bf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new sy(e,t,i)}_apply(e){const t=NP(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,function(r,a){return new _s(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)}(e._query,t))}}function IB(...n){return sy._create("startAt",n,!0)}function CB(...n){return sy._create("startAfter",n,!1)}class ay extends bf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new ay(e,t,i)}_apply(e){const t=NP(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,function(r,a){return new _s(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)}(e._query,t))}}function NB(...n){return ay._create("endBefore",n,!1)}function RB(...n){return ay._create("endAt",n,!0)}function NP(n,e,t,i){if(t[0]=Ne(t[0]),t[0]instanceof Oh)return function(a,l,u,d,f){if(!d)throw new de(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const p=[];for(const v of Sc(a))if(v.field.isKeyField())p.push(Ko(l,d.key));else{const x=d.data.field(v.field);if(Bg(x))throw new de(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const _=v.field.canonicalString();throw new de(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}p.push(x)}return new Ea(p,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ll(n.firestore);return function(l,u,d,f,p,v){const x=l.explicitOrderBy;if(p.length>x.length)throw new de(ne.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let T=0;T<p.length;T++){const C=p[T];if(x[T].field.isKeyField()){if(typeof C!="string")throw new de(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof C}`);if(!gb(l)&&C.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${C}' contains a slash.`);const D=l.path.child($e.fromString(C));if(!we.isDocumentKey(D))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const P=new we(D);_.push(Ko(u,P))}else{const D=EP(d,f,C);_.push(D)}}return new Ea(_,v)}(n._query,n.firestore._databaseId,r,e,t,i)}}function DA(n,e,t){if(typeof(t=Ne(t))=="string"){if(t==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gb(e)&&t.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child($e.fromString(t));if(!we.isDocumentKey(i))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ko(n,new we(i))}if(t instanceof Ct)return Ko(n,t._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(t)}.`)}function jA(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RP(n,e){const t=function(r,a){for(const l of r)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class d_{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ma(e,(r,a)=>{i[r]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,r;const a=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[Uc].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>vt(l.doubleValue));return new Jb(a)}convertGeoPoint(e){return new Jg(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Nh(e));default:return null}}convertTimestamp(e){const t=ps(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=$e.fromString(e);Se(gR(i),9688,{name:e});const r=new ba(i.get(1),i.get(3)),a=new we(i.popFirst(5));return r.isEqual(t)||qt(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class PB extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ys=class extends Oh{constructor(e,t,i,r,a,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ny("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ch=class extends ys{data(e={}){return super.data(e)}},Ca=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ch(this._firestore,this._userDataWriter,i.key,i,new Mo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>{const d=new ch(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Mo(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new ch(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Mo(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:DB(u.type),doc:d,oldIndex:f,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function DB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}function PP(n,e){return n instanceof ys&&e instanceof ys?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ca&&e instanceof Ca&&n._firestore===e._firestore&&vP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(n){n=Je(n,Ct);const e=Je(n.firestore,Gt);return oP(kn(e),n._key).then(t=>h_(e,n,t))}class ul extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function kB(n){n=Je(n,Ct);const e=Je(n.firestore,Gt),t=kn(e),i=new ul(e);return tB(t,n._key).then(r=>new ys(e,i,n._key,r,new Mo(r!==null&&r.hasLocalMutations,!0),n.converter))}function MB(n){n=Je(n,Ct);const e=Je(n.firestore,Gt);return oP(kn(e),n._key,{source:"server"}).then(t=>h_(e,n,t))}function VB(n){n=Je(n,Hn);const e=Je(n.firestore,Gt),t=kn(e),i=new ul(e);return CP(n._query),lP(t,n._query).then(r=>new Ca(e,i,n,r))}function OB(n){n=Je(n,Hn);const e=Je(n.firestore,Gt),t=kn(e),i=new ul(e);return nB(t,n._query).then(r=>new Ca(e,i,n,r))}function LB(n){n=Je(n,Hn);const e=Je(n.firestore,Gt),t=kn(e),i=new ul(e);return lP(t,n._query,{source:"server"}).then(r=>new Ca(e,i,n,r))}function kA(n,e,t){n=Je(n,Ct);const i=Je(n.firestore,Gt),r=oy(n.converter,e,t);return _f(i,[ty(ll(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,bt.none())])}function MA(n,e,t,...i){n=Je(n,Ct);const r=Je(n.firestore,Gt),a=ll(r);let l;return l=typeof(e=Ne(e))=="string"||e instanceof Ia?s_(a,"updateDoc",n._key,e,t,i):r_(a,"updateDoc",n._key,e),_f(r,[l.toMutation(n._key,bt.exists(!0))])}function UB(n){return _f(Je(n.firestore,Gt),[new uu(n._key,bt.none())])}function BB(n,e){const t=Je(n.firestore,Gt),i=sg(n),r=oy(n.converter,e);return _f(t,[ty(ll(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,bt.exists(!1))]).then(()=>i)}function DP(n,...e){var t,i,r;n=Ne(n);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Yx(e[l])||(a=e[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Yx(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(n instanceof Ct)f=Je(n.firestore,Gt),p=lu(n._key.path),d={next:v=>{e[l]&&e[l](h_(f,n,v))},error:e[l+1],complete:e[l+2]};else{const v=Je(n,Hn);f=Je(v.firestore,Gt),p=v._query;const x=new ul(f);d={next:_=>{e[l]&&e[l](new Ca(f,x,v,_))},error:e[l+1],complete:e[l+2]},CP(n._query)}return function(x,_,T,C){const D=new Qg(C),P=new qb(_,D,T);return x.asyncQueue.enqueueAndForget(async()=>Bb(await Qc(x),P)),()=>{D.Cu(),x.asyncQueue.enqueueAndForget(async()=>Fb(await Qc(x),P))}}(kn(f),p,u,d)}function FB(n,e){return iB(kn(n=Je(n,Gt)),Yx(e)?e:{next:e})}function _f(n,e){return function(i,r){const a=new Tn;return i.asyncQueue.enqueueAndForget(async()=>RU(await Xb(i),r,a)),a.promise}(kn(n),e)}function h_(n,e,t){const i=t.docs.get(e._key),r=new ul(n);return new ys(n,r,e._key,i,new Mo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qB=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ll(e)}set(e,t,i){this._verifyNotCommitted();const r=ca(e,this._firestore),a=oy(r.converter,t,i),l=ty(this._dataReader,"WriteBatch.set",r._key,a,r.converter!==null,i);return this._mutations.push(l.toMutation(r._key,bt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const a=ca(e,this._firestore);let l;return l=typeof(t=Ne(t))=="string"||t instanceof Ia?s_(this._dataReader,"WriteBatch.update",a._key,t,i,r):r_(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ca(e,this._firestore);return this._mutations=this._mutations.concat(new uu(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ca(n,e){if((n=Ne(n)).firestore!==e)throw new de(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ll(e)}get(e){const t=ca(e,this._firestore),i=new PB(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||r.length!==1)return Te(24041);const a=r[0];if(a.isFoundDocument())return new Oh(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new Oh(this._firestore,i,t._key,null,t.converter);throw Te(18433,{doc:a})})}set(e,t,i){const r=ca(e,this._firestore),a=oy(r.converter,t,i),l=ty(this._dataReader,"Transaction.set",r._key,a,r.converter!==null,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const a=ca(e,this._firestore);let l;return l=typeof(t=Ne(t))=="string"||t instanceof Ia?s_(this._dataReader,"Transaction.update",a._key,t,i,r):r_(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=ca(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GB=class extends HB{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ca(e,this._firestore),i=new ul(this._firestore);return super.get(e).then(r=>new ys(this._firestore,i,t._key,r._document,new Mo(!1,!1),t.converter))}};function $B(n,e,t){n=Je(n,Gt);const i=Object.assign(Object.assign({},zB),t);return function(a){if(a.maxAttempts<1)throw new de(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,l,u){const d=new Tn;return a.asyncQueue.enqueueAndForget(async()=>{const f=await ZU(a);new QU(a.asyncQueue,f,u,l,d).$u()}),d.promise}(kn(n),r=>e(new GB(n,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(){return new wf("deleteField")}function WB(){return new e_("serverTimestamp")}function YB(...n){return new t_("arrayUnion",n)}function QB(...n){return new n_("arrayRemove",n)}function XB(n){return new i_("increment",n)}(function(e,t=!0){(function(r){ou=r})(Pa),xa(new Ir("firestore",(i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),u=new Gt(new GL(i.getProvider("auth-internal")),new WL(l,i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(f.options.projectId,p)}(l,r),l);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Gi(uS,dS,e),Gi(uS,dS,"esm2017")})();const ZB="@firebase/firestore-compat",JB="0.3.51";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new de("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function OA(){if(!C9())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Lh{constructor(e){this._delegate=e}static fromBase64String(e){return OA(),new Lh(Pr.fromBase64String(e))}static fromUint8Array(e){return VA(),new Lh(Pr.fromUint8Array(e))}toBase64(){return OA(),this._delegate.toBase64()}toUint8Array(){return VA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){return eF(n,["next","error","complete"])}function eF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{enableIndexedDbPersistence(e,t){return uB(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return dB(e._delegate)}clearIndexedDbPersistence(e){return hB(e._delegate)}}class jP{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ba||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){aB(this._delegate,e,t,i)}enableNetwork(){return mB(this._delegate)}disableNetwork(){return pB(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,uP("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return fB(this._delegate)}onSnapshotsInSync(e){return FB(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xc(this,gP(this._delegate,e))}catch(t){throw Bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Di(this,sg(this._delegate,e))}catch(t){throw Bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Un(this,oB(this._delegate,e))}catch(t){throw Bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return $B(this._delegate,t=>e(new kP(this,t)))}batch(){return kn(this._delegate),new MP(new qB(this._delegate,e=>_f(this._delegate,e)))}loadBundle(e){return gB(this._delegate,e)}namedQuery(e){return yB(this._delegate,e).then(t=>t?new Un(this,t):null)}}class ly extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lh(new Pr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Di.forKey(t,this.firestore,null)}}function nF(n){FL(n)}class kP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ly(e)}get(e){const t=Vo(e);return this._delegate.get(t).then(i=>new Uh(this._firestore,new ys(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Vo(e);return i?(f_("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=Vo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=Vo(e);return this._delegate.delete(t),this}}class MP{constructor(e){this._delegate=e}set(e,t,i){const r=Vo(e);return i?(f_("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=Vo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=Vo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new ch(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bh(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=tl.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let a=r.get(t);return a||(a=new tl(e,new ly(e),t),r.set(t,a)),a}}tl.INSTANCES=new WeakMap;class Di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ly(e)}static forPath(e,t,i){if(e.length%2!==0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Di(t,new Ct(t._delegate,i,new we(e)))}static forKey(e,t,i){return new Di(t,new Ct(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xc(this.firestore,gP(this._delegate,e))}catch(t){throw Bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ne(e),e instanceof Ct?yP(this._delegate,e):!1}set(e,t){t=f_("DocumentReference.set",t);try{return t?kA(this._delegate,e,t):kA(this._delegate,e)}catch(i){throw Bn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?MA(this._delegate,e):MA(this._delegate,e,t,...i)}catch(r){throw Bn(r,"updateDoc()","DocumentReference.update()")}}delete(){return UB(this._delegate)}onSnapshot(...e){const t=VP(e),i=OP(e,r=>new Uh(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return DP(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=kB(this._delegate):(e==null?void 0:e.source)==="server"?t=MB(this._delegate):t=jB(this._delegate),t.then(i=>new Uh(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Di(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bn(n,e,t){return n.message=n.message.replace(e,t),n}function VP(n){for(const e of n)if(typeof e=="object"&&!Xx(e))return e;return{}}function OP(n,e){var t,i;let r;return Xx(n[0])?r=n[0]:Xx(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:a=>{r.next&&r.next(e(a))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Uh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Di(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PP(this._delegate,e._delegate)}}class Bh extends Uh{data(e){const t=this._delegate.data(e);return this._delegate._converter||zL(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Un{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ly(e)}where(e,t,i){try{return new Un(this.firestore,ra(this._delegate,TB(e,t,i)))}catch(r){throw Bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Un(this.firestore,ra(this._delegate,EB(e,t)))}catch(i){throw Bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Un(this.firestore,ra(this._delegate,SB(e)))}catch(t){throw Bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Un(this.firestore,ra(this._delegate,AB(e)))}catch(t){throw Bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Un(this.firestore,ra(this._delegate,IB(...e)))}catch(t){throw Bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Un(this.firestore,ra(this._delegate,CB(...e)))}catch(t){throw Bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Un(this.firestore,ra(this._delegate,NB(...e)))}catch(t){throw Bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Un(this.firestore,ra(this._delegate,RB(...e)))}catch(t){throw Bn(t,"endAt()","Query.endAt()")}}isEqual(e){return vP(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=OB(this._delegate):(e==null?void 0:e.source)==="server"?t=LB(this._delegate):t=VB(this._delegate),t.then(i=>new Zx(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=VP(e),i=OP(e,r=>new Zx(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return DP(this._delegate,t,i)}withConverter(e){return new Un(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class iF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Un(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iF(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Bh(this._firestore,i))})}isEqual(e){return PP(this._delegate,e._delegate)}}class Xc extends Un{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Di(this.firestore,e):null}doc(e){try{return e===void 0?new Di(this.firestore,sg(this._delegate)):new Di(this.firestore,sg(this._delegate,e))}catch(t){throw Bn(t,"doc()","CollectionReference.doc()")}}add(e){return BB(this._delegate,e).then(t=>new Di(this.firestore,t))}isEqual(e){return yP(this._delegate,e._delegate)}withConverter(e){return new Xc(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Vo(n){return Je(n,Ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(...e){this._delegate=new Ia(...e)}static documentId(){return new m_(wt.keyField().canonicalString())}isEqual(e){return e=Ne(e),e instanceof Ia?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static serverTimestamp(){const e=WB();return e._methodName="FieldValue.serverTimestamp",new Do(e)}static delete(){const e=KB();return e._methodName="FieldValue.delete",new Do(e)}static arrayUnion(...e){const t=YB(...e);return t._methodName="FieldValue.arrayUnion",new Do(t)}static arrayRemove(...e){const t=QB(...e);return t._methodName="FieldValue.arrayRemove",new Do(t)}static increment(e){const t=XB(e);return t._methodName="FieldValue.increment",new Do(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF={Firestore:jP,GeoPoint:Jg,Timestamp:_t,Blob:Lh,Transaction:kP,WriteBatch:MP,DocumentReference:Di,DocumentSnapshot:Uh,Query:Un,QueryDocumentSnapshot:Bh,QuerySnapshot:Zx,CollectionReference:Xc,FieldPath:m_,FieldValue:Do,setLogLevel:nF,CACHE_SIZE_UNLIMITED:cB};function sF(n,e){n.INTERNAL.registerComponent(new Ir("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},rF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n){sF(n,(e,t)=>new jP(e,t,new tF)),n.registerVersion(ZB,JB)}aF(te);const oF={apiKey:"AIzaSyAtwinHNzdzegzSObfcjbo85Gz6gyMUDts",authDomain:"buyngo-a5545.firebaseapp.com",projectId:"buyngo-a5545",storageBucket:"buyngo-a5545.appspot.com",messagingSenderId:"1040711699061",appId:"1:1040711699061:web:9a6c6ca2fdd2420009863c",measurementId:"G-5FL0MPKZ7G"};te.initializeApp(oF);te.auth();te.firestore();const LP=new te.auth.GoogleAuthProvider,UP=new te.auth.FacebookAuthProvider,lF=()=>m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),cF=()=>m.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z",fill:"#1877F2"})});function uF(){const n=ti(),[e,t]=k.useState(""),[i,r]=k.useState({username:"",email:"",password:"",role:"buyer"}),[a,l]=k.useState({username:"",email:"",password:""}),[u,d]=k.useState(!1),f=async T=>(await te.firestore().collection("users").where("username","==",T).get()).empty,p=async T=>(await te.firestore().collection("users").where("email","==",T).get()).empty,v=async()=>{let T=!0;const C={username:"",email:"",password:""};return i.username.length<3?(C.username="Username must be 3+ characters!",T=!1):/^[a-zA-Z]/.test(i.username)?/^[a-zA-Z0-9_]+$/.test(i.username)?await f(i.username)||(C.username="Username taken!",T=!1):(C.username="Only letters, numbers and underscores!",T=!1):(C.username="Username must start with a letter!",T=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)?await p(i.email)||(C.email="Email already registered!",T=!1):(C.email="Invalid email format!",T=!1),i.password.length<8?(C.password="Password must be 8+ characters!",T=!1):/[A-Z]/.test(i.password)?/[!@#$%^&*]/.test(i.password)||(C.password="Need at least 1 special character!",T=!1):(C.password="Need at least 1 uppercase letter!",T=!1),l(C),T},x=async T=>{if(T.preventDefault(),t(""),d(!0),await v())try{const{user:C}=await te.auth().createUserWithEmailAndPassword(i.email,i.password);await te.firestore().collection("users").doc(C.uid).set({username:i.username,email:i.email,role:i.role,createdAt:te.firestore.FieldValue.serverTimestamp(),lastLogin:te.firestore.FieldValue.serverTimestamp()}),n("/")}catch(C){C.code==="auth/email-already-in-use"&&l(D=>({...D,email:"Email already registered!"}))}finally{d(!1)}else d(!1)},_=async T=>{try{d(!0),t("");const C=T==="google"?LP:UP,{user:D}=await te.auth().signInWithPopup(C),P=te.firestore().collection("users").doc(D.uid),I=await P.get();if(!I.exists)return await P.set({username:D.displayName||D.email.split("@")[0],email:D.email,role:"buyer",createdAt:te.firestore.FieldValue.serverTimestamp(),lastLogin:te.firestore.FieldValue.serverTimestamp()}),n("/");switch(await P.update({lastLogin:te.firestore.FieldValue.serverTimestamp()}),I.data().role){case"admin":n("/admindashboard");break;case"seller":n("/sellerdashboard");break;default:n("/")}}catch(C){C.code==="auth/account-exists-with-different-credential"?t("This email is already registerd with a differnt login method. Try signing in with email/password."):C.code==="auth/popup-closed-by-user"?t("Login popup was closed. Please try again."):C.code==="auth/cancelled-popup-request"||t(C.message||"Failed to sign in. Please try again.")}finally{d(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-light to-primary-dark flex items-center justify-center p-4 sm:p-6",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden",children:[m.jsxs("div",{className:"bg-primary-DEFAULT p-6 text-center",children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-heading font-bold text-primary-light",children:"Join Our Community"}),m.jsx("p",{className:"text-primary-DEFAULT mt-1",children:"Sign up to get started"})]}),m.jsxs("div",{className:"p-6 sm:p-8",children:[e&&m.jsx("div",{className:"mb-4 p-3 bg-accent-red/10 border-l-4 border-accent-red text-accent-red rounded-lg",children:m.jsx("p",{children:e})}),m.jsxs("form",{onSubmit:x,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-dark-DEFAULT mb-1",children:"Username"}),m.jsx("input",{id:"username",type:"text",value:i.username,onChange:T=>{r({...i,username:T.target.value}),l({...a,username:""})},className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 ${a.username?"border-accent-red focus:ring-accent-red/30":"border-gray-300 focus:border-primary-DEFAULT focus:ring-primary-light/50"}`,placeholder:"Username",autoComplete:"username"}),a.username&&m.jsx("p",{className:"mt-1 text-sm text-accent-red",children:a.username})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-DEFAULT mb-1",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:i.email,onChange:T=>{r({...i,email:T.target.value}),l({...a,email:""})},className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 ${a.email?"border-accent-red focus:ring-accent-red/30":"border-gray-300 focus:border-primary-DEFAULT focus:ring-primary-light/50"}`,placeholder:"Name@example.com",autoComplete:"email"}),a.email&&m.jsx("p",{className:"mt-1 text-sm text-accent-red",children:a.email})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-DEFAULT mb-1",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:i.password,onChange:T=>{r({...i,password:T.target.value}),l({...a,password:""})},className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 ${a.password?"border-accent-red focus:ring-accent-red/30":"border-gray-300 focus:border-primary-DEFAULT focus:ring-primary-light/50"}`,placeholder:"••••••••",autoComplete:"new-password"}),a.password&&m.jsx("p",{className:"mt-1 text-sm text-accent-red",children:a.password})]}),m.jsx("button",{type:"submit",className:`w-full py-3 px-4 rounded-lg font-medium bg-primary-dark text-white transition-colors ${u?"bg-primary-light cursor-not-allowed":"hover:bg-primary-dark/80"}`,children:u?m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create Account"})]}),m.jsxs("div",{className:"my-6 relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-300"})}),m.jsx("div",{className:"relative flex justify-center",children:m.jsx("span",{className:"bg-white px-2 text-sm text-dark-muted",children:"OR CONTINUE WITH"})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{type:"button",onClick:()=>_("google"),className:"flex items-center justify-center gap-2 w-full py-2 px-4 rounded-lg border border-gray-300 bg-white text-dark-DEFAULT hover:bg-gray-100 transition-colors disabled:opacity-50",children:[m.jsx(lF,{}),m.jsx("span",{children:"Google"})]}),m.jsxs("button",{type:"button",onClick:()=>_("facebook"),className:"flex items-center justify-center gap-2 w-full py-2 px-4 rounded-lg border border-gray-300 bg-white text-dark-DEFAULT hover:bg-gray-100 transition-colors disabled:opacity-50",children:[m.jsx(cF,{}),m.jsx("span",{children:"Facebook"})]})]}),m.jsx("div",{className:"mt-6 text-center text-sm text-dark-muted",children:m.jsxs("p",{children:["Already have an account?"," ",m.jsx(Xt,{to:"/signin",className:"font-medium text-primary-DEFAULT hover:text-primary-dark",children:"Sign in"})]})})]})]})})}const dF=()=>{const n=ti(),[e,t]=k.useState({login:"",password:""}),[i,r]=k.useState({login:"",password:""}),[a,l]=k.useState(!1),[u,d]=k.useState(""),f=()=>{let T=!0;const C={login:"",password:""};return e.login.trim()||(C.login="Email or username is required",T=!1),e.password?e.password.length<6&&(C.password="Password must be at least 6 characters",T=!1):(C.password="Password is required",T=!1),r(C),T},p=async T=>{if(T.preventDefault(),d(""),!!f()){l(!0);try{let C;try{C=await te.auth().signInWithEmailAndPassword(e.login,e.password)}catch(I){if(I.code==="auth/invalid-email"){const N=await te.firestore().collection("users").where("username","==",e.login).limit(1).get();if(N.empty)throw new Error("Invalid email/username or password");const z=N.docs[0].data();C=await te.auth().signInWithEmailAndPassword(z.email,e.password)}else throw I}const D=await te.firestore().collection("users").doc(C.user.uid).get();if(!D.exists)throw new Error("User data not found");const P=D.data();switch(await te.firestore().collection("users").doc(C.user.uid).update({lastLogin:te.firestore.FieldValue.serverTimestamp()}),P.role){case"admin":n("/admindashboard");break;case"seller":n("/sellerdashboard");break;default:n("/")}}catch(C){d(C.message),l(!1)}}},v=async T=>{try{l(!0);const C=T==="google"?LP:UP,{user:D}=await te.auth().signInWithPopup(C),P=te.firestore().collection("users").doc(D.uid),I=await P.get();if(!I.exists)return await P.set({username:D.displayName||D.email.split("@")[0],email:D.email,role:"buyer",createdAt:te.firestore.FieldValue.serverTimestamp(),lastLogin:te.firestore.FieldValue.serverTimestamp()}),n("/");switch(await P.update({lastLogin:te.firestore.FieldValue.serverTimestamp()}),I.data().role){case"admin":n("/admindashboard");break;case"seller":n("/sellerdashboard");break;default:n("/")}}catch(C){d(C.message)}finally{l(!1)}},x=()=>m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),_=()=>m.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z",fill:"#1877F2"})});return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-light to-primary-dark flex items-center justify-center p-4 sm:p-6",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl",children:[m.jsxs("div",{className:"bg-primary-DEFAULT p-6 text-center",children:[m.jsx("h1",{className:"text-3xl font-heading font-bold text-primary-light",children:"Welcome Back"}),m.jsx("p",{className:"text-primary-DEFAULT mt-2",children:"Sign in to your account"})]}),m.jsxs("div",{className:"p-6 sm:p-8",children:[u&&m.jsx("div",{className:"mb-5 p-3 bg-accent-red/10 border-l-4 border-accent-red text-accent-red rounded-lg",children:m.jsx("p",{className:"text-sm",children:u})}),m.jsxs("form",{onSubmit:p,className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"login",className:"block text-sm font-medium text-dark-DEFAULT mb-1.5",children:"Email or Username"}),m.jsx("input",{id:"login",type:"text",value:e.login,onChange:T=>{t({...e,login:T.target.value}),r({...i,login:""})},className:`w-full px-4 py-2.5 rounded-lg border focus:outline-none focus:ring-2 transition-all ${i.login?"border-accent-red focus:ring-accent-red/20":"border-gray-300 focus:border-primary-DEFAULT focus:ring-primary-light/50"}`,placeholder:"Enter your email or username"}),i.login&&m.jsxs("p",{className:"mt-1.5 text-xs text-accent-red flex items-center",children:[m.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.login]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-DEFAULT mb-1.5",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:e.password,onChange:T=>{t({...e,password:T.target.value}),r({...i,password:""})},className:`w-full px-4 py-2.5 rounded-lg border focus:outline-none focus:ring-2 transition-all ${i.password?"border-accent-red focus:ring-accent-red/20":"border-gray-300 focus:border-primary-DEFAULT focus:ring-primary-light/50"}`,placeholder:"••••••••"}),i.password&&m.jsxs("p",{className:"mt-1.5 text-xs text-accent-red flex items-center",children:[m.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.password]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(Xt,{to:"/forgot-password",className:"text-xs text-primary-DEFAULT hover:text-primary-dark transition-colors",children:"Forgot password?"})}),m.jsx("button",{type:"submit",className:`w-full py-3 px-4 rounded-lg font-medium bg-primary-dark text-white transition-all duration-200 ${a?"bg-primary-light cursor-not-allowed":"hover:bg-primary-dark/80 shadow-md hover:shadow-lg"}`,children:a?m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]}),m.jsx("div",{className:"my-6",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-200"})}),m.jsx("div",{className:"relative flex justify-center",children:m.jsx("span",{className:"bg-white px-2 text-xs text-dark-muted uppercase tracking-wider",children:"Or continue with"})})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{type:"button",onClick:()=>v("google"),disabled:a,className:"flex items-center justify-center gap-2 w-full py-2 px-4 rounded-lg border border-gray-300 bg-white text-dark-DEFAULT hover:bg-gray-100 transition-colors disabled:opacity-50",children:[m.jsx(x,{}),m.jsx("span",{children:"Google"})]}),m.jsxs("button",{type:"button",onClick:()=>v("facebook"),disabled:a,className:"flex items-center justify-center gap-2 w-full py-2 px-4 rounded-lg border border-gray-300 bg-white text-dark-DEFAULT hover:bg-gray-100 transition-colors disabled:opacity-50",children:[m.jsx(_,{}),m.jsx("span",{children:"Facebook"})]})]}),m.jsx("div",{className:"mt-6 text-center text-sm text-dark-muted",children:m.jsxs("p",{children:["Don't have an account?"," ",m.jsx(Xt,{to:"/signup",className:"font-medium text-primary-DEFAULT hover:text-primary-dark transition-colors",children:"Sign up"})]})})]})]})})})},p_=k.createContext({});function g_(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const y_=typeof window<"u",BP=y_?k.useLayoutEffect:k.useEffect,cy=k.createContext(null);function v_(n,e){n.indexOf(e)===-1&&n.push(e)}function x_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const vs=(n,e,t)=>t>e?e:t<n?n:t;let w_=()=>{};const xs={},FP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function zP(n){return typeof n=="object"&&n!==null}const qP=n=>/^0[^.\s]+$/u.test(n);function b_(n){let e;return()=>(e===void 0&&(e=n()),e)}const ki=n=>n,hF=(n,e)=>t=>e(n(t)),Tf=(...n)=>n.reduce(hF),Fh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class __{constructor(){this.subscriptions=[]}add(e){return v_(this.subscriptions,e),()=>x_(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _r=n=>n*1e3,Tr=n=>n/1e3;function HP(n,e){return e?n*(1e3/e):0}const GP=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fF=1e-7,mF=12;function pF(n,e,t,i,r){let a,l,u=0;do l=e+(t-e)/2,a=GP(l,i,r)-n,a>0?t=l:e=l;while(Math.abs(a)>fF&&++u<mF);return l}function Ef(n,e,t,i){if(n===e&&t===i)return ki;const r=a=>pF(a,0,1,n,t);return a=>a===0||a===1?a:GP(r(a),e,i)}const $P=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,KP=n=>e=>1-n(1-e),WP=Ef(.33,1.53,.69,.99),T_=KP(WP),YP=$P(T_),QP=n=>(n*=2)<1?.5*T_(n):.5*(2-Math.pow(2,-10*(n-1))),E_=n=>1-Math.sin(Math.acos(n)),XP=KP(E_),ZP=$P(E_),gF=Ef(.42,0,1,1),yF=Ef(0,0,.58,1),JP=Ef(.42,0,.58,1),vF=n=>Array.isArray(n)&&typeof n[0]!="number",e3=n=>Array.isArray(n)&&typeof n[0]=="number",xF={linear:ki,easeIn:gF,easeInOut:JP,easeOut:yF,circIn:E_,circInOut:ZP,circOut:XP,backIn:T_,backInOut:YP,backOut:WP,anticipate:QP},wF=n=>typeof n=="string",LA=n=>{if(e3(n)){w_(n.length===4);const[e,t,i,r]=n;return Ef(e,t,i,r)}else if(wF(n))return xF[n];return n},ap=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],UA={value:null};function bF(n,e){let t=new Set,i=new Set,r=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(v){l.has(v)&&(p.schedule(v),n()),d++,v(u)}const p={schedule:(v,x=!1,_=!1)=>{const C=_&&r?t:i;return x&&l.add(v),C.has(v)||C.add(v),v},cancel:v=>{i.delete(v),l.delete(v)},process:v=>{if(u=v,r){a=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),e&&UA.value&&UA.value.frameloop[e].push(d),d=0,t.clear(),r=!1,a&&(a=!1,p.process(v))}};return p}const _F=40;function t3(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=ap.reduce((N,z)=>(N[z]=bF(a,e?z:void 0),N),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:v,preRender:x,render:_,postRender:T}=l,C=()=>{const N=xs.useManualTiming?r.timestamp:performance.now();t=!1,xs.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(N-r.timestamp,_F),1)),r.timestamp=N,r.isProcessing=!0,u.process(r),d.process(r),f.process(r),p.process(r),v.process(r),x.process(r),_.process(r),T.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(C))},D=()=>{t=!0,i=!0,r.isProcessing||n(C)};return{schedule:ap.reduce((N,z)=>{const F=l[z];return N[z]=(H,j=!1,S=!1)=>(t||D(),F.schedule(H,j,S)),N},{}),cancel:N=>{for(let z=0;z<ap.length;z++)l[ap[z]].cancel(N)},state:r,steps:l}}const{schedule:Nt,cancel:Na,state:wn,steps:q0}=t3(typeof requestAnimationFrame<"u"?requestAnimationFrame:ki,!0);let Np;function TF(){Np=void 0}const ei={now:()=>(Np===void 0&&ei.set(wn.isProcessing||xs.useManualTiming?wn.timestamp:performance.now()),Np),set:n=>{Np=n,queueMicrotask(TF)}},n3=n=>e=>typeof e=="string"&&e.startsWith(n),S_=n3("--"),EF=n3("var(--"),A_=n=>EF(n)?SF.test(n.split("/*")[0].trim()):!1,SF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},zh={...pu,transform:n=>vs(0,1,n)},op={...pu,default:1},uh=n=>Math.round(n*1e5)/1e5,I_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AF(n){return n==null}const IF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,C_=(n,e)=>t=>!!(typeof t=="string"&&IF.test(t)&&t.startsWith(n)||e&&!AF(t)&&Object.prototype.hasOwnProperty.call(t,e)),i3=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,a,l,u]=i.match(I_);return{[n]:parseFloat(r),[e]:parseFloat(a),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},CF=n=>vs(0,255,n),H0={...pu,transform:n=>Math.round(CF(n))},Oo={test:C_("rgb","red"),parse:i3("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+H0.transform(n)+", "+H0.transform(e)+", "+H0.transform(t)+", "+uh(zh.transform(i))+")"};function NF(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Jx={test:C_("#"),parse:NF,transform:Oo.transform},Sf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),sa=Sf("deg"),Er=Sf("%"),ke=Sf("px"),RF=Sf("vh"),PF=Sf("vw"),BA={...Er,parse:n=>Er.parse(n)/100,transform:n=>Er.transform(n*100)},gc={test:C_("hsl","hue"),parse:i3("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Er.transform(uh(e))+", "+Er.transform(uh(t))+", "+uh(zh.transform(i))+")"},Rn={test:n=>Oo.test(n)||Jx.test(n)||gc.test(n),parse:n=>Oo.test(n)?Oo.parse(n):gc.test(n)?gc.parse(n):Jx.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Oo.transform(n):gc.transform(n)},DF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jF(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(I_))==null?void 0:e.length)||0)+(((t=n.match(DF))==null?void 0:t.length)||0)>0}const r3="number",s3="color",kF="var",MF="var(",FA="${}",VF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let a=0;const u=e.replace(VF,d=>(Rn.test(d)?(i.color.push(a),r.push(s3),t.push(Rn.parse(d))):d.startsWith(MF)?(i.var.push(a),r.push(kF),t.push(d)):(i.number.push(a),r.push(r3),t.push(parseFloat(d))),++a,FA)).split(FA);return{values:t,split:u,indexes:i,types:r}}function a3(n){return qh(n).values}function o3(n){const{split:e,types:t}=qh(n),i=e.length;return r=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],r[l]!==void 0){const u=t[l];u===r3?a+=uh(r[l]):u===s3?a+=Rn.transform(r[l]):a+=r[l]}return a}}const OF=n=>typeof n=="number"?0:n;function LF(n){const e=a3(n);return o3(n)(e.map(OF))}const Ra={test:jF,parse:a3,createTransformer:o3,getAnimatableNone:LF};function G0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function UF({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,a=0,l=0;if(!e)r=a=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;r=G0(d,u,n+1/3),a=G0(d,u,n),l=G0(d,u,n-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function og(n,e){return t=>t>0?e:n}const St=(n,e,t)=>n+(e-n)*t,$0=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},BF=[Jx,Oo,gc],FF=n=>BF.find(e=>e.test(n));function zA(n){const e=FF(n);if(!e)return!1;let t=e.parse(n);return e===gc&&(t=UF(t)),t}const qA=(n,e)=>{const t=zA(n),i=zA(e);if(!t||!i)return og(n,e);const r={...t};return a=>(r.red=$0(t.red,i.red,a),r.green=$0(t.green,i.green,a),r.blue=$0(t.blue,i.blue,a),r.alpha=St(t.alpha,i.alpha,a),Oo.transform(r))},ew=new Set(["none","hidden"]);function zF(n,e){return ew.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function qF(n,e){return t=>St(n,e,t)}function N_(n){return typeof n=="number"?qF:typeof n=="string"?A_(n)?og:Rn.test(n)?qA:$F:Array.isArray(n)?l3:typeof n=="object"?Rn.test(n)?qA:HF:og}function l3(n,e){const t=[...n],i=t.length,r=n.map((a,l)=>N_(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)t[l]=r[l](a);return t}}function HF(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=N_(n[r])(n[r],e[r]));return r=>{for(const a in i)t[a]=i[a](r);return t}}function GF(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],l=n.indexes[a][i[a]],u=n.values[l]??0;t[r]=u,i[a]++}return t}const $F=(n,e)=>{const t=Ra.createTransformer(e),i=qh(n),r=qh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?ew.has(n)&&!r.values.length||ew.has(e)&&!i.values.length?zF(n,e):Tf(l3(GF(i,r),r.values),t):og(n,e)};function c3(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?St(n,e,t):N_(n)(n,e)}const KF=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Nt.update(e,t),stop:()=>Na(e),now:()=>wn.isProcessing?wn.timestamp:ei.now()}},u3=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let a=0;a<r;a++)i+=n(a/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},lg=2e4;function R_(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<lg;)e+=t,i=n.next(e);return e>=lg?1/0:e}function WF(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(R_(i),lg);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:Tr(r)}}const YF=5;function d3(n,e,t){const i=Math.max(e-YF,0);return HP(t-n(i),e-i)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},HA=.001;function QF({duration:n=Mt.duration,bounce:e=Mt.bounce,velocity:t=Mt.velocity,mass:i=Mt.mass}){let r,a,l=1-e;l=vs(Mt.minDamping,Mt.maxDamping,l),n=vs(Mt.minDuration,Mt.maxDuration,Tr(n)),l<1?(r=f=>{const p=f*l,v=p*n,x=p-t,_=tw(f,l),T=Math.exp(-v);return HA-x/_*T},a=f=>{const v=f*l*n,x=v*t+t,_=Math.pow(l,2)*Math.pow(f,2)*n,T=Math.exp(-v),C=tw(Math.pow(f,2),l);return(-r(f)+HA>0?-1:1)*((x-_)*T)/C}):(r=f=>{const p=Math.exp(-f*n),v=(f-t)*n+1;return-.001+p*v},a=f=>{const p=Math.exp(-f*n),v=(t-f)*(n*n);return p*v});const u=5/n,d=ZF(r,a,u);if(n=_r(n),isNaN(d))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const XF=12;function ZF(n,e,t){let i=t;for(let r=1;r<XF;r++)i=i-n(i)/e(i);return i}function tw(n,e){return n*Math.sqrt(1-e*e)}const JF=["duration","bounce"],ez=["stiffness","damping","mass"];function GA(n,e){return e.some(t=>n[t]!==void 0)}function tz(n){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...n};if(!GA(n,ez)&&GA(n,JF))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,a=2*vs(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Mt.mass,stiffness:r,damping:a}}else{const t=QF(n);e={...e,...t,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function cg(n=Mt.visualDuration,e=Mt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:p,duration:v,velocity:x,isResolvedFromDuration:_}=tz({...t,velocity:-Tr(t.velocity||0)}),T=x||0,C=f/(2*Math.sqrt(d*p)),D=l-a,P=Tr(Math.sqrt(d/p)),I=Math.abs(D)<5;i||(i=I?Mt.restSpeed.granular:Mt.restSpeed.default),r||(r=I?Mt.restDelta.granular:Mt.restDelta.default);let N;if(C<1){const F=tw(P,C);N=H=>{const j=Math.exp(-C*P*H);return l-j*((T+C*P*D)/F*Math.sin(F*H)+D*Math.cos(F*H))}}else if(C===1)N=F=>l-Math.exp(-P*F)*(D+(T+P*D)*F);else{const F=P*Math.sqrt(C*C-1);N=H=>{const j=Math.exp(-C*P*H),S=Math.min(F*H,300);return l-j*((T+C*P*D)*Math.sinh(S)+F*D*Math.cosh(S))/F}}const z={calculatedDuration:_&&v||null,next:F=>{const H=N(F);if(_)u.done=F>=v;else{let j=F===0?T:0;C<1&&(j=F===0?_r(T):d3(N,F,H));const S=Math.abs(j)<=i,R=Math.abs(l-H)<=r;u.done=S&&R}return u.value=u.done?l:H,u},toString:()=>{const F=Math.min(R_(z),lg),H=u3(j=>z.next(F*j).value,F,30);return F+"ms "+H},toTransition:()=>{}};return z}cg.applyToOptions=n=>{const e=WF(n,100,cg);return n.ease=e.ease,n.duration=_r(e.duration),n.type="keyframes",n};function nw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:p}){const v=n[0],x={done:!1,value:v},_=S=>u!==void 0&&S<u||d!==void 0&&S>d,T=S=>u===void 0?d:d===void 0||Math.abs(u-S)<Math.abs(d-S)?u:d;let C=t*e;const D=v+C,P=l===void 0?D:l(D);P!==D&&(C=P-v);const I=S=>-C*Math.exp(-S/i),N=S=>P+I(S),z=S=>{const R=I(S),V=N(S);x.done=Math.abs(R)<=f,x.value=x.done?P:V};let F,H;const j=S=>{_(x.value)&&(F=S,H=cg({keyframes:[x.value,T(x.value)],velocity:d3(N,S,x.value),damping:r,stiffness:a,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:S=>{let R=!1;return!H&&F===void 0&&(R=!0,z(S),j(S)),F!==void 0&&S>=F?H.next(S-F):(!R&&z(S),x)}}}function nz(n,e,t){const i=[],r=t||xs.mix||c3,a=n.length-1;for(let l=0;l<a;l++){let u=r(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||ki:e;u=Tf(d,u)}i.push(u)}return i}function iz(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const a=n.length;if(w_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=nz(e,i,r),d=u.length,f=p=>{if(l&&p<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(p<n[v+1]);v++);const x=Fh(n[v],n[v+1],p);return u[v](x)};return t?p=>f(vs(n[0],n[a-1],p)):f}function rz(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Fh(0,e,i);n.push(St(t,1,r))}}function sz(n){const e=[0];return rz(e,n.length-1),e}function az(n,e){return n.map(t=>t*e)}function oz(n,e){return n.map(()=>e||JP).splice(0,n.length-1)}function dh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=vF(i)?i.map(LA):LA(i),a={done:!1,value:e[0]},l=az(t&&t.length===e.length?t:sz(e),n),u=iz(l,e,{ease:Array.isArray(r)?r:oz(e,r)});return{calculatedDuration:n,next:d=>(a.value=u(d),a.done=d>=n,a)}}const lz=n=>n!==null;function P_(n,{repeat:e,repeatType:t="loop"},i,r=1){const a=n.filter(lz),u=r<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!u||i===void 0?a[u]:i}const cz={decay:nw,inertia:nw,tween:dh,keyframes:dh,spring:cg};function h3(n){typeof n.type=="string"&&(n.type=cz[n.type])}class D_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const uz=n=>n/100;class j_ extends D_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==ei.now()&&this.tick(ei.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;h3(e);const{type:t=dh,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const d=t||dh;d!==dh&&typeof u[0]!="number"&&(this.mixKeyframes=Tf(uz,c3(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=R_(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:v,repeatType:x,repeatDelay:_,type:T,onUpdate:C,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-f*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?P<0:P>r;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let N=this.currentTime,z=i;if(v){const S=Math.min(this.currentTime,r)/u;let R=Math.floor(S),V=S%1;!V&&S>=1&&(V=1),V===1&&R--,R=Math.min(R,v+1),!!(R%2)&&(x==="reverse"?(V=1-V,_&&(V-=_/u)):x==="mirror"&&(z=l)),N=vs(0,1,V)*u}const F=I?{done:!1,value:p[0]}:z.next(N);a&&(F.value=a(F.value));let{done:H}=F;!I&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return j&&T!==nw&&(F.value=P_(p,this.options,D,this.speed)),C&&C(F.value),j&&this.finish(),F}then(e,t){return this.finished.then(e,t)}get duration(){return Tr(this.calculatedDuration)}get time(){return Tr(this.currentTime)}set time(e){var t;e=_r(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ei.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Tr(this.currentTime))}play(){var r,a;if(this.isStopped)return;const{driver:e=KF,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(r=this.options).onPlay)==null||a.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ei.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function dz(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Lo=n=>n*180/Math.PI,iw=n=>{const e=Lo(Math.atan2(n[1],n[0]));return rw(e)},hz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:iw,rotateZ:iw,skewX:n=>Lo(Math.atan(n[1])),skewY:n=>Lo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rw=n=>(n=n%360,n<0&&(n+=360),n),$A=iw,KA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),WA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),fz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KA,scaleY:WA,scale:n=>(KA(n)+WA(n))/2,rotateX:n=>rw(Lo(Math.atan2(n[6],n[5]))),rotateY:n=>rw(Lo(Math.atan2(-n[2],n[0]))),rotateZ:$A,rotate:$A,skewX:n=>Lo(Math.atan(n[4])),skewY:n=>Lo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function sw(n){return n.includes("scale")?1:0}function aw(n,e){if(!n||n==="none")return sw(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=fz,r=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=hz,r=u}if(!r)return sw(e);const a=i[e],l=r[1].split(",").map(pz);return typeof a=="function"?a(l):l[a]}const mz=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return aw(t,e)};function pz(n){return parseFloat(n.trim())}const gu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yu=new Set(gu),YA=n=>n===pu||n===ke,gz=new Set(["x","y","z"]),yz=gu.filter(n=>!gz.has(n));function vz(n){const e=[];return yz.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const zo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>aw(e,"x"),y:(n,{transform:e})=>aw(e,"y")};zo.translateX=zo.x;zo.translateY=zo.y;const qo=new Set;let ow=!1,lw=!1,cw=!1;function f3(){if(lw){const n=Array.from(qo).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=vz(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([a,l])=>{var u;(u=i.getValue(a))==null||u.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}lw=!1,ow=!1,qo.forEach(n=>n.complete(cw)),qo.clear()}function m3(){qo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(lw=!0)})}function xz(){cw=!0,m3(),f3(),cw=!1}class k_{constructor(e,t,i,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(qo.add(this),ow||(ow=!0,Nt.read(m3),Nt.resolveKeyframes(f3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const a=r==null?void 0:r.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&t){const u=i.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}dz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qo.delete(this)}cancel(){this.state==="scheduled"&&(qo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wz=n=>n.startsWith("--");function bz(n,e,t){wz(e)?n.style.setProperty(e,t):n.style[e]=t}const _z=b_(()=>window.ScrollTimeline!==void 0),Tz={};function Ez(n,e){const t=b_(n);return()=>Tz[e]??t()}const p3=Ez(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,QA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wd([0,.65,.55,1]),circOut:Wd([.55,0,1,.45]),backIn:Wd([.31,.01,.66,-.59]),backOut:Wd([.33,1.53,.69,.99])};function g3(n,e){if(n)return typeof n=="function"?p3()?u3(n,e):"ease-out":e3(n)?Wd(n):Array.isArray(n)?n.map(t=>g3(t,e)||QA.easeOut):QA[n]}function Sz(n,e,t,{delay:i=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[e]:t};d&&(p.offset=d);const v=g3(u,r);Array.isArray(v)&&(p.easing=v);const x={delay:i,duration:r,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),n.animate(p,x)}function y3(n){return typeof n=="function"&&"applyToOptions"in n}function Az({type:n,...e}){return y3(n)&&p3()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Iz extends D_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,w_(typeof e.type!="string");const f=Az(e);this.animation=Sz(t,i,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=P_(r,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):bz(t,i,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return Tr(Number(e))}get time(){return Tr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_z()?(this.animation.timeline=e,ki):t(this)}}const v3={anticipate:QP,backInOut:YP,circInOut:ZP};function Cz(n){return n in v3}function Nz(n){typeof n.ease=="string"&&Cz(n.ease)&&(n.ease=v3[n.ease])}const XA=10;class Rz extends Iz{constructor(e){Nz(e),h3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new j_({...l,autoplay:!1}),d=_r(this.finishedTime??this.time);t.setWithVelocity(u.sample(d-XA).value,u.sample(d).value,XA),u.stop()}}const ZA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ra.test(n)||n==="0")&&!n.startsWith("url("));function Pz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Dz(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=ZA(r,e),u=ZA(a,e);return!l||!u?!1:Pz(n)||(t==="spring"||y3(t))&&i}function M_(n){return zP(n)&&"offsetHeight"in n}const jz=new Set(["opacity","clipPath","filter","transform"]),kz=b_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Mz(n){var f;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:a,type:l}=n;if(!M_((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return kz()&&t&&jz.has(t)&&(t!=="transform"||!d)&&!u&&!i&&r!=="mirror"&&a!==0&&l!=="inertia"}const Vz=40;class Oz extends D_{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:p,...v}){var T;super(),this.stop=()=>{var C,D;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(D=this.keyframeResolver)==null||D.cancel()},this.createdAt=ei.now();const x={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:p,...v},_=(p==null?void 0:p.KeyframeResolver)||k_;this.keyframeResolver=new _(u,(C,D,P)=>this.onKeyframesResolved(C,D,x,!P),d,f,p),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:p}=i;this.resolvedAt=ei.now(),Dz(e,a,l,u)||((xs.instantAnimations||!d)&&(p==null||p(P_(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const x={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Vz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},_=!f&&Mz(x)?new Rz({...x,element:x.motionValue.owner.current}):new j_(x);_.finished.then(()=>this.notifyFinished()).catch(ki),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),xz()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Lz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Uz(n){const e=Lz.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function x3(n,e,t=1){const[i,r]=Uz(n);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return FP(l)?parseFloat(l):l}return A_(r)?x3(r,e,t+1):r}function V_(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const w3=new Set(["width","height","top","left","right","bottom",...gu]),Bz={test:n=>n==="auto",parse:n=>n},b3=n=>e=>e.test(n),_3=[pu,ke,Er,sa,PF,RF,Bz],JA=n=>_3.find(b3(n));function Fz(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||qP(n):!0}const zz=new Set(["brightness","contrast","saturate","opacity"]);function qz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(I_)||[];if(!i)return n;const r=t.replace(i,"");let a=zz.has(e)?1:0;return i!==t&&(a*=100),e+"("+a+r+")"}const Hz=/\b([a-z-]*)\(.*?\)/gu,uw={...Ra,getAnimatableNone:n=>{const e=n.match(Hz);return e?e.map(qz).join(" "):n}},eI={...pu,transform:Math.round},Gz={rotate:sa,rotateX:sa,rotateY:sa,rotateZ:sa,scale:op,scaleX:op,scaleY:op,scaleZ:op,skew:sa,skewX:sa,skewY:sa,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:zh,originX:BA,originY:BA,originZ:ke},O_={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke,...Gz,zIndex:eI,fillOpacity:zh,strokeOpacity:zh,numOctaves:eI},$z={...O_,color:Rn,backgroundColor:Rn,outlineColor:Rn,fill:Rn,stroke:Rn,borderColor:Rn,borderTopColor:Rn,borderRightColor:Rn,borderBottomColor:Rn,borderLeftColor:Rn,filter:uw,WebkitFilter:uw},T3=n=>$z[n];function E3(n,e){let t=T3(n);return t!==uw&&(t=Ra),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Kz=new Set(["auto","none","0"]);function Wz(n,e,t){let i=0,r;for(;i<n.length&&!r;){const a=n[i];typeof a=="string"&&!Kz.has(a)&&qh(a).values.length&&(r=n[i]),i++}if(r&&t)for(const a of e)n[a]=E3(t,r)}class Yz extends k_{constructor(e,t,i,r,a){super(e,t,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),A_(f))){const p=x3(f,t.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!w3.has(i)||e.length!==2)return;const[r,a]=e,l=JA(r),u=JA(a);if(l!==u)if(YA(l)&&YA(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else zo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||Fz(e[r]))&&i.push(r);i.length&&Wz(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var u;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=zo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function Qz(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=(t==null?void 0:t[n])??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const S3=(n,e)=>e&&typeof n=="number"?e.transform(n):n,tI=30,Xz=n=>!isNaN(parseFloat(n));class Zz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var l,u;const a=ei.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();r&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ei.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Xz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new __);const i=this.events[e].add(t);return e==="change"?()=>{i(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ei.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tI)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,tI);return HP(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zc(n,e){return new Zz(n,e)}const{schedule:L_}=t3(queueMicrotask,!1),zi={x:!1,y:!1};function A3(){return zi.x||zi.y}function Jz(n){return n==="x"||n==="y"?zi[n]?null:(zi[n]=!0,()=>{zi[n]=!1}):zi.x||zi.y?null:(zi.x=zi.y=!0,()=>{zi.x=zi.y=!1})}function I3(n,e){const t=Qz(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function nI(n){return!(n.pointerType==="touch"||A3())}function eq(n,e,t={}){const[i,r,a]=I3(n,t),l=u=>{if(!nI(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const p=v=>{nI(v)&&(f(v),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,r)};return i.forEach(u=>{u.addEventListener("pointerenter",l,r)}),a}const C3=(n,e)=>e?n===e?!0:C3(n,e.parentElement):!1,U_=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,tq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nq(n){return tq.has(n.tagName)||n.tabIndex!==-1}const Rp=new WeakSet;function iI(n){return e=>{e.key==="Enter"&&n(e)}}function K0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iq=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=iI(()=>{if(Rp.has(t))return;K0(t,"down");const r=iI(()=>{K0(t,"up")}),a=()=>K0(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function rI(n){return U_(n)&&!A3()}function rq(n,e,t={}){const[i,r,a]=I3(n,t),l=u=>{const d=u.currentTarget;if(!rI(u))return;Rp.add(d);const f=e(d,u),p=(_,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",x),Rp.has(d)&&Rp.delete(d),rI(_)&&typeof f=="function"&&f(_,{success:T})},v=_=>{p(_,d===window||d===document||t.useGlobalTarget||C3(d,_.target))},x=_=>{p(_,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",x,r)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,r),M_(u)&&(u.addEventListener("focus",f=>iq(f,r)),!nq(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function N3(n){return zP(n)&&"ownerSVGElement"in n}function sq(n){return N3(n)&&n.tagName==="svg"}const Dn=n=>!!(n&&n.getVelocity),aq=[..._3,Rn,Ra],oq=n=>aq.find(b3(n)),B_=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class lq extends k.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=M_(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function cq({children:n,isPresent:e,anchorX:t}){const i=k.useId(),r=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(B_);return k.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:p,right:v}=a.current;if(e||!r.current||!u||!d)return;const x=t==="left"?`left: ${p}`:`right: ${v}`;r.current.dataset.motionPopId=i;const _=document.createElement("style");return l&&(_.nonce=l),document.head.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(_)&&document.head.removeChild(_)}},[e]),m.jsx(lq,{isPresent:e,childRef:r,sizeRef:a,children:k.cloneElement(n,{ref:r})})}const uq=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:l,anchorX:u})=>{const d=g_(dq),f=k.useId();let p=!0,v=k.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:t,custom:r,onExitComplete:x=>{d.set(x,!0);for(const _ of d.values())if(!_)return;i&&i()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,i]);return a&&p&&(v={...v}),k.useMemo(()=>{d.forEach((x,_)=>d.set(_,!1))},[t]),k.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),l==="popLayout"&&(n=m.jsx(cq,{isPresent:t,anchorX:u,children:n})),m.jsx(cy.Provider,{value:v,children:n})};function dq(){return new Map}function R3(n=!0){const e=k.useContext(cy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,a=k.useId();k.useEffect(()=>{if(n)return r(a)},[n]);const l=k.useCallback(()=>n&&i&&i(a),[a,i,n]);return!t&&i?[!1,l]:[!0]}const lp=n=>n.key||"";function sI(n){const e=[];return k.Children.forEach(n,t=>{k.isValidElement(t)&&e.push(t)}),e}const At=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:u="left"})=>{const[d,f]=R3(l),p=k.useMemo(()=>sI(n),[n]),v=l&&!d?[]:p.map(lp),x=k.useRef(!0),_=k.useRef(p),T=g_(()=>new Map),[C,D]=k.useState(p),[P,I]=k.useState(p);BP(()=>{x.current=!1,_.current=p;for(let F=0;F<P.length;F++){const H=lp(P[F]);v.includes(H)?T.delete(H):T.get(H)!==!0&&T.set(H,!1)}},[P,v.length,v.join("-")]);const N=[];if(p!==C){let F=[...p];for(let H=0;H<P.length;H++){const j=P[H],S=lp(j);v.includes(S)||(F.splice(H,0,j),N.push(j))}return a==="wait"&&N.length&&(F=N),I(sI(F)),D(p),null}const{forceRender:z}=k.useContext(p_);return m.jsx(m.Fragment,{children:P.map(F=>{const H=lp(F),j=l&&!d?!1:p===P||v.includes(H),S=()=>{if(T.has(H))T.set(H,!0);else return;let R=!0;T.forEach(V=>{V||(R=!1)}),R&&(z==null||z(),I(_.current),l&&(f==null||f()),i&&i())};return m.jsx(uq,{isPresent:j,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,onExitComplete:j?void 0:S,anchorX:u,children:F},H)})})},P3=k.createContext({strict:!1}),aI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jc={};for(const n in aI)Jc[n]={isEnabled:e=>aI[n].some(t=>!!e[t])};function hq(n){for(const e in n)Jc[e]={...Jc[e],...n[e]}}const fq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ug(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||fq.has(n)}let D3=n=>!ug(n);function mq(n){n&&(D3=e=>e.startsWith("on")?!ug(e):n(e))}try{mq(require("@emotion/is-prop-valid").default)}catch{}function pq(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(D3(r)||t===!0&&ug(r)||!e&&!ug(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function gq(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const uy=k.createContext({});function dy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Hh(n){return typeof n=="string"||Array.isArray(n)}const F_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],z_=["initial",...F_];function hy(n){return dy(n.animate)||z_.some(e=>Hh(n[e]))}function j3(n){return!!(hy(n)||n.variants)}function yq(n,e){if(hy(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Hh(t)?t:void 0,animate:Hh(i)?i:void 0}}return n.inherit!==!1?e:{}}function vq(n){const{initial:e,animate:t}=yq(n,k.useContext(uy));return k.useMemo(()=>({initial:e,animate:t}),[oI(e),oI(t)])}function oI(n){return Array.isArray(n)?n.join(" "):n}const xq=Symbol.for("motionComponentSymbol");function yc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function wq(n,e,t){return k.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):yc(t)&&(t.current=i))},[e])}const q_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bq="framerAppearId",k3="data-"+q_(bq),M3=k.createContext({});function _q(n,e,t,i,r){var C,D;const{visualElement:a}=k.useContext(uy),l=k.useContext(P3),u=k.useContext(cy),d=k.useContext(B_).reducedMotion,f=k.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,v=k.useContext(M3);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&Tq(f.current,t,r,v);const x=k.useRef(!1);k.useInsertionEffect(()=>{p&&x.current&&p.update(t,u)});const _=t[k3],T=k.useRef(!!_&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,_))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,_)));return BP(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),L_.render(p.render),T.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,_)}),T.current=!1))}),p}function Tq(n,e,t,i){const{layoutId:r,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:V3(n.parent)),n.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||u&&yc(u),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:d,layoutRoot:f})}function V3(n){if(n)return n.options.allowProjection!==!1?n.projection:V3(n.parent)}function Eq({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&hq(n);function a(u,d){let f;const p={...k.useContext(B_),...u,layoutId:Sq(u)},{isStatic:v}=p,x=vq(u),_=i(u,v);if(!v&&y_){Aq();const T=Iq(p);f=T.MeasureLayout,x.visualElement=_q(r,_,p,e,T.ProjectionNode)}return m.jsxs(uy.Provider,{value:x,children:[f&&x.visualElement?m.jsx(f,{visualElement:x.visualElement,...p}):null,t(r,u,wq(_,x.visualElement,d),_,v,x.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=k.forwardRef(a);return l[xq]=r,l}function Sq({layoutId:n}){const e=k.useContext(p_).id;return e&&n!==void 0?e+"-"+n:n}function Aq(n,e){k.useContext(P3).strict}function Iq(n){const{drag:e,layout:t}=Jc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Gh={};function Cq(n){for(const e in n)Gh[e]=n[e],S_(e)&&(Gh[e].isCSSVariable=!0)}function O3(n,{layout:e,layoutId:t}){return yu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Gh[n]||n==="opacity")}const Nq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Rq=gu.length;function Pq(n,e,t){let i="",r=!0;for(let a=0;a<Rq;a++){const l=gu[a],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=S3(u,O_[l]);if(!d){r=!1;const p=Nq[l]||l;i+=`${p}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function H_(n,e,t){const{style:i,vars:r,transformOrigin:a}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(yu.has(d)){l=!0;continue}else if(S_(d)){r[d]=f;continue}else{const p=S3(f,O_[d]);d.startsWith("origin")?(u=!0,a[d]=p):i[d]=p}}if(e.transform||(l||t?i.transform=Pq(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${d} ${f} ${p}`}}const G_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function L3(n,e,t){for(const i in e)!Dn(e[i])&&!O3(i,t)&&(n[i]=e[i])}function Dq({transformTemplate:n},e){return k.useMemo(()=>{const t=G_();return H_(t,e,n),Object.assign({},t.vars,t.style)},[e])}function jq(n,e){const t=n.style||{},i={};return L3(i,t,n),Object.assign(i,Dq(n,e)),i}function kq(n,e){const t={},i=jq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const Mq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vq={offset:"strokeDashoffset",array:"strokeDasharray"};function Oq(n,e,t=1,i=0,r=!0){n.pathLength=1;const a=r?Mq:Vq;n[a.offset]=ke.transform(-i);const l=ke.transform(e),u=ke.transform(t);n[a.array]=`${l} ${u}`}function U3(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...u},d,f,p){if(H_(n,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:x}=n;v.transform&&(x.transform=v.transform,delete v.transform),(x.transform||v.transformOrigin)&&(x.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),r!==void 0&&Oq(v,r,a,l,!1)}const B3=()=>({...G_(),attrs:{}}),F3=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Lq(n,e,t,i){const r=k.useMemo(()=>{const a=B3();return U3(a,e,F3(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};L3(a,n.style,n),r.style={...a,...r.style}}return r}const Uq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $_(n){return typeof n!="string"||n.includes("-")?!1:!!(Uq.indexOf(n)>-1||/[A-Z]/u.test(n))}function Bq(n=!1){return(t,i,r,{latestValues:a},l)=>{const d=($_(t)?Lq:kq)(i,a,l,t),f=pq(i,typeof t=="string",n),p=t!==k.Fragment?{...f,...d,ref:r}:{},{children:v}=i,x=k.useMemo(()=>Dn(v)?v.get():v,[v]);return k.createElement(t,{...p,children:x})}}function lI(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function K_(n,e,t,i){if(typeof e=="function"){const[r,a]=lI(i);e=e(t!==void 0?t:n.custom,r,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,a]=lI(i);e=e(t!==void 0?t:n.custom,r,a)}return e}function Pp(n){return Dn(n)?n.get():n}function Fq({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:zq(t,i,r,n),renderState:e()}}const z3=n=>(e,t)=>{const i=k.useContext(uy),r=k.useContext(cy),a=()=>Fq(n,e,i,r);return t?a():g_(a)};function zq(n,e,t,i){const r={},a=i(n,{});for(const x in a)r[x]=Pp(a[x]);let{initial:l,animate:u}=n;const d=hy(n),f=j3(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let p=t?t.initial===!1:!1;p=p||l===!1;const v=p?u:l;if(v&&typeof v!="boolean"&&!dy(v)){const x=Array.isArray(v)?v:[v];for(let _=0;_<x.length;_++){const T=K_(n,x[_]);if(T){const{transitionEnd:C,transition:D,...P}=T;for(const I in P){let N=P[I];if(Array.isArray(N)){const z=p?N.length-1:0;N=N[z]}N!==null&&(r[I]=N)}for(const I in C)r[I]=C[I]}}}return r}function W_(n,e,t){var a;const{style:i}=n,r={};for(const l in i)(Dn(i[l])||e.style&&Dn(e.style[l])||O3(l,n)||((a=t==null?void 0:t.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(r[l]=i[l]);return r}const qq={useVisualState:z3({scrapeMotionValuesFromProps:W_,createRenderState:G_})};function q3(n,e,t){const i=W_(n,e,t);for(const r in n)if(Dn(n[r])||Dn(e[r])){const a=gu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=n[r]}return i}const Hq={useVisualState:z3({scrapeMotionValuesFromProps:q3,createRenderState:B3})};function Gq(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...$_(i)?Hq:qq,preloadedFeatures:n,useRender:Bq(r),createVisualElement:e,Component:i};return Eq(l)}}function $h(n,e,t){const i=n.getProps();return K_(i,e,t!==void 0?t:i.custom,n)}const dw=n=>Array.isArray(n);function $q(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Zc(t))}function Kq(n){return dw(n)?n[n.length-1]||0:n}function Wq(n,e){const t=$h(n,e);let{transitionEnd:i={},transition:r={},...a}=t||{};a={...a,...i};for(const l in a){const u=Kq(a[l]);$q(n,l,u)}}function Yq(n){return!!(Dn(n)&&n.add)}function hw(n,e){const t=n.getValue("willChange");if(Yq(t))return t.add(e);if(!t&&xs.WillChange){const i=new xs.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function H3(n){return n.props[k3]}const Qq=n=>n!==null;function Xq(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Qq),a=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[a]}const Zq={type:"spring",stiffness:500,damping:25,restSpeed:10},Jq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),eH={type:"keyframes",duration:.8},tH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nH=(n,{keyframes:e})=>e.length>2?eH:yu.has(n)?n.startsWith("scale")?Jq(e[1]):Zq:tH;function iH({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const Y_=(n,e,t,i={},r,a)=>l=>{const u=V_(i,n)||{},d=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-_r(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:a?void 0:r};iH(u)||Object.assign(p,nH(n,p)),p.duration&&(p.duration=_r(p.duration)),p.repeatDelay&&(p.repeatDelay=_r(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),(xs.instantAnimations||xs.skipAnimations)&&(v=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,v&&!a&&e.get()!==void 0){const x=Xq(p.keyframes,u);if(x!==void 0){Nt.update(()=>{p.onUpdate(x),p.onComplete()});return}}return u.isSync?new j_(p):new Oz(p)};function rH({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function G3(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(a=i);const d=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const p in u){const v=n.getValue(p,n.latestValues[p]??null),x=u[p];if(x===void 0||f&&rH(f,p))continue;const _={delay:t,...V_(a||{},p)},T=v.get();if(T!==void 0&&!v.isAnimating&&!Array.isArray(x)&&x===T&&!_.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const P=H3(n);if(P){const I=window.MotionHandoffAnimation(P,p,Nt);I!==null&&(_.startTime=I,C=!0)}}hw(n,p),v.start(Y_(p,v,x,n.shouldReduceMotion&&w3.has(p)?{type:!1}:_,n,C));const D=v.animation;D&&d.push(D)}return l&&Promise.all(d).then(()=>{Nt.update(()=>{l&&Wq(n,l)})}),d}function fw(n,e,t={}){var d;const i=$h(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const a=i?()=>Promise.all(G3(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:x}=r;return sH(n,e,p+f,v,x,t)}:()=>Promise.resolve(),{when:u}=r;if(u){const[f,p]=u==="beforeChildren"?[a,l]:[l,a];return f().then(()=>p())}else return Promise.all([a(),l(t.delay)])}function sH(n,e,t=0,i=0,r=1,a){const l=[],u=(n.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(n.variantChildren).sort(aH).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(fw(f,e,{...a,delay:t+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function aH(n,e){return n.sortNodePosition(e)}function oH(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>fw(n,a,t));i=Promise.all(r)}else if(typeof e=="string")i=fw(n,e,t);else{const r=typeof e=="function"?$h(n,e,t.custom):e;i=Promise.all(G3(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function $3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const lH=z_.length;function K3(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?K3(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<lH;t++){const i=z_[t],r=n.props[i];(Hh(r)||r===!1)&&(e[i]=r)}return e}const cH=[...F_].reverse(),uH=F_.length;function dH(n){return e=>Promise.all(e.map(({animation:t,options:i})=>oH(n,t,i)))}function hH(n){let e=dH(n),t=cI(),i=!0;const r=d=>(f,p)=>{var x;const v=$h(n,p,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(v){const{transition:_,transitionEnd:T,...C}=v;f={...f,...C,...T}}return f};function a(d){e=d(n)}function l(d){const{props:f}=n,p=K3(n.parent)||{},v=[],x=new Set;let _={},T=1/0;for(let D=0;D<uH;D++){const P=cH[D],I=t[P],N=f[P]!==void 0?f[P]:p[P],z=Hh(N),F=P===d?I.isActive:null;F===!1&&(T=D);let H=N===p[P]&&N!==f[P]&&z;if(H&&i&&n.manuallyAnimateOnMount&&(H=!1),I.protectedKeys={..._},!I.isActive&&F===null||!N&&!I.prevProp||dy(N)||typeof N=="boolean")continue;const j=fH(I.prevProp,N);let S=j||P===d&&I.isActive&&!H&&z||D>T&&z,R=!1;const V=Array.isArray(N)?N:[N];let L=V.reduce(r(P),{});F===!1&&(L={});const{prevResolvedValues:B={}}=I,O={...B,...L},me=se=>{S=!0,x.has(se)&&(R=!0,x.delete(se)),I.needsAnimating[se]=!0;const ae=n.getValue(se);ae&&(ae.liveStyle=!1)};for(const se in O){const ae=L[se],xe=B[se];if(_.hasOwnProperty(se))continue;let q=!1;dw(ae)&&dw(xe)?q=!$3(ae,xe):q=ae!==xe,q?ae!=null?me(se):x.add(se):ae!==void 0&&x.has(se)?me(se):I.protectedKeys[se]=!0}I.prevProp=N,I.prevResolvedValues=L,I.isActive&&(_={..._,...L}),i&&n.blockInitialAnimation&&(S=!1),S&&(!(H&&j)||R)&&v.push(...V.map(se=>({animation:se,options:{type:P}})))}if(x.size){const D={};if(typeof f.initial!="boolean"){const P=$h(n,Array.isArray(f.initial)?f.initial[0]:f.initial);P&&P.transition&&(D.transition=P.transition)}x.forEach(P=>{const I=n.getBaseTarget(P),N=n.getValue(P);N&&(N.liveStyle=!0),D[P]=I??null}),v.push({animation:D})}let C=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(C=!1),i=!1,C?e(v):Promise.resolve()}function u(d,f){var v;if(t[d].isActive===f)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(x=>{var _;return(_=x.animationState)==null?void 0:_.setActive(d,f)}),t[d].isActive=f;const p=l(d);for(const x in t)t[x].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>t,reset:()=>{t=cI(),i=!0}}}function fH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!$3(e,n):!1}function To(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cI(){return{animate:To(!0),whileInView:To(),whileHover:To(),whileTap:To(),whileDrag:To(),whileFocus:To(),exit:To()}}class La{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mH extends La{constructor(e){super(e),e.animationState||(e.animationState=hH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let pH=0;class gH extends La{constructor(){super(...arguments),this.id=pH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yH={animation:{Feature:mH},exit:{Feature:gH}};function Kh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Af(n){return{point:{x:n.pageX,y:n.pageY}}}const vH=n=>e=>U_(e)&&n(e,Af(e));function hh(n,e,t,i){return Kh(n,e,vH(t),i)}function W3({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function xH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function wH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const Y3=1e-4,bH=1-Y3,_H=1+Y3,Q3=.01,TH=0-Q3,EH=0+Q3;function Fn(n){return n.max-n.min}function SH(n,e,t){return Math.abs(n-e)<=t}function uI(n,e,t,i=.5){n.origin=i,n.originPoint=St(e.min,e.max,n.origin),n.scale=Fn(t)/Fn(e),n.translate=St(t.min,t.max,n.origin)-n.originPoint,(n.scale>=bH&&n.scale<=_H||isNaN(n.scale))&&(n.scale=1),(n.translate>=TH&&n.translate<=EH||isNaN(n.translate))&&(n.translate=0)}function fh(n,e,t,i){uI(n.x,e.x,t.x,i?i.originX:void 0),uI(n.y,e.y,t.y,i?i.originY:void 0)}function dI(n,e,t){n.min=t.min+e.min,n.max=n.min+Fn(e)}function AH(n,e,t){dI(n.x,e.x,t.x),dI(n.y,e.y,t.y)}function hI(n,e,t){n.min=e.min-t.min,n.max=n.min+Fn(e)}function mh(n,e,t){hI(n.x,e.x,t.x),hI(n.y,e.y,t.y)}const fI=()=>({translate:0,scale:1,origin:0,originPoint:0}),vc=()=>({x:fI(),y:fI()}),mI=()=>({min:0,max:0}),zt=()=>({x:mI(),y:mI()});function Pi(n){return[n("x"),n("y")]}function W0(n){return n===void 0||n===1}function mw({scale:n,scaleX:e,scaleY:t}){return!W0(n)||!W0(e)||!W0(t)}function Io(n){return mw(n)||X3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function X3(n){return pI(n.x)||pI(n.y)}function pI(n){return n&&n!=="0%"}function dg(n,e,t){const i=n-t,r=e*i;return t+r}function gI(n,e,t,i,r){return r!==void 0&&(n=dg(n,r,i)),dg(n,t,i)+e}function pw(n,e=0,t=1,i,r){n.min=gI(n.min,e,t,i,r),n.max=gI(n.max,e,t,i,r)}function Z3(n,{x:e,y:t}){pw(n.x,e.translate,e.scale,e.originPoint),pw(n.y,t.translate,t.scale,t.originPoint)}const yI=.999999999999,vI=1.0000000000001;function IH(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let a,l;for(let u=0;u<r;u++){a=t[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&wc(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Z3(n,l)),i&&Io(a.latestValues)&&wc(n,a.latestValues))}e.x<vI&&e.x>yI&&(e.x=1),e.y<vI&&e.y>yI&&(e.y=1)}function xc(n,e){n.min=n.min+e,n.max=n.max+e}function xI(n,e,t,i,r=.5){const a=St(n.min,n.max,r);pw(n,e,t,a,i)}function wc(n,e){xI(n.x,e.x,e.scaleX,e.scale,e.originX),xI(n.y,e.y,e.scaleY,e.scale,e.originY)}function J3(n,e){return W3(wH(n.getBoundingClientRect(),e))}function CH(n,e,t){const i=J3(n,t),{scroll:r}=e;return r&&(xc(i.x,r.offset.x),xc(i.y,r.offset.y)),i}const e6=({current:n})=>n?n.ownerDocument.defaultView:null,wI=(n,e)=>Math.abs(n-e);function NH(n,e){const t=wI(n.x,e.x),i=wI(n.y,e.y);return Math.sqrt(t**2+i**2)}class t6{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Q0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=NH(v.offset,{x:0,y:0})>=3;if(!x&&!_)return;const{point:T}=v,{timestamp:C}=wn;this.history.push({...T,timestamp:C});const{onStart:D,onMove:P}=this.handlers;x||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Y0(x,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:_,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Q0(v.type==="pointercancel"?this.lastMoveEventInfo:Y0(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(v,D),T&&T(v,D)},!U_(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const l=Af(e),u=Y0(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=wn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,Q0(u,this.history)),this.removeListeners=Tf(hh(this.contextWindow,"pointermove",this.handlePointerMove),hh(this.contextWindow,"pointerup",this.handlePointerUp),hh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Na(this.updatePoint)}}function Y0(n,e){return e?{point:e(n.point)}:n}function bI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Q0({point:n},e){return{point:n,delta:bI(n,n6(e)),offset:bI(n,RH(e)),velocity:PH(e,.1)}}function RH(n){return n[0]}function n6(n){return n[n.length-1]}function PH(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=n6(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>_r(e)));)t--;if(!i)return{x:0,y:0};const a=Tr(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function DH(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?St(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?St(t,n,i.max):Math.min(n,t)),n}function _I(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function jH(n,{top:e,left:t,bottom:i,right:r}){return{x:_I(n.x,t,r),y:_I(n.y,e,i)}}function TI(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function kH(n,e){return{x:TI(n.x,e.x),y:TI(n.y,e.y)}}function MH(n,e){let t=.5;const i=Fn(n),r=Fn(e);return r>i?t=Fh(e.min,e.max-i,n.min):i>r&&(t=Fh(n.min,n.max-r,e.min)),vs(0,1,t)}function VH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const gw=.35;function OH(n=gw){return n===!1?n=0:n===!0&&(n=gw),{x:EI(n,"left","right"),y:EI(n,"top","bottom")}}function EI(n,e,t){return{min:SI(n,e),max:SI(n,t)}}function SI(n,e){return typeof n=="number"?n:n[e]||0}const LH=new WeakMap;class UH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Af(p).point)},a=(p,v)=>{const{drag:x,dragPropagation:_,onDragStart:T}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Jz(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi(D=>{let P=this.getAxisMotionValue(D).get()||0;if(Er.test(P)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[D];N&&(P=Fn(N)*(parseFloat(P)/100))}}this.originPoint[D]=P}),T&&Nt.postRender(()=>T(p,v)),hw(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:T,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:D}=v;if(_&&this.currentDirection===null){this.currentDirection=BH(D),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),C&&C(p,v)},u=(p,v)=>this.stop(p,v),d=()=>Pi(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)==null?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new t6(e,{onSessionStart:r,onStart:a,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:e6(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Nt.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!cp(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=DH(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,r=this.constraints;e&&yc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=jH(i.layoutBox,e):this.constraints=!1,this.elastic=OH(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Pi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=VH(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=CH(i,r.root,this.visualElement.getTransformPagePoint());let l=kH(r.layout.layoutBox,a);if(t){const u=t(xH(l));this.hasMutatedConstraints=!!u,u&&(l=W3(u))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Pi(p=>{if(!cp(p,t,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const x=r?200:1e6,_=r?40:1e7,T={type:"inertia",velocity:i?e[p]:0,bounceStiffness:x,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(p,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return hw(this.visualElement,e),i.start(Y_(e,i,0,t,this.visualElement,!1))}stopAnimation(){Pi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Pi(t=>{const{drag:i}=this.getProps();if(!cp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:u}=r.layout.layoutBox[t];a.set(e[t]-St(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!yc(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Pi(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();r[l]=MH({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Pi(l=>{if(!cp(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(St(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;LH.set(this.visualElement,this);const e=this.visualElement.current,t=hh(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();yc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Nt.read(i);const l=Kh(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Pi(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=gw,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function cp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function BH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class FH extends La{constructor(e){super(e),this.removeGroupControls=ki,this.removeListeners=ki,this.controls=new UH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const AI=n=>(e,t)=>{n&&Nt.postRender(()=>n(e,t))};class zH extends La{constructor(){super(...arguments),this.removePointerDownListener=ki}onPointerDown(e){this.session=new t6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:AI(e),onStart:AI(t),onMove:i,onEnd:(a,l)=>{delete this.session,r&&Nt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=hh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function II(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ud={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ke.test(n))n=parseFloat(n);else return n;const t=II(n,e.target.x),i=II(n,e.target.y);return`${t}% ${i}%`}},qH={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Ra.parse(n);if(r.length>5)return i;const a=Ra.createTransformer(n),l=typeof r[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;r[0+l]/=u,r[1+l]/=d;const f=St(u,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),a(r)}};class HH extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;Cq(GH),a&&(t.group&&t.group.add(a),i&&i.register&&r&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Dp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,r||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Nt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),L_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function i6(n){const[e,t]=R3(),i=k.useContext(p_);return m.jsx(HH,{...n,layoutGroup:i,switchLayoutGroup:k.useContext(M3),isPresent:e,safeToRemove:t})}const GH={borderRadius:{...Ud,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ud,borderTopRightRadius:Ud,borderBottomLeftRadius:Ud,borderBottomRightRadius:Ud,boxShadow:qH};function $H(n,e,t){const i=Dn(n)?n:Zc(n);return i.start(Y_("",i,e,t)),i.animation}const KH=(n,e)=>n.depth-e.depth;class WH{constructor(){this.children=[],this.isDirty=!1}add(e){v_(this.children,e),this.isDirty=!0}remove(e){x_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KH),this.isDirty=!1,this.children.forEach(e)}}function YH(n,e){const t=ei.now(),i=({timestamp:r})=>{const a=r-t;a>=e&&(Na(i),n(a-e))};return Nt.setup(i,!0),()=>Na(i)}const r6=["TopLeft","TopRight","BottomLeft","BottomRight"],QH=r6.length,CI=n=>typeof n=="string"?parseFloat(n):n,NI=n=>typeof n=="number"||ke.test(n);function XH(n,e,t,i,r,a){r?(n.opacity=St(0,t.opacity??1,ZH(i)),n.opacityExit=St(e.opacity??1,0,JH(i))):a&&(n.opacity=St(e.opacity??1,t.opacity??1,i));for(let l=0;l<QH;l++){const u=`border${r6[l]}Radius`;let d=RI(e,u),f=RI(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||NI(d)===NI(f)?(n[u]=Math.max(St(CI(d),CI(f),i),0),(Er.test(f)||Er.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=St(e.rotate||0,t.rotate||0,i))}function RI(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const ZH=s6(0,.5,XP),JH=s6(.5,.95,ki);function s6(n,e,t){return i=>i<n?0:i>e?1:t(Fh(n,e,i))}function PI(n,e){n.min=e.min,n.max=e.max}function Ri(n,e){PI(n.x,e.x),PI(n.y,e.y)}function DI(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function jI(n,e,t,i,r){return n-=e,n=dg(n,1/t,i),r!==void 0&&(n=dg(n,1/r,i)),n}function eG(n,e=0,t=1,i=.5,r,a=n,l=n){if(Er.test(e)&&(e=parseFloat(e),e=St(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=St(a.min,a.max,i);n===a&&(u-=e),n.min=jI(n.min,e,t,u,r),n.max=jI(n.max,e,t,u,r)}function kI(n,e,[t,i,r],a,l){eG(n,e[t],e[i],e[r],e.scale,a,l)}const tG=["x","scaleX","originX"],nG=["y","scaleY","originY"];function MI(n,e,t,i){kI(n.x,e,tG,t?t.x:void 0,i?i.x:void 0),kI(n.y,e,nG,t?t.y:void 0,i?i.y:void 0)}function VI(n){return n.translate===0&&n.scale===1}function a6(n){return VI(n.x)&&VI(n.y)}function OI(n,e){return n.min===e.min&&n.max===e.max}function iG(n,e){return OI(n.x,e.x)&&OI(n.y,e.y)}function LI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function o6(n,e){return LI(n.x,e.x)&&LI(n.y,e.y)}function UI(n){return Fn(n.x)/Fn(n.y)}function BI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class rG{constructor(){this.members=[]}add(e){v_(this.members,e),e.scheduleRender()}remove(e){if(x_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sG(n,e,t){let i="";const r=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((r||a||l)&&(i=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:x,skewX:_,skewY:T}=t;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),x&&(i+=`rotateY(${x}deg) `),_&&(i+=`skewX(${_}deg) `),T&&(i+=`skewY(${T}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const X0=["","X","Y","Z"],aG={visibility:"hidden"},oG=1e3;let lG=0;function Z0(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function l6(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=H3(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Nt,!(r||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&l6(i)}function c6({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},u=e==null?void 0:e()){this.id=lG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dG),this.nodes.forEach(gG),this.nodes.forEach(yG),this.nodes.forEach(hG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new WH)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new __),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=N3(l)&&!sq(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let p;const v=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=YH(v,250),Dp.hasAnimatedSinceResize&&(Dp.hasAnimatedSinceResize=!1,this.nodes.forEach(zI))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:x,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||_G,{onLayoutAnimationStart:C,onLayoutAnimationComplete:D}=f.getProps(),P=!this.targetLayout||!o6(this.targetLayout,_),I=!v&&x;if(this.options.layoutRoot||this.resumeFrom||I||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...V_(T,"layout"),onPlay:C,onComplete:D};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(p,I)}else v||zI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Na(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vG),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&l6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(FI);return}this.isUpdating||this.nodes.forEach(mG),this.isUpdating=!1,this.nodes.forEach(pG),this.nodes.forEach(cG),this.nodes.forEach(uG),this.clearAllSnapshots();const u=ei.now();wn.delta=vs(0,1e3/60,u-wn.timestamp),wn.timestamp=u,wn.isProcessing=!0,q0.update.process(wn),q0.preRender.process(wn),q0.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,L_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fG),this.sharedNodes.forEach(xG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fn(this.snapshot.measuredBox.x)&&!Fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!a6(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Io(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),TG(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return zt();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(EG))){const{scroll:p}=this.root;p&&(xc(u.x,p.offset.x),xc(u.y,p.offset.y))}return u}removeElementScroll(l){var d;const u=zt();if(Ri(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:x}=p;p!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&Ri(u,l),xc(u.x,v.offset.x),xc(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const d=zt();Ri(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&wc(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Io(p.latestValues)&&wc(d,p.latestValues)}return Io(this.latestValues)&&wc(d,this.latestValues),d}removeTransform(l){const u=zt();Ri(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Io(f.latestValues))continue;mw(f.latestValues)&&f.updateSnapshot();const p=zt(),v=f.measurePageBox();Ri(p,v),MI(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Io(this.latestValues)&&MI(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),mh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ri(this.target,this.layout.layoutBox),Z3(this.target,this.targetDelta)):Ri(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),mh(this.relativeTargetOrigin,this.target,_.target),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mw(this.parent.latestValues)||X3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Ri(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,x=this.treeScale.y;IH(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=zt());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DI(this.prevProjectionDelta.x,this.projectionDelta.x),DI(this.prevProjectionDelta.y,this.projectionDelta.y)),fh(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==x||!BI(this.projectionDelta.x,this.prevProjectionDelta.x)||!BI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vc(),this.projectionDelta=vc(),this.projectionDeltaWithTransform=vc()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=vc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=zt(),_=d?d.source:void 0,T=this.layout?this.layout.source:void 0,C=_!==T,D=this.getStack(),P=!D||D.members.length<=1,I=!!(C&&!P&&this.options.crossfade===!0&&!this.path.some(bG));this.animationProgress=0;let N;this.mixTargetDelta=z=>{const F=z/1e3;qI(v.x,l.x,F),qI(v.y,l.y,F),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wG(this.relativeTarget,this.relativeTargetOrigin,x,F),N&&iG(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=zt()),Ri(N,this.relativeTarget)),C&&(this.animationValues=p,XH(p,f,this.latestValues,F,I,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Na(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{Dp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zc(0)),this.currentAnimation=$H(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&u6(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||zt();const v=Fn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const x=Fn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+x}Ri(u,d),wc(u,p),fh(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new rG),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Z0("z",l,f,this.animationValues);for(let p=0;p<X0.length;p++)Z0(`rotate${X0[p]}`,l,f,this.animationValues),Z0(`skew${X0[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return aG;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Pp(l==null?void 0:l.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Pp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Io(this.latestValues)&&(_.transform=d?d({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=sG(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,f.animationValues?u.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Gh){if(p[_]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:D}=Gh[_],P=u.transform==="none"?p[_]:T(p[_],f);if(C){const I=C.length;for(let N=0;N<I;N++)u[C[N]]=P}else D?this.options.visualElement.renderState.vars[_]=P:u[_]=P}return this.options.layoutId&&(u.pointerEvents=f===this?Pp(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(FI),this.root.sharedNodes.clear()}}}function cG(n){n.updateLayout()}function uG(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?Pi(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],_=Fn(x);x.min=i[v].min,x.max=x.min+_}):u6(a,e.layoutBox,i)&&Pi(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],_=Fn(i[v]);x.max=x.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+_)});const u=vc();fh(u,i,e.layoutBox);const d=vc();l?fh(d,n.applyTransform(r,!0),e.measuredBox):fh(d,i,e.layoutBox);const f=!a6(u);let p=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:_}=v;if(x&&_){const T=zt();mh(T,e.layoutBox,x.layoutBox);const C=zt();mh(C,i,_.layoutBox),o6(T,C)||(p=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=T,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function dG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function hG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function fG(n){n.clearSnapshot()}function FI(n){n.clearMeasurements()}function mG(n){n.isLayoutDirty=!1}function pG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function zI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function gG(n){n.resolveTargetDelta()}function yG(n){n.calcProjection()}function vG(n){n.resetSkewAndRotation()}function xG(n){n.removeLeadSnapshot()}function qI(n,e,t){n.translate=St(e.translate,0,t),n.scale=St(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function HI(n,e,t,i){n.min=St(e.min,t.min,i),n.max=St(e.max,t.max,i)}function wG(n,e,t,i){HI(n.x,e.x,t.x,i),HI(n.y,e.y,t.y,i)}function bG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _G={duration:.45,ease:[.4,0,.1,1]},GI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),$I=GI("applewebkit/")&&!GI("chrome/")?Math.round:ki;function KI(n){n.min=$I(n.min),n.max=$I(n.max)}function TG(n){KI(n.x),KI(n.y)}function u6(n,e,t){return n==="position"||n==="preserve-aspect"&&!SH(UI(e),UI(t),.2)}function EG(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const SG=c6({attachResizeListener:(n,e)=>Kh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),J0={current:void 0},d6=c6({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!J0.current){const n=new SG({});n.mount(window),n.setOptions({layoutScroll:!0}),J0.current=n}return J0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),AG={pan:{Feature:zH},drag:{Feature:FH,ProjectionNode:d6,MeasureLayout:i6}};function WI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,a=i[r];a&&Nt.postRender(()=>a(e,Af(e)))}class IG extends La{mount(){const{current:e}=this.node;e&&(this.unmount=eq(e,(t,i)=>(WI(this.node,i,"Start"),r=>WI(this.node,r,"End"))))}unmount(){}}class CG extends La{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tf(Kh(this.node.current,"focus",()=>this.onFocus()),Kh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),a=i[r];a&&Nt.postRender(()=>a(e,Af(e)))}class NG extends La{mount(){const{current:e}=this.node;e&&(this.unmount=rq(e,(t,i)=>(YI(this.node,i,"Start"),(r,{success:a})=>YI(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yw=new WeakMap,ex=new WeakMap,RG=n=>{const e=yw.get(n.target);e&&e(n)},PG=n=>{n.forEach(RG)};function DG({root:n,...e}){const t=n||document;ex.has(t)||ex.set(t,{});const i=ex.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(PG,{root:n,...e})),i[r]}function jG(n,e,t){const i=DG(e);return yw.set(n,t),i.observe(n),()=>{yw.delete(n),i.unobserve(n)}}const kG={some:0,all:1};class MG extends La{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:kG[r]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),x=f?p:v;x&&x(d)};return jG(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(VG(e,t))&&this.startObserver()}unmount(){}}function VG({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const OG={inView:{Feature:MG},tap:{Feature:NG},focus:{Feature:CG},hover:{Feature:IG}},LG={layout:{ProjectionNode:d6,MeasureLayout:i6}},vw={current:null},h6={current:!1};function UG(){if(h6.current=!0,!!y_)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>vw.current=n.matches;n.addListener(e),e()}else vw.current=!1}const BG=new WeakMap;function FG(n,e,t){for(const i in e){const r=e[i],a=t[i];if(Dn(r))n.addValue(i,r);else if(Dn(a))n.addValue(i,Zc(r,{owner:n}));else if(a!==r)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(i);n.addValue(i,Zc(l!==void 0?l:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const QI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zG{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=k_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ei.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Nt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=hy(t),this.isVariantNode=j3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in v){const _=v[x];d[x]!==void 0&&Dn(_)&&_.set(d[x],!1)}}mount(e){this.current=e,BG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),h6.current||UG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Na(this.notifyUpdate),Na(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=yu.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jc){const t=Jc[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<QI.length;i++){const r=QI[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=FG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Zc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(FP(i)||qP(i))?i=parseFloat(i):!oq(i)&&Ra.test(t)&&(i=E3(e,t)),this.setBaseTarget(e,Dn(i)?i.get():i)),Dn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const l=K_(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);l&&(i=l[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Dn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new __),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class f6 extends zG{constructor(){super(...arguments),this.KeyframeResolver=Yz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function m6(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const a in t)n.style.setProperty(a,t[a])}function qG(n){return window.getComputedStyle(n)}class HG extends f6{constructor(){super(...arguments),this.type="html",this.renderInstance=m6}readValueFromInstance(e,t){var i;if(yu.has(t))return(i=this.projection)!=null&&i.isProjecting?sw(t):mz(e,t);{const r=qG(e),a=(S_(t)?r.getPropertyValue(t):r[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return J3(e,t)}build(e,t,i){H_(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return W_(e,t,i)}}const p6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GG(n,e,t,i){m6(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(p6.has(r)?r:q_(r),e.attrs[r])}class $G extends f6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(yu.has(t)){const i=T3(t);return i&&i.default||0}return t=p6.has(t)?t:q_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return q3(e,t,i)}build(e,t,i){U3(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){GG(e,t,i,r)}mount(e){this.isSVGTag=F3(e.tagName),super.mount(e)}}const KG=(n,e)=>$_(n)?new $G(e):new HG(e,{allowProjection:n!==k.Fragment}),WG=Gq({...yH,...OG,...AG,...LG},KG),re=gq(WG);var g6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XI=ft.createContext&&ft.createContext(g6),YG=["attr","size","title"];function QG(n,e){if(n==null)return{};var t=XG(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function XG(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function hg(){return hg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hg.apply(this,arguments)}function ZI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function fg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(t),!0).forEach(function(i){ZG(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ZG(n,e,t){return e=JG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JG(n){var e=e$(n,"string");return typeof e=="symbol"?e:e+""}function e$(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function y6(n){return n&&n.map((e,t)=>ft.createElement(e.tag,fg({key:t},e.attr),y6(e.child)))}function Me(n){return e=>ft.createElement(t$,hg({attr:fg({},n.attr)},e),y6(n.child))}function t$(n){var e=t=>{var{attr:i,size:r,title:a}=n,l=QG(n,YG),u=r||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),ft.createElement("svg",hg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:d,style:fg(fg({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&ft.createElement("title",null,a),n.children)};return XI!==void 0?ft.createElement(XI.Consumer,null,t=>e(t)):e(g6)}function JI(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(n)}function n$(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function Q_(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(n)}function e4(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(n)}function i$(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function v6(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(n)}function r$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(n)}function s$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(n)}function x6(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(n)}function t4(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64z"},child:[]}]})(n)}function w6(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function xw(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function a$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(n)}function o$(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(n)}function l$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(n)}function b6(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(n)}function fy(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(n)}function c$(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function u$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"},child:[]}]})(n)}function d$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(n)}function _6(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function h$(n){return Me({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(n)}function f$(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function m$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function T6(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function nl(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function p$(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function Wh(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function g$(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"},child:[]}]})(n)}function E6(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(n)}function S6(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(n)}function eu(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(n)}function n4(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function my(n){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}function y$(n){return Me({attr:{viewBox:"0 0 536 512"},child:[{tag:"path",attr:{d:"M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z"},child:[]}]})(n)}function tx(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(n)}function v$(n){return Me({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(n)}function py(n){return Me({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Ic(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function A6(n){return Me({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(n)}function mg(n){return Me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function x$(n){return Me({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}function i4(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(n)}function I6(n){return Me({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M253.3 35.1c6.1-11.8 1.5-26.3-10.2-32.4s-26.3-1.5-32.4 10.2L117.6 192 32 192c-17.7 0-32 14.3-32 32s14.3 32 32 32L83.9 463.5C91 492 116.6 512 146 512L430 512c29.4 0 55-20 62.1-48.5L544 256c17.7 0 32-14.3 32-32s-14.3-32-32-32l-85.6 0L365.3 12.9C359.2 1.2 344.7-3.4 332.9 2.7s-16.3 20.6-10.2 32.4L404.3 192l-232.6 0L253.3 35.1zM192 304l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16s16 7.2 16 16zm96-16c8.8 0 16 7.2 16 16l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16zm128 16l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16s16 7.2 16 16z"},child:[]}]})(n)}function X_(n){return Me({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(n)}const w$=()=>{var d,f;const[n,e]=k.useState({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",profileImage:""}),[t,i]=k.useState({}),[r,a]=k.useState("");k.useEffect(()=>{const p=te.auth().onAuthStateChanged(async v=>{if(v){const x=await te.firestore().collection("users").doc(v.uid).get(),_=x.exists?x.data():{};e(T=>({...T,name:v.displayName||"",email:v.email||"",profileImage:_.profileImage||""}))}});return()=>p()},[]);const l=async p=>{const v=p.target.files[0];if(!v)return;const x=te.auth().currentUser;if(!x){i({general:"No authenticated user"});return}try{const _=await te.firestore().collection("users").doc(x.uid).get();if((_.exists?_.data():{}).role!=="seller"){i({general:"Only seller can uploaded profile image"});return}const C=new FormData;C.append("file",v),C.append("upload_preset","test_test");const I=(await(await fetch("https://api.cloudinary.com/v1_1/db8dtpaus/image/upload",{method:"POST",body:C})).json()).secure_url;await te.firestore().collection("users").doc(x.uid).update({profileImage:I}),e(N=>({...N,profileImage:I})),a("Profile image updated"),setTimeout(()=>a(""),3e3)}catch{i({general:"Failed to upload image"})}},u=async p=>{p.preventDefault(),i({}),a("");const v=te.auth().currentUser;if(!v){i({general:"No authenticated user"});return}const x={};if(n.name.trim()||(x.name="Name is required"),n.email.trim()||(x.email="Email is required"),/^\S+@\S+\.\S+$/.test(n.email)||(x.email="Invalid email"),n.newPassword&&(n.currentPassword||(x.currentPassword="Current password required"),n.newPassword.length<6&&(x.newPassword="Password must be at least 6 characters"),n.newPassword!==n.confirmPassword&&(x.confirmPassword="Passwords don't match")),Object.keys(x).length>0){i(x);return}try{if(v.displayName!==n.name&&await v.updateProfile({displayName:n.name}),v.email!==n.email){const _=te.auth.EmailAuthProvider.credential(v.email,n.currentPassword);await v.reauthenticateWithCredential(_),await v.updateEmail(n.email)}if(n.newPassword){const _=te.auth.EmailAuthProvider.credential(reAuthEmail,n.currentPassword);await v.reauthenticateWithCredential(_),await v.updatePassword(n.newPassword)}e(_=>({..._,currentPassword:"",newPassword:"",confirmPassword:""})),a("Profile updated successfully"),setTimeout(()=>a(""),3e3)}catch(_){let T="Failed to update profile";_.code==="auth/invalid-credential"?T="Incorrect current password":_.code==="auth/requires-recent-login"?T="Please reauthenticate to update sensitive information. You might need to log out and log back in.":_.code==="auth/email-already-in-use"&&(T="This email address is already in use by another account."),i({general:T})}};return m.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl mx-auto",children:m.jsxs("div",{className:"",children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-8 font-heading text-center",children:"Profile Settings"}),r&&m.jsx(re.div,{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-300",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:r}),t.general&&m.jsx(re.div,{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-300",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:t.general}),m.jsxs("form",{onSubmit:u,className:"space-y-6",children:[m.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-8",children:[m.jsxs(re.div,{className:"relative",whileHover:{scale:1.05},whileTap:{scale:.95},children:[n.profileImage?m.jsx(re.img,{src:n.profileImage,alt:"Profile",className:"w-24 h-24 md:w-32 md:h-32 rounded-full object-cover border-4 border-primary-light shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}):m.jsx(re.div,{className:"w-24 h-24 md:w-32 md:h-32 rounded-full bg-primary-light border-4 border-primary-light flex items-center justify-center shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsx("span",{className:"text-primary-dark text-4xl md:text-5xl font-bold font-heading",children:(((d=n.name)==null?void 0:d.charAt(0))||((f=n.email)==null?void 0:f.charAt(0))||"A").toUpperCase()})}),m.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 border-2 border-primary-light shadow-md cursor-pointer hover:bg-gray-100 transition",children:[m.jsx("input",{type:"file",accept:"image/*",onChange:l,className:"hidden"}),m.jsx("svg",{className:"w-5 h-5 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828zM5 14a1 1 0 11-2 0 1 1 0 012 0zM13 6l-1.414-1.414 2.828-2.828L15.828 3 13 6zM5 16H4a1 1 0 01-1-1V5a1 1 0 011-1h1M15 16h1a1 1 0 001-1V5a1 1 0 00-1-1h-1m-5.071.293a.999.999 0 00-1.414 0l-6.163 6.163A.996.996 0 001 12v2a1 1 0 001 1h2a.996.996 0 00.707-.293l6.163-6.163a.999.999 0 000-1.414z"})})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-2xl font-bold text-dark font-heading",children:n.name||"Seller User"}),m.jsx("p",{className:"text-dark-muted",children:n.email})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-dark-muted mb-1",children:"Full Name"}),m.jsx("input",{id:"name",type:"text",value:n.name,onChange:p=>e({...n,name:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.name?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Your full name"}),t.name&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-muted mb-1",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:n.email,onChange:p=>e({...n,email:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.email?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"your.email@example.com"}),t.email&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),m.jsx("hr",{className:"my-6 border-gray-200"}),m.jsx("p",{className:"text-sm text-dark-muted mb-1",children:"To change email or password, current password is required."}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Current Password"}),m.jsx("input",{id:"currentPassword",type:"password",value:n.currentPassword,onChange:p=>e({...n,currentPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.currentPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Required for email/password changes"}),t.currentPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.currentPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"New Password"}),m.jsx("input",{id:"newPassword",type:"password",value:n.newPassword,onChange:p=>e({...n,newPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.newPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"new current password"}),t.newPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.newPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Confirm New Password"}),m.jsx("input",{id:"confirmPassword",type:"password",value:n.confirmPassword,onChange:p=>e({...n,confirmPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.confirmPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Confirm your new password"}),t.confirmPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.confirmPassword})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-150 ease-in-out",children:"Update Profile"})})]})]})},"profile")},b$=[{name:"Electronics & Technology",subcategories:["Smartphones & Accessories","Laptops & Computers","Cameras & Photography","Audio & Headphones","Gaming & Consoles","Wearable Tech (Smartwatches, Fitness Bands)"]},{name:"Fashion & Apparel",subcategories:["Men's Clothing","Women's Clothing","Kids & Baby Clothing","Shoes & Accessories (bags, watches, jewelry)"]},{name:"Home & Living",subcategories:["Furniture","Home Decor","Kitchen & Dining","Lighting","Bedding & Bath"]},{name:"Health & Beauty",subcategories:["Skincare","Makeup","Haircare","Fragrances","Personal Care Products"]},{name:"Tools & DIY",subcategories:["Power Tools","Hand Tools","Home Improvement","Garden & Outdoor"]},{name:"Food & Grocery",subcategories:["Fresh Food","Packaged Food","Beverages","Health Supplements"]},{name:"Baby & Kids",subcategories:["Toys & Games","Baby Gear (strollers, car seats)","Kids' Fashion"]},{name:"Books & Media",subcategories:["Books","eBooks","Movies & Music"]},{name:"Sports & Outdoors",subcategories:["Sports Equipment","Outdoor Gear","Fitness Products"]},{name:"Automotive",subcategories:["Car Accessories","Motorcycle Accessories","Car Parts & Tools"]},{name:"Pet Supplies",subcategories:["Food","Toys","Grooming Products"]},{name:"Other General Categories",subcategories:["Office Supplies","Stationery","Gifts","Art & Craft Supplies"]}],C6=({initialProduct:n,onSave:e,onCancel:t,onSuccess:i})=>{const r={name:"",price:"",description:"",category:"",mainImage:"",images:[],properties:[],quantity:1},[a,l]=k.useState(n||r);k.useEffect(()=>{l(n||r)},[]);const[u,d]=k.useState({key:"",value:""}),[f,p]=k.useState({}),[v,x]=k.useState(""),[_,T]=k.useState(!1),[C,D]=k.useState(null),P=async(H,j=!1)=>{const S=H.target.files;if(!(!S||S.length===0))try{const R=[];for(let V=0;V<S.length;V++){const L=S[V],B=new FormData;B.append("file",L),B.append("upload_preset","test_test");const me=await(await fetch("https://api.cloudinary.com/v1_1/db8dtpaus/image/upload",{method:"POST",body:B})).json();if(me.secure_url)R.push(me.secure_url);else throw new Error(me.error.message||"Cloudinary upload failed")}l(j?V=>({...V,mainImage:R[0]}):V=>({...V,images:[...V.images,...R].slice(0,5)}))}catch(R){setTimeout(()=>{p({general:`Failed to upload images: ${R.message}`})},3e3)}},I=()=>{u.key.trim()&&u.value.trim()&&(l(H=>({...H,properties:[...H.properties,u]})),d({key:"",value:""}))},N=H=>{l(j=>({...j,properties:j.properties.filter((S,R)=>R!==H)}))},z=(H,j=!1)=>{l(j?S=>({...S,mainImage:""}):S=>({...S,images:S.images.filter((R,V)=>V!==H)}))},F=async H=>{H.preventDefault(),p({}),x("");const j={};if(a.name.trim()||(j.name="Product name is required"),(!a.price||isNaN(parseFloat(a.price))||parseFloat(a.price)<=0)&&(j.price="Valid positive price is required"),a.description.trim()||(j.description="Product description is required"),a.category||(j.category="Product category is required"),a.mainImage||(j.mainImage="Main image is required"),a.properties.length||(j.properties="At least one property is required"),(a.quantity===void 0||isNaN(a.quantity)||a.quantity<0)&&(j.quantity="Please enter a valid quantity"),Object.keys(j).length>0){p(j);return}try{T(!0);const S={...a,price:Number(parseFloat(a.price).toFixed(2)),updatedAt:te.firestore.FieldValue.serverTimestamp()};if(n)await te.firestore().collection("products").doc(n.id).update(S),e&&e(S);else{const R=te.auth().currentUser;if(S.sellerId=R.uid,S.createdAt=te.firestore.FieldValue.serverTimestamp(),(await te.firestore().collection("products").where("name","==",S.name).where("description","==",S.description).get()).empty)await te.firestore().collection("products").add(S),x("Product added successfully"),setTimeout(()=>{x(""),i&&i()},3e3),l({name:"",price:"",description:"",category:"",mainImage:"",images:[],properties:[]});else{p({general:"This product already exists."}),setTimeout(()=>p(""),3e3);return}}}catch{p({general:"Error saving product"}),p({general:n?"Failed to update product":"Failed to add product"}),setTimeout(()=>{p({})},3e3)}finally{T(!1)}};return m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6 md:p-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-dark font-heading mb-4",children:n?"Edit Product":"Add New Product"}),t&&m.jsx("button",{onClick:t,className:"px-4 py-2 mb-4 bg-gray-200 hover:bg-gray-300 rounded-lg transition",children:"Cancel"}),v&&m.jsx(re.div,{className:"mb-4 p-4 bg-green-100 border-l-4 border-green-500 text-green-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:v})}),f.general&&m.jsx(re.div,{className:"mb-4 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:f.general})}),m.jsxs("form",{onSubmit:F,className:"space-y-6 mt-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"productName",className:"block text-sm font-medium text-dark-muted mb-1",children:"Product Name *"}),m.jsx("input",{id:"productName",type:"text",value:a.name,onChange:H=>l({...a,name:H.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${f.name?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary focus:border-primary"}`,placeholder:"Enter product name"}),f.name&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.name})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"productPrice",className:"block text-sm font-medium text-dark-muted mb-1",children:"Price *"}),m.jsx("input",{id:"productPrice",type:"number",value:a.price,onChange:H=>l({...a,price:H.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${f.price?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary focus:border-primary"}`,placeholder:"Enter price (e.g., 10.99)",step:"0.01",min:"0.01"}),f.price&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.price})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"productCategory",className:"block text-sm font-medium text-dark-muted mb-1",children:"Category *"}),m.jsxs("select",{id:"productCategory",value:a.category,onChange:H=>l({...a,category:H.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors bg-white ${f.category?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary focus:border-primary"}`,children:[m.jsx("option",{value:"",children:"Select Category"}),b$.map(H=>m.jsx("optgroup",{label:H.name,className:"font-semibold",children:H.subcategories.map(j=>m.jsx("option",{value:j,className:"text-dark-muted",children:j},j))},H.name))]}),f.category&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.category})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"productDescription",className:"block text-sm font-medium text-dark-muted mb-1",children:"Description *"}),m.jsx("textarea",{id:"productDescription",value:a.description,onChange:H=>l({...a,description:H.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${f.description?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary focus:border-primary"}`,rows:"4",placeholder:"Enter product description"}),f.description&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.description})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-1",children:"Main Image *"}),m.jsx("div",{className:"flex items-center gap-4",children:a.mainImage?m.jsxs("div",{className:"relative group",children:[m.jsx("img",{src:a.mainImage,alt:"Main product",className:"w-32 h-32 object-cover rounded-lg border-2 border-primary-light shadow-md"}),m.jsx("button",{type:"button",onClick:()=>z(null,!0),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 shadow-md transform opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200","aria-label":"Remove main image",children:m.jsx(Ic,{size:12})})]}):m.jsxs("label",{className:"flex flex-col items-center justify-center w-32 h-32 border-2 border-dashed border-primary-light rounded-lg cursor-pointer hover:bg-primary-lightest transition text-primary",children:[m.jsx("input",{type:"file",accept:"image/*",onChange:H=>P(H,!0),className:"hidden"}),m.jsx(u$,{className:"text-3xl mb-2"}),m.jsx("span",{className:"text-sm font-medium",children:"Upload Main"})]})}),f.mainImage&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.mainImage})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-1",children:"Additional Images (Max 5)"}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.images.map((H,j)=>m.jsxs("div",{className:"relative group",children:[m.jsx("img",{src:H,alt:`Product image ${j+1}`,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200 hover:border-primary-light transition cursor-pointer shadow-sm",onClick:()=>D(H)}),m.jsx("button",{type:"button",onClick:()=>z(j),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md transform opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200","aria-label":`Remove image ${j+1}`,children:m.jsx(Ic,{size:10})})]},j)),a.images.length<5&&m.jsxs("label",{className:"flex flex-col items-center justify-center w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition text-dark-muted hover:text-primary",children:[m.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:P,className:"hidden",disabled:a.images.length>=5}),m.jsx(nl,{className:"text-2xl mb-1"}),m.jsxs("span",{className:"text-xs font-medium",children:["Add (",5-a.images.length," left)"]})]})]})]}),m.jsx(At,{children:C&&m.jsx(re.div,{className:"fixed inset-0 -top-20 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>D(null),children:m.jsxs(re.div,{className:"relative bg-white p-2 rounded-lg shadow-2xl max-w-lg w-full max-h-[80vh]",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:H=>H.stopPropagation(),children:[m.jsx("img",{src:C,alt:"Preview",className:"w-full h-auto object-cover rounded-md max-h-[calc(80vh-60px)]"}),m.jsx("button",{className:"absolute top-3 right-3 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition",onClick:()=>D(null),"aria-label":"Close image preview",type:"button",children:m.jsx(py,{size:20,className:"text-red-500"})})]})})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Product Properties (e.g., Size: XL, Color: Red)"}),m.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.properties.map((H,j)=>m.jsxs(re.div,{className:"flex items-center gap-3 p-2 bg-white rounded shadow-sm",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},layout:!0,children:[m.jsxs("span",{className:"font-medium text-primary",children:[H.key,":"]}),m.jsx("span",{className:"text-dark-muted flex-1",children:H.value}),m.jsx("button",{type:"button",onClick:()=>N(j),className:"ml-auto text-red-500 hover:text-red-700 transition p-1 rounded-full hover:bg-red-100","aria-label":`Remove property ${H.key}`,children:m.jsx(Ic,{size:14})})]},j)),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start pt-2",children:[m.jsx("div",{className:"flex-1 w-full sm:w-auto",children:m.jsx("input",{type:"text",value:u.key,onChange:H=>d({...u,key:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary",placeholder:"Property Name (e.g. Color)"})}),m.jsx("div",{className:"flex-1 w-full sm:w-auto",children:m.jsx("input",{type:"text",value:u.value,onChange:H=>d({...u,value:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary",placeholder:"Property Value (e.g. Blue)"})}),m.jsxs("button",{type:"button",onClick:I,className:"px-4 py-2.5 bg-primary text-white rounded-lg hover:bg-primary-dark transition flex items-center gap-1.5 w-full sm:w-auto justify-center",disabled:!u.key.trim()||!u.value.trim(),children:[m.jsx(nl,{size:14}),m.jsx("span",{children:"Add Property"})]})]}),f.properties&&a.properties.length===0&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.properties})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"productQuantity",className:"block text-sm font-medium text-dark-muted mb-1",children:"Quantity in Stock *"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"productQuantity",type:"number",value:a.quantity,onChange:H=>{l({...a,quantity:H.target.value})},className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${f.quantity?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary focus:border-primary"}`,placeholder:"Enter available quantity"}),f.quantity&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.quantity})]})]}),m.jsx("div",{className:"pt-6",children:m.jsx("button",{type:"submit",disabled:_,className:"w-full py-3 px-4 bg-primary hover:bg-primary-dark/80 text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 transition-all duration-150 ease-in-out disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center text-lg",children:_?m.jsxs(m.Fragment,{children:[m.jsx(my,{className:"animate-spin mr-2"}),n?"Updating...":"Adding..."]}):n?"Update Product":"Add Product"})})]})]})},_$=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState(""),[l,u]=k.useState(null),[d,f]=k.useState(""),[p,v]=k.useState({});k.useEffect(()=>{(async()=>{try{i(!0);const P=te.auth().currentUser;if(!P)return;const N=(await te.firestore().collection("products").where("sellerId","==",P.uid).get()).docs.map(z=>({id:z.id,...z.data()}));e(N)}catch{v({general:"Failed to fetch products"})}finally{i(!1)}})()},[]);const x=async D=>{if(window.confirm("Are you sure you want to delete this product?"))try{i(!0),await te.firestore().collection("products").doc(D).delete(),e(P=>P.filter(I=>I.id!==D)),f("Product deleted successfully"),setTimeout(()=>f(""),3e3)}catch{v({general:"Failed to delete product"})}finally{i(!1)}},_=D=>{u(D)},T=async D=>{try{i(!0),e(P=>P.map(I=>I.id===D.id?D:I)),u(null),f("Product updated successfully"),setTimeout(()=>f(""),3e3)}catch{v({general:"Failed to update product"})}finally{i(!1)}},C=n.filter(D=>D.name.toLowerCase().includes(r.toLowerCase()));return l?m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[m.jsx("button",{onClick:()=>u(null),className:"mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition",children:"← Back to Products"}),m.jsx(C6,{initialProduct:l,onSave:T,onCancel:()=>u(null)})]}):m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-6",children:"All Products"}),d&&m.jsx(re.div,{className:"mb-4 p-4 bg-green-100 border-l-4 border-green-500 text-green-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:d})}),p.general&&m.jsx(re.div,{className:"mb-4 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:p.general})}),m.jsxs("div",{className:"relative mb-6",children:[m.jsx("input",{type:"text",placeholder:"Search products by name...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full md:w-72",value:r,onChange:D=>a(D.target.value)}),m.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),t?m.jsxs("div",{className:"flex justify-center items-center py-12",children:[m.jsx(my,{className:"animate-spin text-primary text-2xl mr-3"}),m.jsx("p",{className:"text-dark-muted",children:"Loading products..."})]}):C.length===0?m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-dark-muted",children:r?"No products match your search":"No products found"})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(D=>m.jsxs(re.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[m.jsx("div",{className:"h-40 bg-gray-100 relative overflow-hidden",children:D.mainImage?m.jsx("img",{src:D.mainImage,alt:D.name,className:"w-full h-full object-cover",loadig:"lazy"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:m.jsx(FaImage,{className:"text-4xl"})})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold text-dark text-lg mb-1 truncate",children:D.name}),m.jsxs("p",{className:"text-primary font-bold text-xl mb-1",children:["$",D.price]}),m.jsx("p",{className:"text-dark-muted text-sm line-clamp-2 mb-2",children:D.description}),m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("button",{onClick:()=>_(D),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition flex items-center gap-2",children:[m.jsx(w6,{size:14}),"Edit"]}),m.jsxs("button",{onClick:()=>x(D.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition flex items-center gap-2",children:[m.jsx(Ic,{size:14}),"Delete"]})]})]})]},D.id))})]})},T$=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState(""),[l,u]=k.useState(""),[d,f]=k.useState(null);k.useEffect(()=>{const x=te.auth().currentUser;if(!x)return;const _=te.firestore().collection("orders").orderBy("createdAt","desc").onSnapshot(T=>{const C=T.docs.map(D=>{var z;const P=D.data(),I=P.items.filter(F=>F.sellerId===x.uid);if(!I||I.length===0)return null;const N=I.reduce((F,H)=>F+H.price*H.quantity,0);return{id:D.id,...P,items:I,total:N,createdAt:(z=P.createdAt)==null?void 0:z.toDate()}}).filter(D=>D!=null);e(C),i(!1)},T=>{a("Failed to load orders"),i(!1),setTimeout(()=>{a("")},3e3)});return()=>_()},[]);const p=async(x,_)=>{f(x);try{const T=te.firestore().collection("orders").doc(x),C=await T.get();if(!C.exists){a("Order not found."),f(null),setTimeout(()=>a(""),3e3);return}const D=C.data(),P=te.auth().currentUser,I=D.items.filter(N=>N.sellerId===P.uid);if(_==="cancelled")for(const N of I){const z=te.firestore().collection("products").doc(N.productId),F=await z.get();if(F.exists){const j=(F.data().quantity||0)+N.quantity;await z.update({quantity:j})}}await T.update({status:_,updatedAt:te.firestore.FieldValue.serverTimestamp()}),u(`Order ${_}d successfully.`),setTimeout(()=>u(""),3e3)}catch{a(`Failed to ${_} order`),setTimeout(()=>a(""),3e3)}finally{f(null)}},v=async()=>{var _;const x=te.auth().currentUser;if(x&&window.confirm("Are you sure you want to clear all your order history (except pending)?"))try{const T=await te.firestore().collection("orders").orderBy("createdAt","desc").get();for(const C of T.docs){const D=C.data(),P=((_=D.items)==null?void 0:_.filter(F=>F.sellerId===x.uid))||[];if(P.length===0||D.status==="pending")continue;const I=P.reduce((F,H)=>F+H.price*H.quantity,0),N={...D,items:P,total:I,sellerId:x.uid,originalOrderId:C.id,clearedAt:te.firestore.FieldValue.serverTimestamp()};await te.firestore().collection("historyorders").add(N);const z=D.items.filter(F=>F.sellerId!==x.uid);z.length===0?await C.ref.delete():(console.log("Updating order:",C.id,"with remaining items:",z),await C.ref.update({items:z,updatedAt:te.firestore.FieldValue.serverTimestamp()}))}u("History cleared and saved successfully."),setTimeout(()=>u(""),3e3)}catch(T){console.error("Error in handleClearHistory:",T),a("Failed to clear history."),setTimeout(()=>a(""),3e3)}};return t?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("h1",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[m.jsx(S6,{})," Sales Orders"]}),m.jsx("div",{className:"flex justify-end mb-4",children:m.jsx("button",{onClick:v,className:"bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded",children:"Clear All History"})})]}),r&&m.jsx("div",{className:"bg-accent-red/10 border-l-4 border-accent-red text-accent-red p-4 mb-6 rounded",children:r}),l&&m.jsx("div",{className:"bg-accent-green/10 border-l-4 border-accent-green text-accent-green p-4 mb-6 rounded",children:l}),n.length===0?m.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:m.jsx("p",{className:"text-gray-500",children:"No orders found"})}):m.jsx("div",{className:"space-y-4",children:n.map(x=>m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border rounded-lg overflow-hidden ${x.status==="confirmed"?"bg-green-50 border-green-200":x.status==="cancelled"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"font-bold",children:["Order #",x.id.substring(0,8)]}),m.jsxs("p",{className:"text-sm text-gray-500",children:[x.createdAt.toLocaleDateString()," at"," ",x.createdAt.toLocaleTimeString()]})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x.status==="confirmed"?"bg-green-100 text-green-800":x.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:x.status})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Items:"}),m.jsx("ul",{className:"space-y-2",children:x.items.map((_,T)=>m.jsxs("li",{className:"flex justify-between",children:[m.jsxs("span",{children:[_.name," x ",_.quantity]}),m.jsxs("span",{children:["$",(_.price*_.quantity).toFixed(2)]})]},T))})]}),m.jsxs("div",{className:"flex justify-between border-t pt-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:"Delivery Address:"}),m.jsxs("p",{children:[x.address.street,", ",x.address.city]}),m.jsxs("p",{children:[x.address.state,", ",x.address.country]}),m.jsxs("p",{children:["Name: ",x.address.fullName]}),m.jsxs("p",{children:["Phone: ",x.address.phone]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-bold",children:["Total: $",x.total.toFixed(2)]})})]})]}),m.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-2",children:x.status==="pending"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>p(x.id,"confirmed"),disabled:d===x.id,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded flex items-center gap-2 disabled:opacity-50",children:d===x.id?"Processing...":m.jsxs(m.Fragment,{children:[m.jsx(s$,{})," Confirm"]})}),m.jsx("button",{onClick:()=>p(x.id,"cancelled"),disabled:d===x.id,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded flex items-center gap-2 disabled:opacity-50",children:d===x.id?"Processing...":m.jsxs(m.Fragment,{children:[m.jsx(py,{})," Cancel"]})})]})})]},x.id))})]})},E$=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState(""),[l,u]=k.useState("");return k.useEffect(()=>{const d=te.auth().currentUser;if(!d)return;const f=te.firestore().collection("historyorders").where("sellerId","==",d.uid).orderBy("clearedAt","desc").onSnapshot(p=>{const v=p.docs.map(x=>{var T,C;const _=x.data();return{id:x.id,..._,createdAt:(T=_.createdAt)==null?void 0:T.toDate(),clearedAt:(C=_.clearedAt)==null?void 0:C.toDate()}});e(v),i(!1)},p=>{a("Failed to load order history"),console.error(p),i(!1),setTimeout(()=>a(""),3e3)});return()=>f()},[]),t?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("div",{className:"flex items-center justify-between mb-6",children:m.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[m.jsx(fy,{})," Order History"]})}),r&&m.jsx("div",{className:"bg-accent-red/10 border-l-4 border-accent-red text-accent-red p-4 mb-6 rounded",children:r}),l&&m.jsx("div",{className:"bg-accent-green/10 border-l-4 border-accent-green text-accent-green p-4 mb-6 rounded",children:l}),n.length===0?m.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:m.jsx("p",{className:"text-gray-500",children:"No order history found."})}):m.jsx("div",{className:"space-y-4",children:n.map(d=>{var f,p,v,x,_,T,C,D;return m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border rounded-lg overflow-hidden ${d.status==="confirmed"?"bg-green-50 border-green-200":d.status==="cancelled"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"font-bold",children:["Order #",((f=d.originalOrderId)==null?void 0:f.substring(0,8))||d.id.substring(0,8)]}),m.jsx("p",{className:"text-sm text-gray-500",children:d.createdAt?d.createdAt.toLocaleDateString()+" "+d.createdAt.toLocaleTimeString():"Unknown Date"}),m.jsxs("p",{className:"text-xs text-gray-400",children:["Cleared on: ",((p=d.clearedAt)==null?void 0:p.toLocaleDateString())||"-"]})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d.status==="confirmed"?"bg-green-100 text-green-800":d.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:d.status})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Items:"}),m.jsx("ul",{className:"space-y-2",children:d.items.map((P,I)=>m.jsxs("li",{className:"flex justify-between",children:[m.jsxs("span",{children:[P.name," x ",P.quantity]}),m.jsxs("span",{children:["$",(P.price*P.quantity).toFixed(2)]})]},I))})]}),m.jsxs("div",{className:"flex justify-between border-t pt-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:"Delivery Address:"}),m.jsxs("p",{children:[(v=d.address)==null?void 0:v.street,", ",(x=d.address)==null?void 0:x.city]}),m.jsxs("p",{children:[(_=d.address)==null?void 0:_.state,", ",(T=d.address)==null?void 0:T.country]}),m.jsxs("p",{children:["Name: ",(C=d.address)==null?void 0:C.fullName]}),m.jsxs("p",{children:["Phone: ",(D=d.address)==null?void 0:D.phone]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-bold",children:["Total: $",d.total.toFixed(2)]})})]})]})]},d.id)})})]})},S$=()=>{const n=ti(),[e,t]=k.useState("add-product"),[i,r]=k.useState(!1),[a,l]=k.useState(!1),u=async()=>{try{await te.auth().signOut(),n("/")}catch{setErrors({general:"Failed to logout"})}},d=()=>{switch(e){case"add-product":return m.jsx(C6,{onSuccess:()=>t("all-products")});case"all-products":return m.jsx(_$,{});case"profile":return m.jsx(w$,{});case"orders":return m.jsx(T$,{});case"order-history":return m.jsx(E$,{});default:return null}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex font-sans",children:[m.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-primary p-4 flex justify-between items-center z-30 shadow-md",children:[m.jsx("h1",{className:"text-xl font-bold text-white font-heading",children:"Seller Dashboard"}),m.jsx(re.button,{onClick:()=>r(!i),className:"text-white focus:outline-none",whileTap:{scale:.9},children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx(At,{mode:"wait",children:i?m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},"close-icon"):m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"},"menu-icon")})})})]}),m.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${i?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static w-64 bg-primary-dark text-white transition-transform duration-300 ease-in-out z-20 flex flex-col shadow-lg`,children:[m.jsx("div",{className:"p-4 border-b border-primary",children:m.jsx("h2",{className:"text-2xl font-bold font-heading text-center",children:"Seller Panel"})}),m.jsxs("nav",{className:"p-4 space-y-2 flex-grow",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(re.button,{onClick:()=>l(!a),className:"w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 hover:bg-primary",layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(v6,{className:"text-lg"}),m.jsx("span",{children:"Products"}),m.jsx(x6,{className:`ml-auto text-sm transition-transform ${a?"rotate-180":""}`})]}),a&&m.jsxs("div",{className:"ml-2 mt-1 space-y-1",children:[m.jsxs(re.button,{onClick:()=>{t("add-product"),r(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="add-product"?"bg-primary/80 text-white":"hover:bg-primary/50"}`,children:[m.jsx(nl,{className:"text-sm"}),m.jsx("span",{children:"Add Product"})]}),m.jsxs(re.button,{onClick:()=>{t("all-products"),r(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="all-products"?"bg-primary/80 text-white":"hover:bg-primary/50"}`,children:[m.jsx(_6,{className:"text-sm"}),m.jsx("span",{children:"All Products"})]})]})]}),m.jsxs(re.button,{onClick:()=>{t("profile"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="profile"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(X_,{className:"text-lg"}),m.jsx("span",{children:"My Profile"})]}),m.jsxs(re.button,{onClick:()=>{t("orders"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="orders"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(I6,{className:"text-lg"}),m.jsx("span",{children:"Orders"})]}),m.jsxs(re.button,{onClick:()=>{t("order-history"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="order-history"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(fy,{className:"text-lg"}),m.jsx("span",{children:"Order History"})]})]}),m.jsx("div",{className:"p-4 border-t-2 border-primary",children:m.jsx("button",{onClick:u,className:"w-full px-4 py-3 bg-accent-red hover:bg-accent-red/90 text-white rounded-lg transition-colors duration-150 ease-in-out font-medium",children:"Log Out"})})]}),m.jsxs("main",{className:"flex-1 md:ml-0 mt-16 md:mt-0",children:[m.jsx("header",{className:"bg-white shadow-sm p-6 sticky top-0 md:top-0 z-10",children:m.jsx("h1",{className:"text-2xl font-bold text-dark font-heading",children:e.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")})}),m.jsx("div",{className:"p-6 overflow-y-auto",style:{height:"calc(100vh - 80px)"},children:m.jsx(At,{mode:"wait",children:d()})})]})]})},A$=()=>{const n=te.auth().currentUser,e=ti(),[t,i]=k.useState("users"),[r,a]=k.useState([]),[l,u]=k.useState(!0),[d,f]=k.useState(!1),[p,v]=k.useState(""),[x,_]=k.useState({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",profileImage:""}),[T,C]=k.useState({}),[D,P]=k.useState("");k.useEffect(()=>{(async()=>{try{const V=(await te.firestore().collection("users").orderBy("createdAt","desc").get()).docs.map(L=>{var B;return{id:L.id,...L.data(),createdAt:((B=L.data().createdAt)==null?void 0:B.toDate().toLocaleString())||"N/A"}});a(V)}catch{C({general:"Failed to load users"})}finally{u(!1)}})()},[]),k.useEffect(()=>{const S=te.auth().onAuthStateChanged(async R=>{if(R){const V=await te.firestore().collection("users").doc(R.uid).get(),L=V.exists?V.data():{};_(B=>({...B,name:R.displayName||"",email:R.email||"",profileImage:L.profileImage||""}))}});return()=>S()},[]);const I=async(S,R)=>{try{await te.firestore().collection("users").doc(S).update({role:R}),a(r.map(V=>V.id===S?{...V,role:R}:V)),P(`User role updated to ${R}`),setTimeout(()=>P(""),3e3)}catch{C({general:"Failed to update user role"})}},N=async S=>{if(window.confirm("Are you sure you want to delete this user?"))try{if(S===n.uid){C({general:"Cannot delete your own account"}),setTimeout(()=>C({}),3e3);return}await te.firestore().collection("users").doc(S).delete(),a(r.filter(R=>R.id!==S)),P("User deleted successfully"),setTimeout(()=>P(""),3e3)}catch{C({general:"Failed to delete user"})}},z=async S=>{const R=S.target.files[0];if(!R)return;const V=te.auth().currentUser;if(!V){C({general:"No authenticated user"});return}try{const L=await te.firestore().collection("users").doc(V.uid).get();if((L.exists?L.data():{}).role!=="admin"){C({general:"Only admin can upload profile image"});return}const O=new FormData;O.append("file",R),O.append("upload_preset","test_test");const $=(await(await fetch("https://api.cloudinary.com/v1_1/db8dtpaus/image/upload",{method:"POST",body:O})).json()).secure_url;await te.firestore().collection("users").doc(V.uid).update({profileImage:$}),_(se=>({...se,profileImage:$})),P("Profile image updated"),setTimeout(()=>P(""),3e3)}catch{C({general:"Failed to upload image"})}},F=async S=>{S.preventDefault(),C({}),P("");const R=te.auth().currentUser;if(!R){C({general:"No authenticated user"});return}const V=await te.firestore().collection("users").doc(R.uid).get();if((V.exists?V.data():{}).role!=="admin"){C({general:"Only admin can update profile"});return}const B={};if(x.name.trim()||(B.name="Name is required"),x.email.trim()||(B.email="Email is required"),/^\S+@\S+\.\S+$/.test(x.email)||(B.email="Invalid email"),x.newPassword&&(x.currentPassword||(B.currentPassword="Current password required"),x.newPassword.length<6&&(B.newPassword="Password must be at least 6 characters"),x.newPassword!==x.confirmPassword&&(B.confirmPassword="Passwords don't match")),Object.keys(B).length>0){C(B);return}try{if(R.displayName!==x.name&&await R.updateProfile({displayName:x.name}),R.email!==x.email){const O=te.auth.EmailAuthProvider.credential(R.email,x.currentPassword);await R.reauthenticateWithCredential(O),await R.updateEmail(x.email)}if(x.newPassword){const O=te.auth.EmailAuthProvider.credential(reAuthEmail,x.currentPassword);await R.reauthenticateWithCredential(O),await R.updatePassword(x.newPassword)}_(O=>({...O,currentPassword:"",newPassword:"",confirmPassword:""})),P("Profile updated successfully"),setTimeout(()=>P(""),3e3)}catch(O){let me=O.message;C({general:me})}},H=async()=>{try{await te.auth().signOut(),e("/")}catch{C({general:"Failed to logout"})}},j=r.filter(S=>S.email.toLowerCase().includes(p.toLowerCase())||S.displayName&&S.displayName.toLowerCase().includes(p.toLowerCase()));return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex font-sans",children:[m.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-primary p-4 flex justify-between items-center z-30 shadow-md",children:[m.jsx("h1",{className:"text-xl font-bold text-white font-heading",children:"Admin Dashboard"}),m.jsx(re.button,{onClick:()=>f(!d),className:"text-white focus:outline-none",whileTap:{scale:.9},children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx(At,{mode:"wait",children:d?m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},"close-icon"):m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"},"menu-icon")})})})]}),m.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${d?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static w-64 bg-primary-dark text-white transition-transform duration-300 ease-in-out z-20 flex flex-col shadow-lg`,children:[m.jsx("div",{className:"p-4 border-b border-primary",children:m.jsx("h2",{className:"text-2xl font-bold font-heading text-center",children:"Admin Panel"})}),m.jsxs("nav",{className:"p-4 space-y-2 flex-grow",children:[m.jsxs(re.button,{onClick:()=>{i("users"),f(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium text-nowrap flex items-center ${t==="users"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(x$,{className:"mr-2 text-2xl md:inline "}),m.jsx("span",{className:"inline md:hdden lg:inline",children:"Manage users"})]}),m.jsxs(re.button,{onClick:()=>{i("profile"),f(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium text-nowrap flex items-center ${t==="profile"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:"activeTabIndicator",transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(X_,{className:"mr-2 text-2xl md:inline "}),m.jsx("span",{className:"inline md:hdden lg:inline",children:"My profile"})]})]}),m.jsx("div",{className:"p-4 border-t-2 border-primary",children:m.jsx("button",{onClick:H,className:"w-full px-4 py-3 bg-accent-red hover:bg-accent-red hover:brightness-90 text-white rounded-lg transition-colors duration-150 ease-in-out font-medium",children:"Log Out"})})]}),m.jsxs("main",{className:"flex-1 md:ml-0 mt-16 md:mt-0",children:[m.jsx("header",{className:"bg-white shadow-sm p-6 sticky top-0 md:top-0 z-10",children:m.jsx("h1",{className:"text-2xl font-bold text-dark font-heading",children:t.charAt(0).toUpperCase()+t.slice(1)})}),m.jsxs("div",{className:"p-6 overflow-y-auto",style:{height:"calc(100vh - 80px)"},children:[D&&m.jsx(re.div,{className:"mb-4 p-4 bg-green-100 border-l-4 border-green-500 text-green-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:D})}),T.general&&m.jsx(re.div,{className:"mb-4 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md shadow",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:m.jsx("p",{className:"font-medium",children:T.general})}),m.jsx(At,{mode:"wait",children:t==="users"?m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6",children:[m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[m.jsxs("h2",{className:"text-xl font-semibold text-dark font-heading",children:["All Users (",j.length,")"]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"Search users by name or email...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full md:w-72",value:p,onChange:S=>v(S.target.value)}),m.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),l?m.jsxs("div",{className:"flex justify-center items-center py-12",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-primary-dark"}),m.jsx("p",{className:"ml-4 text-dark-muted",children:"Loading Users..."})]}):j.length===0?m.jsx("p",{className:"text-dark-muted text-center py-8",children:"No users found matching your criteria."}):m.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-muted uppercase tracking-wider",children:"Name"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-muted uppercase tracking-wider",children:"Email"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-muted uppercase tracking-wider",children:"Created At"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-muted uppercase tracking-wider",children:"Role"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-muted uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(S=>m.jsxs(re.tr,{layout:!0,initial:{opacity:1,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"hover:bg-gray-100 transition-colors duration-150",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-ful flex items-center justify-center",children:m.jsx("img",{src:S.profileImage,alt:"Profile",className:"w-full h-full object-cover"})}),m.jsx("div",{className:"ml-4",children:m.jsx("div",{className:"text-sm font-medium text-dark",children:S.displayName||S.email.split("@")[0]})})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-muted",children:S.email}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-muted",children:S.createdAt}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("select",{value:S.role||"buyer",onChange:R=>I(S.id,R.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all",children:[m.jsx("option",{value:"buyer",children:"Buyer"}),m.jsx("option",{value:"seller",children:"Seller"}),m.jsx("option",{value:"admin",children:"Admin"})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.jsx("button",{onClick:()=>N(S.id),className:"text-accent-red hover:text-red-700 transition-colors font-semibold",children:"Delete"})})]},S.id))})]})})]},"users"):m.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl mx-auto",children:m.jsxs("div",{className:"",children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-8 font-heading text-center",children:"Profile Settings"}),m.jsxs("form",{onSubmit:F,className:"space-y-6",children:[m.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-8",children:[m.jsxs(re.div,{className:"relative",whileHover:{scale:1.05},whileTap:{scale:.95},children:[x.profileImage?m.jsx(re.img,{src:x.profileImage,alt:"Profile",className:"w-24 h-24 md:w-32 md:h-32 rounded-full object-cover border-4 border-primary-light shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}):m.jsx(re.div,{className:"w-24 h-24 md:w-32 md:h-32 rounded-full bg-primary-light border-4 border-primary-light flex items-center justify-center shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsx("span",{className:"text-primary-dark text-4xl md:text-5xl font-bold font-heading",children:(x.name.charAt(0)||x.email.charAt(0)||"A").toUpperCase()})}),m.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 border-2 border-primary-light shadow-md cursor-pointer hover:bg-gray-100 transition",children:[m.jsx("input",{type:"file",accept:"image/*",onChange:z,className:"hidden"}),m.jsx("svg",{className:"w-5 h-5 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828zM5 14a1 1 0 11-2 0 1 1 0 012 0zM13 6l-1.414-1.414 2.828-2.828L15.828 3 13 6zM5 16H4a1 1 0 01-1-1V5a1 1 0 011-1h1M15 16h1a1 1 0 001-1V5a1 1 0 00-1-1h-1m-5.071.293a.999.999 0 00-1.414 0l-6.163 6.163A.996.996 0 001 12v2a1 1 0 001 1h2a.996.996 0 00.707-.293l6.163-6.163a.999.999 0 000-1.414z"})})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-2xl font-bold text-dark font-heading",children:x.name||"Admin User"}),m.jsx("p",{className:"text-dark-muted",children:x.email})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-dark-muted mb-1",children:"Full Name"}),m.jsx("input",{id:"name",type:"text",value:x.name,onChange:S=>_({...x,name:S.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${T.name?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Your full name"}),T.name&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.name})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-muted mb-1",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:x.email,onChange:S=>_({...x,email:S.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${T.email?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"your.email@example.com"}),T.email&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.email})]}),m.jsx("hr",{className:"my-6 border-gray-200"}),m.jsx("p",{className:"text-sm text-dark-muted mb-1",children:"To change email or password, current password is required."}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Current Password"}),m.jsx("input",{id:"currentPassword",type:"password",value:x.currentPassword,onChange:S=>_({...x,currentPassword:S.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${T.currentPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Required for email/password changes"}),T.currentPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.currentPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"New Password"}),m.jsx("input",{id:"newPassword",type:"password",value:x.newPassword,onChange:S=>_({...x,newPassword:S.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${T.newPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"new current password"}),T.newPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.newPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Confirm New Password"}),m.jsx("input",{id:"confirmPassword",type:"password",value:x.confirmPassword,onChange:S=>_({...x,confirmPassword:S.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${T.confirmPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Confirm your new password"}),T.confirmPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.confirmPassword})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-150 ease-in-out",children:"Update Profile"})})]})]})},"profile")})]})]})]})};function nx(n){return Me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5H7z"},child:[]}]})(n)}const r4=[{name:"Electronics & Technology",subcategories:["Smartphones & Accessories","Laptops & Computers","Cameras & Photography","Audio & Headphones","Gaming & Consoles","Wearable Tech (Smartwatches, Fitness Bands)"]},{name:"Fashion & Apparel",subcategories:["Men's Clothing","Women's Clothing","Kids & Baby Clothing","Shoes & Accessories (bags, watches, jewelry)"]},{name:"Home & Living",subcategories:["Furniture","Home Decor","Kitchen & Dining","Lighting","Bedding & Bath"]},{name:"Health & Beauty",subcategories:["Skincare","Makeup","Haircare","Fragrances","Personal Care Products"]},{name:"Tools & DIY",subcategories:["Power Tools","Hand Tools","Home Improvement","Garden & Outdoor"]},{name:"Food & Grocery",subcategories:["Fresh Food","Packaged Food","Beverages","Health Supplements"]},{name:"Baby & Kids",subcategories:["Toys & Games","Baby Gear (strollers, car seats)","Kids' Fashion"]},{name:"Books & Media",subcategories:["Books","eBooks","Movies & Music"]},{name:"Sports & Outdoors",subcategories:["Sports Equipment","Outdoor Gear","Fitness Products"]},{name:"Automotive",subcategories:["Car Accessories","Motorcycle Accessories","Car Parts & Tools"]},{name:"Pet Supplies",subcategories:["Food","Toys","Grooming Products"]},{name:"Other General Categories",subcategories:["Office Supplies","Stationery","Gifts","Art & Craft Supplies"]}],vr=()=>{const[n,e]=k.useState(!1),[t,i]=k.useState(!1),[r,a]=k.useState(!1),[l,u]=k.useState(null),[d,f]=k.useState(""),[p,v]=k.useState([]),[x,_]=k.useState(!1),[T,C]=k.useState(null),[D,P]=k.useState(null),[I,N]=k.useState(!1),[z,F]=k.useState([]),[H,j]=k.useState(0),S=ti(),[R,V]=k.useState({}),[L,B]=k.useState("");k.useEffect(()=>{const _e=te.auth().onAuthStateChanged(async Ge=>{if(Ge)try{const Be=await te.firestore().collection("users").doc(Ge.uid).get();if(Be.exists){const Tt=Be.data();if(P(Tt.profileImage),Tt.role!=="buyer"){await te.auth().signOut(),S("/");return}}C(Ge)}catch{V({general:"Error fetching user data:"}),setTimeout(()=>{V({})},3e3)}else C(null),F(0)});return()=>_e()},[]),k.useEffect(()=>{if(T){const _e=te.firestore().collection("carts").doc(T.uid).onSnapshot(Ge=>{if(Ge.exists){const Tt=Ge.data().items||[];F(Tt);const Sn=Tt.reduce(($n,kr)=>$n+kr.quantity,0);j(Sn)}else F([]),j(0)});return()=>_e()}else F([]),j(0)},[T]),k.useEffect(()=>{if(d.trim()===""){v([]);return}(async()=>{_(!0);try{const Tt=(await te.firestore().collection("products").get()).docs.map(Sn=>({id:Sn.id,...Sn.data()})).filter(Sn=>{const $n=d.toLowerCase();return Sn.name.toLowerCase().includes($n)||Sn.description.toLowerCase().includes($n)});v(Tt)}catch{V({general:"Error searching products:"}),v([])}finally{_(!1)}})()},[d]);const O=_e=>{const Ge=_e.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");S(`/product/${Ge}`),f("")},me=async()=>{try{await te.auth().signOut(),N(!1),S("/")}catch(_e){V({general:"Error signing out.",error:_e})}},ve=k.useRef(null),$=()=>{e(!n),n&&(a(!1),u(null))},se=()=>{a(!r)},ae=_e=>{u(l!==_e?_e:null)},xe=_e=>_e.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-"),q=()=>{clearTimeout(ve.current),i(!0)},ce=()=>{ve.current=setTimeout(()=>{i(!1)},200)},ge=()=>{i(!1),n&&$()},pe={hidden:{opacity:0,y:-15,height:0},visible:{opacity:1,y:0,height:"auto",transition:{duration:.5,when:"beforeChildren",staggerChildren:.08}},exit:{opacity:0,y:-15,height:0,transition:{duration:.3,when:"afterChildren",staggerChildren:.05}}},Ce={hidden:{opacity:0,y:-10},visible:{opacity:1,y:0},exit:{opacity:0,y:-10}},Le={hidden:{opacity:0,y:-15},visible:{opacity:1,y:0},exit:{opacity:0,y:-15}};return m.jsxs(re.nav,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white shadow-md fixed left-0 top-0 z-40 w-full",children:[m.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsx("div",{className:"flex items-center",children:m.jsxs(Xt,{to:"/",className:"text-2xl font-bold text-primary font-heading",children:["Buy",m.jsx("span",{className:"text-dark",children:"NGo"})]})}),m.jsxs("div",{className:"hidden lg:flex items-center space-x-8",children:[m.jsx(Xt,{to:"/",className:"text-dark hover:text-primary transition",children:"Home"}),m.jsxs("div",{className:"relative",onMouseEnter:q,onMouseLeave:ce,children:[m.jsxs("button",{className:"flex items-center text-dark hover:text-primary transition",children:["Categories",m.jsx(re.span,{animate:{rotate:t?180:0},className:"ml-1",children:m.jsx(nx,{size:28})})]}),m.jsx(At,{mode:"wait",children:t&&m.jsx(re.div,{variants:pe,initial:"hidden",animate:"visible",exit:"exit",className:"fixed left-0 right-0 w-screen top-[60px] bg-gray-50 shadow-xl border-t border-gray-200 z-20  max-h-[90vh] overflow-y-auto",children:m.jsx("div",{className:"max-w-7xl px-6 py-8",children:m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-x-6 gap-y-8",children:r4.map((_e,Ge)=>m.jsxs(re.div,{className:"space-y-3",variants:Ce,children:[m.jsx(re.h3,{className:"text-md font-semibold text-primary mb-2 border-b-2 border-primary-light pb-2",variants:Ce,children:_e.name}),m.jsx("ul",{className:"space-y-1.5",children:_e.subcategories.map((Be,Tt)=>m.jsx(re.li,{variants:Le,transition:{delay:Tt*.1},children:m.jsx(Xt,{to:`/category/${xe(_e.name)}/${xe(Be)}`,className:"block text-sm text-dark-muted hover:text-primary hover:underline",onClick:ge,children:Be})},Tt))})]},Ge))})})})})]}),m.jsx(Xt,{to:"/shopping",className:"text-dark hover:text-primary transition",children:"Shopping"}),m.jsx(Xt,{to:"/contact",className:"text-dark hover:text-primary transition",children:"Contact"})]}),m.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[m.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[m.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:_e=>f(_e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full"}),m.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d&&m.jsx("div",{className:"absolute w-full bg-white shadow-lg border rounded-md mt-1 max-h-60 overflow-y-auto z-10",children:x?m.jsx("p",{className:"p-4 text-center text-gray-500",children:"Searching..."}):p.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500",children:"No products found."}):p.map(_e=>m.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>O(_e),children:[m.jsx("img",{src:_e.mainImage||"https://via.placeholder.com/50",alt:_e.name,className:"w-12 h-12 object-cover rounded-md"}),m.jsx("span",{className:"text-dark truncate",children:_e.name})]},_e.id))})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>N(!I),className:"flex items-center text-dark hover:text-primary transition",children:T?m.jsx(m.Fragment,{children:D?m.jsx("div",{className:"w-8 h-8",children:m.jsx("img",{src:D,alt:"User",className:"w-full h-full rounded-full object-cover"})}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center",children:T.email.charAt(0).toUpperCase()||"U"})}):m.jsx(mg,{size:18})}),m.jsx(At,{children:I&&m.jsx(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:T?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[m.jsx("p",{className:"text-sm font-medium text-dark truncate",children:T.displayName||"User"}),m.jsx("p",{className:"text-xs text-gray-500 truncate",children:T.email})]}),m.jsx(Xt,{to:"/buyerdashboard",className:"block px-4 py-2 text-sm text-dark hover:bg-gray-100",onClick:()=>N(!1),children:"Dashboard"}),m.jsxs("button",{onClick:me,className:"w-full text-left px-4 py-2 text-sm text-dark hover:bg-gray-100 flex items-center",children:[m.jsx(n4,{className:"mr-2"})," Logout"]})]}):m.jsx(Xt,{to:"/signin",className:"block px-4 py-2 text-sm text-dark hover:bg-gray-100",onClick:()=>N(!1),children:"Sign In"})})})]}),m.jsxs(Xt,{to:"/cart",className:"relative text-dark hover:text-primary transition",children:[m.jsx(eu,{size:20}),H>0&&m.jsx(re.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 bg-accent-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:H})]})]}),m.jsx("div",{className:"md:hidden flex items-center",children:m.jsx("button",{onClick:$,className:"text-dark hover:text-primary focus:outline-none",children:n?m.jsx(py,{size:24}):m.jsx(i$,{size:24})})})]})}),L&&m.jsx(re.div,{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-300 absolute top-[90px] z-40 left-[30px]",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:L}),R.general&&m.jsx(re.div,{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-300 absolute top-[90px] z-40 left-[30px]",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:R.general}),m.jsx(At,{children:n&&m.jsx(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white overflow-y-auto max-h-[calc(100vh-4rem)]",children:m.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[m.jsx(Xt,{to:"/",className:"block px-3 py-3 rounded-md text-dark hover:bg-gray-100",onClick:$,children:"Home"}),m.jsxs("div",{children:[m.jsxs("button",{onClick:se,className:"flex items-center justify-between w-full px-3 py-3 rounded-md text-dark hover:bg-gray-100",children:[m.jsx("span",{children:"Categories"}),m.jsx(re.span,{animate:{rotate:r?180:0},children:m.jsx(nx,{size:24})})]}),m.jsx(At,{children:r&&m.jsx(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 space-y-0.5 pl-3",children:r4.map((_e,Ge)=>m.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[m.jsxs("button",{onClick:()=>ae(Ge),className:"flex items-center justify-between w-full px-3 py-3 text-dark hover:bg-gray-50 text-left rounded-md",children:[m.jsx("span",{className:"font-medium text-sm",children:_e.name}),m.jsx(re.span,{animate:{rotate:l===Ge?180:0},children:m.jsx(nx,{size:22})})]}),m.jsx(At,{children:l===Ge&&m.jsx(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pl-4 pr-2 pt-1 pb-2 space-y-1 bg-gray-50",children:_e.subcategories.map((Be,Tt)=>m.jsx(Xt,{to:`/category/${xe(_e.name)}/${xe(Be)}`,className:"block px-3 py-2 text-xs text-dark-muted hover:text-primary hover:bg-gray-100 rounded-md",onClick:ge,children:Be},Tt))})})]},Ge))})})]}),m.jsx(Xt,{to:"/shopping",className:"block px-3 py-3 rounded-md text-dark hover:bg-gray-100",onClick:$,children:"Shopping"}),m.jsx(Xt,{to:"/contact",className:"block px-3 py-3 rounded-md text-dark hover:bg-gray-100",onClick:$,children:"Contact"}),m.jsxs("div",{className:"pt-4 border-t border-gray-200 mt-2",children:[m.jsxs("div",{className:"relative mb-4",children:[m.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),m.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),m.jsxs("div",{className:"flex justify-around mt-4 px-2",children:[m.jsx("div",{className:"flex items-center",children:T?m.jsxs("div",{className:"flex flex-col items-center space-y-2 w-full",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[D?m.jsx("img",{src:D,alt:"User",className:"w-8 h-8 rounded-full object-cover"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center",children:T.email.charAt(0).toUpperCase()||"U"}),m.jsx("span",{className:"text-sm font-medium",children:T.displayName||"User"})]}),m.jsxs("div",{className:"flex space-x-4 w-full justify-center",children:[m.jsx(Xt,{to:"/buyerdashboard",className:"text-sm text-dark hover:text-primary",onClick:$,children:"Dashboard"}),m.jsxs("button",{onClick:me,className:"text-sm text-dark hover:text-primary flex items-center",children:[m.jsx(n4,{className:"mr-1"})," Logout"]})]})]}):m.jsxs(Xt,{to:"/signin",className:"text-dark hover:text-primary flex flex-col items-center",onClick:$,children:[m.jsx(mg,{size:18,className:"mb-1"})," Signin"]})}),m.jsxs(Xt,{to:"/cart",className:"relative text-dark hover:text-primary flex flex-col items-center",onClick:$,children:[m.jsx(eu,{size:20,className:"mb-1"})," Cart",H>0&&m.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-accent-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:H})]})]})]})]})})})]})};function Yh({product:n,user:e,className:t}){const[i,r]=k.useState(""),[a,l]=k.useState(""),u=async()=>{if(!n.quantity||n.quantity<=0){r("Out of stock"),l(""),d();return}if(!e){r("Please login to add to cart"),l(""),d();return}try{const f=te.firestore().collection("carts").doc(e.uid),p=await f.get();if(!p.exists)await f.set({items:[{productId:n.id,quantity:1,sellerId:n.sellerId||"",price:n.price||0,name:n.name||"",mainImage:n.mainImage||""}]});else{let x=p.data().items||[];const _=x.findIndex(T=>T.productId===n.id);if(_>-1){if(x[_].quantity>=n.quantity){r("You've reached the maximum stock limit"),l(""),d();return}x[_].quantity+=1}else x.push({productId:n.id,quantity:1,sellerId:n.sellerId||"",price:n.price||0,name:n.name||"",mainImage:n.mainImage||""});await f.update({items:x})}l("Product added to cart"),r(""),d()}catch{r("Failed to add product to cart. Try again."),l(""),d()}},d=()=>{setTimeout(()=>{r(""),l("")},3e3)};return m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:u,className:t||"",disabled:!n.quantity||n.quantity===0,children:n.quantity===0?"Out of Stock":"Add to Cart"}),m.jsx(At,{children:a&&m.jsx(re.div,{className:"mb-4 p-3 bg-green-100 text-accent-green rounded-md border border-accent-green fixed top-[70px] z-999 left-[0px]",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:a},"success")}),m.jsx(At,{children:i&&m.jsx(re.div,{className:"mb-4 p-3 bg-red-100 text-accent-red rounded-md border border-accent-red fixed top-[70px] z-999 left-[0px]",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:i},"error")})]})}const Qh=()=>m.jsx("footer",{className:`bg-gradient-to-r from-primary to-primary-light text-white py-8
        `,children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[m.jsxs("div",{className:"col-span-1",children:[m.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[m.jsx(eu,{className:"mr-2"}),"BuyNGo"]}),m.jsx("p",{className:"text-indigo-100",children:"Adeegga iibsashada online ee ugu fiican ee Soomaaliya."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold mb-4",children:"Qiuck Links"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsx("li",{children:m.jsxs("a",{href:"/",className:"text-gray-100 hover:text-white flex items-center",children:[m.jsx(c$,{className:"mr-2"})," Home"]})}),m.jsx("li",{children:m.jsxs("a",{href:"/about",className:"text-gray-100 hover:text-white flex items-center",children:[m.jsx(d$,{className:"mr-2"})," About"]})}),m.jsx("li",{children:m.jsxs("a",{href:"/contact",className:"text-gray-100 hover:text-white flex items-center",children:[m.jsx(xw,{className:"mr-2"})," Contact"]})})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold mb-4",children:"Contact Us"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx(xw,{className:"mr-2"})," info@buyngo.so"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(T6,{className:"mr-2"})," +252 61 123 4567"]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold mb-4",children:"Sameeyaha"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(b6,{className:"text-accent-red mr-2"}),m.jsx("span",{children:"Abdinasir Ahmed Bashir"})]})]})]}),m.jsx("div",{className:"border-t border-primary mt-8 pt-6 text-center text-gray-100",children:m.jsxs("p",{children:["© ",new Date().getFullYear()," BuyNGo. Dhamaan xuquuqaha waa la xifdiyay."]})})]})}),I$=()=>{const[n,e]=k.useState(null),{subcategorySlug:t}=b4(),[i,r]=k.useState([]),[a,l]=k.useState(!0),[u,d]=k.useState(""),[f,p]=k.useState(1),v=ti(),x=12;k.useEffect(()=>{(async()=>{l(!0),d("");try{const H=(await te.firestore().collection("products").get()).docs.map(j=>({id:j.id,...j.data()})).filter(j=>I(j.category)===t);r(H)}catch{d("Failed to load products. Please try again later.")}finally{l(!1)}})()},[t]),k.useEffect(()=>{const N=te.auth().onAuthStateChanged(z=>{e(z)});return()=>N()},[]);const _=Math.ceil(i.length/x),T=(f-1)*x,C=i.slice(T,T+x),D=N=>{N>=1&&N<=_&&p(N)},P=N=>{const z=N.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");v(`/product/${z}`)},I=N=>N.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");return a?m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[m.jsx(vr,{}),m.jsx("div",{className:"flex-grow flex items-center justify-center",children:m.jsx(my,{className:"animate-spin text-4xl text-primary"})})]}):u?m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[m.jsx(vr,{}),m.jsx("div",{className:"flex-grow flex items-center justify-center",children:m.jsx("p",{className:"text-accent-red text-xl",children:u})})]}):i.length===0?m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[m.jsx(vr,{}),m.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4",children:[m.jsx("h2",{className:"text-2xl font-heading text-dark mb-4",children:"No products found"}),m.jsx("p",{className:"text-dark-muted mb-6",children:"No products found in this category."})]})]}):m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col mt-16",children:[m.jsx(vr,{}),m.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-4xl font-heading font-bold text-dark capitalize",children:t.replace(/-/g," ")}),m.jsxs("p",{className:"text-dark-muted mt-2",children:["Showing ",C.length," of ",i.length," products"]})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:C.map(N=>m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition duration-300",children:[m.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:N.mainImage?m.jsx("img",{src:N.mainImage,alt:N.name,className:"w-full h-full object-cover",onClick:()=>P(N)}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:m.jsx("span",{className:"text-dark-muted",children:"No Image"})})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold text-lg text-dark mb-1 truncate",children:N.name}),m.jsxs("p",{className:"text-primary font-bold text-xl mb-2",children:["$",N.price]}),m.jsx("p",{className:"text-dark-muted text-sm mb-3 line-clamp-2",children:N.description}),m.jsx(Yh,{product:N,user:n,className:"w-full py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition flex items-center justify-center gap-2"})]})]},N.id))}),_>1&&m.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8 pb-24",children:[m.jsx("button",{onClick:()=>D(f-1),disabled:f===1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx(n$,{})}),[...Array(_)].map((N,z)=>m.jsx("button",{onClick:()=>D(z+1),className:`px-4 py-2 rounded-full text-sm font-medium ${f===z+1?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,children:z+1},z)),m.jsx("button",{onClick:()=>D(f+1),disabled:f===_,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx(Q_,{})})]})]}),m.jsx(Qh,{})]})},C$=()=>{const{productId:n}=b4(),e=ti(),[t,i]=k.useState(null),[r,a]=k.useState(!0),[l,u]=k.useState(""),[d,f]=k.useState(0),[p,v]=k.useState([]),[x,_]=k.useState(!1),[T,C]=k.useState(null),[D,P]=k.useState([]),[I,N]=k.useState({rating:0,comment:""}),[z,F]=k.useState(null),[H,j]=k.useState(null),S=D.length>0?(D.reduce((O,me)=>O+me.rating,0)/D.length).toFixed(1):0;k.useEffect(()=>{(async()=>{try{const ve=(await te.firestore().collection("products").get()).docs.map(se=>({id:se.id,...se.data()})),$=ve.filter(se=>se.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-")===n.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-"));if($.length>0){const se=$[0];if(i(se),se.sellerId){const xe=await te.firestore().collection("users").doc(se.sellerId).get();xe.exists&&(F(xe.data()),j(se.sellerId))}const ae=ve.filter(xe=>xe.category===se.category&&xe.id!==se.id).slice(0,8);v(ae)}else u("Product not found.")}catch{u("Error fetching product details.")}finally{a(!1)}})()},[n]),k.useEffect(()=>{const O=te.auth().onAuthStateChanged(me=>{C(me)});return()=>O()},[]),k.useEffect(()=>{(async()=>{if(!n)return;const me=n.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-"),ve=await te.firestore().collection("reviews").where("productId","==",me).orderBy("createdAt","desc").get();P(ve.docs.map($=>({id:$.id,...$.data(),createdAt:$.data().createdAt.toDate()||"N/A"})))})()},[n]);const R=O=>{f(O)},V=O=>{const me=O.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");e(`/product/${me}`)},L=async O=>{if(O.preventDefault(),!T)return alert("Please login to leave a review.");if(I.rating===0||I.comment.trim()==="")return alert("Please provide a rating and comment.");const me=n.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");await te.firestore().collection("reviews").add({productId:me,buyerId:T.uid,sellerId:H,username:T.displayName||T.email,rating:I.rating,comment:I.comment,createdAt:te.firestore.FieldValue.serverTimestamp()}),N({rating:0,comment:""});const ve=await te.firestore().collection("reviews").where("productId","==",me).orderBy("createdAt","desc").get();P(ve.docs.map($=>({id:$.id,...$.data(),createdAt:$.data().createdAt.toDate()||"N/A"})))},B=O=>{const me=[],ve=Math.floor(O),se=O-ve>=.5;for(let ae=1;ae<=5;ae++)ae<=ve?me.push(m.jsx(tx,{className:"text-yellow-400"},ae)):ae===ve+1&&se?me.push(m.jsx(y$,{className:"text-yellow-400"},ae)):me.push(m.jsx(i4,{className:"text-yellow-400"},ae));return me};return r?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"min-h-screen bg-gray-50 flex justify-center items-center",children:[m.jsx(vr,{}),m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})]})}):l?m.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center items-center text-red-500",children:l}):m.jsxs("div",{className:"min-h-screen bg-gray-50 mt-20",children:[m.jsx(vr,{}),m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsx("div",{className:"relative h-80 w-full",children:m.jsx(At,{mode:"wait",children:m.jsx(re.img,{src:t.images[d]||t.mainImage,alt:t.name,className:"w-full h-full object-contain",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.3},loadig:"lazy"},d)})}),t.images.length>1&&m.jsx("div",{className:"flex p-4 space-x-2 overflow-x-auto mt-4",children:t.images.map((O,me)=>m.jsx(re.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(me),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden cursor-pointer border-2 ${d===me?"border-primary":"border-transparent"}`,children:m.jsx("img",{src:O,alt:`Thumbnail ${me+1}`,className:"w-full h-full object-cover"})},me))})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(re.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),m.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[m.jsx("div",{className:"flex",children:B(S)}),m.jsxs("span",{className:"text-gray-500",children:["(",D.length," review",D.length!==1?"s":"",")"]})]})]}),m.jsxs(re.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"bg-primary/10 p-4 rounded-lg space-y-2",children:[m.jsxs("p",{className:"text-primary font-bold text-3xl mb-1",children:["$",t.price]}),t.quantity>0?m.jsx("p",{className:`text-sm font-medium ${t.quantity<5?"text-red-500 animate-pulse":"text-green-600"}`,children:t.quantity<5?`Only ${t.quantity} left in stock!`:`${t.quantity} items available`}):m.jsx("p",{className:"text-sm font-medium text-gray-500 line-through",children:"Out of stock"})]}),m.jsxs(re.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[m.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),m.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[m.jsx(Yh,{product:t,user:T,className:"w-full py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition flex items-center justify-center gap-2"}),m.jsx("button",{onClick:()=>_(!x),className:"p-3 rounded-full border border-gray-300 hover:bg-gray-100 transition",children:m.jsx(b6,{className:x?"text-red-500":"text-gray-400"})}),m.jsx("button",{className:"p-3 rounded-full border border-gray-300 hover:bg-gray-100 transition",children:m.jsx(g$,{className:"text-gray-600"})})]})]}),z&&m.jsxs(re.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center",children:[m.jsx(v$,{className:"mr-2 text-primary"}),"Seller Information"]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"bg-gray-200 rounded-full p-2",children:m.jsx(mg,{className:"text-gray-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:z.displayName||z.email}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Joined: ",z.createdAt.toDate().toLocaleDateString()]})]})]})]}),m.jsxs(re.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(A6,{className:"text-green-500 mr-2"}),m.jsx("span",{children:"Free Delivery"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(E6,{className:"text-blue-500 mr-2"}),m.jsx("span",{children:"1 Year Warranty"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(a$,{className:"text-purple-500 mr-2"}),m.jsx("span",{children:"7-Day Returns"})]})]})]})]}),m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-12 bg-white rounded-xl shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Product Details"}),t.properties.length>0&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Specifications"}),m.jsx("table",{className:"w-full",children:m.jsx("tbody",{className:"divide-y divide-gray-200",children:t.properties.map((O,me)=>m.jsxs("tr",{children:[m.jsx("td",{className:"py-3 px-4 font-medium text-gray-700 bg-gray-50",children:O.key}),m.jsx("td",{className:"py-3 px-4",children:O.value})]},me))})})]})]}),m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-12 bg-white rounded-xl shadow-lg p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[m.jsx(t4,{className:"mr-2 text-primary"}),"Customer Reviews"]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"text-3xl font-bold mr-2",children:S}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("div",{className:"flex",children:B(S)}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Based on ",D.length," review",D.length!==1?"s":""]})]})]})]}),D.length===0?m.jsxs("div",{className:"text-center py-8",children:[m.jsx(t4,{className:"mx-auto text-4xl text-gray-300 mb-3"}),m.jsx("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review this product."})]}):m.jsx("div",{className:"space-y-6 max-h-48 overflow-y-auto",children:D.map(O=>m.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[m.jsx("div",{className:"flex justify-between mb-2",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"bg-gray-200 rounded-full p-2",children:m.jsx(mg,{className:"text-gray-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:O.username}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex mr-2",children:[...Array(5)].map((me,ve)=>ve<O.rating?m.jsx(tx,{className:"text-yellow-400 text-sm"},ve):m.jsx(i4,{className:"text-yellow-400 text-sm"},ve))}),m.jsx("span",{className:"text-xs text-gray-500",children:O.createdAt.toLocaleDateString()})]})]})]})}),m.jsx("p",{className:"text-gray-700 pl-12",children:O.comment})]},O.id))}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Write a Review"}),T?m.jsxs("form",{onSubmit:L,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block mb-2",children:"Your Rating"}),m.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(O=>m.jsx("button",{type:"button",onClick:()=>N({...I,rating:O}),className:`text-2xl ${I.rating>=O?"text-yellow-400":"text-gray-300"}`,children:m.jsx(tx,{})},O))})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"review",className:"block mb-2",children:"Your Review"}),m.jsx("textarea",{id:"review",value:I.comment,onChange:O=>N({...I,comment:O.target.value}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",rows:"4",placeholder:"Share your thoughts about this product..."})]}),m.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition",children:"Submit Review"})]}):m.jsxs("div",{className:"text-center py-6",children:[m.jsx("p",{className:"text-gray-500 mb-3",children:"Please login to leave a review."}),m.jsx("button",{onClick:()=>e("/signin"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition",children:"Login"})]})]})]}),p.length>0&&m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-12",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Similar Products"}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:p.map(O=>m.jsxs(re.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer",children:[m.jsx("img",{src:O.mainImage,alt:O.name,className:"w-full h-40 object-cover",onClick:()=>V(O),loadig:"lazy"}),m.jsxs("div",{className:"p-3",children:[m.jsx("h3",{className:"font-medium text-gray-900 truncate",children:O.name}),m.jsxs("p",{className:"text-primary font-bold",children:["$",O.price]})]})]},O.id))})]})]})]})};function s4(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Z_(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:s4(e[i])&&s4(n[i])&&Object.keys(e[i]).length>0&&Z_(n[i],e[i])})}const N6={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Sr(){const n=typeof document<"u"?document:{};return Z_(n,N6),n}const N$={document:N6,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Gn(){const n=typeof window<"u"?window:{};return Z_(n,N$),n}function R$(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function P$(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function ww(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function pg(){return Date.now()}function D$(n){const e=Gn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function j$(n,e){e===void 0&&(e="x");const t=Gn();let i,r,a;const l=D$(n);return t.WebKitCSSMatrix?(r=l.transform||l.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(u=>u.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(r==="none"?"":r)):(a=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=a.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=a.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function up(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function k$(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function fi(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!k$(i)){const r=Object.keys(Object(i)).filter(a=>e.indexOf(a)<0);for(let a=0,l=r.length;a<l;a+=1){const u=r[a],d=Object.getOwnPropertyDescriptor(i,u);d!==void 0&&d.enumerable&&(up(n[u])&&up(i[u])?i[u].__swiper__?n[u]=i[u]:fi(n[u],i[u]):!up(n[u])&&up(i[u])?(n[u]={},i[u].__swiper__?n[u]=i[u]:fi(n[u],i[u])):n[u]=i[u])}}}return n}function dp(n,e,t){n.style.setProperty(e,t)}function R6(n){let{swiper:e,targetPosition:t,side:i}=n;const r=Gn(),a=-e.translate;let l=null,u;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const f=t>a?"next":"prev",p=(x,_)=>f==="next"&&x>=_||f==="prev"&&x<=_,v=()=>{u=new Date().getTime(),l===null&&(l=u);const x=Math.max(Math.min((u-l)/d,1),0),_=.5-Math.cos(x*Math.PI)/2;let T=a+_*(t-a);if(p(T,t)&&(T=t),e.wrapperEl.scrollTo({[i]:T}),p(T,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:T})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(v)};v()}function xr(n,e){e===void 0&&(e="");const t=Gn(),i=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&i.push(...n.assignedElements()),e?i.filter(r=>r.matches(e)):i}function M$(n,e){const t=[e];for(;t.length>0;){const i=t.shift();if(n===i)return!0;t.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function V$(n,e){const t=Gn();let i=e.contains(n);return!i&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(i=[...e.assignedElements()].includes(n),i||(i=M$(n,e))),i}function gg(n){try{console.warn(n);return}catch{}}function yg(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:R$(e)),t}function O$(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function L$(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function ua(n,e){return Gn().getComputedStyle(n,null).getPropertyValue(e)}function vg(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function P6(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function bw(n,e,t){const i=Gn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function as(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function xg(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let ix;function U$(){const n=Gn(),e=Sr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function D6(){return ix||(ix=U$()),ix}let rx;function B$(n){let{userAgent:e}=n===void 0?{}:n;const t=D6(),i=Gn(),r=i.navigator.platform,a=e||i.navigator.userAgent,l={ios:!1,android:!1},u=i.screen.width,d=i.screen.height,f=a.match(/(Android);?[\s\/]+([\d.]+)?/);let p=a.match(/(iPad).*OS\s([\d_]+)/);const v=a.match(/(iPod)(.*OS\s([\d_]+))?/),x=!p&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),_=r==="Win32";let T=r==="MacIntel";const C=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!p&&T&&t.touch&&C.indexOf(`${u}x${d}`)>=0&&(p=a.match(/(Version)\/([\d.]+)/),p||(p=[0,1,"13_0_0"]),T=!1),f&&!_&&(l.os="android",l.android=!0),(p||x||v)&&(l.os="ios",l.ios=!0),l}function j6(n){return n===void 0&&(n={}),rx||(rx=B$(n)),rx}let sx;function F$(){const n=Gn(),e=j6();let t=!1;function i(){const u=n.navigator.userAgent.toLowerCase();return u.indexOf("safari")>=0&&u.indexOf("chrome")<0&&u.indexOf("android")<0}if(i()){const u=String(n.navigator.userAgent);if(u.includes("Version/")){const[d,f]=u.split("Version/")[1].split(" ")[0].split(".").map(p=>Number(p));t=d<16||d===16&&f<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),a=i(),l=a||r&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:l,isWebView:r}}function k6(){return sx||(sx=F$()),sx}function z$(n){let{swiper:e,on:t,emit:i}=n;const r=Gn();let a=null,l=null;const u=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},d=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(v=>{l=r.requestAnimationFrame(()=>{const{width:x,height:_}=e;let T=x,C=_;v.forEach(D=>{let{contentBoxSize:P,contentRect:I,target:N}=D;N&&N!==e.el||(T=I?I.width:(P[0]||P).inlineSize,C=I?I.height:(P[0]||P).blockSize)}),(T!==x||C!==_)&&u()})}),a.observe(e.el))},f=()=>{l&&r.cancelAnimationFrame(l),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},p=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){d();return}r.addEventListener("resize",u),r.addEventListener("orientationchange",p)}),t("destroy",()=>{f(),r.removeEventListener("resize",u),r.removeEventListener("orientationchange",p)})}function q$(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const a=[],l=Gn(),u=function(p,v){v===void 0&&(v={});const x=l.MutationObserver||l.WebkitMutationObserver,_=new x(T=>{if(e.__preventObserver__)return;if(T.length===1){r("observerUpdate",T[0]);return}const C=function(){r("observerUpdate",T[0])};l.requestAnimationFrame?l.requestAnimationFrame(C):l.setTimeout(C,0)});_.observe(p,{attributes:typeof v.attributes>"u"?!0:v.attributes,childList:e.isElement||(typeof v.childList>"u"?!0:v).childList,characterData:typeof v.characterData>"u"?!0:v.characterData}),a.push(_)},d=()=>{if(e.params.observer){if(e.params.observeParents){const p=P6(e.hostEl);for(let v=0;v<p.length;v+=1)u(p[v])}u(e.hostEl,{childList:e.params.observeSlideChildren}),u(e.wrapperEl,{attributes:!1})}},f=()=>{a.forEach(p=>{p.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",d),i("destroy",f)}var H$={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(a=>{i.eventsListeners[a]||(i.eventsListeners[a]=[]),i.eventsListeners[a][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];e.apply(i,l)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,a)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(a,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),i=n):(e=a[0].events,t=a[0].data,i=a[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(d=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(f=>{f.apply(i,[d,...t])}),n.eventsListeners&&n.eventsListeners[d]&&n.eventsListeners[d].forEach(f=>{f.apply(i,t)})}),n}};function G$(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(ua(i,"padding-left")||0,10)-parseInt(ua(i,"padding-right")||0,10),t=t-parseInt(ua(i,"padding-top")||0,10)-parseInt(ua(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function $$(){const n=this;function e(V,L){return parseFloat(V.getPropertyValue(n.getDirectionLabel(L))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:a,rtlTranslate:l,wrongRTL:u}=n,d=n.virtual&&t.virtual.enabled,f=d?n.virtual.slides.length:n.slides.length,p=xr(r,`.${n.params.slideClass}, swiper-slide`),v=d?n.virtual.slides.length:p.length;let x=[];const _=[],T=[];let C=t.slidesOffsetBefore;typeof C=="function"&&(C=t.slidesOffsetBefore.call(n));let D=t.slidesOffsetAfter;typeof D=="function"&&(D=t.slidesOffsetAfter.call(n));const P=n.snapGrid.length,I=n.slidesGrid.length;let N=t.spaceBetween,z=-C,F=0,H=0;if(typeof a>"u")return;typeof N=="string"&&N.indexOf("%")>=0?N=parseFloat(N.replace("%",""))/100*a:typeof N=="string"&&(N=parseFloat(N)),n.virtualSize=-N,p.forEach(V=>{l?V.style.marginLeft="":V.style.marginRight="",V.style.marginBottom="",V.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(dp(i,"--swiper-centered-offset-before",""),dp(i,"--swiper-centered-offset-after",""));const j=t.grid&&t.grid.rows>1&&n.grid;j?n.grid.initSlides(p):n.grid&&n.grid.unsetSlides();let S;const R=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(V=>typeof t.breakpoints[V].slidesPerView<"u").length>0;for(let V=0;V<v;V+=1){S=0;let L;if(p[V]&&(L=p[V]),j&&n.grid.updateSlide(V,L,p),!(p[V]&&ua(L,"display")==="none")){if(t.slidesPerView==="auto"){R&&(p[V].style[n.getDirectionLabel("width")]="");const B=getComputedStyle(L),O=L.style.transform,me=L.style.webkitTransform;if(O&&(L.style.transform="none"),me&&(L.style.webkitTransform="none"),t.roundLengths)S=n.isHorizontal()?bw(L,"width"):bw(L,"height");else{const ve=e(B,"width"),$=e(B,"padding-left"),se=e(B,"padding-right"),ae=e(B,"margin-left"),xe=e(B,"margin-right"),q=B.getPropertyValue("box-sizing");if(q&&q==="border-box")S=ve+ae+xe;else{const{clientWidth:ce,offsetWidth:ge}=L;S=ve+$+se+ae+xe+(ge-ce)}}O&&(L.style.transform=O),me&&(L.style.webkitTransform=me),t.roundLengths&&(S=Math.floor(S))}else S=(a-(t.slidesPerView-1)*N)/t.slidesPerView,t.roundLengths&&(S=Math.floor(S)),p[V]&&(p[V].style[n.getDirectionLabel("width")]=`${S}px`);p[V]&&(p[V].swiperSlideSize=S),T.push(S),t.centeredSlides?(z=z+S/2+F/2+N,F===0&&V!==0&&(z=z-a/2-N),V===0&&(z=z-a/2-N),Math.abs(z)<1/1e3&&(z=0),t.roundLengths&&(z=Math.floor(z)),H%t.slidesPerGroup===0&&x.push(z),_.push(z)):(t.roundLengths&&(z=Math.floor(z)),(H-Math.min(n.params.slidesPerGroupSkip,H))%n.params.slidesPerGroup===0&&x.push(z),_.push(z),z=z+S+N),n.virtualSize+=S+N,F=S,H+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+D,l&&u&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+N}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+N}px`),j&&n.grid.updateWrapperSize(S,x),!t.centeredSlides){const V=[];for(let L=0;L<x.length;L+=1){let B=x[L];t.roundLengths&&(B=Math.floor(B)),x[L]<=n.virtualSize-a&&V.push(B)}x=V,Math.floor(n.virtualSize-a)-Math.floor(x[x.length-1])>1&&x.push(n.virtualSize-a)}if(d&&t.loop){const V=T[0]+N;if(t.slidesPerGroup>1){const L=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),B=V*t.slidesPerGroup;for(let O=0;O<L;O+=1)x.push(x[x.length-1]+B)}for(let L=0;L<n.virtual.slidesBefore+n.virtual.slidesAfter;L+=1)t.slidesPerGroup===1&&x.push(x[x.length-1]+V),_.push(_[_.length-1]+V),n.virtualSize+=V}if(x.length===0&&(x=[0]),N!==0){const V=n.isHorizontal()&&l?"marginLeft":n.getDirectionLabel("marginRight");p.filter((L,B)=>!t.cssMode||t.loop?!0:B!==p.length-1).forEach(L=>{L.style[V]=`${N}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let V=0;T.forEach(B=>{V+=B+(N||0)}),V-=N;const L=V>a?V-a:0;x=x.map(B=>B<=0?-C:B>L?L+D:B)}if(t.centerInsufficientSlides){let V=0;T.forEach(B=>{V+=B+(N||0)}),V-=N;const L=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(V+L<a){const B=(a-V-L)/2;x.forEach((O,me)=>{x[me]=O-B}),_.forEach((O,me)=>{_[me]=O+B})}}if(Object.assign(n,{slides:p,snapGrid:x,slidesGrid:_,slidesSizesGrid:T}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){dp(i,"--swiper-centered-offset-before",`${-x[0]}px`),dp(i,"--swiper-centered-offset-after",`${n.size/2-T[T.length-1]/2}px`);const V=-n.snapGrid[0],L=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(B=>B+V),n.slidesGrid=n.slidesGrid.map(B=>B+L)}if(v!==f&&n.emit("slidesLengthChange"),x.length!==P&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),_.length!==I&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!d&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const V=`${t.containerModifierClass}backface-hidden`,L=n.el.classList.contains(V);v<=t.maxBackfaceHiddenSlides?L||n.el.classList.add(V):L&&n.el.classList.remove(V)}}function K$(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,a;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const l=u=>i?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{t.push(u)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const u=e.activeIndex+a;if(u>e.slides.length&&!i)break;t.push(l(u))}else t.push(l(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const u=t[a].offsetHeight;r=u>r?u:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function W$(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const a4=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function Y$(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:a}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-n;r&&(l=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=t.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let d=0;d<i.length;d+=1){const f=i[d];let p=f.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(p-=i[0].swiperSlideOffset);const v=(l+(t.centeredSlides?e.minTranslate():0)-p)/(f.swiperSlideSize+u),x=(l-a[0]+(t.centeredSlides?e.minTranslate():0)-p)/(f.swiperSlideSize+u),_=-(l-p),T=_+e.slidesSizesGrid[d],C=_>=0&&_<=e.size-e.slidesSizesGrid[d],D=_>=0&&_<e.size-1||T>1&&T<=e.size||_<=0&&T>=e.size;D&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(d)),a4(f,D,t.slideVisibleClass),a4(f,C,t.slideFullyVisibleClass),f.progress=r?-v:v,f.originalProgress=r?-x:x}}function Q$(n){const e=this;if(typeof n>"u"){const p=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*p||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:a,isEnd:l,progressLoop:u}=e;const d=a,f=l;if(i===0)r=0,a=!0,l=!0;else{r=(n-e.minTranslate())/i;const p=Math.abs(n-e.minTranslate())<1,v=Math.abs(n-e.maxTranslate())<1;a=p||r<=0,l=v||r>=1,p&&(r=0),v&&(r=1)}if(t.loop){const p=e.getSlideIndexByData(0),v=e.getSlideIndexByData(e.slides.length-1),x=e.slidesGrid[p],_=e.slidesGrid[v],T=e.slidesGrid[e.slidesGrid.length-1],C=Math.abs(n);C>=x?u=(C-x)/T:u=(C+T-_)/T,u>1&&(u-=1)}Object.assign(e,{progress:r,progressLoop:u,isBeginning:a,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),a&&!d&&e.emit("reachBeginning toEdge"),l&&!f&&e.emit("reachEnd toEdge"),(d&&!a||f&&!l)&&e.emit("fromEdge"),e.emit("progress",r)}const ax=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function X$(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,a=n.virtual&&t.virtual.enabled,l=n.grid&&t.grid&&t.grid.rows>1,u=v=>xr(i,`.${t.slideClass}${v}, swiper-slide${v}`)[0];let d,f,p;if(a)if(t.loop){let v=r-n.virtual.slidesBefore;v<0&&(v=n.virtual.slides.length+v),v>=n.virtual.slides.length&&(v-=n.virtual.slides.length),d=u(`[data-swiper-slide-index="${v}"]`)}else d=u(`[data-swiper-slide-index="${r}"]`);else l?(d=e.find(v=>v.column===r),p=e.find(v=>v.column===r+1),f=e.find(v=>v.column===r-1)):d=e[r];d&&(l||(p=L$(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!p&&(p=e[0]),f=O$(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(v=>{ax(v,v===d,t.slideActiveClass),ax(v,v===p,t.slideNextClass),ax(v,v===f,t.slidePrevClass)}),n.emitSlidesClasses()}const jp=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},ox=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},_w=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const l=r,u=[l-e];u.push(...Array.from({length:e}).map((d,f)=>l+i+f)),n.slides.forEach((d,f)=>{u.includes(d.column)&&ox(n,f)});return}const a=r+i-1;if(n.params.rewind||n.params.loop)for(let l=r-e;l<=a+e;l+=1){const u=(l%t+t)%t;(u<r||u>a)&&ox(n,u)}else for(let l=Math.max(r-e,0);l<=Math.min(a+e,t-1);l+=1)l!==r&&(l>a||l<r)&&ox(n,l)};function Z$(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?i>=e[a]&&i<e[a+1]-(e[a+1]-e[a])/2?r=a:i>=e[a]&&i<e[a+1]&&(r=a+1):i>=e[a]&&(r=a);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function J$(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:a,realIndex:l,snapIndex:u}=e;let d=n,f;const p=_=>{let T=_-e.virtual.slidesBefore;return T<0&&(T=e.virtual.slides.length+T),T>=e.virtual.slides.length&&(T-=e.virtual.slides.length),T};if(typeof d>"u"&&(d=Z$(e)),i.indexOf(t)>=0)f=i.indexOf(t);else{const _=Math.min(r.slidesPerGroupSkip,d);f=_+Math.floor((d-_)/r.slidesPerGroup)}if(f>=i.length&&(f=i.length-1),d===a&&!e.params.loop){f!==u&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(d===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=p(d);return}const v=e.grid&&r.grid&&r.grid.rows>1;let x;if(e.virtual&&r.virtual.enabled&&r.loop)x=p(d);else if(v){const _=e.slides.find(C=>C.column===d);let T=parseInt(_.getAttribute("data-swiper-slide-index"),10);Number.isNaN(T)&&(T=Math.max(e.slides.indexOf(_),0)),x=Math.floor(T/r.grid.rows)}else if(e.slides[d]){const _=e.slides[d].getAttribute("data-swiper-slide-index");_?x=parseInt(_,10):x=d}else x=d;Object.assign(e,{previousSnapIndex:u,snapIndex:f,previousRealIndex:l,realIndex:x,previousIndex:a,activeIndex:d}),e.initialized&&_w(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==x&&e.emit("realIndexChange"),e.emit("slideChange"))}function eK(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(u=>{!r&&u.matches&&u.matches(`.${i.slideClass}, swiper-slide`)&&(r=u)});let a=!1,l;if(r){for(let u=0;u<t.slides.length;u+=1)if(t.slides[u]===r){a=!0,l=u;break}}if(r&&a)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var tK={updateSize:G$,updateSlides:$$,updateAutoHeight:K$,updateSlidesOffset:W$,updateSlidesProgress:Y$,updateProgress:Q$,updateSlidesClasses:X$,updateActiveIndex:J$,updateClickedSlide:eK};function nK(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:a}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let l=j$(a,n);return l+=e.cssOverflowAdjustment(),i&&(l=-l),l||0}function iK(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:a,progress:l}=t;let u=0,d=0;const f=0;t.isHorizontal()?u=i?-n:n:d=n,r.roundLengths&&(u=Math.floor(u),d=Math.floor(d)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?u:d,r.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-u:-d:r.virtualTranslate||(t.isHorizontal()?u-=t.cssOverflowAdjustment():d-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${u}px, ${d}px, ${f}px)`);let p;const v=t.maxTranslate()-t.minTranslate();v===0?p=0:p=(n-t.minTranslate())/v,p!==l&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function rK(){return-this.snapGrid[0]}function sK(){return-this.snapGrid[this.snapGrid.length-1]}function aK(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const a=this,{params:l,wrapperEl:u}=a;if(a.animating&&l.preventInteractionOnTransition)return!1;const d=a.minTranslate(),f=a.maxTranslate();let p;if(i&&n>d?p=d:i&&n<f?p=f:p=n,a.updateProgress(p),l.cssMode){const v=a.isHorizontal();if(e===0)u[v?"scrollLeft":"scrollTop"]=-p;else{if(!a.support.smoothScroll)return R6({swiper:a,targetPosition:-p,side:v?"left":"top"}),!0;u.scrollTo({[v?"left":"top"]:-p,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(p),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(p),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(x){!a||a.destroyed||x.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var oK={getTranslate:nK,setTranslate:iK,minTranslate:rK,maxTranslate:sK,translateTo:aK};function lK(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function M6(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:a,previousIndex:l}=e;let u=i;u||(a>l?u="next":a<l?u="prev":u="reset"),e.emit(`transition${r}`),t&&u==="reset"?e.emit(`slideResetTransition${r}`):t&&a!==l&&(e.emit(`slideChangeTransition${r}`),u==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`))}function cK(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),M6({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function uK(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),M6({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var dK={setTransition:lK,transitionStart:cK,transitionEnd:uK};function hK(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;let l=n;l<0&&(l=0);const{params:u,snapGrid:d,slidesGrid:f,previousIndex:p,activeIndex:v,rtlTranslate:x,wrapperEl:_,enabled:T}=a;if(!T&&!i&&!r||a.destroyed||a.animating&&u.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const C=Math.min(a.params.slidesPerGroupSkip,l);let D=C+Math.floor((l-C)/a.params.slidesPerGroup);D>=d.length&&(D=d.length-1);const P=-d[D];if(u.normalizeSlideIndex)for(let j=0;j<f.length;j+=1){const S=-Math.floor(P*100),R=Math.floor(f[j]*100),V=Math.floor(f[j+1]*100);typeof f[j+1]<"u"?S>=R&&S<V-(V-R)/2?l=j:S>=R&&S<V&&(l=j+1):S>=R&&(l=j)}if(a.initialized&&l!==v&&(!a.allowSlideNext&&(x?P>a.translate&&P>a.minTranslate():P<a.translate&&P<a.minTranslate())||!a.allowSlidePrev&&P>a.translate&&P>a.maxTranslate()&&(v||0)!==l))return!1;l!==(p||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(P);let I;l>v?I="next":l<v?I="prev":I="reset";const N=a.virtual&&a.params.virtual.enabled;if(!(N&&r)&&(x&&-P===a.translate||!x&&P===a.translate))return a.updateActiveIndex(l),u.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),u.effect!=="slide"&&a.setTranslate(P),I!=="reset"&&(a.transitionStart(t,I),a.transitionEnd(t,I)),!1;if(u.cssMode){const j=a.isHorizontal(),S=x?P:-P;if(e===0)N&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),N&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{_[j?"scrollLeft":"scrollTop"]=S})):_[j?"scrollLeft":"scrollTop"]=S,N&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return R6({swiper:a,targetPosition:S,side:j?"left":"top"}),!0;_.scrollTo({[j?"left":"top"]:S,behavior:"smooth"})}return!0}const H=k6().isSafari;return N&&!r&&H&&a.isElement&&a.virtual.update(!1,!1,l),a.setTransition(e),a.setTranslate(P),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,i),a.transitionStart(t,I),e===0?a.transitionEnd(t,I):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(S){!a||a.destroyed||S.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,I))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function fK(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const a=r.grid&&r.params.grid&&r.params.grid.rows>1;let l=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)l=l+r.virtual.slidesBefore;else{let u;if(a){const x=l*r.params.grid.rows;u=r.slides.find(_=>_.getAttribute("data-swiper-slide-index")*1===x).column}else u=r.getSlideIndexByData(l);const d=a?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:f}=r.params;let p=r.params.slidesPerView;p==="auto"?p=r.slidesPerViewDynamic():(p=Math.ceil(parseFloat(r.params.slidesPerView,10)),f&&p%2===0&&(p=p+1));let v=d-u<p;if(f&&(v=v||u<Math.ceil(p/2)),i&&f&&r.params.slidesPerView!=="auto"&&!a&&(v=!1),v){const x=f?u<r.activeIndex?"prev":"next":u-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:x,slideTo:!0,activeSlideIndex:x==="next"?u+1:u-d+1,slideRealIndex:x==="next"?r.realIndex:void 0})}if(a){const x=l*r.params.grid.rows;l=r.slides.find(_=>_.getAttribute("data-swiper-slide-index")*1===x).column}else l=r.getSlideIndexByData(l)}return requestAnimationFrame(()=>{r.slideTo(l,e,t,i)}),r}function mK(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:a,animating:l}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let u=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(u=Math.max(i.slidesPerViewDynamic("current",!0),1));const d=i.activeIndex<a.slidesPerGroupSkip?1:u,f=i.virtual&&a.virtual.enabled;if(a.loop){if(l&&!f&&a.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+d,n,e,t)}),!0}return a.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+d,n,e,t)}function pK(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:a,slidesGrid:l,rtlTranslate:u,enabled:d,animating:f}=i;if(!d||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const p=i.virtual&&r.virtual.enabled;if(r.loop){if(f&&!p&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const v=u?i.translate:-i.translate;function x(I){return I<0?-Math.floor(Math.abs(I)):Math.floor(I)}const _=x(v),T=a.map(I=>x(I)),C=r.freeMode&&r.freeMode.enabled;let D=a[T.indexOf(_)-1];if(typeof D>"u"&&(r.cssMode||C)){let I;a.forEach((N,z)=>{_>=N&&(I=z)}),typeof I<"u"&&(D=C?a[I]:a[I>0?I-1:I])}let P=0;if(typeof D<"u"&&(P=l.indexOf(D),P<0&&(P=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(P=P-i.slidesPerViewDynamic("previous",!0)+1,P=Math.max(P,0))),r.rewind&&i.isBeginning){const I=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(I,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(P,n,e,t)}),!0;return i.slideTo(P,n,e,t)}function gK(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function yK(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let a=r.activeIndex;const l=Math.min(r.params.slidesPerGroupSkip,a),u=l+Math.floor((a-l)/r.params.slidesPerGroup),d=r.rtlTranslate?r.translate:-r.translate;if(d>=r.snapGrid[u]){const f=r.snapGrid[u],p=r.snapGrid[u+1];d-f>(p-f)*i&&(a+=r.params.slidesPerGroup)}else{const f=r.snapGrid[u-1],p=r.snapGrid[u];d-f<=(p-f)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,n,e,t)}function vK(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,a;const l=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(xr(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),ww(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(xr(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),ww(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var xK={slideTo:hK,slideToLoop:fK,slideNext:mK,slidePrev:pK,slideReset:gK,slideToClosest:yK,slideToClickedSlide:vK};function wK(n,e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const a=()=>{xr(r,`.${i.slideClass}, swiper-slide`).forEach((x,_)=>{x.setAttribute("data-swiper-slide-index",_)})},l=t.grid&&i.grid&&i.grid.rows>1,u=i.slidesPerGroup*(l?i.grid.rows:1),d=t.slides.length%u!==0,f=l&&t.slides.length%i.grid.rows!==0,p=v=>{for(let x=0;x<v;x+=1){const _=t.isElement?yg("swiper-slide",[i.slideBlankClass]):yg("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(_)}};if(d){if(i.loopAddBlankSlides){const v=u-t.slides.length%u;p(v),t.recalcSlides(),t.updateSlides()}else gg("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(f){if(i.loopAddBlankSlides){const v=i.grid.rows-t.slides.length%i.grid.rows;p(v),t.recalcSlides(),t.updateSlides()}else gg("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();t.loopFix({slideRealIndex:n,direction:i.centeredSlides?void 0:"next",initial:e})}function bK(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:a,initial:l,byController:u,byMousewheel:d}=n===void 0?{}:n;const f=this;if(!f.params.loop)return;f.emit("beforeLoopFix");const{slides:p,allowSlidePrev:v,allowSlideNext:x,slidesEl:_,params:T}=f,{centeredSlides:C,initialSlide:D}=T;if(f.allowSlidePrev=!0,f.allowSlideNext=!0,f.virtual&&T.virtual.enabled){t&&(!T.centeredSlides&&f.snapIndex===0?f.slideTo(f.virtual.slides.length,0,!1,!0):T.centeredSlides&&f.snapIndex<T.slidesPerView?f.slideTo(f.virtual.slides.length+f.snapIndex,0,!1,!0):f.snapIndex===f.snapGrid.length-1&&f.slideTo(f.virtual.slidesBefore,0,!1,!0)),f.allowSlidePrev=v,f.allowSlideNext=x,f.emit("loopFix");return}let P=T.slidesPerView;P==="auto"?P=f.slidesPerViewDynamic():(P=Math.ceil(parseFloat(T.slidesPerView,10)),C&&P%2===0&&(P=P+1));const I=T.slidesPerGroupAuto?P:T.slidesPerGroup;let N=I;N%I!==0&&(N+=I-N%I),N+=T.loopAdditionalSlides,f.loopedSlides=N;const z=f.grid&&T.grid&&T.grid.rows>1;p.length<P+N||f.params.effect==="cards"&&p.length<P+N*2?gg("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):z&&T.grid.fill==="row"&&gg("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const F=[],H=[],j=z?Math.ceil(p.length/T.grid.rows):p.length,S=l&&j-D<P&&!C;let R=S?D:f.activeIndex;typeof a>"u"?a=f.getSlideIndex(p.find($=>$.classList.contains(T.slideActiveClass))):R=a;const V=i==="next"||!i,L=i==="prev"||!i;let B=0,O=0;const ve=(z?p[a].column:a)+(C&&typeof r>"u"?-P/2+.5:0);if(ve<N){B=Math.max(N-ve,I);for(let $=0;$<N-ve;$+=1){const se=$-Math.floor($/j)*j;if(z){const ae=j-se-1;for(let xe=p.length-1;xe>=0;xe-=1)p[xe].column===ae&&F.push(xe)}else F.push(j-se-1)}}else if(ve+P>j-N){O=Math.max(ve-(j-N*2),I),S&&(O=Math.max(O,P-j+D+1));for(let $=0;$<O;$+=1){const se=$-Math.floor($/j)*j;z?p.forEach((ae,xe)=>{ae.column===se&&H.push(xe)}):H.push(se)}}if(f.__preventObserver__=!0,requestAnimationFrame(()=>{f.__preventObserver__=!1}),f.params.effect==="cards"&&p.length<P+N*2&&(H.includes(a)&&H.splice(H.indexOf(a),1),F.includes(a)&&F.splice(F.indexOf(a),1)),L&&F.forEach($=>{p[$].swiperLoopMoveDOM=!0,_.prepend(p[$]),p[$].swiperLoopMoveDOM=!1}),V&&H.forEach($=>{p[$].swiperLoopMoveDOM=!0,_.append(p[$]),p[$].swiperLoopMoveDOM=!1}),f.recalcSlides(),T.slidesPerView==="auto"?f.updateSlides():z&&(F.length>0&&L||H.length>0&&V)&&f.slides.forEach(($,se)=>{f.grid.updateSlide(se,$,f.slides)}),T.watchSlidesProgress&&f.updateSlidesOffset(),t){if(F.length>0&&L){if(typeof e>"u"){const $=f.slidesGrid[R],ae=f.slidesGrid[R+B]-$;d?f.setTranslate(f.translate-ae):(f.slideTo(R+Math.ceil(B),0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-ae,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-ae))}else if(r){const $=z?F.length/T.grid.rows:F.length;f.slideTo(f.activeIndex+$,0,!1,!0),f.touchEventsData.currentTranslate=f.translate}}else if(H.length>0&&V)if(typeof e>"u"){const $=f.slidesGrid[R],ae=f.slidesGrid[R-O]-$;d?f.setTranslate(f.translate-ae):(f.slideTo(R-O,0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-ae,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-ae))}else{const $=z?H.length/T.grid.rows:H.length;f.slideTo(f.activeIndex-$,0,!1,!0)}}if(f.allowSlidePrev=v,f.allowSlideNext=x,f.controller&&f.controller.control&&!u){const $={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:a,byController:!0};Array.isArray(f.controller.control)?f.controller.control.forEach(se=>{!se.destroyed&&se.params.loop&&se.loopFix({...$,slideTo:se.params.slidesPerView===T.slidesPerView?t:!1})}):f.controller.control instanceof f.constructor&&f.controller.control.params.loop&&f.controller.control.loopFix({...$,slideTo:f.controller.control.params.slidesPerView===T.slidesPerView?t:!1})}f.emit("loopFix")}function _K(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const a=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[a]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var TK={loopCreate:wK,loopFix:bK,loopDestroy:_K};function EK(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function SK(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var AK={setGrabCursor:EK,unsetGrabCursor:SK};function IK(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Sr()||i===Gn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function o4(n,e,t){const i=Gn(),{params:r}=n,a=r.edgeSwipeDetection,l=r.edgeSwipeThreshold;return a&&(t<=l||t>=i.innerWidth-l)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function CK(n){const e=this,t=Sr();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){o4(e,i,i.targetTouches[0].pageX);return}const{params:a,touches:l,enabled:u}=e;if(!u||!a.simulateTouch&&i.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let d=i.target;if(a.touchEventsTarget==="wrapper"&&!V$(d,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const f=!!a.noSwipingClass&&a.noSwipingClass!=="",p=i.composedPath?i.composedPath():i.path;f&&i.target&&i.target.shadowRoot&&p&&(d=p[0]);const v=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,x=!!(i.target&&i.target.shadowRoot);if(a.noSwiping&&(x?IK(v,d):d.closest(v))){e.allowClick=!0;return}if(a.swipeHandler&&!d.closest(a.swipeHandler))return;l.currentX=i.pageX,l.currentY=i.pageY;const _=l.currentX,T=l.currentY;if(!o4(e,i,_))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=_,l.startY=T,r.touchStartTime=pg(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1);let C=!0;d.matches(r.focusableElements)&&(C=!1,d.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==d&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!d.matches(r.focusableElements))&&t.activeElement.blur();const D=C&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||D)&&!d.isContentEditable&&i.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function NK(n){const e=Sr(),t=this,i=t.touchEventsData,{params:r,touches:a,rtlTranslate:l,enabled:u}=t;if(!u||!r.simulateTouch&&n.pointerType==="mouse")return;let d=n;if(d.originalEvent&&(d=d.originalEvent),d.type==="pointermove"&&(i.touchId!==null||d.pointerId!==i.pointerId))return;let f;if(d.type==="touchmove"){if(f=[...d.changedTouches].find(F=>F.identifier===i.touchId),!f||f.identifier!==i.touchId)return}else f=d;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",d);return}const p=f.pageX,v=f.pageY;if(d.preventedByNestedSwiper){a.startX=p,a.startY=v;return}if(!t.allowTouchMove){d.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(a,{startX:p,startY:v,currentX:p,currentY:v}),i.touchStartTime=pg());return}if(r.touchReleaseOnEdges&&!r.loop)if(t.isVertical()){if(v<a.startY&&t.translate<=t.maxTranslate()||v>a.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(l&&(p>a.startX&&-t.translate<=t.maxTranslate()||p<a.startX&&-t.translate>=t.minTranslate()))return;if(!l&&(p<a.startX&&t.translate<=t.maxTranslate()||p>a.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==d.target&&d.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&d.target===e.activeElement&&d.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",d),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=p,a.currentY=v;const x=a.currentX-a.startX,_=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(x**2+_**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let F;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:x*x+_*_>=25&&(F=Math.atan2(Math.abs(_),Math.abs(x))*180/Math.PI,i.isScrolling=t.isHorizontal()?F>r.touchAngle:90-F>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",d),typeof i.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(i.startMoving=!0),i.isScrolling||d.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&d.cancelable&&d.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&d.stopPropagation();let T=t.isHorizontal()?x:_,C=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;r.oneWayMovement&&(T=Math.abs(T)*(l?1:-1),C=Math.abs(C)*(l?1:-1)),a.diff=T,T*=r.touchRatio,l&&(T=-T,C=-C);const D=t.touchesDirection;t.swipeDirection=T>0?"prev":"next",t.touchesDirection=C>0?"prev":"next";const P=t.params.loop&&!r.cssMode,I=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(P&&I&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const F=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(F)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",d)}if(new Date().getTime(),r._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&D!==t.touchesDirection&&P&&I&&Math.abs(T)>=1){Object.assign(a,{startX:p,startY:v,currentX:p,currentY:v,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",d),i.isMoved=!0,i.currentTranslate=T+i.startTranslate;let N=!0,z=r.resistanceRatio;if(r.touchReleaseOnEdges&&(z=0),T>0?(P&&I&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(N=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+T)**z))):T<0&&(P&&I&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(N=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-T)**z))),N&&(d.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(T)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function RK(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].find(F=>F.identifier===t.touchId),!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:u,rtlTranslate:d,slidesGrid:f,enabled:p}=e;if(!p||!l.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const v=pg(),x=v-t.touchStartTime;if(e.allowClick){const F=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(F&&F[0]||i.target,F),e.emit("tap click",i),x<300&&v-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=pg(),ww(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||u.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let _;if(l.followFinger?_=d?e.translate:-e.translate:_=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:_});return}const T=_>=-e.maxTranslate()&&!e.params.loop;let C=0,D=e.slidesSizesGrid[0];for(let F=0;F<f.length;F+=F<l.slidesPerGroupSkip?1:l.slidesPerGroup){const H=F<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof f[F+H]<"u"?(T||_>=f[F]&&_<f[F+H])&&(C=F,D=f[F+H]-f[F]):(T||_>=f[F])&&(C=F,D=f[f.length-1]-f[f.length-2])}let P=null,I=null;l.rewind&&(e.isBeginning?I=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(P=0));const N=(_-f[C])/D,z=C<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(x>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(N>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?P:C+z):e.slideTo(C)),e.swipeDirection==="prev"&&(N>1-l.longSwipesRatio?e.slideTo(C+z):I!==null&&N<0&&Math.abs(N)>l.longSwipesRatio?e.slideTo(I):e.slideTo(C))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(C+z):e.slideTo(C):(e.swipeDirection==="next"&&e.slideTo(P!==null?P:C+z),e.swipeDirection==="prev"&&e.slideTo(I!==null?I:C))}}function l4(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:a}=n,l=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const u=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!u?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!l?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&a!==n.snapGrid&&n.checkOverflow()}function PK(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function DK(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const a=n.maxTranslate()-n.minTranslate();a===0?r=0:r=(n.translate-n.minTranslate())/a,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function jK(n){const e=this;jp(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function kK(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const V6=(n,e)=>{const t=Sr(),{params:i,el:r,wrapperEl:a,device:l}=n,u=!!i.nested,d=e==="on"?"addEventListener":"removeEventListener",f=e;!r||typeof r=="string"||(t[d]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:u}),r[d]("touchstart",n.onTouchStart,{passive:!1}),r[d]("pointerdown",n.onTouchStart,{passive:!1}),t[d]("touchmove",n.onTouchMove,{passive:!1,capture:u}),t[d]("pointermove",n.onTouchMove,{passive:!1,capture:u}),t[d]("touchend",n.onTouchEnd,{passive:!0}),t[d]("pointerup",n.onTouchEnd,{passive:!0}),t[d]("pointercancel",n.onTouchEnd,{passive:!0}),t[d]("touchcancel",n.onTouchEnd,{passive:!0}),t[d]("pointerout",n.onTouchEnd,{passive:!0}),t[d]("pointerleave",n.onTouchEnd,{passive:!0}),t[d]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[d]("click",n.onClick,!0),i.cssMode&&a[d]("scroll",n.onScroll),i.updateOnWindowResize?n[f](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",l4,!0):n[f]("observerUpdate",l4,!0),r[d]("load",n.onLoad,{capture:!0}))};function MK(){const n=this,{params:e}=n;n.onTouchStart=CK.bind(n),n.onTouchMove=NK.bind(n),n.onTouchEnd=RK.bind(n),n.onDocumentTouchStart=kK.bind(n),e.cssMode&&(n.onScroll=DK.bind(n)),n.onClick=PK.bind(n),n.onLoad=jK.bind(n),V6(n,"on")}function VK(){V6(this,"off")}var OK={attachEvents:MK,detachEvents:VK};const c4=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function LK(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,a=i.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=Sr(),u=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",d=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?n.el:l.querySelector(i.breakpointsBase),f=n.getBreakpoint(a,u,d);if(!f||n.currentBreakpoint===f)return;const v=(f in a?a[f]:void 0)||n.originalParams,x=c4(n,i),_=c4(n,v),T=n.params.grabCursor,C=v.grabCursor,D=i.enabled;x&&!_?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!x&&_&&(r.classList.add(`${i.containerModifierClass}grid`),(v.grid.fill&&v.grid.fill==="column"||!v.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),T&&!C?n.unsetGrabCursor():!T&&C&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(H=>{if(typeof v[H]>"u")return;const j=i[H]&&i[H].enabled,S=v[H]&&v[H].enabled;j&&!S&&n[H].disable(),!j&&S&&n[H].enable()});const P=v.direction&&v.direction!==i.direction,I=i.loop&&(v.slidesPerView!==i.slidesPerView||P),N=i.loop;P&&t&&n.changeDirection(),fi(n.params,v);const z=n.params.enabled,F=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),D&&!z?n.disable():!D&&z&&n.enable(),n.currentBreakpoint=f,n.emit("_beforeBreakpoint",v),t&&(I?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!N&&F?(n.loopCreate(e),n.updateSlides()):N&&!F&&n.loopDestroy()),n.emit("breakpoint",v)}function UK(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=Gn(),a=e==="window"?r.innerHeight:t.clientHeight,l=Object.keys(n).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const d=parseFloat(u.substr(1));return{value:a*d,point:u}}return{value:u,point:u}});l.sort((u,d)=>parseInt(u.value,10)-parseInt(d.value,10));for(let u=0;u<l.length;u+=1){const{point:d,value:f}=l[u];e==="window"?r.matchMedia(`(min-width: ${f}px)`).matches&&(i=d):f<=t.clientWidth&&(i=d)}return i||"max"}var BK={setBreakpoint:LK,getBreakpoint:UK};function FK(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function zK(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:a}=n,l=FK(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),r.classList.add(...e),n.emitContainerClasses()}function qK(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var HK={addClasses:zK,removeClasses:qK};function GK(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,a=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>a}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var $K={checkOverflow:GK},Tw={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function KK(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],a=i[r];if(typeof a!="object"||a===null){fi(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in a)){fi(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),fi(e,i)}}const lx={eventsEmitter:H$,update:tK,translate:oK,transition:dK,slide:xK,loop:TK,grabCursor:AK,events:OK,breakpoints:BK,checkOverflow:$K,classes:HK},cx={};let J_=class os{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=fi({},t),e&&!t.el&&(t.el=e);const l=Sr();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const p=[];return l.querySelectorAll(t.el).forEach(v=>{const x=fi({},t,{el:v});p.push(new os(x))}),p}const u=this;u.__swiper__=!0,u.support=D6(),u.device=j6({userAgent:t.userAgent}),u.browser=k6(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],t.modules&&Array.isArray(t.modules)&&u.modules.push(...t.modules);const d={};u.modules.forEach(p=>{p({params:t,swiper:u,extendParams:KK(t,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const f=fi({},Tw,d);return u.params=fi({},f,cx,t),u.originalParams=fi({},u.params),u.passedParams=fi({},t),u.params&&u.params.on&&Object.keys(u.params.on).forEach(p=>{u.on(p,u.params.on[p])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=xr(t,`.${i.slideClass}, swiper-slide`),a=vg(r[0]);return vg(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=xr(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),l=(i.maxTranslate()-r)*e+r;i.translateTo(l,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:a,slidesGrid:l,slidesSizesGrid:u,size:d,activeIndex:f}=i;let p=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let v=a[f]?Math.ceil(a[f].swiperSlideSize):0,x;for(let _=f+1;_<a.length;_+=1)a[_]&&!x&&(v+=Math.ceil(a[_].swiperSlideSize),p+=1,v>d&&(x=!0));for(let _=f-1;_>=0;_-=1)a[_]&&!x&&(v+=a[_].swiperSlideSize,p+=1,v>d&&(x=!0))}else if(e==="current")for(let v=f+1;v<a.length;v+=1)(t?l[v]+u[v]-l[f]<d:l[v]-l[f]<d)&&(p+=1);else for(let v=f-1;v>=0;v-=1)l[f]-l[v]<d&&(p+=1);return p}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&jp(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const l=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const l=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(l.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):xr(i,r())[0];return!l&&t.params.createElements&&(l=yg("div",t.params.wrapperClass),i.append(l),xr(i,`.${t.params.slideClass}`).forEach(u=>{l.append(u)})),Object.assign(t,{el:i,wrapperEl:l,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:l,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||ua(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||ua(i,"direction")==="rtl"),wrongRTL:ua(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(a=>{a.complete?jp(t,a):a.addEventListener("load",l=>{jp(t,l.target)})}),_w(t),t.initialized=!0,_w(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:a,wrapperEl:l,slides:u}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),l&&l.removeAttribute("style"),u&&u.length&&u.forEach(d=>{d.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),d.removeAttribute("style"),d.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(d=>{i.off(d)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),P$(i)),i.destroyed=!0),null}static extendDefaults(e){fi(cx,e)}static get extendedDefaults(){return cx}static get defaults(){return Tw}static installModule(e){os.prototype.__modules__||(os.prototype.__modules__=[]);const t=os.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>os.installModule(t)),os):(os.installModule(e),os)}};Object.keys(lx).forEach(n=>{Object.keys(lx[n]).forEach(e=>{J_.prototype[e]=lx[n][e]})});J_.use([z$,q$]);const O6=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function il(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Cc(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:il(e[i])&&il(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Cc(n[i],e[i]):n[i]=e[i]})}function L6(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function U6(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function B6(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function F6(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function WK(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function YK(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:a,prevEl:l,scrollbarEl:u,paginationEl:d}=n;const f=r.filter(R=>R!=="children"&&R!=="direction"&&R!=="wrapperClass"),{params:p,pagination:v,navigation:x,scrollbar:_,virtual:T,thumbs:C}=e;let D,P,I,N,z,F,H,j;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&!i.thumbs.swiper.destroyed&&p.thumbs&&(!p.thumbs.swiper||p.thumbs.swiper.destroyed)&&(D=!0),r.includes("controller")&&i.controller&&i.controller.control&&p.controller&&!p.controller.control&&(P=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||d)&&(p.pagination||p.pagination===!1)&&v&&!v.el&&(I=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||u)&&(p.scrollbar||p.scrollbar===!1)&&_&&!_.el&&(N=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||l)&&(i.navigation.nextEl||a)&&(p.navigation||p.navigation===!1)&&x&&!x.prevEl&&!x.nextEl&&(z=!0);const S=R=>{e[R]&&(e[R].destroy(),R==="navigation"?(e.isElement&&(e[R].prevEl.remove(),e[R].nextEl.remove()),p[R].prevEl=void 0,p[R].nextEl=void 0,e[R].prevEl=void 0,e[R].nextEl=void 0):(e.isElement&&e[R].el.remove(),p[R].el=void 0,e[R].el=void 0))};r.includes("loop")&&e.isElement&&(p.loop&&!i.loop?F=!0:!p.loop&&i.loop?H=!0:j=!0),f.forEach(R=>{if(il(p[R])&&il(i[R]))Object.assign(p[R],i[R]),(R==="navigation"||R==="pagination"||R==="scrollbar")&&"enabled"in i[R]&&!i[R].enabled&&S(R);else{const V=i[R];(V===!0||V===!1)&&(R==="navigation"||R==="pagination"||R==="scrollbar")?V===!1&&S(R):p[R]=i[R]}}),f.includes("controller")&&!P&&e.controller&&e.controller.control&&p.controller&&p.controller.control&&(e.controller.control=p.controller.control),r.includes("children")&&t&&T&&p.virtual.enabled?(T.slides=t,T.update(!0)):r.includes("virtual")&&T&&p.virtual.enabled&&(t&&(T.slides=t),T.update(!0)),r.includes("children")&&t&&p.loop&&(j=!0),D&&C.init()&&C.update(!0),P&&(e.controller.control=p.controller.control),I&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-pagination"),d.part.add("pagination"),e.el.appendChild(d)),d&&(p.pagination.el=d),v.init(),v.render(),v.update()),N&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-scrollbar"),u.part.add("scrollbar"),e.el.appendChild(u)),u&&(p.scrollbar.el=u),_.init(),_.updateSize(),_.setTranslate()),z&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),xg(a,e.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),e.el.appendChild(a)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),xg(l,e.hostEl.constructor.prevButtonSvg),l.part.add("button-prev"),e.el.appendChild(l))),a&&(p.navigation.nextEl=a),l&&(p.navigation.prevEl=l),x.init(),x.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(F||j)&&e.loopDestroy(),(H||j)&&e.loopCreate(),e.update()}function QK(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};Cc(t,Tw),t._emitClasses=!0,t.init=!1;const a={},l=O6.map(d=>d.replace(/_/,"")),u=Object.assign({},n);return Object.keys(u).forEach(d=>{typeof n[d]>"u"||(l.indexOf(d)>=0?il(n[d])?(t[d]={},r[d]={},Cc(t[d],n[d]),Cc(r[d],n[d])):(t[d]=n[d],r[d]=n[d]):d.search(/on[A-Z]/)===0&&typeof n[d]=="function"?e?i[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:t.on[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:a[d]=n[d])}),["navigation","pagination","scrollbar"].forEach(d=>{t[d]===!0&&(t[d]={}),t[d]===!1&&delete t[d]}),{params:t,passedParams:r,rest:a,events:i}}function XK(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:a,scrollbarEl:l,swiper:u}=n;L6(e)&&i&&r&&(u.params.navigation.nextEl=i,u.originalParams.navigation.nextEl=i,u.params.navigation.prevEl=r,u.originalParams.navigation.prevEl=r),U6(e)&&a&&(u.params.pagination.el=a,u.originalParams.pagination.el=a),B6(e)&&l&&(u.params.scrollbar.el=l,u.originalParams.scrollbar.el=l),u.init(t)}function ZK(n,e,t,i,r){const a=[];if(!e)return a;const l=d=>{a.indexOf(d)<0&&a.push(d)};if(t&&i){const d=i.map(r),f=t.map(r);d.join("")!==f.join("")&&l("children"),i.length!==t.length&&l("children")}return O6.filter(d=>d[0]==="_").map(d=>d.replace(/_/,"")).forEach(d=>{if(d in n&&d in e)if(il(n[d])&&il(e[d])){const f=Object.keys(n[d]),p=Object.keys(e[d]);f.length!==p.length?l(d):(f.forEach(v=>{n[d][v]!==e[d][v]&&l(d)}),p.forEach(v=>{n[d][v]!==e[d][v]&&l(d)}))}else n[d]!==e[d]&&l(d)}),a}const JK=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function wg(){return wg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wg.apply(this,arguments)}function z6(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function q6(n){const e=[];return ft.Children.toArray(n).forEach(t=>{z6(t)?e.push(t):t.props&&t.props.children&&q6(t.props.children).forEach(i=>e.push(i))}),e}function eW(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return ft.Children.toArray(n).forEach(i=>{if(z6(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const r=q6(i.props.children);r.length>0?r.forEach(a=>e.push(a)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function tW(n,e,t){if(!t)return null;const i=p=>{let v=p;return p<0?v=e.length+p:v>=e.length&&(v=v-e.length),v},r=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:l}=t,u=n.params.loop?-e.length:0,d=n.params.loop?e.length*2:e.length,f=[];for(let p=u;p<d;p+=1)p>=a&&p<=l&&f.push(e[i(p)]);return f.map((p,v)=>ft.cloneElement(p,{swiper:n,style:r,key:p.props.virtualIndex||p.key||`slide-${v}`}))}function ph(n,e){return typeof window>"u"?k.useEffect(n,e):k.useLayoutEffect(n,e)}const u4=k.createContext(null),nW=k.createContext(null),e1=k.forwardRef(function(n,e){let{className:t,tag:i="div",wrapperTag:r="div",children:a,onSwiper:l,...u}=n===void 0?{}:n,d=!1;const[f,p]=k.useState("swiper"),[v,x]=k.useState(null),[_,T]=k.useState(!1),C=k.useRef(!1),D=k.useRef(null),P=k.useRef(null),I=k.useRef(null),N=k.useRef(null),z=k.useRef(null),F=k.useRef(null),H=k.useRef(null),j=k.useRef(null),{params:S,passedParams:R,rest:V,events:L}=QK(u),{slides:B,slots:O}=eW(a),me=()=>{T(!_)};Object.assign(S.on,{_containerClasses(xe,q){p(q)}});const ve=()=>{Object.assign(S.on,L),d=!0;const xe={...S};if(delete xe.wrapperClass,P.current=new J_(xe),P.current.virtual&&P.current.params.virtual.enabled){P.current.virtual.slides=B;const q={cache:!1,slides:B,renderExternal:x,renderExternalUpdate:!1};Cc(P.current.params.virtual,q),Cc(P.current.originalParams.virtual,q)}};D.current||ve(),P.current&&P.current.on("_beforeBreakpoint",me);const $=()=>{d||!L||!P.current||Object.keys(L).forEach(xe=>{P.current.on(xe,L[xe])})},se=()=>{!L||!P.current||Object.keys(L).forEach(xe=>{P.current.off(xe,L[xe])})};k.useEffect(()=>()=>{P.current&&P.current.off("_beforeBreakpoint",me)}),k.useEffect(()=>{!C.current&&P.current&&(P.current.emitSlidesClasses(),C.current=!0)}),ph(()=>{if(e&&(e.current=D.current),!!D.current)return P.current.destroyed&&ve(),XK({el:D.current,nextEl:z.current,prevEl:F.current,paginationEl:H.current,scrollbarEl:j.current,swiper:P.current},S),l&&!P.current.destroyed&&l(P.current),()=>{P.current&&!P.current.destroyed&&P.current.destroy(!0,!1)}},[]),ph(()=>{$();const xe=ZK(R,I.current,B,N.current,q=>q.key);return I.current=R,N.current=B,xe.length&&P.current&&!P.current.destroyed&&YK({swiper:P.current,slides:B,passedParams:R,changedParams:xe,nextEl:z.current,prevEl:F.current,scrollbarEl:j.current,paginationEl:H.current}),()=>{se()}}),ph(()=>{JK(P.current)},[v]);function ae(){return S.virtual?tW(P.current,B,v):B.map((xe,q)=>ft.cloneElement(xe,{swiper:P.current,swiperSlideIndex:q}))}return ft.createElement(i,wg({ref:D,className:F6(`${f}${t?` ${t}`:""}`)},V),ft.createElement(nW.Provider,{value:P.current},O["container-start"],ft.createElement(r,{className:WK(S.wrapperClass)},O["wrapper-start"],ae(),O["wrapper-end"]),L6(S)&&ft.createElement(ft.Fragment,null,ft.createElement("div",{ref:F,className:"swiper-button-prev"}),ft.createElement("div",{ref:z,className:"swiper-button-next"})),B6(S)&&ft.createElement("div",{ref:j,className:"swiper-scrollbar"}),U6(S)&&ft.createElement("div",{ref:H,className:"swiper-pagination"}),O["container-end"]))});e1.displayName="Swiper";const t1=k.forwardRef(function(n,e){let{tag:t="div",children:i,className:r="",swiper:a,zoom:l,lazy:u,virtualIndex:d,swiperSlideIndex:f,...p}=n===void 0?{}:n;const v=k.useRef(null),[x,_]=k.useState("swiper-slide"),[T,C]=k.useState(!1);function D(z,F,H){F===v.current&&_(H)}ph(()=>{if(typeof f<"u"&&(v.current.swiperSlideIndex=f),e&&(e.current=v.current),!(!v.current||!a)){if(a.destroyed){x!=="swiper-slide"&&_("swiper-slide");return}return a.on("_slideClass",D),()=>{a&&a.off("_slideClass",D)}}}),ph(()=>{a&&v.current&&!a.destroyed&&_(a.getSlideClasses(v.current))},[a]);const P={isActive:x.indexOf("swiper-slide-active")>=0,isVisible:x.indexOf("swiper-slide-visible")>=0,isPrev:x.indexOf("swiper-slide-prev")>=0,isNext:x.indexOf("swiper-slide-next")>=0},I=()=>typeof i=="function"?i(P):i,N=()=>{C(!0)};return ft.createElement(t,wg({ref:v,className:F6(`${x}${r?` ${r}`:""}`),"data-swiper-slide-index":d,onLoad:N},p),l&&ft.createElement(u4.Provider,{value:P},ft.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},I(),u&&!T&&ft.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&ft.createElement(u4.Provider,{value:P},I(),u&&!T&&ft.createElement("div",{className:"swiper-lazy-preloader"})))});t1.displayName="SwiperSlide";function iW(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let a=xr(n.el,`.${i[r]}`)[0];a||(a=yg("div",i[r]),a.className=i[r],n.el.append(a)),t[r]=a,e[r]=a}}),t}function Bd(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function rW(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const a="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:I=>I,formatFractionTotal:I=>I,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),e.pagination={el:null,bullets:[]};let l,u=0;function d(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function f(I,N){const{bulletActiveClass:z}=e.params.pagination;I&&(I=I[`${N==="prev"?"previous":"next"}ElementSibling`],I&&(I.classList.add(`${z}-${N}`),I=I[`${N==="prev"?"previous":"next"}ElementSibling`],I&&I.classList.add(`${z}-${N}-${N}`)))}function p(I,N,z){if(I=I%z,N=N%z,N===I+1)return"next";if(N===I-1)return"previous"}function v(I){const N=I.target.closest(Bd(e.params.pagination.bulletClass));if(!N)return;I.preventDefault();const z=vg(N)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===z)return;const F=p(e.realIndex,z,e.slides.length);F==="next"?e.slideNext():F==="previous"?e.slidePrev():e.slideToLoop(z)}else e.slideTo(z)}function x(){const I=e.rtl,N=e.params.pagination;if(d())return;let z=e.pagination.el;z=as(z);let F,H;const j=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,S=e.params.loop?Math.ceil(j/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(H=e.previousRealIndex||0,F=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(F=e.snapIndex,H=e.previousSnapIndex):(H=e.previousIndex||0,F=e.activeIndex||0),N.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const R=e.pagination.bullets;let V,L,B;if(N.dynamicBullets&&(l=bw(R[0],e.isHorizontal()?"width":"height"),z.forEach(O=>{O.style[e.isHorizontal()?"width":"height"]=`${l*(N.dynamicMainBullets+4)}px`}),N.dynamicMainBullets>1&&H!==void 0&&(u+=F-(H||0),u>N.dynamicMainBullets-1?u=N.dynamicMainBullets-1:u<0&&(u=0)),V=Math.max(F-u,0),L=V+(Math.min(R.length,N.dynamicMainBullets)-1),B=(L+V)/2),R.forEach(O=>{const me=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(ve=>`${N.bulletActiveClass}${ve}`)].map(ve=>typeof ve=="string"&&ve.includes(" ")?ve.split(" "):ve).flat();O.classList.remove(...me)}),z.length>1)R.forEach(O=>{const me=vg(O);me===F?O.classList.add(...N.bulletActiveClass.split(" ")):e.isElement&&O.setAttribute("part","bullet"),N.dynamicBullets&&(me>=V&&me<=L&&O.classList.add(...`${N.bulletActiveClass}-main`.split(" ")),me===V&&f(O,"prev"),me===L&&f(O,"next"))});else{const O=R[F];if(O&&O.classList.add(...N.bulletActiveClass.split(" ")),e.isElement&&R.forEach((me,ve)=>{me.setAttribute("part",ve===F?"bullet-active":"bullet")}),N.dynamicBullets){const me=R[V],ve=R[L];for(let $=V;$<=L;$+=1)R[$]&&R[$].classList.add(...`${N.bulletActiveClass}-main`.split(" "));f(me,"prev"),f(ve,"next")}}if(N.dynamicBullets){const O=Math.min(R.length,N.dynamicMainBullets+4),me=(l*O-l)/2-B*l,ve=I?"right":"left";R.forEach($=>{$.style[e.isHorizontal()?ve:"top"]=`${me}px`})}}z.forEach((R,V)=>{if(N.type==="fraction"&&(R.querySelectorAll(Bd(N.currentClass)).forEach(L=>{L.textContent=N.formatFractionCurrent(F+1)}),R.querySelectorAll(Bd(N.totalClass)).forEach(L=>{L.textContent=N.formatFractionTotal(S)})),N.type==="progressbar"){let L;N.progressbarOpposite?L=e.isHorizontal()?"vertical":"horizontal":L=e.isHorizontal()?"horizontal":"vertical";const B=(F+1)/S;let O=1,me=1;L==="horizontal"?O=B:me=B,R.querySelectorAll(Bd(N.progressbarFillClass)).forEach(ve=>{ve.style.transform=`translate3d(0,0,0) scaleX(${O}) scaleY(${me})`,ve.style.transitionDuration=`${e.params.speed}ms`})}N.type==="custom"&&N.renderCustom?(xg(R,N.renderCustom(e,F+1,S)),V===0&&r("paginationRender",R)):(V===0&&r("paginationRender",R),r("paginationUpdate",R)),e.params.watchOverflow&&e.enabled&&R.classList[e.isLocked?"add":"remove"](N.lockClass)})}function _(){const I=e.params.pagination;if(d())return;const N=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let z=e.pagination.el;z=as(z);let F="";if(I.type==="bullets"){let H=e.params.loop?Math.ceil(N/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&H>N&&(H=N);for(let j=0;j<H;j+=1)I.renderBullet?F+=I.renderBullet.call(e,j,I.bulletClass):F+=`<${I.bulletElement} ${e.isElement?'part="bullet"':""} class="${I.bulletClass}"></${I.bulletElement}>`}I.type==="fraction"&&(I.renderFraction?F=I.renderFraction.call(e,I.currentClass,I.totalClass):F=`<span class="${I.currentClass}"></span> / <span class="${I.totalClass}"></span>`),I.type==="progressbar"&&(I.renderProgressbar?F=I.renderProgressbar.call(e,I.progressbarFillClass):F=`<span class="${I.progressbarFillClass}"></span>`),e.pagination.bullets=[],z.forEach(H=>{I.type!=="custom"&&xg(H,F||""),I.type==="bullets"&&e.pagination.bullets.push(...H.querySelectorAll(Bd(I.bulletClass)))}),I.type!=="custom"&&r("paginationRender",z[0])}function T(){e.params.pagination=iW(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const I=e.params.pagination;if(!I.el)return;let N;typeof I.el=="string"&&e.isElement&&(N=e.el.querySelector(I.el)),!N&&typeof I.el=="string"&&(N=[...document.querySelectorAll(I.el)]),N||(N=I.el),!(!N||N.length===0)&&(e.params.uniqueNavElements&&typeof I.el=="string"&&Array.isArray(N)&&N.length>1&&(N=[...e.el.querySelectorAll(I.el)],N.length>1&&(N=N.find(z=>P6(z,".swiper")[0]===e.el))),Array.isArray(N)&&N.length===1&&(N=N[0]),Object.assign(e.pagination,{el:N}),N=as(N),N.forEach(z=>{I.type==="bullets"&&I.clickable&&z.classList.add(...(I.clickableClass||"").split(" ")),z.classList.add(I.modifierClass+I.type),z.classList.add(e.isHorizontal()?I.horizontalClass:I.verticalClass),I.type==="bullets"&&I.dynamicBullets&&(z.classList.add(`${I.modifierClass}${I.type}-dynamic`),u=0,I.dynamicMainBullets<1&&(I.dynamicMainBullets=1)),I.type==="progressbar"&&I.progressbarOpposite&&z.classList.add(I.progressbarOppositeClass),I.clickable&&z.addEventListener("click",v),e.enabled||z.classList.add(I.lockClass)}))}function C(){const I=e.params.pagination;if(d())return;let N=e.pagination.el;N&&(N=as(N),N.forEach(z=>{z.classList.remove(I.hiddenClass),z.classList.remove(I.modifierClass+I.type),z.classList.remove(e.isHorizontal()?I.horizontalClass:I.verticalClass),I.clickable&&(z.classList.remove(...(I.clickableClass||"").split(" ")),z.removeEventListener("click",v))})),e.pagination.bullets&&e.pagination.bullets.forEach(z=>z.classList.remove(...I.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const I=e.params.pagination;let{el:N}=e.pagination;N=as(N),N.forEach(z=>{z.classList.remove(I.horizontalClass,I.verticalClass),z.classList.add(e.isHorizontal()?I.horizontalClass:I.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?P():(T(),_(),x())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&x()}),i("snapIndexChange",()=>{x()}),i("snapGridLengthChange",()=>{_(),x()}),i("destroy",()=>{C()}),i("enable disable",()=>{let{el:I}=e.pagination;I&&(I=as(I),I.forEach(N=>N.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{x()}),i("click",(I,N)=>{const z=N.target,F=as(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&F&&F.length>0&&!z.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&z===e.navigation.nextEl||e.navigation.prevEl&&z===e.navigation.prevEl))return;const H=F[0].classList.contains(e.params.pagination.hiddenClass);r(H===!0?"paginationShow":"paginationHide"),F.forEach(j=>j.classList.toggle(e.params.pagination.hiddenClass))}});const D=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:I}=e.pagination;I&&(I=as(I),I.forEach(N=>N.classList.remove(e.params.pagination.paginationDisabledClass))),T(),_(),x()},P=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:I}=e.pagination;I&&(I=as(I),I.forEach(N=>N.classList.add(e.params.pagination.paginationDisabledClass))),C()};Object.assign(e.pagination,{enable:D,disable:P,render:_,update:x,init:T,destroy:C})}function H6(n){let{swiper:e,extendParams:t,on:i,emit:r,params:a}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,u,d=a&&a.autoplay?a.autoplay.delay:3e3,f=a&&a.autoplay?a.autoplay.delay:3e3,p,v=new Date().getTime(),x,_,T,C,D,P,I;function N(ae){!e||e.destroyed||!e.wrapperEl||ae.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",N),!(I||ae.detail&&ae.detail.bySwiperTouchMove)&&V())}const z=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?x=!0:x&&(f=p,x=!1);const ae=e.autoplay.paused?p:v+f-new Date().getTime();e.autoplay.timeLeft=ae,r("autoplayTimeLeft",ae,ae/d),u=requestAnimationFrame(()=>{z()})},F=()=>{let ae;return e.virtual&&e.params.virtual.enabled?ae=e.slides.find(q=>q.classList.contains("swiper-slide-active")):ae=e.slides[e.activeIndex],ae?parseInt(ae.getAttribute("data-swiper-autoplay"),10):void 0},H=ae=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(u),z();let xe=typeof ae>"u"?e.params.autoplay.delay:ae;d=e.params.autoplay.delay,f=e.params.autoplay.delay;const q=F();!Number.isNaN(q)&&q>0&&typeof ae>"u"&&(xe=q,d=q,f=q),p=xe;const ce=e.params.speed,ge=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(ce,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,ce,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(ce,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,ce,!0,!0),r("autoplay")),e.params.cssMode&&(v=new Date().getTime(),requestAnimationFrame(()=>{H()})))};return xe>0?(clearTimeout(l),l=setTimeout(()=>{ge()},xe)):requestAnimationFrame(()=>{ge()}),xe},j=()=>{v=new Date().getTime(),e.autoplay.running=!0,H(),r("autoplayStart")},S=()=>{e.autoplay.running=!1,clearTimeout(l),cancelAnimationFrame(u),r("autoplayStop")},R=(ae,xe)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(l),ae||(P=!0);const q=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",N):V()};if(e.autoplay.paused=!0,xe){D&&(p=e.params.autoplay.delay),D=!1,q();return}p=(p||e.params.autoplay.delay)-(new Date().getTime()-v),!(e.isEnd&&p<0&&!e.params.loop)&&(p<0&&(p=0),q())},V=()=>{e.isEnd&&p<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(v=new Date().getTime(),P?(P=!1,H(p)):H(),e.autoplay.paused=!1,r("autoplayResume"))},L=()=>{if(e.destroyed||!e.autoplay.running)return;const ae=Sr();ae.visibilityState==="hidden"&&(P=!0,R(!0)),ae.visibilityState==="visible"&&V()},B=ae=>{ae.pointerType==="mouse"&&(P=!0,I=!0,!(e.animating||e.autoplay.paused)&&R(!0))},O=ae=>{ae.pointerType==="mouse"&&(I=!1,e.autoplay.paused&&V())},me=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",B),e.el.addEventListener("pointerleave",O))},ve=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",B),e.el.removeEventListener("pointerleave",O))},$=()=>{Sr().addEventListener("visibilitychange",L)},se=()=>{Sr().removeEventListener("visibilitychange",L)};i("init",()=>{e.params.autoplay.enabled&&(me(),$(),j())}),i("destroy",()=>{ve(),se(),e.autoplay.running&&S()}),i("_freeModeStaticRelease",()=>{(T||P)&&V()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?S():R(!0,!0)}),i("beforeTransitionStart",(ae,xe,q)=>{e.destroyed||!e.autoplay.running||(q||!e.params.autoplay.disableOnInteraction?R(!0,!0):S())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){S();return}_=!0,T=!1,P=!1,C=setTimeout(()=>{P=!0,T=!0,R(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!_)){if(clearTimeout(C),clearTimeout(l),e.params.autoplay.disableOnInteraction){T=!1,_=!1;return}T&&e.params.cssMode&&V(),T=!1,_=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(D=!0)}),Object.assign(e.autoplay,{start:j,stop:S,pause:R,resume:V})}const sW=[{image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80",title:"Summer Collection 2023",subtitle:"Discover the latest trends",buttonText:"SHOP NOW",textPosition:"left",bgOverlay:"bg-primary/20",padding:"pb-32 md:pb-40 pl-2 md:pl-10 pr-4"},{image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80",title:"Limited Time Offer",subtitle:"Up to 50% off selected items",buttonText:"DISCOVER DEALS",textPosition:"center",bgOverlay:"bg-secondary/20",padding:"pb-24 md:pb-40 px-6 md:px-12"},{image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80",title:"New Arrivals",subtitle:"Fresh styles just landed",buttonText:"EXPLORE",textPosition:"left",bgOverlay:"bg-accent-red/20",padding:"pb-40 md:pb-48 pl-4 md:pl-10"}],aW=()=>{const n=k.useRef(null),[e,t]=k.useState(0),[i,r]=k.useState(!1),a={left:"items-start text-left",center:"items-center text-center",right:"items-start text-left"};return k.useEffect(()=>{const l=setInterval(()=>{i||t(u=>u>=100?(requestAnimationFrame(()=>{var d;(d=n.current)==null||d.slideNext()}),0):u+2)},100);return()=>clearInterval(l)},[i]),m.jsx("section",{className:"relative w-full h-screen max-h-[800px]",children:m.jsx(e1,{onSwiper:l=>n.current=l,modules:[H6],spaceBetween:0,slidesPerView:1,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},className:"w-full h-full",children:sW.map((l,u)=>m.jsx(t1,{children:m.jsxs("div",{className:`relative w-full h-full ${l.bgOverlay}`,children:[m.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${l.image})`},loadig:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/70 to-transparent"}),m.jsx("div",{className:"absolute top-32 right-4 md:right-8 w-2 h-60 bg-white/30 rounded-full overflow-hidden z-20",children:m.jsx("div",{className:"bg-primary w-full rounded-full transition-all duration-100 ease-linear",style:{height:`${e}%`}})}),m.jsx("div",{className:`relative z-10 h-full flex flex-col justify-end ${a[l.textPosition]} ${l.padding}`,children:m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-2xl",children:[m.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-heading font-bold text-white mb-4",children:l.title}),m.jsx("p",{className:"text-xl md:text-2xl text-white mb-6",children:l.subtitle}),m.jsx("button",{className:"px-8 py-3 bg-primary hover:bg-primary-dark text-white rounded-full font-medium transition duration-300 transform hover:scale-105 shadow-lg",children:l.buttonText})]})})]})},u))})})};function oW(){const[n,e]=k.useState([]),[t,i]=k.useState(null),[r,a]=k.useState(!0),l=ti();k.useEffect(()=>{const f=te.auth().onAuthStateChanged(p=>{i(p)});return()=>f()},[]),k.useEffect(()=>{(async()=>{try{const v=(await te.firestore().collection("products").orderBy("createdAt","desc").limit(10).get()).docs.map(x=>({id:x.id,...x.data()}));e(v)}catch(p){console.error("Error fetching products:",p)}finally{a(!1)}})()},[]);const u=f=>{const p=f.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");l(`/product/${p}`)},d=()=>m.jsxs(re.div,{className:"bg-white rounded-xl shadow-lg overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[m.jsx("div",{className:"relative",children:m.jsx("div",{className:"w-full h-60 bg-gray-200 animate-pulse"})}),m.jsxs("div",{className:"p-5",children:[m.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse mb-3 w-3/4"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-4 w-1/2"}),m.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})]})]});return m.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx(re.h2,{className:"text-3xl md:text-4xl font-heading font-bold text-dark mb-3",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"Our Featured Products"}),m.jsx(re.p,{className:"text-dark-muted max-w-2xl mx-auto",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.2,duration:.5},children:"Discover our carefully curated collection of premium products"})]}),m.jsx("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.jsx(At,{children:r?Array(8).fill(0).map((f,p)=>m.jsx(d,{},`skeleton-${p}`)):n.map((f,p)=>m.jsxs(re.div,{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},whileHover:{y:-5},transition:{delay:p*.01,duration:.1,ease:"easeInOut"},layout:!0,children:[m.jsx("div",{className:"relative",children:m.jsx(re.img,{src:f.mainImage,alt:f.name,className:"w-full h-60 object-cover",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},onClick:()=>u(f),loadig:"lazy"})}),m.jsxs("div",{className:"p-5",children:[m.jsx("div",{className:"flex justify-between items-start mb-2",children:m.jsx(re.h3,{className:"font-heading font-semibold text-lg text-dark truncate",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:f.name})}),m.jsxs(re.div,{className:"flex items-center mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[m.jsxs("span",{className:"text-primary font-bold text-xl",children:["$",f.price]}),f.originalPrice&&m.jsxs("span",{className:"ml-2 text-dark-muted text-sm line-through",children:["$",f.originalPrice]})]}),m.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:m.jsx(Yh,{product:f,user:t,className:"w-full py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition flex items-center justify-center gap-2"})})]})]},f.id))})}),m.jsx("div",{className:"md:hidden relative",children:m.jsx("div",{className:"flex overflow-x-auto pb-6 space-x-4",children:m.jsx(At,{children:r?Array(3).fill(0).map((f,p)=>m.jsx("div",{className:"min-w-[280px]",children:m.jsx(d,{})},`mobile-skeleton-${p}`)):n.map((f,p)=>m.jsxs(re.div,{className:"min-w-[280px] bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},whileHover:{scale:1.02},viewport:{once:!0,margin:"0px 0px -50px 0px"},transition:{type:"spring",stiffness:100,damping:10},layout:!0,children:[m.jsx("div",{className:"relative",children:m.jsx(re.img,{src:f.mainImage,alt:f.name,className:"w-full h-48 object-cover",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},onClick:()=>u(f),loadig:"lazy"})}),m.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[m.jsx(re.h3,{className:"font-heading font-semibold text-dark mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:f.name}),m.jsx(re.div,{className:"flex items-center mb-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:m.jsxs("span",{className:"text-primary font-bold",children:["$",f.price]})}),m.jsx(re.div,{className:"mt-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:m.jsx(Yh,{product:f,user:t,className:"w-full py-2 bg-primary hover:bg-primary-dark text-white rounded-lg text-sm"})})]})]},f.id))})})})]})}const lW=[{icon:m.jsx(eu,{className:"w-10 h-10 text-primary-dark"}),title:"Easy Ordering",description:"Browse premium products and place your order with just a few clicks."},{icon:m.jsx(A6,{className:"w-10 h-10 text-primary-dark"}),title:"Fast Delivery",description:"We deliver your items quickly, no matter where you're located."},{icon:m.jsx(E6,{className:"w-10 h-10 text-primary-dark"}),title:"Secure Payments",description:"Our protected payment system ensures your money is always safe."}];function cW(){return m.jsx("section",{className:"py-20 bg-gray-100",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[m.jsx(re.h2,{className:"text-3xl md:text-4xl font-heading mb-10 text-dark-default",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"Why Choose Us?"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:lW.map((n,e)=>m.jsxs(re.div,{initial:{opacity:0,y:50,scale:.95},whileInView:{opacity:1,y:0,scale:1},whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},viewport:{once:!0},transition:{duration:.5,delay:e*.1,type:"spring",stiffness:100},className:"bg-white rounded-lg p-6 shadow-md flex flex-col items-center hover:shadow-lg transition-all",children:[m.jsx(re.div,{className:"mb-4",whileHover:{scale:1.1},transition:{type:"spring",stiffness:300},children:n.icon}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:n.title}),m.jsx("p",{className:"text-gray-600",children:n.description})]},e))})]})})}const uW=[{name:"Amina Ali",feedback:"Alaab aad u tayo sareysa oo gaarsiin degdeg ah! Aad baan ugu qanacsanahay.",image:"https://randomuser.me/api/portraits/women/68.jpg"},{name:"Mohamed Hassan",feedback:"Adeeg aad u wanaagsan, qiimo jaban, iyo nidaam lacag bixin oo aamin ah.",image:"https://randomuser.me/api/portraits/men/45.jpg"},{name:"Khadra Yusuf",feedback:"Waxaan jecelahay sida fudud ee alaabta looga dalban karo oo loo heli karo waqtigeeda.",image:"https://randomuser.me/api/portraits/women/75.jpg"},{name:"Ahmed Omar",feedback:"Qiimaha iyo tayada alaabtu waa mid aad u wanaagsan. Waxaan dib ugu soo noqon doonaa!",image:"https://randomuser.me/api/portraits/men/32.jpg"},{name:"Fadumo Ahmed",feedback:"Adeeg degdeg ah oo macmiil fiican. Aad ayaan ugu faraxsanahay iibsashadayda!",image:"https://randomuser.me/api/portraits/women/63.jpg"},{name:"Yusuf Abdi",feedback:"Waxaan helay wax aan rabay oo ay ku jiraan qiimo jaban. Waad mahadsan tahin!",image:"https://randomuser.me/api/portraits/men/71.jpg"},{name:"Hodan Mohamed",feedback:"Ma jirto wax ka wanaagsan dalabka gudaha internetka. Aad ayaan ugu qanacsanahay!",image:"https://randomuser.me/api/portraits/women/44.jpg"},{name:"Abdiwali Ali",feedback:"Wax kasta oo aan dalbaday ayaa ii gaadhay waqtigeeda. Adeeg wanaagsan!",image:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Nasra Ibrahim",feedback:"Waxaan ku kalsoonahay dalabka alaabta. Waa shirkad aad u kalsooni badan!",image:"https://randomuser.me/api/portraits/women/90.jpg"}];function dW(){return m.jsx("section",{className:"py-20 bg-white",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[m.jsx(re.h2,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-3xl md:text-4xl font-heading mb-10 text-dark-default",children:"Macaamiisha Maxay Ka Yiraahdeen?"}),m.jsx(e1,{modules:[rW,H6],spaceBetween:30,slidesPerView:1,pagination:{clickable:!0,el:".custom-pagination",bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{640:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"pb-12",children:uW.map((n,e)=>m.jsx(t1,{children:m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:e*.1},className:"bg-gray-100 rounded-lg p-6 shadow-md flex flex-col items-center h-full",children:[m.jsx("img",{src:n.image,alt:n.name,className:"w-16 h-16 rounded-full mb-4 object-cover",loadig:"lazy"}),m.jsx(p$,{className:"text-primary-dark text-2xl mb-2"}),m.jsxs("p",{className:"text-gray-700 italic mb-4",children:['"',n.feedback,'"']}),m.jsx("h3",{className:"font-semibold text-dark-default",children:n.name})]})},e))}),m.jsx("div",{className:"custom-pagination flex justify-center gap-2 mt-6"}),m.jsx("style",{children:`
          .custom-bullet {
            width: 12px;
            height: 12px;
            background-color: #D1D5DB;
            border-radius: 50%;
            display: inline-block;
            margin: 0 4px;
            cursor: pointer;
            transition: all 0.3s ease;
          }
          .custom-bullet-active {
            background-color: #38B2AC; 
            width: 30px;
            border-radius: 8px;
          }
        `})]})})}function hW(){const[n,e]=k.useState(null),t=[{question:"Sideen alaab uga dalban karaa?",answer:"Waxaad si fudud uga dalban kartaa adigoo isticmaalaya website-ka, dooro alaabta, ka dibna dhameystir lacag bixinta."},{question:"Intee ayaan ku sugi karaa dalabka?",answer:"Dalabkaaga waxa uu gaari doonaa inta badan 2-3 maalmood gudahood, iyadoo ku xiran meesha aad ku sugan tahay."},{question:"Sideen ula xiriiri karaa adeegga macaamiisha?",answer:"Waad nagala soo xiriiri kartaa email, telefoon, ama adeegga fariimaha degdega ah ee website-ka."}],i=r=>{e(n!==r?r:null)};return m.jsx("div",{className:"min-h-screen flex flex-col",children:m.jsx("section",{className:"py-8 bg-gray-50 flex-grow",children:m.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[m.jsx(re.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-2xl md:text-3xl font-bold text-center mb-14 text-primary",children:"Su'aalaha La Weydiiyo Badanaa (FAQ)"}),m.jsx("div",{className:"space-y-4",children:t.map((r,a)=>m.jsxs(re.div,{className:"border rounded-lg overflow-hidden shadow-sm",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.3,ease:"linear"},children:[m.jsxs("button",{className:"w-full text-left p-4 flex justify-between items-center bg-gradient-to-r from-primary/10 to-primary hover:from-primary hover:to-primary/20 transition-all duration-300",onClick:()=>i(a),children:[m.jsx("span",{className:"font-medium text-dark",children:r.question}),m.jsx("span",{className:"text-xl font-bold text-dark",children:n===a?"-":"+"})]}),n===a&&m.jsx(re.div,{className:"p-4 bg-white border-t",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.1,ease:"easeIn"},children:m.jsx("p",{className:"text-gray-700",children:r.answer})})]},a))})]})})})}const fW=()=>m.jsxs(m.Fragment,{children:[m.jsx(vr,{}),m.jsx(aW,{}),m.jsx(oW,{}),m.jsx(cW,{}),m.jsx(dW,{}),m.jsx(hW,{}),m.jsx(Qh,{})]}),mW=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(null),[r,a]=k.useState(!0),[l,u]=k.useState(null),[d,f]=k.useState(""),[p,v]=k.useState(""),x=ti();k.useEffect(()=>{const I=te.auth().onAuthStateChanged(async N=>{if(i(N),N)try{const z=await te.firestore().collection("carts").doc(N.uid).get();if(z.exists){const F={id:z.id,...z.data()};e(F.items||[])}}catch{v("Error fetching cart items")}finally{a(!1)}else a(!1)});return()=>I()},[]),k.useEffect(()=>{if(!t)return;const I=te.firestore().collection("carts").doc(t.uid).onSnapshot(async N=>{const z=N.exists?N.data().items||[]:[],F=[];for(const H of z){const j=await te.firestore().collection("products").doc(H.productId).get();if(j.exists){const R=j.data().quantity||0;if(R===0)continue;const V=Math.min(H.quantity,R);F.push({...H,quantity:V})}}await te.firestore().collection("carts").doc(t.uid).update({items:F}),e(F)});return()=>I()},[t]);const _=async(I,N)=>{if(!(N<1||!t))try{const H=(await te.firestore().collection("products").doc(I).get()).data().quantity||0;if(N>H){v(`Only ${H} in stock`);return}const j=te.firestore().collection("carts").doc(t.uid),S=await j.get();if(S.exists){const V=(S.data().items||[]).map(L=>L.productId===I?{...L,quantity:N}:L);await j.update({items:V}),e(L=>L.map(B=>B.productId===I?{...B,quantity:N}:B)),f("Quantity updated successfully")}}catch(z){v("Error updating quantity"),console.error("Error updating quantity:",z)}},T=async I=>{u(I);try{const N=te.firestore().collection("carts").doc(t.uid),z=await N.get();if(z.exists){const H=(z.data().items||[]).filter(j=>j.productId!==I);await N.update({items:H}),e(H),f("Item removed from cart"),v("")}}catch{v("Failed to remove item from cart"),f("")}finally{u(null)}},C=()=>n.reduce((I,N)=>I+N.price*N.quantity,0),D=()=>n.reduce((I,N)=>I+N.quantity,0),P=()=>{x("/checkout"),f("Redirecting to checkout..."),v("")};return k.useEffect(()=>{if(d||p){const I=setTimeout(()=>{f(""),v("")},2e3);return()=>clearTimeout(I)}},[d,p]),r?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20 pb-12 px-4 sm:px-6 lg:px-8",children:[d&&m.jsx("div",{className:"fixed -mt-12 w-3xl bg-green-100 text-green-800 border border-green-200 px-4 py-2 rounded",children:d}),p&&m.jsx("div",{className:"fixed -mt-12 w-3xl bg-red-100 text-red-800 border border-red-200 px-4 py-2 rounded",children:p}),m.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex items-center mb-8",children:[m.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[m.jsx(eu,{className:"mr-3 text-primary"}),"Your Shopping Cart"]}),n.length>0&&m.jsxs("span",{className:"ml-auto bg-primary text-white text-sm font-bold px-3 py-1 rounded-full",children:[D()," ",D()===1?"item":"items"]})]}),m.jsx(At,{children:n.length===0?m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white rounded-xl shadow-md p-8 text-center",children:[m.jsx("div",{className:"text-gray-400 mb-4",children:m.jsx(eu,{className:"mx-auto text-5xl"})}),m.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Your cart is empty"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"Looks like you haven't added anything to your cart yet"}),m.jsx("button",{onClick:()=>x("/shopping"),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition",children:"Continue Shopping"})]}):m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.map(I=>m.jsx(re.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"bg-white rounded-xl shadow-sm overflow-hidden",children:m.jsx(At,{children:l!==I.productId?m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[m.jsx("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-lg overflow-hidden",children:m.jsx("img",{src:I.mainImage,alt:I.name,className:"w-full h-full object-cover",loadig:"lazy"})}),m.jsxs("div",{className:"flex-grow",children:[m.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:I.name}),m.jsxs("p",{className:"text-primary font-bold text-lg",children:["$",I.price.toFixed(2)]}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("button",{onClick:()=>I.quantity===1?T(I.productId):_(I.productId,I.quantity-1),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:m.jsx(f$,{className:"text-gray-600"})}),m.jsx("span",{className:"mx-3 w-8 text-center",children:I.quantity}),m.jsx("button",{onClick:()=>_(I.productId,I.quantity+1),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:m.jsx(nl,{className:"text-gray-600"})})]})]}),m.jsx("button",{onClick:()=>T(I.productId),className:"p-3 text-red-500 hover:text-red-700 transition self-end sm:self-auto",children:m.jsx(Ic,{})})]}):m.jsx(re.div,{initial:{opacity:1},animate:{opacity:0},exit:{opacity:0},className:"p-4 flex justify-center items-center h-24",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})})},I.productId))}),m.jsx("div",{className:"lg:col-span-1",children:m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 sticky top-4",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),m.jsxs("div",{className:"space-y-3 mb-6",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Subtotal"}),m.jsxs("span",{className:"font-medium",children:["$",C().toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Shipping"}),m.jsx("span",{className:"font-medium",children:"$0.00"})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Tax"}),m.jsx("span",{className:"font-medium",children:"$0.00"})]}),m.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[m.jsx("span",{className:"font-bold",children:"Total"}),m.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",C().toFixed(2)]})]})]}),m.jsxs(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"w-full bg-primary hover:bg-primary-dark text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition",children:["Proceed to Checkout",m.jsx(Q_,{})]}),m.jsx("button",{onClick:()=>x("/shopping"),className:"w-full mt-4 text-primary hover:text-primary-dark py-2 rounded-lg font-medium transition",children:"Continue Shopping"})]})})]})})]})]})},pW=()=>{var d,f;const[n,e]=k.useState({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",profileImage:""}),[t,i]=k.useState({}),[r,a]=k.useState("");k.useEffect(()=>{const p=te.auth().onAuthStateChanged(async v=>{if(v){const x=await te.firestore().collection("users").doc(v.uid).get(),_=x.exists?x.data():{};e(T=>({...T,name:v.displayName||"",email:v.email||"",profileImage:_.profileImage||""}))}});return()=>p()},[]);const l=async p=>{const v=p.target.files[0];if(!v)return;const x=te.auth().currentUser;if(!x){i({general:"No authenticated user"});return}try{const _=await te.firestore().collection("users").doc(x.uid).get();if((_.exists?_.data():{}).role!=="buyer"){i({general:"Only seller can uploaded profile image"});return}const C=new FormData;C.append("file",v),C.append("upload_preset","test_test");const I=(await(await fetch("https://api.cloudinary.com/v1_1/db8dtpaus/image/upload",{method:"POST",body:C})).json()).secure_url;await te.firestore().collection("users").doc(x.uid).update({profileImage:I}),e(N=>({...N,profileImage:I})),a("Profile image updated"),setTimeout(()=>a(""),3e3)}catch{i({general:"Failed to upload image"})}},u=async p=>{p.preventDefault(),i({}),a("");const v=te.auth().currentUser;if(!v){i({general:"No authenticated user"});return}const x={};if(n.name.trim()||(x.name="Name is required"),n.email.trim()||(x.email="Email is required"),/^\S+@\S+\.\S+$/.test(n.email)||(x.email="Invalid email"),n.newPassword&&(n.currentPassword||(x.currentPassword="Current password required"),n.newPassword.length<6&&(x.newPassword="Password must be at least 6 characters"),n.newPassword!==n.confirmPassword&&(x.confirmPassword="Passwords don't match")),Object.keys(x).length>0){i(x);return}try{if(v.displayName!==n.name&&await v.updateProfile({displayName:n.name}),v.email!==n.email){const _=te.auth.EmailAuthProvider.credential(v.email,n.currentPassword);await v.reauthenticateWithCredential(_),await v.updateEmail(n.email)}if(n.newPassword){const _=te.auth.EmailAuthProvider.credential(reAuthEmail,n.currentPassword);await v.reauthenticateWithCredential(_),await v.updatePassword(n.newPassword)}e(_=>({..._,currentPassword:"",newPassword:"",confirmPassword:""})),a("Profile updated successfully"),setTimeout(()=>a(""),3e3)}catch(_){let T="Failed to update profile";_.code==="auth/invalid-credential"?T="Incorrect current password":_.code==="auth/requires-recent-login"?T="Please reauthenticate to update sensitive information. You might need to log out and log back in.":_.code==="auth/email-already-in-use"&&(T="This email address is already in use by another account."),i({general:T})}};return m.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl mx-auto",children:m.jsxs("div",{className:"",children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-8 font-heading text-center",children:"Profile Settings"}),r&&m.jsx(re.div,{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-300",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:r}),t.general&&m.jsx(re.div,{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-300",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:t.general}),m.jsxs("form",{onSubmit:u,className:"space-y-6",children:[m.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-8",children:[m.jsxs(re.div,{className:"relative",whileHover:{scale:1.05},whileTap:{scale:.95},children:[n.profileImage?m.jsx(re.img,{src:n.profileImage,alt:"Profile",className:"w-24 h-24 md:w-32 md:h-32 rounded-full object-cover border-4 border-primary-light shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}):m.jsx(re.div,{className:"w-24 h-24 md:w-32 md:h-32 rounded-full bg-primary-light border-4 border-primary-light flex items-center justify-center shadow-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsx("span",{className:"text-primary-dark text-4xl md:text-5xl font-bold font-heading",children:(((d=n.name)==null?void 0:d.charAt(0))||((f=n.email)==null?void 0:f.charAt(0))||"A").toUpperCase()})}),m.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 border-2 border-primary-light shadow-md cursor-pointer hover:bg-gray-100 transition",children:[m.jsx("input",{type:"file",accept:"image/*",onChange:l,className:"hidden"}),m.jsx("svg",{className:"w-5 h-5 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828zM5 14a1 1 0 11-2 0 1 1 0 012 0zM13 6l-1.414-1.414 2.828-2.828L15.828 3 13 6zM5 16H4a1 1 0 01-1-1V5a1 1 0 011-1h1M15 16h1a1 1 0 001-1V5a1 1 0 00-1-1h-1m-5.071.293a.999.999 0 00-1.414 0l-6.163 6.163A.996.996 0 001 12v2a1 1 0 001 1h2a.996.996 0 00.707-.293l6.163-6.163a.999.999 0 000-1.414z"})})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-2xl font-bold text-dark font-heading",children:n.name||"Buyer User"}),m.jsx("p",{className:"text-dark-muted",children:n.email})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-dark-muted mb-1",children:"Full Name"}),m.jsx("input",{id:"name",type:"text",value:n.name,onChange:p=>e({...n,name:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.name?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Your full name"}),t.name&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-muted mb-1",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:n.email,onChange:p=>e({...n,email:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.email?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"your.email@example.com"}),t.email&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),m.jsx("hr",{className:"my-6 border-gray-200"}),m.jsx("p",{className:"text-sm text-dark-muted mb-1",children:"To change email or password, current password is required."}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Current Password"}),m.jsx("input",{id:"currentPassword",type:"password",value:n.currentPassword,onChange:p=>e({...n,currentPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.currentPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Required for email/password changes"}),t.currentPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.currentPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"New Password"}),m.jsx("input",{id:"newPassword",type:"password",value:n.newPassword,onChange:p=>e({...n,newPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.newPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"new current password"}),t.newPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.newPassword})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-dark-muted mb-1",children:"Confirm New Password"}),m.jsx("input",{id:"confirmPassword",type:"password",value:n.confirmPassword,onChange:p=>e({...n,confirmPassword:p.target.value}),className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${t.confirmPassword?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-primary-light focus:border-primary"}`,placeholder:"Confirm your new password"}),t.confirmPassword&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.confirmPassword})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-150 ease-in-out",children:"Update Profile"})})]})]})},"profile")},G6=({initialAddress:n,onSave:e,onCancel:t,onSuccess:i})=>{const r={fullName:"",phone:"",street:"",city:"",state:"",country:"Somalia",zip:""},[a,l]=k.useState(n||r),[u,d]=k.useState(!1),[f,p]=k.useState(""),[v,x]=k.useState("");k.useEffect(()=>{l(n||r)},[]);const _=C=>{l(D=>({...D,[C.target.name]:C.target.value}))},T=async C=>{C.preventDefault(),p(""),x("");const D=te.auth().currentUser;if(!D){p("User not logged in");return}try{d(!0);const P={...a,buyerId:D.uid,createdAt:te.firestore.FieldValue.serverTimestamp()};if(n)if((await te.firestore().collection("addresses").where("street","==",a.street).where("city","==",a.city).where("state","==",a.state).where("zip","==",a.zip).where("country","==",a.country).where("phone","==",a.phone).where("fullName","==",a.fullName).get()).empty)await te.firestore().collection("addresses").doc(n.id).update(P),e&&e(P),x("Address updated successfully!");else{p("Address already exists."),d(!1),setTimeout(()=>p(""),3e3);return}else{if(!(await te.firestore().collection("addresses").where("street","==",a.street).where("city","==",a.city).where("state","==",a.state).where("zip","==",a.zip).where("country","==",a.country).where("phone","==",a.phone).where("fullName","==",a.fullName).get()).empty){p("Address already exists."),d(!1),setTimeout(()=>p(""),3e3);return}P.buyerId=D.uid,P.createdAt=te.firestore.FieldValue.serverTimestamp(),await te.firestore().collection("addresses").add(P),x("Address added successfully!"),i&&i(),setTimeout(()=>x(""),3e3)}}catch(P){console.error(P),p("Failed to save address. Please try again."),setTimeout(()=>p(""),3e3)}finally{d(!1)}};return m.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-2xl mx-auto",children:m.jsxs("form",{onSubmit:T,className:"space-y-4 p-6 bg-white rounded-lg shadow",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:n?"Edit Address":"Add New Address"}),f&&m.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg",children:f}),v&&m.jsx("div",{className:"p-3 bg-green-100 text-green-700 rounded-lg",children:v}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),m.jsx("input",{name:"fullName",value:a.fullName,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),m.jsx("input",{name:"phone",type:"tel",value:a.phone,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),m.jsx("input",{name:"street",value:a.street,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),m.jsx("input",{name:"city",value:a.city,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"State/Region"}),m.jsx("input",{name:"state",value:a.state,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"ZIP Code"}),m.jsx("input",{name:"zip",value:a.zip,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),m.jsx("select",{name:"country",value:a.country,onChange:_,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:m.jsx("option",{value:"Somalia",children:"Somalia"})})]}),t&&m.jsx("button",{onClick:t,type:"button",className:"px-4 py-2 bg-gray-200 rounded mt-4 mr-2",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:u,className:"bg-primary text-white px-6 py-2 rounded flex items-center",children:u?m.jsxs(m.Fragment,{children:[m.jsx(my,{className:"animate-spin mr-2"}),n?"Updating...":"Adding..."]}):n?"Update Adress":"Add Address"})]})})},gW=({onEmpty:n})=>{const[e,t]=k.useState([]),[i,r]=k.useState(null),[a,l]=k.useState(!0),[u,d]=k.useState("");ti(),k.useEffect(()=>{(async()=>{const _=te.auth().currentUser;if(!_){d("User not logged in"),l(!1),setTimeout(()=>{d("")},3e3);return}try{const C=(await te.firestore().collection("addresses").where("buyerId","==",_.uid).orderBy("createdAt","desc").get()).docs.map(D=>({id:D.id,...D.data()}));t(C)}catch{d("Error fetching addresses:"),d("Failed to load addresses"),setTimeout(()=>{d("")},3e3)}finally{l(!1)}})()},[]);const f=async x=>{if(window.confirm("Are you sure you want to delete this address?"))try{await te.firestore().collection("addresses").doc(x).delete(),t(_=>_.filter(T=>T.id!==x))}catch{d("Error deleting address:"),d("Failed to delete address"),setTimeout(()=>{d("")},3e3)}},p=x=>{t(_=>_.map(T=>T.id===x.id?x:T)),r(null)},v=()=>{n&&n()};return i?m.jsx(G6,{initialAddress:i,onSave:p,onCancel:()=>r(null)}):a?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):u?m.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:u}):m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Your Addresses"}),m.jsxs("button",{className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg",children:[m.jsx(nl,{})," Add New Address"]})]}),e.length===0?m.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[m.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't added any addresses yet"}),m.jsx("button",{onClick:v,className:"bg-primary hover:bg-primary-dark text-white px-6 py-2 rounded-lg",children:"Add Your First Address"})]}):m.jsx("div",{className:"space-y-4",children:m.jsx(At,{children:e.map(x=>m.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow border border-gray-100",children:m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-lg",children:x.fullName}),m.jsx("p",{className:"text-gray-600",children:x.phone}),m.jsxs("p",{className:"mt-2",children:[x.street,", ",x.city,", ",x.state,", ",x.country," ",x.zip]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:"text-primary hover:text-primary-light p-2",onClick:()=>r(x),children:m.jsx(w6,{})}),m.jsx("button",{onClick:()=>f(x.id),className:"text-accent-red hover:text-accent-red/70 p-2",children:m.jsx(Ic,{})})]})]})},x.id))})})]})},yW=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState(""),[l,u]=k.useState(""),[d,f]=k.useState(null);k.useEffect(()=>{const v=te.auth().currentUser;if(!v)return;const x=te.firestore().collection("orders").where("buyerId","==",v.uid).orderBy("createdAt","desc").onSnapshot(_=>{const T=_.docs.map(C=>({id:C.id,...C.data(),createdAt:C.data().createdAt.toDate()}));e(T),i(!1)},_=>{a("Failed to load orders"),i(!1),setTimeout(()=>{u(""),a("")},3e3)});return()=>x()},[]);const p=async v=>{if(window.confirm("Are you sure you want to cancel this order?")){f(v);try{const x=te.firestore().collection("orders").doc(v);if(!(await x.get()).exists){a("Order not found."),f(null),setTimeout(()=>a(""),3e3);return}await x.update({status:"cancelled",updatedAt:te.firestore.FieldValue.serverTimestamp()}),u("Order cancel successfully."),setTimeout(()=>{u(""),a("")},3e3)}catch(x){a("Failed to cancel order"),console.error(x),setTimeout(()=>{u(""),a("")},3e3)}finally{f(null)}}};return t?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("h1",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[m.jsx(S6,{})," My Orders"]}),r&&m.jsx("div",{className:"bg-accent-red/10 border-l-4 border-accent-red text-accent-red p-4 mb-6 rounded",children:r}),l&&m.jsx("div",{className:"bg-accent-green/10 border-l-4 border-accent-green text-accent-green p-4 mb-6 rounded",children:l}),n.length===0?m.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:m.jsx("p",{className:"text-gray-500",children:"You haven't placed any orders yet"})}):m.jsx("div",{className:"space-y-4",children:n.map(v=>m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border rounded-lg overflow-hidden ${v.status==="confirmed"?"bg-green-50 border-green-200":v.status==="cancelled"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"font-bold",children:["Order #",v.id.substring(0,8)]}),m.jsxs("p",{className:"text-sm text-gray-500",children:[v.createdAt.toLocaleDateString()," at"," ",v.createdAt.toLocaleTimeString()]})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.status==="confirmed"?"bg-green-100 text-green-800":v.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:v.status})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Items:"}),m.jsx("ul",{className:"space-y-2",children:v.items.map((x,_)=>m.jsxs("li",{className:"flex justify-between",children:[m.jsxs("span",{children:[x.name," x ",x.quantity]}),m.jsxs("span",{children:["$",(x.price*x.quantity).toFixed(2)]})]},_))})]}),m.jsxs("div",{className:"flex justify-between border-t pt-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:"Delivery Address:"}),m.jsxs("p",{children:[v.address.street,", ",v.address.city]}),m.jsxs("p",{children:[v.address.state,", ",v.address.country]}),m.jsxs("p",{children:["Name: ",v.address.fullName]}),m.jsxs("p",{children:["Phone: ",v.address.phone]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-bold",children:["Total: $",v.total.toFixed(2)]})})]})]}),v.status==="pending"&&m.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:m.jsx("button",{onClick:()=>p(v.id),disabled:d===v.id,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded flex items-center gap-2 disabled:opacity-50",children:d===v.id?"Processing...":m.jsxs(m.Fragment,{children:[m.jsx(py,{})," Cancel Order"]})})})]},v.id))})]})},vW=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState("");return k.useEffect(()=>{const l=te.auth().currentUser;if(!l)return;const u=te.firestore().collection("historyorders").where("buyerId","==",l.uid).orderBy("clearedAt","desc").onSnapshot(d=>{const f=d.docs.map(p=>{var x,_;const v=p.data();return{id:p.id,...v,createdAt:(x=v.createdAt)==null?void 0:x.toDate(),clearedAt:(_=v.clearedAt)==null?void 0:_.toDate()}});e(f),i(!1)},d=>{a("Failed to load order history"),console.error(d),i(!1),setTimeout(()=>a(""),3e3)});return()=>u()},[]),t?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("div",{className:"flex items-center justify-between mb-6",children:m.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[m.jsx(fy,{})," My Order History"]})}),r&&m.jsx("div",{className:"bg-accent-red/10 border-l-4 border-accent-red text-accent-red p-4 mb-6 rounded",children:r}),n.length===0?m.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:m.jsx("p",{className:"text-gray-500",children:"No order history found."})}):m.jsx("div",{className:"space-y-4",children:n.map(l=>{var u,d,f,p,v,x,_,T,C,D;return m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border rounded-lg overflow-hidden ${l.status==="confirmed"?"bg-green-50 border-green-200":l.status==="cancelled"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"font-bold",children:["Order #",((u=l.originalOrderId)==null?void 0:u.substring(0,8))||l.id.substring(0,8)]}),m.jsx("p",{className:"text-sm text-gray-500",children:l.createdAt?l.createdAt.toLocaleDateString()+" "+l.createdAt.toLocaleTimeString():"Unknown Date"}),m.jsxs("p",{className:"text-xs text-gray-400",children:["Cleared on: ",((d=l.clearedAt)==null?void 0:d.toLocaleDateString())||"-"]})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${l.status==="confirmed"?"bg-green-100 text-green-800":l.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Items:"}),m.jsx("ul",{className:"space-y-2",children:(f=l.items)==null?void 0:f.map((P,I)=>m.jsxs("li",{className:"flex justify-between",children:[m.jsxs("span",{children:[P.name," x ",P.quantity]}),m.jsxs("span",{children:["$",(P.price*P.quantity).toFixed(2)]})]},I))})]}),m.jsxs("div",{className:"flex justify-between border-t pt-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:"Delivered To:"}),m.jsxs("p",{children:[(p=l.address)==null?void 0:p.street,", ",(v=l.address)==null?void 0:v.city]}),m.jsxs("p",{children:[(x=l.address)==null?void 0:x.state,", ",(_=l.address)==null?void 0:_.country]}),m.jsxs("p",{children:["Name: ",(T=l.address)==null?void 0:T.fullName]}),m.jsxs("p",{children:["Phone: ",(C=l.address)==null?void 0:C.phone]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-bold",children:["Total: $",(D=l.total)==null?void 0:D.toFixed(2)]})})]})]})]},l.id)})})]})},xW=()=>{const n=ti(),[e,t]=k.useState("profile"),[i,r]=k.useState(!1),[a,l]=k.useState(!1),u=async()=>{try{await te.auth().signOut(),n("/")}catch(f){console.error("Logout error:",f)}},d=()=>{switch(e){case"profile":return m.jsx(pW,{});case"add_address":return m.jsx(G6,{onSuccess:()=>t("all_address")});case"all_address":return m.jsx(gW,{onEmpty:()=>t("add_address")});case"orders":return m.jsx(yW,{});case"order_history":return m.jsx(vW,{});default:return null}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex font-sans",children:[m.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-primary p-4 flex justify-between items-center z-30 shadow-md",children:[m.jsx("h1",{className:"text-xl font-bold text-white font-heading",children:"Buyer Dashboard"}),m.jsx(re.button,{onClick:()=>r(!i),className:"text-white focus:outline-none",whileTap:{scale:.9},children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx(At,{mode:"wait",children:i?m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},"close-icon"):m.jsx(re.path,{initial:{opacity:0,pathLength:0},animate:{opacity:1,pathLength:1},exit:{opacity:0,pathLength:0},transition:{duration:.3},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"},"menu-icon")})})})]}),m.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${i?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static w-64 bg-primary-dark text-white transition-transform duration-300 ease-in-out z-20 flex flex-col shadow-lg`,children:[m.jsx("div",{className:"p-4 border-b border-primary",children:m.jsx("h2",{className:"text-2xl font-bold font-heading text-center",children:"Buyer Panel"})}),m.jsxs("nav",{className:"p-4 space-y-2 flex-grow",children:[m.jsxs(re.button,{onClick:()=>{t("profile"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="profile"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(X_,{className:"text-lg"}),m.jsx("span",{children:"My Profile"})]}),m.jsxs("div",{className:"relative",children:[m.jsxs(re.button,{onClick:()=>l(!a),className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e.startsWith("address")?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(v6,{className:"text-lg"}),m.jsx("span",{children:"Addresses"}),m.jsx(x6,{className:`ml-auto text-sm transition-transform ${a?"rotate-180":""}`})]}),a&&m.jsxs("div",{className:"ml-2 mt-1 space-y-1",children:[m.jsxs(re.button,{onClick:()=>{t("add_address"),r(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="add_address"?"bg-primary/80 text-white":"hover:bg-primary/50"}`,children:[m.jsx(nl,{className:"text-sm"}),m.jsx("span",{children:"Add Address"})]}),m.jsxs(re.button,{onClick:()=>{t("all_address"),r(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="all_address"?"bg-primary/80 text-white":"hover:bg-primary/50"}`,children:[m.jsx(_6,{className:"text-sm"}),m.jsx("span",{children:"All Addresses"})]})]})]}),m.jsxs(re.button,{onClick:()=>{t("orders"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="orders"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(I6,{className:"text-lg"}),m.jsx("span",{children:"Orders"})]}),m.jsxs(re.button,{onClick:()=>{t("order_history"),r(!1)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-150 ease-in-out font-medium flex items-center gap-2 ${e==="order_history"?"bg-primary text-white hover:bg-primary/80":"hover:bg-primary"}`,layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:[m.jsx(fy,{className:"text-lg"}),m.jsx("span",{children:"Order History"})]})]}),m.jsx("div",{className:"p-4 border-t-2 border-primary",children:m.jsx("button",{onClick:u,className:"w-full px-4 py-3 bg-accent-red hover:bg-accent-red/90 text-white rounded-lg transition-colors duration-150 ease-in-out font-medium",children:"Log Out"})})]}),m.jsxs("main",{className:"flex-1 md:ml-0 mt-16 md:mt-0",children:[m.jsx("header",{className:"bg-white shadow-sm p-6 sticky top-0 md:top-0 z-10",children:m.jsx("h1",{className:"text-2xl font-bold text-dark font-heading",children:e.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")})}),m.jsx("div",{className:"p-6 overflow-y-auto",style:{height:"calc(100vh - 80px)"},children:m.jsx(At,{mode:"wait",children:d()})})]})]})},wW=()=>{const[n,e]=k.useState([]),[t,i]=k.useState([]),[r,a]=k.useState(null),[l,u]=k.useState(!0),[d,f]=k.useState(!1),[p,v]=k.useState(null),[x,_]=k.useState(""),[T,C]=k.useState(""),[D,P]=k.useState(!1),[I,N]=k.useState({fullName:"",phone:"",street:"",city:"",state:"",country:"Somalia",zip:""}),[z,F]=k.useState(!1),H=ti();k.useEffect(()=>{(async()=>{const B=te.auth().currentUser;if(!B){H("/");return}try{u(!0),_("");const O=await te.firestore().collection("carts").doc(B.uid).get();if(O.exists){let $=O.data().items||[];if($=$.map(se=>({...se,id:O.id})),e($),$.length>0)v($[0].sellerId);else{H("/cart");return}}const ve=(await te.firestore().collection("addresses").where("buyerId","==",B.uid).orderBy("createdAt","desc").get()).docs.map($=>({id:$.id,...$.data()}));i(ve),ve.length>0&&a(ve[0])}catch{_("Failed to load checkout data. Please try again."),setTimeout(()=>{C(""),_("")},3e3)}finally{u(!1)}})()},[]);const j=()=>n.reduce((L,B)=>L+B.price*B.quantity,0),S=async()=>{const L=te.auth().currentUser;if(!L){H("/");return}if(!r){_("Please select a delivery address"),setTimeout(()=>{C(""),_("")},3e3);return}f(!0),_(""),C("");try{for(const B of n){const O=te.firestore().collection("products").doc(B.productId),me=await O.get();if(!me.exists)throw new Error(`Product ${B.name} does not exist.`);const ve=me.data().quantity;if(ve<B.quantity)throw new Error(`Insufficient stock for product ${B.name}.`);await O.update({quantity:ve-B.quantity})}await te.firestore().collection("orders").add({sellerId:p,buyerId:L.uid,items:n,total:j(),status:"pending",address:r,createdAt:te.firestore.FieldValue.serverTimestamp()}),await te.firestore().collection("carts").doc(L.uid).delete(),C("Order placed successfully!"),setTimeout(()=>{C(""),H("/")},2e3)}catch(B){_(B.message||"Failed to place order. Please try again."),setTimeout(()=>{C(""),_("")},3e3)}finally{f(!1)}},R=L=>{N(B=>({...B,[L.target.name]:L.target.value}))},V=async L=>{L.preventDefault();const B=te.auth().currentUser;if(B){F(!0),_("");try{const me={id:(await te.firestore().collection("addresses").add({...I,buyerId:B.uid,createdAt:te.firestore.FieldValue.serverTimestamp()})).id,...I};i(ve=>[me,...ve]),a(me),P(!1),N({fullName:"",phone:"",street:"",city:"",state:"",country:"Somalia",zip:""}),C("Address saved successfully!"),setTimeout(()=>{C(""),_("")},3e3)}catch{_("Failed to save address. Please try again."),setTimeout(()=>{C(""),_("")},3e3)}finally{F(!1)}}};return l?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[m.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Checkout"}),m.jsxs(At,{children:[x&&m.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(o$,{className:"mr-2"}),m.jsx("span",{children:x})]})}),T&&m.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(r$,{className:"mr-2"}),m.jsx("span",{children:T})]})})]}),m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),m.jsx("div",{className:"divide-y",children:n.map(L=>m.jsxs("div",{className:"py-3 flex justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("img",{src:L.mainImage,alt:L.name,className:"w-16 h-16 object-cover rounded mr-4",loadig:"lazy"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:L.name}),m.jsxs("p",{className:"text-gray-600 text-sm",children:["Qty: ",L.quantity]})]})]}),m.jsxs("span",{className:"font-medium",children:["$",(L.price*L.quantity).toFixed(2)]})]},L.id))}),m.jsxs("div",{className:"border-t pt-4 mt-2 flex justify-between font-bold text-lg",children:[m.jsx("span",{children:"Total:"}),m.jsxs("span",{children:["$",j().toFixed(2)]})]})]}),m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),!D&&m.jsxs("button",{onClick:()=>P(!0),className:"text-primary hover:text-primary-dark flex items-center gap-1",children:[m.jsx(nl,{})," Add New Address"]})]}),D?m.jsxs("form",{onSubmit:V,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),m.jsx("input",{name:"fullName",value:I.fullName,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),m.jsx("input",{name:"phone",type:"tel",value:I.phone,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),m.jsx("input",{name:"street",value:I.street,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),m.jsx("input",{name:"city",value:I.city,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"State/Region"}),m.jsx("input",{name:"state",value:I.state,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"ZIP Code"}),m.jsx("input",{name:"zip",value:I.zip,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),m.jsx("select",{name:"country",value:I.country,onChange:R,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:m.jsx("option",{value:"Somalia",children:"Somalia"})})]}),m.jsxs("div",{className:"flex gap-3 pt-2",children:[m.jsx("button",{type:"submit",disabled:z,className:"flex-1 bg-primary hover:bg-primary-dark text-white py-3 rounded-lg font-medium transition flex items-center justify-center gap-2",children:z?"Saving...":"Save Address"}),m.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-medium transition",children:"Cancel"})]})]}):t.length===0?m.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:m.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't added any addresses yet"})}):m.jsx("div",{className:"space-y-3",children:t.map(L=>m.jsxs("label",{className:`block border p-4 rounded-lg cursor-pointer transition ${r.id===L.id?"border-primary bg-primary/10":"border-gray-200 hover:border-primary"}`,children:[m.jsx("input",{type:"radio",name:"address",value:L.id,checked:r.id===L.id,onChange:()=>a(L),className:"hidden"}),m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:`w-5 h-5 border rounded-full mt-1 mr-3 flex-shrink-0 ${r.id===L.id?"border-primary bg-primary":"border-gray-300"}`,children:r.id===L.id&&m.jsx("div",{className:"w-3 h-3 bg-white rounded-full m-1"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:L.fullName}),m.jsx("p",{className:"text-gray-600",children:L.phone}),m.jsxs("p",{className:"mt-1 text-gray-700",children:[L.street,", ",L.city,", ",L.state,", ",L.country," ",L.zip]})]})]})]},L.id))})]}),m.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"sticky bottom-0 bg-white p-4 shadow-lg rounded-lg",children:m.jsxs("button",{onClick:S,className:"w-full bg-primary hover:bg-primary-dark text-white py-3 rounded-lg font-medium transition flex items-center justify-center gap-2",children:[d?"Placing Order...":"Place Order",!d&&m.jsx(Q_,{})]})})]})},bW=()=>{const[n,e]=k.useState([]),[t,i]=k.useState(!0),[r,a]=k.useState(""),[l,u]=k.useState(null),[d,f]=k.useState(1),[p,v]=k.useState(!1),x=ti(),_=te.auth().currentUser,T=12;k.useEffect(()=>{f(1)},[r,l]),k.useEffect(()=>{(async()=>{try{const R=(await te.firestore().collection("products").orderBy("createdAt","desc").get()).docs.map(V=>({id:V.id,...V.data()}));e(R)}catch{}finally{i(!1)}})()},[]);const D=[...n.filter(j=>j.name.toLowerCase().includes(r.toLowerCase())||j.description.toLowerCase().includes(r.toLowerCase()))].sort((j,S)=>l==="A-Z"?j.name.localeCompare(S.name):l==="Z-A"?S.name.localeCompare(j.name):l==="price-low"?j.price-S.price:l==="price-high"?S.price-j.price:0),P=Math.ceil(D.length/T),I=(d-1)*T,N=D.slice(I,I+T),z=j=>f(j),F=j=>{const S=j.name.toLowerCase().replace(/ & /g,"-").replace(/\s+/g,"-");x(`/product/${S}`)},H=()=>m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(vr,{}),m.jsx("div",{className:"relative bg-gradient-to-r from-blue-500 to-purple-600 text-white py-20 px-4 mt-[65px]",children:m.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[m.jsx(re.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold mb-6",children:"Welcome to Our Online Store"}),m.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-xl mb-8 max-w-2xl mx-auto",children:"Discover amazing products at unbeatable prices"}),m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"relative max-w-md mx-auto",children:[m.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full py-3 px-4 pr-10 rounded-lg text-gray-800 focus:outline-none",value:r,onChange:j=>a(j.target.value)}),m.jsx(Wh,{className:"absolute right-3 top-3.5 text-gray-500"})]})]})}),m.jsxs("div",{className:"max-w-6xl mx-auto py-12 px-4",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[m.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded animate-pulse"}),m.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded animate-pulse"})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(8)].map((j,S)=>m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden animate-pulse",children:[m.jsx("div",{className:"h-48 bg-gray-200"}),m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"h-5 w-3/4 bg-gray-200 rounded mb-2"}),m.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-2"}),m.jsx("div",{className:"h-4 w-2/3 bg-gray-200 rounded mb-4"}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("div",{className:"h-6 w-16 bg-gray-200 rounded"}),m.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded"})]})]})]},S))})]}),m.jsx(Qh,{})]});return t?m.jsx(H,{}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(vr,{}),m.jsx("div",{className:"relative bg-gradient-to-r from-blue-500 to-purple-600 text-white py-20 px-4 mt-[65px]",children:m.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[m.jsx(re.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold mb-6",children:"Welcome to Our Online Store"}),m.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-xl mb-8 max-w-2xl mx-auto",children:"Discover amazing products at unbeatable prices"}),m.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"relative max-w-md mx-auto",children:[m.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full py-3 px-4 pr-10 rounded-lg text-gray-800 focus:outline-none",value:r,onChange:j=>a(j.target.value)}),m.jsx(Wh,{className:"absolute right-3 top-3.5 text-gray-500"})]})]})}),m.jsxs("div",{className:"max-w-6xl mx-auto py-12 px-4",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Our Products"}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{className:"relative",children:[m.jsxs("button",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow",onClick:()=>v(!p),children:[m.jsx(l$,{})," Sort"]}),m.jsx(At,{children:p&&m.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:[m.jsxs("button",{className:`w-full text-left px-4 py-2 hover:bg-gray-100 ${l==="A-Z"?"bg-gray-100":""}`,onClick:()=>{u("A-Z"),v(!1)},children:[m.jsx(e4,{className:"inline mr-2"})," A-Z"]}),m.jsxs("button",{className:`w-full text-left px-4 py-2 hover:bg-gray-100 ${l==="Z-A"?"bg-gray-100":""}`,onClick:()=>{u("Z-A"),v(!1)},children:[m.jsx(JI,{className:"inline mr-2"})," Z-A"]}),m.jsxs("button",{className:`w-full text-left px-4 py-2 hover:bg-gray-100 ${l==="price-low"?"bg-gray-100":""}`,onClick:()=>{u("price-low"),v(!1)},children:[m.jsx(e4,{className:"inline mr-2"})," Price: Low to High"]}),m.jsxs("button",{className:`w-full text-left px-4 py-2 hover:bg-gray-100 ${l==="price-high"?"bg-gray-100":""}`,onClick:()=>{u("price-high"),v(!1)},children:[m.jsx(JI,{className:"inline mr-2"})," Price: High to Low"]}),m.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-500",onClick:()=>{u(null),v(!1)},children:"Clear Filters"})]})})]})})]}),N.length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-500",children:"No products found. Try a different search."})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:m.jsx(At,{children:N.map((j,S)=>m.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4,delay:S*.05},whileHover:{y:-5},className:"bg-white rounded-lg shadow-md overflow-hidden",children:[m.jsx("div",{className:"h-48 overflow-hidden",children:m.jsx("img",{src:j.mainImage,alt:j.name,className:"w-full h-full object-cover",onClick:()=>F(j),loadig:"lazy"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold text-lg mb-1",children:j.name}),m.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:j.description}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{className:"font-bold text-primary",children:["$",j.price.toFixed(2)]}),m.jsx(Yh,{product:j,user:_,className:"py-2 px-4 bg-primary hover:bg-primary-dark text-white rounded-lg transition flex items-center justify-center gap-2"})]})]})]},j.id))})}),P>1&&m.jsx("div",{className:"flex justify-center mt-8 pb-24",children:m.jsx("nav",{className:"flex gap-1",children:[...Array(P)].map((j,S)=>m.jsx("button",{onClick:()=>z(S+1),className:`px-3 py-1 rounded ${d===S+1?"bg-primary text-white":"bg-white hover:bg-gray-100"}`,children:S+1},S))})})]})]}),m.jsx(Qh,{})]})},_W=()=>{const[n,e]=k.useState({name:"",email:"",subject:"",message:""}),[t,i]=k.useState(!1),[r,a]=k.useState(!1),l=d=>{e({...n,[d.target.name]:d.target.value})},u=d=>{d.preventDefault(),i(!0),setTimeout(()=>{i(!1),a(!0),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>a(!1),3e3)},1500)};return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(vr,{}),m.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white py-16 px-4 mt-16",children:m.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[m.jsx(re.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-bold mb-4",children:"Contact Us"}),m.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg max-w-2xl mx-auto",children:"We'd love to hear from you! Reach out with any questions or feedback."})]})}),m.jsx("div",{className:"max-w-6xl mx-auto py-12 px-4",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[m.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Send Us a Message"}),r&&m.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded",children:"Thank you! Your message has been sent successfully."}),m.jsxs("form",{onSubmit:u,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:l,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:l,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium mb-1",children:"Subject"}),m.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:l,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"message",className:"block text-sm font-medium mb-1",children:"Message"}),m.jsx("textarea",{id:"message",name:"message",rows:"5",value:n.message,onChange:l,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),m.jsx("button",{type:"submit",disabled:t,className:"w-full bg-primary hover:bg-primary-dark text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2",children:t?"Sending...":m.jsxs(m.Fragment,{children:[m.jsx(m$,{})," Send Message"]})})]})]}),m.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Contact Information"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"bg-blue-100 p-3 rounded-full text-blue-600",children:m.jsx(h$,{className:"text-xl"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:"Our Location"}),m.jsx("p",{className:"text-gray-600",children:"123 Main Street, Mogadishu, Somalia"})]})]}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"bg-green-100 p-3 rounded-full text-green-600",children:m.jsx(T6,{className:"text-xl"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:"Phone Number"}),m.jsx("p",{className:"text-gray-600",children:"+252 61 123 4567"}),m.jsx("p",{className:"text-gray-600",children:"+252 61 765 4321"})]})]}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"bg-purple-100 p-3 rounded-full text-purple-600",children:m.jsx(xw,{className:"text-xl"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:"Email Address"}),m.jsx("p",{className:"text-gray-600",children:"info@buyngo.so"}),m.jsx("p",{className:"text-gray-600",children:"support@buyngo.com"})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Business Hours"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsxs("li",{className:"flex justify-between border-b pb-2",children:[m.jsx("span",{className:"text-gray-600",children:"Monday - Friday"}),m.jsx("span",{className:"font-medium",children:"9:00 AM - 6:00 PM"})]}),m.jsxs("li",{className:"flex justify-between border-b pb-2",children:[m.jsx("span",{className:"text-gray-600",children:"Saturday"}),m.jsx("span",{className:"font-medium",children:"10:00 AM - 4:00 PM"})]}),m.jsxs("li",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Sunday"}),m.jsx("span",{className:"font-medium",children:"Closed"})]})]})]})]})]})}),m.jsx(Qh,{})]})};function TW(){return m.jsx(m.Fragment,{children:m.jsx(Bk,{children:m.jsxs(gk,{children:[m.jsx(di,{path:"/",element:m.jsx(fW,{})}),m.jsx(di,{path:"/sellerdashboard",element:m.jsx(S$,{})}),m.jsx(di,{path:"/buyerdashboard",element:m.jsx(xW,{})}),m.jsx(di,{path:"/category/:categorySlug/:subcategorySlug",element:m.jsx(I$,{})}),m.jsx(di,{path:"/product/:productId",element:m.jsx(C$,{})}),m.jsx(di,{path:"/checkout",element:m.jsx(wW,{})}),m.jsx(di,{path:"/cart",element:m.jsx(mW,{})}),m.jsx(di,{path:"/admindashboard",element:m.jsx(A$,{})}),m.jsx(di,{path:"/shopping",element:m.jsx(bW,{})}),m.jsx(di,{path:"/contact",element:m.jsx(_W,{})}),m.jsx(di,{path:"/signup",element:m.jsx(uF,{})}),m.jsx(di,{path:"/signin",element:m.jsx(dF,{})})]})})})}Sj.createRoot(document.getElementById("root")).render(m.jsx(k.StrictMode,{children:m.jsx(TW,{})}));
